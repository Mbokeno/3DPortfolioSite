(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function eM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bI={exports:{}},$v={},PI={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp=Symbol.for("react.element"),MU=Symbol.for("react.portal"),wU=Symbol.for("react.fragment"),EU=Symbol.for("react.strict_mode"),CU=Symbol.for("react.profiler"),TU=Symbol.for("react.provider"),RU=Symbol.for("react.context"),bU=Symbol.for("react.forward_ref"),PU=Symbol.for("react.suspense"),IU=Symbol.for("react.memo"),BU=Symbol.for("react.lazy"),ST=Symbol.iterator;function DU(n){return n===null||typeof n!="object"?null:(n=ST&&n[ST]||n["@@iterator"],typeof n=="function"?n:null)}var II={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BI=Object.assign,DI={};function zf(n,e,t){this.props=n,this.context=e,this.refs=DI,this.updater=t||II}zf.prototype.isReactComponent={};zf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};zf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function LI(){}LI.prototype=zf.prototype;function tM(n,e,t){this.props=n,this.context=e,this.refs=DI,this.updater=t||II}var nM=tM.prototype=new LI;nM.constructor=tM;BI(nM,zf.prototype);nM.isPureReactComponent=!0;var MT=Array.isArray,FI=Object.prototype.hasOwnProperty,iM={current:null},NI={key:!0,ref:!0,__self:!0,__source:!0};function UI(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FI.call(e,i)&&!NI.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:pp,type:n,key:s,ref:o,props:r,_owner:iM.current}}function LU(n,e){return{$$typeof:pp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function rM(n){return typeof n=="object"&&n!==null&&n.$$typeof===pp}function FU(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var wT=/\/+/g;function v1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?FU(""+n.key):e.toString(36)}function i0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case pp:case MU:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+v1(o,0):i,MT(r)?(t="",n!=null&&(t=n.replace(wT,"$&/")+"/"),i0(r,e,t,"",function(u){return u})):r!=null&&(rM(r)&&(r=LU(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(wT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",MT(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+v1(s,a);o+=i0(s,e,t,l,r)}else if(l=DU(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+v1(s,a++),o+=i0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nm(n,e,t){if(n==null)return n;var i=[],r=0;return i0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function NU(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $i={current:null},r0={transition:null},UU={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:r0,ReactCurrentOwner:iM};function OI(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:Nm,forEach:function(n,e,t){Nm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Nm(n,function(){e++}),e},toArray:function(n){return Nm(n,function(e){return e})||[]},only:function(n){if(!rM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};zt.Component=zf;zt.Fragment=wU;zt.Profiler=CU;zt.PureComponent=tM;zt.StrictMode=EU;zt.Suspense=PU;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UU;zt.act=OI;zt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=BI({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=iM.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)FI.call(e,l)&&!NI.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:pp,type:n.type,key:r,ref:s,props:i,_owner:o}};zt.createContext=function(n){return n={$$typeof:RU,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TU,_context:n},n.Consumer=n};zt.createElement=UI;zt.createFactory=function(n){var e=UI.bind(null,n);return e.type=n,e};zt.createRef=function(){return{current:null}};zt.forwardRef=function(n){return{$$typeof:bU,render:n}};zt.isValidElement=rM;zt.lazy=function(n){return{$$typeof:BU,_payload:{_status:-1,_result:n},_init:NU}};zt.memo=function(n,e){return{$$typeof:IU,type:n,compare:e===void 0?null:e}};zt.startTransition=function(n){var e=r0.transition;r0.transition={};try{n()}finally{r0.transition=e}};zt.unstable_act=OI;zt.useCallback=function(n,e){return $i.current.useCallback(n,e)};zt.useContext=function(n){return $i.current.useContext(n)};zt.useDebugValue=function(){};zt.useDeferredValue=function(n){return $i.current.useDeferredValue(n)};zt.useEffect=function(n,e){return $i.current.useEffect(n,e)};zt.useId=function(){return $i.current.useId()};zt.useImperativeHandle=function(n,e,t){return $i.current.useImperativeHandle(n,e,t)};zt.useInsertionEffect=function(n,e){return $i.current.useInsertionEffect(n,e)};zt.useLayoutEffect=function(n,e){return $i.current.useLayoutEffect(n,e)};zt.useMemo=function(n,e){return $i.current.useMemo(n,e)};zt.useReducer=function(n,e,t){return $i.current.useReducer(n,e,t)};zt.useRef=function(n){return $i.current.useRef(n)};zt.useState=function(n){return $i.current.useState(n)};zt.useSyncExternalStore=function(n,e,t){return $i.current.useSyncExternalStore(n,e,t)};zt.useTransition=function(){return $i.current.useTransition()};zt.version="18.3.1";PI.exports=zt;var se=PI.exports;const Sd=eM(se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OU=se,kU=Symbol.for("react.element"),zU=Symbol.for("react.fragment"),HU=Object.prototype.hasOwnProperty,GU=OU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VU={key:!0,ref:!0,__self:!0,__source:!0};function kI(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)HU.call(e,i)&&!VU.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:kU,type:n,key:s,ref:o,props:r,_owner:GU.current}}$v.Fragment=zU;$v.jsx=kI;$v.jsxs=kI;bI.exports=$v;var at=bI.exports,zI={exports:{}},Vr={},HI={exports:{}},GI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,ee){var Q=H.length;H.push(ee);e:for(;0<Q;){var ue=Q-1>>>1,me=H[ue];if(0<r(me,ee))H[ue]=ee,H[Q]=me,Q=ue;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ee=H[0],Q=H.pop();if(Q!==ee){H[0]=Q;e:for(var ue=0,me=H.length,Ie=me>>>1;ue<Ie;){var ae=2*(ue+1)-1,ve=H[ae],ye=ae+1,be=H[ye];if(0>r(ve,Q))ye<me&&0>r(be,ve)?(H[ue]=be,H[ye]=Q,ue=ye):(H[ue]=ve,H[ae]=Q,ue=ae);else if(ye<me&&0>r(be,Q))H[ue]=be,H[ye]=Q,ue=ye;else break e}}return ee}function r(H,ee){var Q=H.sortIndex-ee.sortIndex;return Q!==0?Q:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var ee=t(u);ee!==null;){if(ee.callback===null)i(u);else if(ee.startTime<=H)i(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function w(H){if(x=!1,S(H),!v)if(t(l)!==null)v=!0,Z(P);else{var ee=t(u);ee!==null&&oe(w,ee.startTime-H)}}function P(H,ee){v=!1,x&&(x=!1,g(D),D=-1),m=!0;var Q=p;try{for(S(ee),d=t(l);d!==null&&(!(d.expirationTime>ee)||H&&!N());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,p=d.priorityLevel;var me=ue(d.expirationTime<=ee);ee=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&i(l),S(ee)}else i(l);d=t(l)}if(d!==null)var Ie=!0;else{var ae=t(u);ae!==null&&oe(w,ae.startTime-ee),Ie=!1}return Ie}finally{d=null,p=Q,m=!1}}var T=!1,R=null,D=-1,C=5,b=-1;function N(){return!(n.unstable_now()-b<C)}function J(){if(R!==null){var H=n.unstable_now();b=H;var ee=!0;try{ee=R(!0,H)}finally{ee?K():(T=!1,R=null)}}else T=!1}var K;if(typeof A=="function")K=function(){A(J)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=J,K=function(){te.postMessage(null)}}else K=function(){y(J,0)};function Z(H){R=H,T||(T=!0,K())}function oe(H,ee){D=y(function(){H(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Z(P))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var Q=p;p=ee;try{return H()}finally{p=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=p;p=H;try{return ee()}finally{p=Q}},n.unstable_scheduleCallback=function(H,ee,Q){var ue=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Q+me,H={id:h++,callback:ee,priorityLevel:H,startTime:Q,expirationTime:me,sortIndex:-1},Q>ue?(H.sortIndex=Q,e(u,H),t(l)===null&&H===t(u)&&(x?(g(D),D=-1):x=!0,oe(w,Q-ue))):(H.sortIndex=me,e(l,H),v||m||(v=!0,Z(P))),H},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(H){var ee=p;return function(){var Q=p;p=ee;try{return H.apply(this,arguments)}finally{p=Q}}}})(GI);HI.exports=GI;var WU=HI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XU=se,zr=WU;function De(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VI=new Set,Md={};function Bu(n,e){ff(n,e),ff(n+"Capture",e)}function ff(n,e){for(Md[n]=e,n=0;n<e.length;n++)VI.add(e[n])}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cA=Object.prototype.hasOwnProperty,JU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ET={},CT={};function KU(n){return cA.call(CT,n)?!0:cA.call(ET,n)?!1:JU.test(n)?CT[n]=!0:(ET[n]=!0,!1)}function YU(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function jU(n,e,t,i){if(e===null||typeof e>"u"||YU(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function er(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Si[n]=new er(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Si[e]=new er(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Si[n]=new er(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Si[n]=new er(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Si[n]=new er(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Si[n]=new er(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Si[n]=new er(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Si[n]=new er(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Si[n]=new er(n,5,!1,n.toLowerCase(),null,!1,!1)});var sM=/[\-:]([a-z])/g;function oM(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sM,oM);Si[e]=new er(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sM,oM);Si[e]=new er(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sM,oM);Si[e]=new er(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Si[n]=new er(n,1,!1,n.toLowerCase(),null,!1,!1)});Si.xlinkHref=new er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Si[n]=new er(n,1,!1,n.toLowerCase(),null,!0,!0)});function aM(n,e,t,i){var r=Si.hasOwnProperty(e)?Si[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jU(e,t,r,i)&&(t=null),i||r===null?KU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ea=XU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Um=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),bc=Symbol.for("react.fragment"),lM=Symbol.for("react.strict_mode"),fA=Symbol.for("react.profiler"),WI=Symbol.for("react.provider"),XI=Symbol.for("react.context"),uM=Symbol.for("react.forward_ref"),hA=Symbol.for("react.suspense"),dA=Symbol.for("react.suspense_list"),cM=Symbol.for("react.memo"),wa=Symbol.for("react.lazy"),JI=Symbol.for("react.offscreen"),TT=Symbol.iterator;function mh(n){return n===null||typeof n!="object"?null:(n=TT&&n[TT]||n["@@iterator"],typeof n=="function"?n:null)}var Dn=Object.assign,_1;function Gh(n){if(_1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_1=e&&e[1]||""}return`
`+_1+n}var y1=!1;function x1(n,e){if(!n||y1)return"";y1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{y1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Gh(n):""}function QU(n){switch(n.tag){case 5:return Gh(n.type);case 16:return Gh("Lazy");case 13:return Gh("Suspense");case 19:return Gh("SuspenseList");case 0:case 2:case 15:return n=x1(n.type,!1),n;case 11:return n=x1(n.type.render,!1),n;case 1:return n=x1(n.type,!0),n;default:return""}}function pA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case bc:return"Fragment";case Rc:return"Portal";case fA:return"Profiler";case lM:return"StrictMode";case hA:return"Suspense";case dA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case XI:return(n.displayName||"Context")+".Consumer";case WI:return(n._context.displayName||"Context")+".Provider";case uM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cM:return e=n.displayName||null,e!==null?e:pA(n.type)||"Memo";case wa:e=n._payload,n=n._init;try{return pA(n(e))}catch{}}return null}function ZU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pA(e);case 8:return e===lM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function KI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qU(n){var e=KI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Om(n){n._valueTracker||(n._valueTracker=qU(n))}function YI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=KI(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function b0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mA(n,e){var t=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function RT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=qa(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jI(n,e){e=e.checked,e!=null&&aM(n,"checked",e,!1)}function gA(n,e){jI(n,e);var t=qa(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?vA(n,e.type,t):e.hasOwnProperty("defaultValue")&&vA(n,e.type,qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function bT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function vA(n,e,t){(e!=="number"||b0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Vh=Array.isArray;function Kc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+qa(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function _A(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(De(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function PT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(De(92));if(Vh(t)){if(1<t.length)throw Error(De(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:qa(t)}}function QI(n,e){var t=qa(e.value),i=qa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function IT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function ZI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yA(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ZI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var km,qI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(km=km||document.createElement("div"),km.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=km.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function wd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$U=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(n){$U.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Zh[e]=Zh[n]})});function $I(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Zh.hasOwnProperty(n)&&Zh[n]?(""+e).trim():e+"px"}function e2(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=$I(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var eO=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xA(n,e){if(e){if(eO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(De(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(De(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(De(61))}if(e.style!=null&&typeof e.style!="object")throw Error(De(62))}}function AA(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SA=null;function fM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var MA=null,Yc=null,jc=null;function BT(n){if(n=vp(n)){if(typeof MA!="function")throw Error(De(280));var e=n.stateNode;e&&(e=r_(e),MA(n.stateNode,n.type,e))}}function t2(n){Yc?jc?jc.push(n):jc=[n]:Yc=n}function n2(){if(Yc){var n=Yc,e=jc;if(jc=Yc=null,BT(n),e)for(n=0;n<e.length;n++)BT(e[n])}}function i2(n,e){return n(e)}function r2(){}var A1=!1;function s2(n,e,t){if(A1)return n(e,t);A1=!0;try{return i2(n,e,t)}finally{A1=!1,(Yc!==null||jc!==null)&&(r2(),n2())}}function Ed(n,e){var t=n.stateNode;if(t===null)return null;var i=r_(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(De(231,e,typeof t));return t}var wA=!1;if(Jo)try{var gh={};Object.defineProperty(gh,"passive",{get:function(){wA=!0}}),window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{wA=!1}function tO(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var qh=!1,P0=null,I0=!1,EA=null,nO={onError:function(n){qh=!0,P0=n}};function iO(n,e,t,i,r,s,o,a,l){qh=!1,P0=null,tO.apply(nO,arguments)}function rO(n,e,t,i,r,s,o,a,l){if(iO.apply(this,arguments),qh){if(qh){var u=P0;qh=!1,P0=null}else throw Error(De(198));I0||(I0=!0,EA=u)}}function Du(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function o2(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function DT(n){if(Du(n)!==n)throw Error(De(188))}function sO(n){var e=n.alternate;if(!e){if(e=Du(n),e===null)throw Error(De(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return DT(r),n;if(s===i)return DT(r),e;s=s.sibling}throw Error(De(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(De(189))}}if(t.alternate!==i)throw Error(De(190))}if(t.tag!==3)throw Error(De(188));return t.stateNode.current===t?n:e}function a2(n){return n=sO(n),n!==null?l2(n):null}function l2(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=l2(n);if(e!==null)return e;n=n.sibling}return null}var u2=zr.unstable_scheduleCallback,LT=zr.unstable_cancelCallback,oO=zr.unstable_shouldYield,aO=zr.unstable_requestPaint,Vn=zr.unstable_now,lO=zr.unstable_getCurrentPriorityLevel,hM=zr.unstable_ImmediatePriority,c2=zr.unstable_UserBlockingPriority,B0=zr.unstable_NormalPriority,uO=zr.unstable_LowPriority,f2=zr.unstable_IdlePriority,e_=null,oo=null;function cO(n){if(oo&&typeof oo.onCommitFiberRoot=="function")try{oo.onCommitFiberRoot(e_,n,void 0,(n.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:dO,fO=Math.log,hO=Math.LN2;function dO(n){return n>>>=0,n===0?32:31-(fO(n)/hO|0)|0}var zm=64,Hm=4194304;function Wh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function D0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Wh(a):(s&=o,s!==0&&(i=Wh(s)))}else o=t&~r,o!==0?i=Wh(o):s!==0&&(i=Wh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Ls(e),r=1<<t,i|=n[t],e&=~r;return i}function pO(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mO(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ls(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=pO(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function CA(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function h2(){var n=zm;return zm<<=1,!(zm&4194240)&&(zm=64),n}function S1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function mp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ls(e),n[e]=t}function gO(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Ls(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function dM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Ls(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var an=0;function d2(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var p2,pM,m2,g2,v2,TA=!1,Gm=[],za=null,Ha=null,Ga=null,Cd=new Map,Td=new Map,Ta=[],vO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FT(n,e){switch(n){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Cd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function vh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=vp(e),e!==null&&pM(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function _O(n,e,t,i,r){switch(e){case"focusin":return za=vh(za,n,e,t,i,r),!0;case"dragenter":return Ha=vh(Ha,n,e,t,i,r),!0;case"mouseover":return Ga=vh(Ga,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Cd.set(s,vh(Cd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Td.set(s,vh(Td.get(s)||null,n,e,t,i,r)),!0}return!1}function _2(n){var e=Jl(n.target);if(e!==null){var t=Du(e);if(t!==null){if(e=t.tag,e===13){if(e=o2(t),e!==null){n.blockedOn=e,v2(n.priority,function(){m2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function s0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=RA(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);SA=i,t.target.dispatchEvent(i),SA=null}else return e=vp(t),e!==null&&pM(e),n.blockedOn=t,!1;e.shift()}return!0}function NT(n,e,t){s0(n)&&t.delete(e)}function yO(){TA=!1,za!==null&&s0(za)&&(za=null),Ha!==null&&s0(Ha)&&(Ha=null),Ga!==null&&s0(Ga)&&(Ga=null),Cd.forEach(NT),Td.forEach(NT)}function _h(n,e){n.blockedOn===e&&(n.blockedOn=null,TA||(TA=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,yO)))}function Rd(n){function e(r){return _h(r,n)}if(0<Gm.length){_h(Gm[0],n);for(var t=1;t<Gm.length;t++){var i=Gm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(za!==null&&_h(za,n),Ha!==null&&_h(Ha,n),Ga!==null&&_h(Ga,n),Cd.forEach(e),Td.forEach(e),t=0;t<Ta.length;t++)i=Ta[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ta.length&&(t=Ta[0],t.blockedOn===null);)_2(t),t.blockedOn===null&&Ta.shift()}var Qc=ea.ReactCurrentBatchConfig,L0=!0;function xO(n,e,t,i){var r=an,s=Qc.transition;Qc.transition=null;try{an=1,mM(n,e,t,i)}finally{an=r,Qc.transition=s}}function AO(n,e,t,i){var r=an,s=Qc.transition;Qc.transition=null;try{an=4,mM(n,e,t,i)}finally{an=r,Qc.transition=s}}function mM(n,e,t,i){if(L0){var r=RA(n,e,t,i);if(r===null)B1(n,e,i,F0,t),FT(n,i);else if(_O(r,n,e,t,i))i.stopPropagation();else if(FT(n,i),e&4&&-1<vO.indexOf(n)){for(;r!==null;){var s=vp(r);if(s!==null&&p2(s),s=RA(n,e,t,i),s===null&&B1(n,e,i,F0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else B1(n,e,i,null,t)}}var F0=null;function RA(n,e,t,i){if(F0=null,n=fM(i),n=Jl(n),n!==null)if(e=Du(n),e===null)n=null;else if(t=e.tag,t===13){if(n=o2(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return F0=n,null}function y2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lO()){case hM:return 1;case c2:return 4;case B0:case uO:return 16;case f2:return 536870912;default:return 16}default:return 16}}var Pa=null,gM=null,o0=null;function x2(){if(o0)return o0;var n,e=gM,t=e.length,i,r="value"in Pa?Pa.value:Pa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return o0=r.slice(n,1<i?1-i:void 0)}function a0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Vm(){return!0}function UT(){return!1}function Wr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vm:UT,this.isPropagationStopped=UT,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Vm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Vm)},persist:function(){},isPersistent:Vm}),e}var Hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vM=Wr(Hf),gp=Dn({},Hf,{view:0,detail:0}),SO=Wr(gp),M1,w1,yh,t_=Dn({},gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_M,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yh&&(yh&&n.type==="mousemove"?(M1=n.screenX-yh.screenX,w1=n.screenY-yh.screenY):w1=M1=0,yh=n),M1)},movementY:function(n){return"movementY"in n?n.movementY:w1}}),OT=Wr(t_),MO=Dn({},t_,{dataTransfer:0}),wO=Wr(MO),EO=Dn({},gp,{relatedTarget:0}),E1=Wr(EO),CO=Dn({},Hf,{animationName:0,elapsedTime:0,pseudoElement:0}),TO=Wr(CO),RO=Dn({},Hf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bO=Wr(RO),PO=Dn({},Hf,{data:0}),kT=Wr(PO),IO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=DO[n])?!!e[n]:!1}function _M(){return LO}var FO=Dn({},gp,{key:function(n){if(n.key){var e=IO[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=a0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?BO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_M,charCode:function(n){return n.type==="keypress"?a0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?a0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),NO=Wr(FO),UO=Dn({},t_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zT=Wr(UO),OO=Dn({},gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_M}),kO=Wr(OO),zO=Dn({},Hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),HO=Wr(zO),GO=Dn({},t_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),VO=Wr(GO),WO=[9,13,27,32],yM=Jo&&"CompositionEvent"in window,$h=null;Jo&&"documentMode"in document&&($h=document.documentMode);var XO=Jo&&"TextEvent"in window&&!$h,A2=Jo&&(!yM||$h&&8<$h&&11>=$h),HT=" ",GT=!1;function S2(n,e){switch(n){case"keyup":return WO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pc=!1;function JO(n,e){switch(n){case"compositionend":return M2(e);case"keypress":return e.which!==32?null:(GT=!0,HT);case"textInput":return n=e.data,n===HT&&GT?null:n;default:return null}}function KO(n,e){if(Pc)return n==="compositionend"||!yM&&S2(n,e)?(n=x2(),o0=gM=Pa=null,Pc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A2&&e.locale!=="ko"?null:e.data;default:return null}}var YO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!YO[n.type]:e==="textarea"}function w2(n,e,t,i){t2(i),e=N0(e,"onChange"),0<e.length&&(t=new vM("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var ed=null,bd=null;function jO(n){F2(n,0)}function n_(n){var e=Dc(n);if(YI(e))return n}function QO(n,e){if(n==="change")return e}var E2=!1;if(Jo){var C1;if(Jo){var T1="oninput"in document;if(!T1){var WT=document.createElement("div");WT.setAttribute("oninput","return;"),T1=typeof WT.oninput=="function"}C1=T1}else C1=!1;E2=C1&&(!document.documentMode||9<document.documentMode)}function XT(){ed&&(ed.detachEvent("onpropertychange",C2),bd=ed=null)}function C2(n){if(n.propertyName==="value"&&n_(bd)){var e=[];w2(e,bd,n,fM(n)),s2(jO,e)}}function ZO(n,e,t){n==="focusin"?(XT(),ed=e,bd=t,ed.attachEvent("onpropertychange",C2)):n==="focusout"&&XT()}function qO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return n_(bd)}function $O(n,e){if(n==="click")return n_(e)}function ek(n,e){if(n==="input"||n==="change")return n_(e)}function tk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ks=typeof Object.is=="function"?Object.is:tk;function Pd(n,e){if(ks(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!cA.call(e,r)||!ks(n[r],e[r]))return!1}return!0}function JT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function KT(n,e){var t=JT(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=JT(t)}}function T2(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?T2(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function R2(){for(var n=window,e=b0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=b0(n.document)}return e}function xM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function nk(n){var e=R2(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&T2(t.ownerDocument.documentElement,t)){if(i!==null&&xM(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=KT(t,s);var o=KT(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ik=Jo&&"documentMode"in document&&11>=document.documentMode,Ic=null,bA=null,td=null,PA=!1;function YT(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;PA||Ic==null||Ic!==b0(i)||(i=Ic,"selectionStart"in i&&xM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),td&&Pd(td,i)||(td=i,i=N0(bA,"onSelect"),0<i.length&&(e=new vM("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Ic)))}function Wm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Bc={animationend:Wm("Animation","AnimationEnd"),animationiteration:Wm("Animation","AnimationIteration"),animationstart:Wm("Animation","AnimationStart"),transitionend:Wm("Transition","TransitionEnd")},R1={},b2={};Jo&&(b2=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function i_(n){if(R1[n])return R1[n];if(!Bc[n])return n;var e=Bc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in b2)return R1[n]=e[t];return n}var P2=i_("animationend"),I2=i_("animationiteration"),B2=i_("animationstart"),D2=i_("transitionend"),L2=new Map,jT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ol(n,e){L2.set(n,e),Bu(e,[n])}for(var b1=0;b1<jT.length;b1++){var P1=jT[b1],rk=P1.toLowerCase(),sk=P1[0].toUpperCase()+P1.slice(1);ol(rk,"on"+sk)}ol(P2,"onAnimationEnd");ol(I2,"onAnimationIteration");ol(B2,"onAnimationStart");ol("dblclick","onDoubleClick");ol("focusin","onFocus");ol("focusout","onBlur");ol(D2,"onTransitionEnd");ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ok=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xh));function QT(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,rO(i,e,void 0,n),n.currentTarget=null}function F2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;QT(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;QT(r,a,u),s=l}}}if(I0)throw n=EA,I0=!1,EA=null,n}function gn(n,e){var t=e[FA];t===void 0&&(t=e[FA]=new Set);var i=n+"__bubble";t.has(i)||(N2(e,n,2,!1),t.add(i))}function I1(n,e,t){var i=0;e&&(i|=4),N2(t,n,i,e)}var Xm="_reactListening"+Math.random().toString(36).slice(2);function Id(n){if(!n[Xm]){n[Xm]=!0,VI.forEach(function(t){t!=="selectionchange"&&(ok.has(t)||I1(t,!1,n),I1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Xm]||(e[Xm]=!0,I1("selectionchange",!1,e))}}function N2(n,e,t,i){switch(y2(e)){case 1:var r=xO;break;case 4:r=AO;break;default:r=mM}t=r.bind(null,e,t,n),r=void 0,!wA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function B1(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Jl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}s2(function(){var u=s,h=fM(t),d=[];e:{var p=L2.get(n);if(p!==void 0){var m=vM,v=n;switch(n){case"keypress":if(a0(t)===0)break e;case"keydown":case"keyup":m=NO;break;case"focusin":v="focus",m=E1;break;case"focusout":v="blur",m=E1;break;case"beforeblur":case"afterblur":m=E1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=OT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=kO;break;case P2:case I2:case B2:m=TO;break;case D2:m=HO;break;case"scroll":m=SO;break;case"wheel":m=VO;break;case"copy":case"cut":case"paste":m=bO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=zT}var x=(e&4)!==0,y=!x&&n==="scroll",g=x?p!==null?p+"Capture":null:p;x=[];for(var A=u,S;A!==null;){S=A;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,g!==null&&(w=Ed(A,g),w!=null&&x.push(Bd(A,w,S)))),y)break;A=A.return}0<x.length&&(p=new m(p,v,null,t,h),d.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==SA&&(v=t.relatedTarget||t.fromElement)&&(Jl(v)||v[Ko]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?Jl(v):null,v!==null&&(y=Du(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(x=OT,w="onMouseLeave",g="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(x=zT,w="onPointerLeave",g="onPointerEnter",A="pointer"),y=m==null?p:Dc(m),S=v==null?p:Dc(v),p=new x(w,A+"leave",m,t,h),p.target=y,p.relatedTarget=S,w=null,Jl(h)===u&&(x=new x(g,A+"enter",v,t,h),x.target=S,x.relatedTarget=y,w=x),y=w,m&&v)t:{for(x=m,g=v,A=0,S=x;S;S=$u(S))A++;for(S=0,w=g;w;w=$u(w))S++;for(;0<A-S;)x=$u(x),A--;for(;0<S-A;)g=$u(g),S--;for(;A--;){if(x===g||g!==null&&x===g.alternate)break t;x=$u(x),g=$u(g)}x=null}else x=null;m!==null&&ZT(d,p,m,x,!1),v!==null&&y!==null&&ZT(d,y,v,x,!0)}}e:{if(p=u?Dc(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=QO;else if(VT(p))if(E2)P=ek;else{P=qO;var T=ZO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=$O);if(P&&(P=P(n,u))){w2(d,P,t,h);break e}T&&T(n,p,u),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&vA(p,"number",p.value)}switch(T=u?Dc(u):window,n){case"focusin":(VT(T)||T.contentEditable==="true")&&(Ic=T,bA=u,td=null);break;case"focusout":td=bA=Ic=null;break;case"mousedown":PA=!0;break;case"contextmenu":case"mouseup":case"dragend":PA=!1,YT(d,t,h);break;case"selectionchange":if(ik)break;case"keydown":case"keyup":YT(d,t,h)}var R;if(yM)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Pc?S2(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(A2&&t.locale!=="ko"&&(Pc||D!=="onCompositionStart"?D==="onCompositionEnd"&&Pc&&(R=x2()):(Pa=h,gM="value"in Pa?Pa.value:Pa.textContent,Pc=!0)),T=N0(u,D),0<T.length&&(D=new kT(D,n,null,t,h),d.push({event:D,listeners:T}),R?D.data=R:(R=M2(t),R!==null&&(D.data=R)))),(R=XO?JO(n,t):KO(n,t))&&(u=N0(u,"onBeforeInput"),0<u.length&&(h=new kT("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=R))}F2(d,e)})}function Bd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function N0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ed(n,t),s!=null&&i.unshift(Bd(n,s,r)),s=Ed(n,e),s!=null&&i.push(Bd(n,s,r))),n=n.return}return i}function $u(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ZT(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Ed(t,s),l!=null&&o.unshift(Bd(t,l,a))):r||(l=Ed(t,s),l!=null&&o.push(Bd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var ak=/\r\n?/g,lk=/\u0000|\uFFFD/g;function qT(n){return(typeof n=="string"?n:""+n).replace(ak,`
`).replace(lk,"")}function Jm(n,e,t){if(e=qT(e),qT(n)!==e&&t)throw Error(De(425))}function U0(){}var IA=null,BA=null;function DA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var LA=typeof setTimeout=="function"?setTimeout:void 0,uk=typeof clearTimeout=="function"?clearTimeout:void 0,$T=typeof Promise=="function"?Promise:void 0,ck=typeof queueMicrotask=="function"?queueMicrotask:typeof $T<"u"?function(n){return $T.resolve(null).then(n).catch(fk)}:LA;function fk(n){setTimeout(function(){throw n})}function D1(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Rd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Rd(e)}function Va(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function eR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Gf=Math.random().toString(36).slice(2),no="__reactFiber$"+Gf,Dd="__reactProps$"+Gf,Ko="__reactContainer$"+Gf,FA="__reactEvents$"+Gf,hk="__reactListeners$"+Gf,dk="__reactHandles$"+Gf;function Jl(n){var e=n[no];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ko]||t[no]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=eR(n);n!==null;){if(t=n[no])return t;n=eR(n)}return e}n=t,t=n.parentNode}return null}function vp(n){return n=n[no]||n[Ko],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Dc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(De(33))}function r_(n){return n[Dd]||null}var NA=[],Lc=-1;function al(n){return{current:n}}function yn(n){0>Lc||(n.current=NA[Lc],NA[Lc]=null,Lc--)}function pn(n,e){Lc++,NA[Lc]=n.current,n.current=e}var $a={},zi=al($a),hr=al(!1),yu=$a;function hf(n,e){var t=n.type.contextTypes;if(!t)return $a;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function dr(n){return n=n.childContextTypes,n!=null}function O0(){yn(hr),yn(zi)}function tR(n,e,t){if(zi.current!==$a)throw Error(De(168));pn(zi,e),pn(hr,t)}function U2(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(De(108,ZU(n)||"Unknown",r));return Dn({},t,i)}function k0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$a,yu=zi.current,pn(zi,n),pn(hr,hr.current),!0}function nR(n,e,t){var i=n.stateNode;if(!i)throw Error(De(169));t?(n=U2(n,e,yu),i.__reactInternalMemoizedMergedChildContext=n,yn(hr),yn(zi),pn(zi,n)):yn(hr),pn(hr,t)}var Fo=null,s_=!1,L1=!1;function O2(n){Fo===null?Fo=[n]:Fo.push(n)}function pk(n){s_=!0,O2(n)}function ll(){if(!L1&&Fo!==null){L1=!0;var n=0,e=an;try{var t=Fo;for(an=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Fo=null,s_=!1}catch(r){throw Fo!==null&&(Fo=Fo.slice(n+1)),u2(hM,ll),r}finally{an=e,L1=!1}}return null}var Fc=[],Nc=0,z0=null,H0=0,rs=[],ss=0,xu=null,zo=1,Ho="";function zl(n,e){Fc[Nc++]=H0,Fc[Nc++]=z0,z0=n,H0=e}function k2(n,e,t){rs[ss++]=zo,rs[ss++]=Ho,rs[ss++]=xu,xu=n;var i=zo;n=Ho;var r=32-Ls(i)-1;i&=~(1<<r),t+=1;var s=32-Ls(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,zo=1<<32-Ls(e)+r|t<<r|i,Ho=s+n}else zo=1<<s|t<<r|i,Ho=n}function AM(n){n.return!==null&&(zl(n,1),k2(n,1,0))}function SM(n){for(;n===z0;)z0=Fc[--Nc],Fc[Nc]=null,H0=Fc[--Nc],Fc[Nc]=null;for(;n===xu;)xu=rs[--ss],rs[ss]=null,Ho=rs[--ss],rs[ss]=null,zo=rs[--ss],rs[ss]=null}var Nr=null,Lr=null,Mn=!1,Ps=null;function z2(n,e){var t=ls(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function iR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Nr=n,Lr=Va(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Nr=n,Lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=xu!==null?{id:zo,overflow:Ho}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ls(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Nr=n,Lr=null,!0):!1;default:return!1}}function UA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function OA(n){if(Mn){var e=Lr;if(e){var t=e;if(!iR(n,e)){if(UA(n))throw Error(De(418));e=Va(t.nextSibling);var i=Nr;e&&iR(n,e)?z2(i,t):(n.flags=n.flags&-4097|2,Mn=!1,Nr=n)}}else{if(UA(n))throw Error(De(418));n.flags=n.flags&-4097|2,Mn=!1,Nr=n}}}function rR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Nr=n}function Km(n){if(n!==Nr)return!1;if(!Mn)return rR(n),Mn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!DA(n.type,n.memoizedProps)),e&&(e=Lr)){if(UA(n))throw H2(),Error(De(418));for(;e;)z2(n,e),e=Va(e.nextSibling)}if(rR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(De(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Lr=Va(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Lr=null}}else Lr=Nr?Va(n.stateNode.nextSibling):null;return!0}function H2(){for(var n=Lr;n;)n=Va(n.nextSibling)}function df(){Lr=Nr=null,Mn=!1}function MM(n){Ps===null?Ps=[n]:Ps.push(n)}var mk=ea.ReactCurrentBatchConfig;function xh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(De(309));var i=t.stateNode}if(!i)throw Error(De(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(De(284));if(!t._owner)throw Error(De(290,n))}return n}function Ym(n,e){throw n=Object.prototype.toString.call(e),Error(De(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function sR(n){var e=n._init;return e(n._payload)}function G2(n){function e(g,A){if(n){var S=g.deletions;S===null?(g.deletions=[A],g.flags|=16):S.push(A)}}function t(g,A){if(!n)return null;for(;A!==null;)e(g,A),A=A.sibling;return null}function i(g,A){for(g=new Map;A!==null;)A.key!==null?g.set(A.key,A):g.set(A.index,A),A=A.sibling;return g}function r(g,A){return g=Ka(g,A),g.index=0,g.sibling=null,g}function s(g,A,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<A?(g.flags|=2,A):S):(g.flags|=2,A)):(g.flags|=1048576,A)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,A,S,w){return A===null||A.tag!==6?(A=H1(S,g.mode,w),A.return=g,A):(A=r(A,S),A.return=g,A)}function l(g,A,S,w){var P=S.type;return P===bc?h(g,A,S.props.children,w,S.key):A!==null&&(A.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===wa&&sR(P)===A.type)?(w=r(A,S.props),w.ref=xh(g,A,S),w.return=g,w):(w=p0(S.type,S.key,S.props,null,g.mode,w),w.ref=xh(g,A,S),w.return=g,w)}function u(g,A,S,w){return A===null||A.tag!==4||A.stateNode.containerInfo!==S.containerInfo||A.stateNode.implementation!==S.implementation?(A=G1(S,g.mode,w),A.return=g,A):(A=r(A,S.children||[]),A.return=g,A)}function h(g,A,S,w,P){return A===null||A.tag!==7?(A=ou(S,g.mode,w,P),A.return=g,A):(A=r(A,S),A.return=g,A)}function d(g,A,S){if(typeof A=="string"&&A!==""||typeof A=="number")return A=H1(""+A,g.mode,S),A.return=g,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Um:return S=p0(A.type,A.key,A.props,null,g.mode,S),S.ref=xh(g,null,A),S.return=g,S;case Rc:return A=G1(A,g.mode,S),A.return=g,A;case wa:var w=A._init;return d(g,w(A._payload),S)}if(Vh(A)||mh(A))return A=ou(A,g.mode,S,null),A.return=g,A;Ym(g,A)}return null}function p(g,A,S,w){var P=A!==null?A.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:a(g,A,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Um:return S.key===P?l(g,A,S,w):null;case Rc:return S.key===P?u(g,A,S,w):null;case wa:return P=S._init,p(g,A,P(S._payload),w)}if(Vh(S)||mh(S))return P!==null?null:h(g,A,S,w,null);Ym(g,S)}return null}function m(g,A,S,w,P){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(S)||null,a(A,g,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Um:return g=g.get(w.key===null?S:w.key)||null,l(A,g,w,P);case Rc:return g=g.get(w.key===null?S:w.key)||null,u(A,g,w,P);case wa:var T=w._init;return m(g,A,S,T(w._payload),P)}if(Vh(w)||mh(w))return g=g.get(S)||null,h(A,g,w,P,null);Ym(A,w)}return null}function v(g,A,S,w){for(var P=null,T=null,R=A,D=A=0,C=null;R!==null&&D<S.length;D++){R.index>D?(C=R,R=null):C=R.sibling;var b=p(g,R,S[D],w);if(b===null){R===null&&(R=C);break}n&&R&&b.alternate===null&&e(g,R),A=s(b,A,D),T===null?P=b:T.sibling=b,T=b,R=C}if(D===S.length)return t(g,R),Mn&&zl(g,D),P;if(R===null){for(;D<S.length;D++)R=d(g,S[D],w),R!==null&&(A=s(R,A,D),T===null?P=R:T.sibling=R,T=R);return Mn&&zl(g,D),P}for(R=i(g,R);D<S.length;D++)C=m(R,g,D,S[D],w),C!==null&&(n&&C.alternate!==null&&R.delete(C.key===null?D:C.key),A=s(C,A,D),T===null?P=C:T.sibling=C,T=C);return n&&R.forEach(function(N){return e(g,N)}),Mn&&zl(g,D),P}function x(g,A,S,w){var P=mh(S);if(typeof P!="function")throw Error(De(150));if(S=P.call(S),S==null)throw Error(De(151));for(var T=P=null,R=A,D=A=0,C=null,b=S.next();R!==null&&!b.done;D++,b=S.next()){R.index>D?(C=R,R=null):C=R.sibling;var N=p(g,R,b.value,w);if(N===null){R===null&&(R=C);break}n&&R&&N.alternate===null&&e(g,R),A=s(N,A,D),T===null?P=N:T.sibling=N,T=N,R=C}if(b.done)return t(g,R),Mn&&zl(g,D),P;if(R===null){for(;!b.done;D++,b=S.next())b=d(g,b.value,w),b!==null&&(A=s(b,A,D),T===null?P=b:T.sibling=b,T=b);return Mn&&zl(g,D),P}for(R=i(g,R);!b.done;D++,b=S.next())b=m(R,g,D,b.value,w),b!==null&&(n&&b.alternate!==null&&R.delete(b.key===null?D:b.key),A=s(b,A,D),T===null?P=b:T.sibling=b,T=b);return n&&R.forEach(function(J){return e(g,J)}),Mn&&zl(g,D),P}function y(g,A,S,w){if(typeof S=="object"&&S!==null&&S.type===bc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Um:e:{for(var P=S.key,T=A;T!==null;){if(T.key===P){if(P=S.type,P===bc){if(T.tag===7){t(g,T.sibling),A=r(T,S.props.children),A.return=g,g=A;break e}}else if(T.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===wa&&sR(P)===T.type){t(g,T.sibling),A=r(T,S.props),A.ref=xh(g,T,S),A.return=g,g=A;break e}t(g,T);break}else e(g,T);T=T.sibling}S.type===bc?(A=ou(S.props.children,g.mode,w,S.key),A.return=g,g=A):(w=p0(S.type,S.key,S.props,null,g.mode,w),w.ref=xh(g,A,S),w.return=g,g=w)}return o(g);case Rc:e:{for(T=S.key;A!==null;){if(A.key===T)if(A.tag===4&&A.stateNode.containerInfo===S.containerInfo&&A.stateNode.implementation===S.implementation){t(g,A.sibling),A=r(A,S.children||[]),A.return=g,g=A;break e}else{t(g,A);break}else e(g,A);A=A.sibling}A=G1(S,g.mode,w),A.return=g,g=A}return o(g);case wa:return T=S._init,y(g,A,T(S._payload),w)}if(Vh(S))return v(g,A,S,w);if(mh(S))return x(g,A,S,w);Ym(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,A!==null&&A.tag===6?(t(g,A.sibling),A=r(A,S),A.return=g,g=A):(t(g,A),A=H1(S,g.mode,w),A.return=g,g=A),o(g)):t(g,A)}return y}var pf=G2(!0),V2=G2(!1),G0=al(null),V0=null,Uc=null,wM=null;function EM(){wM=Uc=V0=null}function CM(n){var e=G0.current;yn(G0),n._currentValue=e}function kA(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Zc(n,e){V0=n,wM=Uc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ur=!0),n.firstContext=null)}function ds(n){var e=n._currentValue;if(wM!==n)if(n={context:n,memoizedValue:e,next:null},Uc===null){if(V0===null)throw Error(De(308));Uc=n,V0.dependencies={lanes:0,firstContext:n}}else Uc=Uc.next=n;return e}var Kl=null;function TM(n){Kl===null?Kl=[n]:Kl.push(n)}function W2(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,TM(e)):(t.next=r.next,r.next=t),e.interleaved=t,Yo(n,i)}function Yo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ea=!1;function RM(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X2(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Wo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Yt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Yo(n,t)}return r=i.interleaved,r===null?(e.next=e,TM(i)):(e.next=r.next,r.next=e),i.interleaved=e,Yo(n,t)}function l0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,dM(n,t)}}function oR(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function W0(n,e,t,i){var r=n.updateQueue;Ea=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,x=a;switch(p=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=Dn({},d,p);break e;case 2:Ea=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Su|=o,n.lanes=o,n.memoizedState=d}}function aR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(De(191,r));r.call(i)}}}var _p={},ao=al(_p),Ld=al(_p),Fd=al(_p);function Yl(n){if(n===_p)throw Error(De(174));return n}function bM(n,e){switch(pn(Fd,e),pn(Ld,n),pn(ao,_p),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yA(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=yA(e,n)}yn(ao),pn(ao,e)}function mf(){yn(ao),yn(Ld),yn(Fd)}function J2(n){Yl(Fd.current);var e=Yl(ao.current),t=yA(e,n.type);e!==t&&(pn(Ld,n),pn(ao,t))}function PM(n){Ld.current===n&&(yn(ao),yn(Ld))}var Rn=al(0);function X0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var F1=[];function IM(){for(var n=0;n<F1.length;n++)F1[n]._workInProgressVersionPrimary=null;F1.length=0}var u0=ea.ReactCurrentDispatcher,N1=ea.ReactCurrentBatchConfig,Au=0,Bn=null,ti=null,fi=null,J0=!1,nd=!1,Nd=0,gk=0;function Ri(){throw Error(De(321))}function BM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ks(n[t],e[t]))return!1;return!0}function DM(n,e,t,i,r,s){if(Au=s,Bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,u0.current=n===null||n.memoizedState===null?xk:Ak,n=t(i,r),nd){s=0;do{if(nd=!1,Nd=0,25<=s)throw Error(De(301));s+=1,fi=ti=null,e.updateQueue=null,u0.current=Sk,n=t(i,r)}while(nd)}if(u0.current=K0,e=ti!==null&&ti.next!==null,Au=0,fi=ti=Bn=null,J0=!1,e)throw Error(De(300));return n}function LM(){var n=Nd!==0;return Nd=0,n}function $s(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?Bn.memoizedState=fi=n:fi=fi.next=n,fi}function ps(){if(ti===null){var n=Bn.alternate;n=n!==null?n.memoizedState:null}else n=ti.next;var e=fi===null?Bn.memoizedState:fi.next;if(e!==null)fi=e,ti=n;else{if(n===null)throw Error(De(310));ti=n,n={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},fi===null?Bn.memoizedState=fi=n:fi=fi.next=n}return fi}function Ud(n,e){return typeof e=="function"?e(n):e}function U1(n){var e=ps(),t=e.queue;if(t===null)throw Error(De(311));t.lastRenderedReducer=n;var i=ti,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Au&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Bn.lanes|=h,Su|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ks(i,e.memoizedState)||(ur=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Bn.lanes|=s,Su|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function O1(n){var e=ps(),t=e.queue;if(t===null)throw Error(De(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);ks(s,e.memoizedState)||(ur=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function K2(){}function Y2(n,e){var t=Bn,i=ps(),r=e(),s=!ks(i.memoizedState,r);if(s&&(i.memoizedState=r,ur=!0),i=i.queue,FM(Z2.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||fi!==null&&fi.memoizedState.tag&1){if(t.flags|=2048,Od(9,Q2.bind(null,t,i,r,e),void 0,null),pi===null)throw Error(De(349));Au&30||j2(t,e,r)}return r}function j2(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Q2(n,e,t,i){e.value=t,e.getSnapshot=i,q2(e)&&$2(n)}function Z2(n,e,t){return t(function(){q2(e)&&$2(n)})}function q2(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ks(n,t)}catch{return!0}}function $2(n){var e=Yo(n,1);e!==null&&Fs(e,n,1,-1)}function lR(n){var e=$s();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:n},e.queue=n,n=n.dispatch=yk.bind(null,Bn,n),[e.memoizedState,n]}function Od(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function eB(){return ps().memoizedState}function c0(n,e,t,i){var r=$s();Bn.flags|=n,r.memoizedState=Od(1|e,t,void 0,i===void 0?null:i)}function o_(n,e,t,i){var r=ps();i=i===void 0?null:i;var s=void 0;if(ti!==null){var o=ti.memoizedState;if(s=o.destroy,i!==null&&BM(i,o.deps)){r.memoizedState=Od(e,t,s,i);return}}Bn.flags|=n,r.memoizedState=Od(1|e,t,s,i)}function uR(n,e){return c0(8390656,8,n,e)}function FM(n,e){return o_(2048,8,n,e)}function tB(n,e){return o_(4,2,n,e)}function nB(n,e){return o_(4,4,n,e)}function iB(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function rB(n,e,t){return t=t!=null?t.concat([n]):null,o_(4,4,iB.bind(null,e,n),t)}function NM(){}function sB(n,e){var t=ps();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&BM(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function oB(n,e){var t=ps();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&BM(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function aB(n,e,t){return Au&21?(ks(t,e)||(t=h2(),Bn.lanes|=t,Su|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ur=!0),n.memoizedState=t)}function vk(n,e){var t=an;an=t!==0&&4>t?t:4,n(!0);var i=N1.transition;N1.transition={};try{n(!1),e()}finally{an=t,N1.transition=i}}function lB(){return ps().memoizedState}function _k(n,e,t){var i=Ja(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},uB(n))cB(e,t);else if(t=W2(n,e,t,i),t!==null){var r=Zi();Fs(t,n,i,r),fB(t,e,i)}}function yk(n,e,t){var i=Ja(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(uB(n))cB(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,ks(a,o)){var l=e.interleaved;l===null?(r.next=r,TM(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=W2(n,e,r,i),t!==null&&(r=Zi(),Fs(t,n,i,r),fB(t,e,i))}}function uB(n){var e=n.alternate;return n===Bn||e!==null&&e===Bn}function cB(n,e){nd=J0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function fB(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,dM(n,t)}}var K0={readContext:ds,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},xk={readContext:ds,useCallback:function(n,e){return $s().memoizedState=[n,e===void 0?null:e],n},useContext:ds,useEffect:uR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,c0(4194308,4,iB.bind(null,e,n),t)},useLayoutEffect:function(n,e){return c0(4194308,4,n,e)},useInsertionEffect:function(n,e){return c0(4,2,n,e)},useMemo:function(n,e){var t=$s();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=$s();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=_k.bind(null,Bn,n),[i.memoizedState,n]},useRef:function(n){var e=$s();return n={current:n},e.memoizedState=n},useState:lR,useDebugValue:NM,useDeferredValue:function(n){return $s().memoizedState=n},useTransition:function(){var n=lR(!1),e=n[0];return n=vk.bind(null,n[1]),$s().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Bn,r=$s();if(Mn){if(t===void 0)throw Error(De(407));t=t()}else{if(t=e(),pi===null)throw Error(De(349));Au&30||j2(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,uR(Z2.bind(null,i,s,n),[n]),i.flags|=2048,Od(9,Q2.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=$s(),e=pi.identifierPrefix;if(Mn){var t=Ho,i=zo;t=(i&~(1<<32-Ls(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Nd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=gk++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Ak={readContext:ds,useCallback:sB,useContext:ds,useEffect:FM,useImperativeHandle:rB,useInsertionEffect:tB,useLayoutEffect:nB,useMemo:oB,useReducer:U1,useRef:eB,useState:function(){return U1(Ud)},useDebugValue:NM,useDeferredValue:function(n){var e=ps();return aB(e,ti.memoizedState,n)},useTransition:function(){var n=U1(Ud)[0],e=ps().memoizedState;return[n,e]},useMutableSource:K2,useSyncExternalStore:Y2,useId:lB,unstable_isNewReconciler:!1},Sk={readContext:ds,useCallback:sB,useContext:ds,useEffect:FM,useImperativeHandle:rB,useInsertionEffect:tB,useLayoutEffect:nB,useMemo:oB,useReducer:O1,useRef:eB,useState:function(){return O1(Ud)},useDebugValue:NM,useDeferredValue:function(n){var e=ps();return ti===null?e.memoizedState=n:aB(e,ti.memoizedState,n)},useTransition:function(){var n=O1(Ud)[0],e=ps().memoizedState;return[n,e]},useMutableSource:K2,useSyncExternalStore:Y2,useId:lB,unstable_isNewReconciler:!1};function Ts(n,e){if(n&&n.defaultProps){e=Dn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function zA(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Dn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var a_={isMounted:function(n){return(n=n._reactInternals)?Du(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Zi(),r=Ja(n),s=Wo(i,r);s.payload=e,t!=null&&(s.callback=t),e=Wa(n,s,r),e!==null&&(Fs(e,n,r,i),l0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Zi(),r=Ja(n),s=Wo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Wa(n,s,r),e!==null&&(Fs(e,n,r,i),l0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Zi(),i=Ja(n),r=Wo(t,i);r.tag=2,e!=null&&(r.callback=e),e=Wa(n,r,i),e!==null&&(Fs(e,n,i,t),l0(e,n,i))}};function cR(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Pd(t,i)||!Pd(r,s):!0}function hB(n,e,t){var i=!1,r=$a,s=e.contextType;return typeof s=="object"&&s!==null?s=ds(s):(r=dr(e)?yu:zi.current,i=e.contextTypes,s=(i=i!=null)?hf(n,r):$a),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=a_,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function fR(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&a_.enqueueReplaceState(e,e.state,null)}function HA(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},RM(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ds(s):(s=dr(e)?yu:zi.current,r.context=hf(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(zA(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&a_.enqueueReplaceState(r,r.state,null),W0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function gf(n,e){try{var t="",i=e;do t+=QU(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function k1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function GA(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Mk=typeof WeakMap=="function"?WeakMap:Map;function dB(n,e,t){t=Wo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){j0||(j0=!0,qA=i),GA(n,e)},t}function pB(n,e,t){t=Wo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){GA(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){GA(n,e),typeof i!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function hR(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new Mk;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=Uk.bind(null,n,e,t),e.then(n,n))}function dR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function pR(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Wo(-1,1),e.tag=2,Wa(t,e,1))),t.lanes|=1),n)}var wk=ea.ReactCurrentOwner,ur=!1;function Yi(n,e,t,i){e.child=n===null?V2(e,null,t,i):pf(e,n.child,t,i)}function mR(n,e,t,i,r){t=t.render;var s=e.ref;return Zc(e,r),i=DM(n,e,t,i,s,r),t=LM(),n!==null&&!ur?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,jo(n,e,r)):(Mn&&t&&AM(e),e.flags|=1,Yi(n,e,i,r),e.child)}function gR(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!WM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,mB(n,e,s,i,r)):(n=p0(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Pd,t(o,i)&&n.ref===e.ref)return jo(n,e,r)}return e.flags|=1,n=Ka(s,i),n.ref=e.ref,n.return=e,e.child=n}function mB(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Pd(s,i)&&n.ref===e.ref)if(ur=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ur=!0);else return e.lanes=n.lanes,jo(n,e,r)}return VA(n,e,t,i,r)}function gB(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(kc,br),br|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,pn(kc,br),br|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,pn(kc,br),br|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,pn(kc,br),br|=i;return Yi(n,e,r,t),e.child}function vB(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function VA(n,e,t,i,r){var s=dr(t)?yu:zi.current;return s=hf(e,s),Zc(e,r),t=DM(n,e,t,i,s,r),i=LM(),n!==null&&!ur?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,jo(n,e,r)):(Mn&&i&&AM(e),e.flags|=1,Yi(n,e,t,r),e.child)}function vR(n,e,t,i,r){if(dr(t)){var s=!0;k0(e)}else s=!1;if(Zc(e,r),e.stateNode===null)f0(n,e),hB(e,t,i),HA(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=ds(u):(u=dr(t)?yu:zi.current,u=hf(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&fR(e,o,i,u),Ea=!1;var p=e.memoizedState;o.state=p,W0(e,i,o,r),l=e.memoizedState,a!==i||p!==l||hr.current||Ea?(typeof h=="function"&&(zA(e,t,h,i),l=e.memoizedState),(a=Ea||cR(e,t,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,X2(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ts(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ds(l):(l=dr(t)?yu:zi.current,l=hf(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&fR(e,o,i,l),Ea=!1,p=e.memoizedState,o.state=p,W0(e,i,o,r);var v=e.memoizedState;a!==d||p!==v||hr.current||Ea?(typeof m=="function"&&(zA(e,t,m,i),v=e.memoizedState),(u=Ea||cR(e,t,u,i,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return WA(n,e,t,i,s,r)}function WA(n,e,t,i,r,s){vB(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&nR(e,t,!1),jo(n,e,s);i=e.stateNode,wk.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=pf(e,n.child,null,s),e.child=pf(e,null,a,s)):Yi(n,e,a,s),e.memoizedState=i.state,r&&nR(e,t,!0),e.child}function _B(n){var e=n.stateNode;e.pendingContext?tR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&tR(n,e.context,!1),bM(n,e.containerInfo)}function _R(n,e,t,i,r){return df(),MM(r),e.flags|=256,Yi(n,e,t,i),e.child}var XA={dehydrated:null,treeContext:null,retryLane:0};function JA(n){return{baseLanes:n,cachePool:null,transitions:null}}function yB(n,e,t){var i=e.pendingProps,r=Rn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),pn(Rn,r&1),n===null)return OA(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=c_(o,i,0,null),n=ou(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=JA(t),e.memoizedState=XA,n):UM(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Ek(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ka(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ka(a,s):(s=ou(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?JA(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=XA,i}return s=n.child,n=s.sibling,i=Ka(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function UM(n,e){return e=c_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function jm(n,e,t,i){return i!==null&&MM(i),pf(e,n.child,null,t),n=UM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Ek(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=k1(Error(De(422))),jm(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=c_({mode:"visible",children:i.children},r,0,null),s=ou(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&pf(e,n.child,null,o),e.child.memoizedState=JA(o),e.memoizedState=XA,s);if(!(e.mode&1))return jm(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(De(419)),i=k1(s,i,void 0),jm(n,e,o,i)}if(a=(o&n.childLanes)!==0,ur||a){if(i=pi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Yo(n,r),Fs(i,n,r,-1))}return VM(),i=k1(Error(De(421))),jm(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=Ok.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Lr=Va(r.nextSibling),Nr=e,Mn=!0,Ps=null,n!==null&&(rs[ss++]=zo,rs[ss++]=Ho,rs[ss++]=xu,zo=n.id,Ho=n.overflow,xu=e),e=UM(e,i.children),e.flags|=4096,e)}function yR(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),kA(n.return,e,t)}function z1(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function xB(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Yi(n,e,i.children,t),i=Rn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&yR(n,t,e);else if(n.tag===19)yR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(pn(Rn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&X0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),z1(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&X0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}z1(e,!0,t,null,s);break;case"together":z1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function f0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function jo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Su|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(De(153));if(e.child!==null){for(n=e.child,t=Ka(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ka(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Ck(n,e,t){switch(e.tag){case 3:_B(e),df();break;case 5:J2(e);break;case 1:dr(e.type)&&k0(e);break;case 4:bM(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;pn(G0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(pn(Rn,Rn.current&1),e.flags|=128,null):t&e.child.childLanes?yB(n,e,t):(pn(Rn,Rn.current&1),n=jo(n,e,t),n!==null?n.sibling:null);pn(Rn,Rn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return xB(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),pn(Rn,Rn.current),i)break;return null;case 22:case 23:return e.lanes=0,gB(n,e,t)}return jo(n,e,t)}var AB,KA,SB,MB;AB=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};KA=function(){};SB=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Yl(ao.current);var s=null;switch(t){case"input":r=mA(n,r),i=mA(n,i),s=[];break;case"select":r=Dn({},r,{value:void 0}),i=Dn({},i,{value:void 0}),s=[];break;case"textarea":r=_A(n,r),i=_A(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=U0)}xA(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Md.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Md.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};MB=function(n,e,t,i){t!==i&&(e.flags|=4)};function Ah(n,e){if(!Mn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function bi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function Tk(n,e,t){var i=e.pendingProps;switch(SM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(e),null;case 1:return dr(e.type)&&O0(),bi(e),null;case 3:return i=e.stateNode,mf(),yn(hr),yn(zi),IM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Km(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ps!==null&&(tS(Ps),Ps=null))),KA(n,e),bi(e),null;case 5:PM(e);var r=Yl(Fd.current);if(t=e.type,n!==null&&e.stateNode!=null)SB(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(De(166));return bi(e),null}if(n=Yl(ao.current),Km(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[no]=e,i[Dd]=s,n=(e.mode&1)!==0,t){case"dialog":gn("cancel",i),gn("close",i);break;case"iframe":case"object":case"embed":gn("load",i);break;case"video":case"audio":for(r=0;r<Xh.length;r++)gn(Xh[r],i);break;case"source":gn("error",i);break;case"img":case"image":case"link":gn("error",i),gn("load",i);break;case"details":gn("toggle",i);break;case"input":RT(i,s),gn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},gn("invalid",i);break;case"textarea":PT(i,s),gn("invalid",i)}xA(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Jm(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Jm(i.textContent,a,n),r=["children",""+a]):Md.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gn("scroll",i)}switch(t){case"input":Om(i),bT(i,s,!0);break;case"textarea":Om(i),IT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=U0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ZI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[no]=e,n[Dd]=i,AB(n,e,!1,!1),e.stateNode=n;e:{switch(o=AA(t,i),t){case"dialog":gn("cancel",n),gn("close",n),r=i;break;case"iframe":case"object":case"embed":gn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Xh.length;r++)gn(Xh[r],n);r=i;break;case"source":gn("error",n),r=i;break;case"img":case"image":case"link":gn("error",n),gn("load",n),r=i;break;case"details":gn("toggle",n),r=i;break;case"input":RT(n,i),r=mA(n,i),gn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Dn({},i,{value:void 0}),gn("invalid",n);break;case"textarea":PT(n,i),r=_A(n,i),gn("invalid",n);break;default:r=i}xA(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?e2(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qI(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&wd(n,l):typeof l=="number"&&wd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Md.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gn("scroll",n):l!=null&&aM(n,s,l,o))}switch(t){case"input":Om(n),bT(n,i,!1);break;case"textarea":Om(n),IT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+qa(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Kc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Kc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=U0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bi(e),null;case 6:if(n&&e.stateNode!=null)MB(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(De(166));if(t=Yl(Fd.current),Yl(ao.current),Km(e)){if(i=e.stateNode,t=e.memoizedProps,i[no]=e,(s=i.nodeValue!==t)&&(n=Nr,n!==null))switch(n.tag){case 3:Jm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Jm(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[no]=e,e.stateNode=i}return bi(e),null;case 13:if(yn(Rn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Mn&&Lr!==null&&e.mode&1&&!(e.flags&128))H2(),df(),e.flags|=98560,s=!1;else if(s=Km(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(De(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(De(317));s[no]=e}else df(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bi(e),s=!1}else Ps!==null&&(tS(Ps),Ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Rn.current&1?ni===0&&(ni=3):VM())),e.updateQueue!==null&&(e.flags|=4),bi(e),null);case 4:return mf(),KA(n,e),n===null&&Id(e.stateNode.containerInfo),bi(e),null;case 10:return CM(e.type._context),bi(e),null;case 17:return dr(e.type)&&O0(),bi(e),null;case 19:if(yn(Rn),s=e.memoizedState,s===null)return bi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Ah(s,!1);else{if(ni!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=X0(n),o!==null){for(e.flags|=128,Ah(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return pn(Rn,Rn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Vn()>vf&&(e.flags|=128,i=!0,Ah(s,!1),e.lanes=4194304)}else{if(!i)if(n=X0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ah(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mn)return bi(e),null}else 2*Vn()-s.renderingStartTime>vf&&t!==1073741824&&(e.flags|=128,i=!0,Ah(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Vn(),e.sibling=null,t=Rn.current,pn(Rn,i?t&1|2:t&1),e):(bi(e),null);case 22:case 23:return GM(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?br&1073741824&&(bi(e),e.subtreeFlags&6&&(e.flags|=8192)):bi(e),null;case 24:return null;case 25:return null}throw Error(De(156,e.tag))}function Rk(n,e){switch(SM(e),e.tag){case 1:return dr(e.type)&&O0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return mf(),yn(hr),yn(zi),IM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PM(e),null;case 13:if(yn(Rn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(De(340));df()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return yn(Rn),null;case 4:return mf(),null;case 10:return CM(e.type._context),null;case 22:case 23:return GM(),null;case 24:return null;default:return null}}var Qm=!1,Di=!1,bk=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Oc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Nn(n,e,i)}else t.current=null}function YA(n,e,t){try{t()}catch(i){Nn(n,e,i)}}var xR=!1;function Pk(n,e){if(IA=L0,n=R2(),xM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(BA={focusedElem:n,selectionRange:t},L0=!1,tt=e;tt!==null;)if(e=tt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,tt=n;else for(;tt!==null;){e=tt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,y=v.memoizedState,g=e.stateNode,A=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ts(e.type,x),y);g.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(w){Nn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,tt=n;break}tt=e.return}return v=xR,xR=!1,v}function id(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&YA(e,t,s)}r=r.next}while(r!==i)}}function l_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function jA(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function wB(n){var e=n.alternate;e!==null&&(n.alternate=null,wB(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[no],delete e[Dd],delete e[FA],delete e[hk],delete e[dk])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function EB(n){return n.tag===5||n.tag===3||n.tag===4}function AR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||EB(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function QA(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=U0));else if(i!==4&&(n=n.child,n!==null))for(QA(n,e,t),n=n.sibling;n!==null;)QA(n,e,t),n=n.sibling}function ZA(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ZA(n,e,t),n=n.sibling;n!==null;)ZA(n,e,t),n=n.sibling}var _i=null,bs=!1;function ha(n,e,t){for(t=t.child;t!==null;)CB(n,e,t),t=t.sibling}function CB(n,e,t){if(oo&&typeof oo.onCommitFiberUnmount=="function")try{oo.onCommitFiberUnmount(e_,t)}catch{}switch(t.tag){case 5:Di||Oc(t,e);case 6:var i=_i,r=bs;_i=null,ha(n,e,t),_i=i,bs=r,_i!==null&&(bs?(n=_i,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):_i.removeChild(t.stateNode));break;case 18:_i!==null&&(bs?(n=_i,t=t.stateNode,n.nodeType===8?D1(n.parentNode,t):n.nodeType===1&&D1(n,t),Rd(n)):D1(_i,t.stateNode));break;case 4:i=_i,r=bs,_i=t.stateNode.containerInfo,bs=!0,ha(n,e,t),_i=i,bs=r;break;case 0:case 11:case 14:case 15:if(!Di&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&YA(t,e,o),r=r.next}while(r!==i)}ha(n,e,t);break;case 1:if(!Di&&(Oc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Nn(t,e,a)}ha(n,e,t);break;case 21:ha(n,e,t);break;case 22:t.mode&1?(Di=(i=Di)||t.memoizedState!==null,ha(n,e,t),Di=i):ha(n,e,t);break;default:ha(n,e,t)}}function SR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new bk),e.forEach(function(i){var r=kk.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Ss(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_i=a.stateNode,bs=!1;break e;case 3:_i=a.stateNode.containerInfo,bs=!0;break e;case 4:_i=a.stateNode.containerInfo,bs=!0;break e}a=a.return}if(_i===null)throw Error(De(160));CB(s,o,r),_i=null,bs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Nn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TB(e,n),e=e.sibling}function TB(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ss(e,n),qs(n),i&4){try{id(3,n,n.return),l_(3,n)}catch(x){Nn(n,n.return,x)}try{id(5,n,n.return)}catch(x){Nn(n,n.return,x)}}break;case 1:Ss(e,n),qs(n),i&512&&t!==null&&Oc(t,t.return);break;case 5:if(Ss(e,n),qs(n),i&512&&t!==null&&Oc(t,t.return),n.flags&32){var r=n.stateNode;try{wd(r,"")}catch(x){Nn(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jI(r,s),AA(a,o);var u=AA(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?e2(r,d):h==="dangerouslySetInnerHTML"?qI(r,d):h==="children"?wd(r,d):aM(r,h,d,u)}switch(a){case"input":gA(r,s);break;case"textarea":QI(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Kc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Kc(r,!!s.multiple,s.defaultValue,!0):Kc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Dd]=s}catch(x){Nn(n,n.return,x)}}break;case 6:if(Ss(e,n),qs(n),i&4){if(n.stateNode===null)throw Error(De(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){Nn(n,n.return,x)}}break;case 3:if(Ss(e,n),qs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Rd(e.containerInfo)}catch(x){Nn(n,n.return,x)}break;case 4:Ss(e,n),qs(n);break;case 13:Ss(e,n),qs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(zM=Vn())),i&4&&SR(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Di=(u=Di)||h,Ss(e,n),Di=u):Ss(e,n),qs(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(tt=n,h=n.child;h!==null;){for(d=tt=h;tt!==null;){switch(p=tt,m=p.child,p.tag){case 0:case 11:case 14:case 15:id(4,p,p.return);break;case 1:Oc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Nn(i,t,x)}}break;case 5:Oc(p,p.return);break;case 22:if(p.memoizedState!==null){wR(d);continue}}m!==null?(m.return=p,tt=m):wR(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$I("display",o))}catch(x){Nn(n,n.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){Nn(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ss(e,n),qs(n),i&4&&SR(n);break;case 21:break;default:Ss(e,n),qs(n)}}function qs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(EB(t)){var i=t;break e}t=t.return}throw Error(De(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(wd(r,""),i.flags&=-33);var s=AR(n);ZA(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=AR(n);QA(n,a,o);break;default:throw Error(De(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Ik(n,e,t){tt=n,RB(n)}function RB(n,e,t){for(var i=(n.mode&1)!==0;tt!==null;){var r=tt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Qm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Di;a=Qm;var u=Di;if(Qm=o,(Di=l)&&!u)for(tt=r;tt!==null;)o=tt,l=o.child,o.tag===22&&o.memoizedState!==null?ER(r):l!==null?(l.return=o,tt=l):ER(r);for(;s!==null;)tt=s,RB(s),s=s.sibling;tt=r,Qm=a,Di=u}MR(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,tt=s):MR(n)}}function MR(n){for(;tt!==null;){var e=tt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Di||l_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Di)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Ts(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&aR(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}aR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Rd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}Di||e.flags&512&&jA(e)}catch(p){Nn(e,e.return,p)}}if(e===n){tt=null;break}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}}function wR(n){for(;tt!==null;){var e=tt;if(e===n){tt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,tt=t;break}tt=e.return}}function ER(n){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{l_(4,e)}catch(l){Nn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Nn(e,r,l)}}var s=e.return;try{jA(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{jA(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){tt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,tt=a;break}tt=e.return}}var Bk=Math.ceil,Y0=ea.ReactCurrentDispatcher,OM=ea.ReactCurrentOwner,hs=ea.ReactCurrentBatchConfig,Yt=0,pi=null,qn=null,yi=0,br=0,kc=al(0),ni=0,kd=null,Su=0,u_=0,kM=0,rd=null,ar=null,zM=0,vf=1/0,Io=null,j0=!1,qA=null,Xa=null,Zm=!1,Ia=null,Q0=0,sd=0,$A=null,h0=-1,d0=0;function Zi(){return Yt&6?Vn():h0!==-1?h0:h0=Vn()}function Ja(n){return n.mode&1?Yt&2&&yi!==0?yi&-yi:mk.transition!==null?(d0===0&&(d0=h2()),d0):(n=an,n!==0||(n=window.event,n=n===void 0?16:y2(n.type)),n):1}function Fs(n,e,t,i){if(50<sd)throw sd=0,$A=null,Error(De(185));mp(n,t,i),(!(Yt&2)||n!==pi)&&(n===pi&&(!(Yt&2)&&(u_|=t),ni===4&&Ra(n,yi)),pr(n,i),t===1&&Yt===0&&!(e.mode&1)&&(vf=Vn()+500,s_&&ll()))}function pr(n,e){var t=n.callbackNode;mO(n,e);var i=D0(n,n===pi?yi:0);if(i===0)t!==null&&LT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&LT(t),e===1)n.tag===0?pk(CR.bind(null,n)):O2(CR.bind(null,n)),ck(function(){!(Yt&6)&&ll()}),t=null;else{switch(d2(i)){case 1:t=hM;break;case 4:t=c2;break;case 16:t=B0;break;case 536870912:t=f2;break;default:t=B0}t=NB(t,bB.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function bB(n,e){if(h0=-1,d0=0,Yt&6)throw Error(De(327));var t=n.callbackNode;if(qc()&&n.callbackNode!==t)return null;var i=D0(n,n===pi?yi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Z0(n,i);else{e=i;var r=Yt;Yt|=2;var s=IB();(pi!==n||yi!==e)&&(Io=null,vf=Vn()+500,su(n,e));do try{Fk();break}catch(a){PB(n,a)}while(!0);EM(),Y0.current=s,Yt=r,qn!==null?e=0:(pi=null,yi=0,e=ni)}if(e!==0){if(e===2&&(r=CA(n),r!==0&&(i=r,e=eS(n,r))),e===1)throw t=kd,su(n,0),Ra(n,i),pr(n,Vn()),t;if(e===6)Ra(n,i);else{if(r=n.current.alternate,!(i&30)&&!Dk(r)&&(e=Z0(n,i),e===2&&(s=CA(n),s!==0&&(i=s,e=eS(n,s))),e===1))throw t=kd,su(n,0),Ra(n,i),pr(n,Vn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(De(345));case 2:Hl(n,ar,Io);break;case 3:if(Ra(n,i),(i&130023424)===i&&(e=zM+500-Vn(),10<e)){if(D0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Zi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=LA(Hl.bind(null,n,ar,Io),e);break}Hl(n,ar,Io);break;case 4:if(Ra(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Ls(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Vn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Bk(i/1960))-i,10<i){n.timeoutHandle=LA(Hl.bind(null,n,ar,Io),i);break}Hl(n,ar,Io);break;case 5:Hl(n,ar,Io);break;default:throw Error(De(329))}}}return pr(n,Vn()),n.callbackNode===t?bB.bind(null,n):null}function eS(n,e){var t=rd;return n.current.memoizedState.isDehydrated&&(su(n,e).flags|=256),n=Z0(n,e),n!==2&&(e=ar,ar=t,e!==null&&tS(e)),n}function tS(n){ar===null?ar=n:ar.push.apply(ar,n)}function Dk(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!ks(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ra(n,e){for(e&=~kM,e&=~u_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ls(e),i=1<<t;n[t]=-1,e&=~i}}function CR(n){if(Yt&6)throw Error(De(327));qc();var e=D0(n,0);if(!(e&1))return pr(n,Vn()),null;var t=Z0(n,e);if(n.tag!==0&&t===2){var i=CA(n);i!==0&&(e=i,t=eS(n,i))}if(t===1)throw t=kd,su(n,0),Ra(n,e),pr(n,Vn()),t;if(t===6)throw Error(De(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Hl(n,ar,Io),pr(n,Vn()),null}function HM(n,e){var t=Yt;Yt|=1;try{return n(e)}finally{Yt=t,Yt===0&&(vf=Vn()+500,s_&&ll())}}function Mu(n){Ia!==null&&Ia.tag===0&&!(Yt&6)&&qc();var e=Yt;Yt|=1;var t=hs.transition,i=an;try{if(hs.transition=null,an=1,n)return n()}finally{an=i,hs.transition=t,Yt=e,!(Yt&6)&&ll()}}function GM(){br=kc.current,yn(kc)}function su(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,uk(t)),qn!==null)for(t=qn.return;t!==null;){var i=t;switch(SM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&O0();break;case 3:mf(),yn(hr),yn(zi),IM();break;case 5:PM(i);break;case 4:mf();break;case 13:yn(Rn);break;case 19:yn(Rn);break;case 10:CM(i.type._context);break;case 22:case 23:GM()}t=t.return}if(pi=n,qn=n=Ka(n.current,null),yi=br=e,ni=0,kd=null,kM=u_=Su=0,ar=rd=null,Kl!==null){for(e=0;e<Kl.length;e++)if(t=Kl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Kl=null}return n}function PB(n,e){do{var t=qn;try{if(EM(),u0.current=K0,J0){for(var i=Bn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}J0=!1}if(Au=0,fi=ti=Bn=null,nd=!1,Nd=0,OM.current=null,t===null||t.return===null){ni=1,kd=e,qn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=yi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=dR(o);if(m!==null){m.flags&=-257,pR(m,o,a,s,e),m.mode&1&&hR(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){hR(s,u,e),VM();break e}l=Error(De(426))}}else if(Mn&&a.mode&1){var y=dR(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),pR(y,o,a,s,e),MM(gf(l,a));break e}}s=l=gf(l,a),ni!==4&&(ni=2),rd===null?rd=[s]:rd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=dB(s,l,e);oR(s,g);break e;case 1:a=l;var A=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Xa===null||!Xa.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=pB(s,a,e);oR(s,w);break e}}s=s.return}while(s!==null)}DB(t)}catch(P){e=P,qn===t&&t!==null&&(qn=t=t.return);continue}break}while(!0)}function IB(){var n=Y0.current;return Y0.current=K0,n===null?K0:n}function VM(){(ni===0||ni===3||ni===2)&&(ni=4),pi===null||!(Su&268435455)&&!(u_&268435455)||Ra(pi,yi)}function Z0(n,e){var t=Yt;Yt|=2;var i=IB();(pi!==n||yi!==e)&&(Io=null,su(n,e));do try{Lk();break}catch(r){PB(n,r)}while(!0);if(EM(),Yt=t,Y0.current=i,qn!==null)throw Error(De(261));return pi=null,yi=0,ni}function Lk(){for(;qn!==null;)BB(qn)}function Fk(){for(;qn!==null&&!oO();)BB(qn)}function BB(n){var e=FB(n.alternate,n,br);n.memoizedProps=n.pendingProps,e===null?DB(n):qn=e,OM.current=null}function DB(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Rk(t,e),t!==null){t.flags&=32767,qn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ni=6,qn=null;return}}else if(t=Tk(t,e,br),t!==null){qn=t;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=n}while(e!==null);ni===0&&(ni=5)}function Hl(n,e,t){var i=an,r=hs.transition;try{hs.transition=null,an=1,Nk(n,e,t,i)}finally{hs.transition=r,an=i}return null}function Nk(n,e,t,i){do qc();while(Ia!==null);if(Yt&6)throw Error(De(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(De(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(gO(n,s),n===pi&&(qn=pi=null,yi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Zm||(Zm=!0,NB(B0,function(){return qc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=hs.transition,hs.transition=null;var o=an;an=1;var a=Yt;Yt|=4,OM.current=null,Pk(n,t),TB(t,n),nk(BA),L0=!!IA,BA=IA=null,n.current=t,Ik(t),aO(),Yt=a,an=o,hs.transition=s}else n.current=t;if(Zm&&(Zm=!1,Ia=n,Q0=r),s=n.pendingLanes,s===0&&(Xa=null),cO(t.stateNode),pr(n,Vn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(j0)throw j0=!1,n=qA,qA=null,n;return Q0&1&&n.tag!==0&&qc(),s=n.pendingLanes,s&1?n===$A?sd++:(sd=0,$A=n):sd=0,ll(),null}function qc(){if(Ia!==null){var n=d2(Q0),e=hs.transition,t=an;try{if(hs.transition=null,an=16>n?16:n,Ia===null)var i=!1;else{if(n=Ia,Ia=null,Q0=0,Yt&6)throw Error(De(331));var r=Yt;for(Yt|=4,tt=n.current;tt!==null;){var s=tt,o=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(tt=u;tt!==null;){var h=tt;switch(h.tag){case 0:case 11:case 15:id(8,h,s)}var d=h.child;if(d!==null)d.return=h,tt=d;else for(;tt!==null;){h=tt;var p=h.sibling,m=h.return;if(wB(h),h===u){tt=null;break}if(p!==null){p.return=m,tt=p;break}tt=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,tt=o;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:id(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,tt=g;break e}tt=s.return}}var A=n.current;for(tt=A;tt!==null;){o=tt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,tt=S;else e:for(o=A;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:l_(9,a)}}catch(P){Nn(a,a.return,P)}if(a===o){tt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,tt=w;break e}tt=a.return}}if(Yt=r,ll(),oo&&typeof oo.onPostCommitFiberRoot=="function")try{oo.onPostCommitFiberRoot(e_,n)}catch{}i=!0}return i}finally{an=t,hs.transition=e}}return!1}function TR(n,e,t){e=gf(t,e),e=dB(n,e,1),n=Wa(n,e,1),e=Zi(),n!==null&&(mp(n,1,e),pr(n,e))}function Nn(n,e,t){if(n.tag===3)TR(n,n,t);else for(;e!==null;){if(e.tag===3){TR(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xa===null||!Xa.has(i))){n=gf(t,n),n=pB(e,n,1),e=Wa(e,n,1),n=Zi(),e!==null&&(mp(e,1,n),pr(e,n));break}}e=e.return}}function Uk(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Zi(),n.pingedLanes|=n.suspendedLanes&t,pi===n&&(yi&t)===t&&(ni===4||ni===3&&(yi&130023424)===yi&&500>Vn()-zM?su(n,0):kM|=t),pr(n,e)}function LB(n,e){e===0&&(n.mode&1?(e=Hm,Hm<<=1,!(Hm&130023424)&&(Hm=4194304)):e=1);var t=Zi();n=Yo(n,e),n!==null&&(mp(n,e,t),pr(n,t))}function Ok(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),LB(n,t)}function kk(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(De(314))}i!==null&&i.delete(e),LB(n,t)}var FB;FB=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||hr.current)ur=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ur=!1,Ck(n,e,t);ur=!!(n.flags&131072)}else ur=!1,Mn&&e.flags&1048576&&k2(e,H0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;f0(n,e),n=e.pendingProps;var r=hf(e,zi.current);Zc(e,t),r=DM(null,e,i,n,r,t);var s=LM();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dr(i)?(s=!0,k0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,RM(e),r.updater=a_,e.stateNode=r,r._reactInternals=e,HA(e,i,n,t),e=WA(null,e,i,!0,s,t)):(e.tag=0,Mn&&s&&AM(e),Yi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(f0(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Hk(i),n=Ts(i,n),r){case 0:e=VA(null,e,i,n,t);break e;case 1:e=vR(null,e,i,n,t);break e;case 11:e=mR(null,e,i,n,t);break e;case 14:e=gR(null,e,i,Ts(i.type,n),t);break e}throw Error(De(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ts(i,r),VA(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ts(i,r),vR(n,e,i,r,t);case 3:e:{if(_B(e),n===null)throw Error(De(387));i=e.pendingProps,s=e.memoizedState,r=s.element,X2(n,e),W0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=gf(Error(De(423)),e),e=_R(n,e,i,t,r);break e}else if(i!==r){r=gf(Error(De(424)),e),e=_R(n,e,i,t,r);break e}else for(Lr=Va(e.stateNode.containerInfo.firstChild),Nr=e,Mn=!0,Ps=null,t=V2(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(df(),i===r){e=jo(n,e,t);break e}Yi(n,e,i,t)}e=e.child}return e;case 5:return J2(e),n===null&&OA(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,DA(i,r)?o=null:s!==null&&DA(i,s)&&(e.flags|=32),vB(n,e),Yi(n,e,o,t),e.child;case 6:return n===null&&OA(e),null;case 13:return yB(n,e,t);case 4:return bM(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=pf(e,null,i,t):Yi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ts(i,r),mR(n,e,i,r,t);case 7:return Yi(n,e,e.pendingProps,t),e.child;case 8:return Yi(n,e,e.pendingProps.children,t),e.child;case 12:return Yi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,pn(G0,i._currentValue),i._currentValue=o,s!==null)if(ks(s.value,o)){if(s.children===r.children&&!hr.current){e=jo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Wo(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),kA(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(De(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),kA(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Yi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Zc(e,t),r=ds(r),i=i(r),e.flags|=1,Yi(n,e,i,t),e.child;case 14:return i=e.type,r=Ts(i,e.pendingProps),r=Ts(i.type,r),gR(n,e,i,r,t);case 15:return mB(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Ts(i,r),f0(n,e),e.tag=1,dr(i)?(n=!0,k0(e)):n=!1,Zc(e,t),hB(e,i,r),HA(e,i,r,t),WA(null,e,i,!0,n,t);case 19:return xB(n,e,t);case 22:return gB(n,e,t)}throw Error(De(156,e.tag))};function NB(n,e){return u2(n,e)}function zk(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(n,e,t,i){return new zk(n,e,t,i)}function WM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hk(n){if(typeof n=="function")return WM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===uM)return 11;if(n===cM)return 14}return 2}function Ka(n,e){var t=n.alternate;return t===null?(t=ls(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function p0(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")WM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case bc:return ou(t.children,r,s,e);case lM:o=8,r|=8;break;case fA:return n=ls(12,t,e,r|2),n.elementType=fA,n.lanes=s,n;case hA:return n=ls(13,t,e,r),n.elementType=hA,n.lanes=s,n;case dA:return n=ls(19,t,e,r),n.elementType=dA,n.lanes=s,n;case JI:return c_(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case WI:o=10;break e;case XI:o=9;break e;case uM:o=11;break e;case cM:o=14;break e;case wa:o=16,i=null;break e}throw Error(De(130,n==null?n:typeof n,""))}return e=ls(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ou(n,e,t,i){return n=ls(7,n,i,e),n.lanes=t,n}function c_(n,e,t,i){return n=ls(22,n,i,e),n.elementType=JI,n.lanes=t,n.stateNode={isHidden:!1},n}function H1(n,e,t){return n=ls(6,n,null,e),n.lanes=t,n}function G1(n,e,t){return e=ls(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Gk(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S1(0),this.expirationTimes=S1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function XM(n,e,t,i,r,s,o,a,l){return n=new Gk(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ls(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},RM(s),n}function Vk(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function UB(n){if(!n)return $a;n=n._reactInternals;e:{if(Du(n)!==n||n.tag!==1)throw Error(De(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(De(171))}if(n.tag===1){var t=n.type;if(dr(t))return U2(n,t,e)}return e}function OB(n,e,t,i,r,s,o,a,l){return n=XM(t,i,!0,n,r,s,o,a,l),n.context=UB(null),t=n.current,i=Zi(),r=Ja(t),s=Wo(i,r),s.callback=e??null,Wa(t,s,r),n.current.lanes=r,mp(n,r,i),pr(n,i),n}function f_(n,e,t,i){var r=e.current,s=Zi(),o=Ja(r);return t=UB(t),e.context===null?e.context=t:e.pendingContext=t,e=Wo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Wa(r,e,o),n!==null&&(Fs(n,r,o,s),l0(n,r,o)),o}function q0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function RR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function JM(n,e){RR(n,e),(n=n.alternate)&&RR(n,e)}function Wk(){return null}var kB=typeof reportError=="function"?reportError:function(n){console.error(n)};function KM(n){this._internalRoot=n}h_.prototype.render=KM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(De(409));f_(n,e,null,null)};h_.prototype.unmount=KM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Mu(function(){f_(null,n,null,null)}),e[Ko]=null}};function h_(n){this._internalRoot=n}h_.prototype.unstable_scheduleHydration=function(n){if(n){var e=g2();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ta.length&&e!==0&&e<Ta[t].priority;t++);Ta.splice(t,0,n),t===0&&_2(n)}};function YM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function d_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bR(){}function Xk(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=q0(o);s.call(u)}}var o=OB(e,i,n,0,null,!1,!1,"",bR);return n._reactRootContainer=o,n[Ko]=o.current,Id(n.nodeType===8?n.parentNode:n),Mu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=q0(l);a.call(u)}}var l=XM(n,0,!1,null,null,!1,!1,"",bR);return n._reactRootContainer=l,n[Ko]=l.current,Id(n.nodeType===8?n.parentNode:n),Mu(function(){f_(e,l,t,i)}),l}function p_(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=q0(o);a.call(l)}}f_(e,o,n,r)}else o=Xk(t,e,n,r,i);return q0(o)}p2=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Wh(e.pendingLanes);t!==0&&(dM(e,t|1),pr(e,Vn()),!(Yt&6)&&(vf=Vn()+500,ll()))}break;case 13:Mu(function(){var i=Yo(n,1);if(i!==null){var r=Zi();Fs(i,n,1,r)}}),JM(n,1)}};pM=function(n){if(n.tag===13){var e=Yo(n,134217728);if(e!==null){var t=Zi();Fs(e,n,134217728,t)}JM(n,134217728)}};m2=function(n){if(n.tag===13){var e=Ja(n),t=Yo(n,e);if(t!==null){var i=Zi();Fs(t,n,e,i)}JM(n,e)}};g2=function(){return an};v2=function(n,e){var t=an;try{return an=n,e()}finally{an=t}};MA=function(n,e,t){switch(e){case"input":if(gA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=r_(i);if(!r)throw Error(De(90));YI(i),gA(i,r)}}}break;case"textarea":QI(n,t);break;case"select":e=t.value,e!=null&&Kc(n,!!t.multiple,e,!1)}};i2=HM;r2=Mu;var Jk={usingClientEntryPoint:!1,Events:[vp,Dc,r_,t2,n2,HM]},Sh={findFiberByHostInstance:Jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kk={bundleType:Sh.bundleType,version:Sh.version,rendererPackageName:Sh.rendererPackageName,rendererConfig:Sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=a2(n),n===null?null:n.stateNode},findFiberByHostInstance:Sh.findFiberByHostInstance||Wk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qm.isDisabled&&qm.supportsFiber)try{e_=qm.inject(Kk),oo=qm}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk;Vr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YM(e))throw Error(De(200));return Vk(n,e,null,t)};Vr.createRoot=function(n,e){if(!YM(n))throw Error(De(299));var t=!1,i="",r=kB;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=XM(n,1,!1,null,null,t,!1,i,r),n[Ko]=e.current,Id(n.nodeType===8?n.parentNode:n),new KM(e)};Vr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(De(188)):(n=Object.keys(n).join(","),Error(De(268,n)));return n=a2(e),n=n===null?null:n.stateNode,n};Vr.flushSync=function(n){return Mu(n)};Vr.hydrate=function(n,e,t){if(!d_(e))throw Error(De(200));return p_(null,n,e,!0,t)};Vr.hydrateRoot=function(n,e,t){if(!YM(n))throw Error(De(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=kB;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=OB(e,null,n,1,t??null,r,!1,s,o),n[Ko]=e.current,Id(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new h_(e)};Vr.render=function(n,e,t){if(!d_(e))throw Error(De(200));return p_(null,n,e,!1,t)};Vr.unmountComponentAtNode=function(n){if(!d_(n))throw Error(De(40));return n._reactRootContainer?(Mu(function(){p_(null,null,n,!1,function(){n._reactRootContainer=null,n[Ko]=null})}),!0):!1};Vr.unstable_batchedUpdates=HM;Vr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!d_(t))throw Error(De(200));if(n==null||n._reactInternals===void 0)throw Error(De(38));return p_(n,e,t,!1,i)};Vr.version="18.3.1-next-f1338f8080-20240426";function zB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zB)}catch(n){console.error(n)}}zB(),zI.exports=Vr;var Yk=zI.exports,jM,PR=Yk;jM=PR.createRoot,PR.hydrateRoot;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lu="168",jk={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Qk={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},HB=0,nS=1,GB=2,Zk=3,VB=0,m_=1,od=2,Rs=3,ho=0,Fi=1,lr=2,lo=0,au=1,$0=2,iS=3,rS=4,WB=5,ba=100,XB=101,JB=102,KB=103,YB=104,jB=200,QB=201,ZB=202,qB=203,ev=204,tv=205,$B=206,e3=207,t3=208,n3=209,i3=210,r3=211,s3=212,o3=213,a3=214,l3=0,u3=1,c3=2,zd=3,f3=4,h3=5,d3=6,p3=7,yp=0,m3=1,g3=2,uo=0,v3=1,_3=2,y3=3,QM=4,x3=5,A3=6,S3=7,sS="attached",M3="detached",el=300,po=301,tl=302,_f=303,Hd=304,Vf=306,nl=1e3,Xn=1001,yf=1002,ii=1003,g_=1004,qk=1004,jl=1005,$k=1005,Jt=1006,$c=1007,e4=1007,us=1008,oS=1008,yr=1009,v_=1010,__=1011,xf=1012,xp=1013,mo=1014,En=1015,ri=1016,y_=1017,x_=1018,wu=1020,ZM=35902,qM=1021,$M=1022,Jn=1023,ew=1024,tw=1025,lu=1026,Eu=1027,Ap=1028,Sp=1029,nw=1030,A_=1031,t4=1032,S_=1033,ad=33776,ld=33777,ud=33778,cd=33779,nv=35840,iv=35841,rv=35842,sv=35843,ov=36196,av=37492,lv=37496,uv=37808,cv=37809,fv=37810,hv=37811,dv=37812,pv=37813,mv=37814,gv=37815,vv=37816,_v=37817,yv=37818,xv=37819,Av=37820,Sv=37821,fd=36492,Mv=36494,wv=36495,iw=36283,Ev=36284,Cv=36285,Tv=36286,w3=2200,E3=2201,C3=2202,Af=2300,Sf=2301,m0=2302,Ql=2400,Zl=2401,Gd=2402,M_=2500,rw=2501,T3=0,sw=1,Rv=2,R3=3200,b3=3201,n4=3202,i4=3203,ul=0,P3=1,Oo="",Pr="srgb",ms="srgb-linear",w_="display-p3",Mp="display-p3-linear",Vd="linear",fn="srgb",Wd="rec709",Xd="p3",r4=0,Gl=7680,s4=7681,o4=7682,a4=7683,l4=34055,u4=34056,c4=5386,f4=512,h4=513,d4=514,p4=515,m4=516,g4=517,v4=518,aS=519,I3=512,B3=513,D3=514,ow=515,L3=516,F3=517,N3=518,U3=519,Jd=35044,_4=35048,y4=35040,x4=35045,A4=35049,S4=35041,M4=35046,w4=35050,E4=35042,C4="100",lS="300 es",ro=2e3,Kd=2001;class _o{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Pi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let IR=1234567;const uu=Math.PI/180,Mf=180/Math.PI;function Ur(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Pi[n&255]+Pi[n>>8&255]+Pi[n>>16&255]+Pi[n>>24&255]+"-"+Pi[e&255]+Pi[e>>8&255]+"-"+Pi[e>>16&15|64]+Pi[e>>24&255]+"-"+Pi[t&63|128]+Pi[t>>8&255]+"-"+Pi[t>>16&255]+Pi[t>>24&255]+Pi[i&255]+Pi[i>>8&255]+Pi[i>>16&255]+Pi[i>>24&255]).toLowerCase()}function Un(n,e,t){return Math.max(e,Math.min(t,n))}function aw(n,e){return(n%e+e)%e}function T4(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function R4(n,e,t){return n!==e?(t-n)/(e-n):0}function hd(n,e,t){return(1-t)*n+t*e}function b4(n,e,t,i){return hd(n,e,1-Math.exp(-t*i))}function P4(n,e=1){return e-Math.abs(aw(n,e*2)-e)}function I4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function B4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function D4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function L4(n,e){return n+Math.random()*(e-n)}function F4(n){return n*(.5-Math.random())}function N4(n){n!==void 0&&(IR=n);let e=IR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function U4(n){return n*uu}function O4(n){return n*Mf}function k4(n){return(n&n-1)===0&&n!==0}function z4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function H4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function G4(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*d,l*p,a*u);break;case"YZY":n.set(l*p,a*h,l*d,a*u);break;case"ZXZ":n.set(l*d,l*p,a*h,a*u);break;case"XZX":n.set(a*h,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*h,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ji(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const lw={DEG2RAD:uu,RAD2DEG:Mf,generateUUID:Ur,clamp:Un,euclideanModulo:aw,mapLinear:T4,inverseLerp:R4,lerp:hd,damp:b4,pingpong:P4,smoothstep:I4,smootherstep:B4,randInt:D4,randFloat:L4,randFloatSpread:F4,seededRandom:N4,degToRad:U4,radToDeg:O4,isPowerOfTwo:k4,ceilPowerOfTwo:z4,floorPowerOfTwo:H4,setQuaternionFromProperEuler:G4,normalize:bt,denormalize:ji};class Ee{constructor(e=0,t=0){Ee.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Un(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,t,i,r,s,o,a,l,u){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],d=i[7],p=i[2],m=i[5],v=i[8],x=r[0],y=r[3],g=r[6],A=r[1],S=r[4],w=r[7],P=r[2],T=r[5],R=r[8];return s[0]=o*x+a*A+l*P,s[3]=o*y+a*S+l*T,s[6]=o*g+a*w+l*R,s[1]=u*x+h*A+d*P,s[4]=u*y+h*S+d*T,s[7]=u*g+h*w+d*R,s[2]=p*x+m*A+v*P,s[5]=p*y+m*S+v*T,s[8]=p*g+m*w+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*o-a*u,p=a*l-h*s,m=u*s-o*l,v=t*d+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=d*x,e[1]=(r*u-h*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(h*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=m*x,e[7]=(i*l-u*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(V1.makeScale(e,t)),this}rotate(e){return this.premultiply(V1.makeRotation(-e)),this}translate(e,t){return this.premultiply(V1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const V1=new Rt;function O3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const V4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zc(n,e){return new V4[n](e)}function Yd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function k3(){const n=Yd("canvas");return n.style.display="block",n}const BR={};function ef(n){n in BR||(BR[n]=!0,console.warn(n))}function W4(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const DR=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LR=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Mh={[ms]:{transfer:Vd,primaries:Wd,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Pr]:{transfer:fn,primaries:Wd,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Mp]:{transfer:Vd,primaries:Xd,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(LR),fromReference:n=>n.applyMatrix3(DR)},[w_]:{transfer:fn,primaries:Xd,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(LR),fromReference:n=>n.applyMatrix3(DR).convertLinearToSRGB()}},X4=new Set([ms,Mp]),$t={enabled:!0,_workingColorSpace:ms,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!X4.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Mh[e].toReference,r=Mh[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Mh[n].primaries},getTransfer:function(n){return n===Oo?Vd:Mh[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Mh[e].luminanceCoefficients)}};function tf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function W1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ec;class z3{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ec===void 0&&(ec=Yd("canvas")),ec.width=e.width,ec.height=e.height;const i=ec.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ec}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Yd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=tf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(tf(t[i]/255)*255):t[i]=tf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let J4=0;class ql{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:J4++}),this.uuid=Ur(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(X1(r[o].image)):s.push(X1(r[o]))}else s=X1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function X1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?z3.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let K4=0;class en extends _o{constructor(e=en.DEFAULT_IMAGE,t=en.DEFAULT_MAPPING,i=Xn,r=Xn,s=Jt,o=us,a=Jn,l=yr,u=en.DEFAULT_ANISOTROPY,h=Oo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:K4++}),this.uuid=Ur(),this.name="",this.source=new ql(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ee(0,0),this.repeat=new Ee(1,1),this.center=new Ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==el)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case nl:e.x=e.x-Math.floor(e.x);break;case Xn:e.x=e.x<0?0:1;break;case yf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case nl:e.y=e.y-Math.floor(e.y);break;case Xn:e.y=e.y<0?0:1;break;case yf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}en.DEFAULT_IMAGE=null;en.DEFAULT_MAPPING=el;en.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,i=0,r=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],h=l[4],d=l[8],p=l[1],m=l[5],v=l[9],x=l[2],y=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-x)<.01&&Math.abs(v-y)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+x)<.1&&Math.abs(v+y)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,w=(m+1)/2,P=(g+1)/2,T=(h+p)/4,R=(d+x)/4,D=(v+y)/4;return S>w&&S>P?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=T/i,s=R/i):w>P?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=T/r,s=D/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=R/s,r=D/s),this.set(i,r,s,t),this}let A=Math.sqrt((y-v)*(y-v)+(d-x)*(d-x)+(p-h)*(p-h));return Math.abs(A)<.001&&(A=1),this.x=(y-v)/A,this.y=(d-x)/A,this.z=(p-h)/A,this.w=Math.acos((u+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class H3 extends _o{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new en(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ql(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xr extends H3{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class E_ extends en{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ii,this.minFilter=ii,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Y4 extends xr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new E_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class uw extends en{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ii,this.minFilter=ii,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class j4 extends xr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new uw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ni{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=x;return}if(d!==x||l!==p||u!==m||h!==v){let y=1-a;const g=l*p+u*m+h*v+d*x,A=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const P=Math.sqrt(S),T=Math.atan2(P,g*A);y=Math.sin(y*T)/P,a=Math.sin(a*T)/P}const w=a*A;if(l=l*y+p*w,u=u*y+m*w,h=h*y+v*w,d=d*y+x*w,y===1-a){const P=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=P,u*=P,h*=P,d*=P}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*d+l*m-u*p,e[t+1]=l*v+h*p+u*d-a*m,e[t+2]=u*v+h*m+a*p-l*d,e[t+3]=h*v-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*d+u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d-p*m*v;break;case"YXZ":this._x=p*h*d+u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d+p*m*v;break;case"ZXY":this._x=p*h*d-u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d-p*m*v;break;case"ZYX":this._x=p*h*d-u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d+p*m*v;break;case"YZX":this._x=p*h*d+u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d-p*m*v;break;case"XZY":this._x=p*h*d-u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-t)*h)/u,p=Math.sin(t*h)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),h=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*u+o*d-a*h,this.y=i+l*h+a*u-s*d,this.z=r+l*d+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return J1.copy(this).projectOnVector(e),this.sub(J1)}reflect(e){return this.sub(J1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Un(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const J1=new z,FR=new Ni;class Ui{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ms.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ms.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ms.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ms):Ms.fromBufferAttribute(s,o),Ms.applyMatrix4(e.matrixWorld),this.expandByPoint(Ms);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),$m.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),$m.copy(i.boundingBox)),$m.applyMatrix4(e.matrixWorld),this.union($m)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ms),Ms.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wh),eg.subVectors(this.max,wh),tc.subVectors(e.a,wh),nc.subVectors(e.b,wh),ic.subVectors(e.c,wh),da.subVectors(nc,tc),pa.subVectors(ic,nc),El.subVectors(tc,ic);let t=[0,-da.z,da.y,0,-pa.z,pa.y,0,-El.z,El.y,da.z,0,-da.x,pa.z,0,-pa.x,El.z,0,-El.x,-da.y,da.x,0,-pa.y,pa.x,0,-El.y,El.x,0];return!K1(t,tc,nc,ic,eg)||(t=[1,0,0,0,1,0,0,0,1],!K1(t,tc,nc,ic,eg))?!1:(tg.crossVectors(da,pa),t=[tg.x,tg.y,tg.z],K1(t,tc,nc,ic,eg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ms).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ms).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Eo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Eo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Eo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Eo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Eo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Eo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Eo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Eo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Eo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Eo=[new z,new z,new z,new z,new z,new z,new z,new z],Ms=new z,$m=new Ui,tc=new z,nc=new z,ic=new z,da=new z,pa=new z,El=new z,wh=new z,eg=new z,tg=new z,Cl=new z;function K1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Cl.fromArray(n,s);const a=r.x*Math.abs(Cl.x)+r.y*Math.abs(Cl.y)+r.z*Math.abs(Cl.z),l=e.dot(Cl),u=t.dot(Cl),h=i.dot(Cl);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const Q4=new Ui,Eh=new z,Y1=new z;class xi{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Q4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Eh.subVectors(e,this.center);const t=Eh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Eh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Y1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Eh.copy(e.center).add(Y1)),this.expandByPoint(Eh.copy(e.center).sub(Y1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Co=new z,j1=new z,ng=new z,ma=new z,Q1=new z,ig=new z,Z1=new z;class Wf{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Co)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Co.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Co.copy(this.origin).addScaledVector(this.direction,t),Co.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){j1.copy(e).add(t).multiplyScalar(.5),ng.copy(t).sub(e).normalize(),ma.copy(this.origin).sub(j1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ng),a=ma.dot(this.direction),l=-ma.dot(ng),u=ma.lengthSq(),h=Math.abs(1-o*o);let d,p,m,v;if(h>0)if(d=o*l-a,p=o*a-l,v=s*h,d>=0)if(p>=-v)if(p<=v){const x=1/h;d*=x,p*=x,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(j1).addScaledVector(ng,p),m}intersectSphere(e,t){Co.subVectors(e.center,this.origin);const i=Co.dot(this.direction),r=Co.dot(Co)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Co)!==null}intersectTriangle(e,t,i,r,s){Q1.subVectors(t,e),ig.subVectors(i,e),Z1.crossVectors(Q1,ig);let o=this.direction.dot(Z1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ma.subVectors(this.origin,e);const l=a*this.direction.dot(ig.crossVectors(ma,ig));if(l<0)return null;const u=a*this.direction.dot(Q1.cross(ma));if(u<0||l+u>o)return null;const h=-a*ma.dot(Z1);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dt{constructor(e,t,i,r,s,o,a,l,u,h,d,p,m,v,x,y){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,h,d,p,m,v,x,y)}set(e,t,i,r,s,o,a,l,u,h,d,p,m,v,x,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=v,g[11]=x,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/rc.setFromMatrixColumn(e,0).length(),s=1/rc.setFromMatrixColumn(e,1).length(),o=1/rc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,v=a*h,x=a*d;t[0]=l*h,t[4]=-l*d,t[8]=u,t[1]=m+v*u,t[5]=p-x*u,t[9]=-a*l,t[2]=x-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,v=u*h,x=u*d;t[0]=p+x*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=x+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,v=u*h,x=u*d;t[0]=p-x*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=x-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,v=a*h,x=a*d;t[0]=l*h,t[4]=v*u-m,t[8]=p*u+x,t[1]=l*d,t[5]=x*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,x=a*u;t[0]=l*h,t[4]=x-p*d,t[8]=v*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*d+v,t[10]=p-x*d}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,x=a*u;t[0]=l*h,t[4]=-d,t[8]=u*h,t[1]=p*d+x,t[5]=o*h,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*h,t[10]=x*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Z4,e,q4)}lookAt(e,t,i){const r=this.elements;return Cr.subVectors(e,t),Cr.lengthSq()===0&&(Cr.z=1),Cr.normalize(),ga.crossVectors(i,Cr),ga.lengthSq()===0&&(Math.abs(i.z)===1?Cr.x+=1e-4:Cr.z+=1e-4,Cr.normalize(),ga.crossVectors(i,Cr)),ga.normalize(),rg.crossVectors(Cr,ga),r[0]=ga.x,r[4]=rg.x,r[8]=Cr.x,r[1]=ga.y,r[5]=rg.y,r[9]=Cr.y,r[2]=ga.z,r[6]=rg.z,r[10]=Cr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],d=i[5],p=i[9],m=i[13],v=i[2],x=i[6],y=i[10],g=i[14],A=i[3],S=i[7],w=i[11],P=i[15],T=r[0],R=r[4],D=r[8],C=r[12],b=r[1],N=r[5],J=r[9],K=r[13],q=r[2],te=r[6],Z=r[10],oe=r[14],H=r[3],ee=r[7],Q=r[11],ue=r[15];return s[0]=o*T+a*b+l*q+u*H,s[4]=o*R+a*N+l*te+u*ee,s[8]=o*D+a*J+l*Z+u*Q,s[12]=o*C+a*K+l*oe+u*ue,s[1]=h*T+d*b+p*q+m*H,s[5]=h*R+d*N+p*te+m*ee,s[9]=h*D+d*J+p*Z+m*Q,s[13]=h*C+d*K+p*oe+m*ue,s[2]=v*T+x*b+y*q+g*H,s[6]=v*R+x*N+y*te+g*ee,s[10]=v*D+x*J+y*Z+g*Q,s[14]=v*C+x*K+y*oe+g*ue,s[3]=A*T+S*b+w*q+P*H,s[7]=A*R+S*N+w*te+P*ee,s[11]=A*D+S*J+w*Z+P*Q,s[15]=A*C+S*K+w*oe+P*ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],m=e[14],v=e[3],x=e[7],y=e[11],g=e[15];return v*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*m-i*l*m)+x*(+t*l*m-t*u*p+s*o*p-r*o*m+r*u*h-s*l*h)+y*(+t*u*d-t*a*m-s*o*d+i*o*m+s*a*h-i*u*h)+g*(-r*a*h-t*l*d+t*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],v=e[12],x=e[13],y=e[14],g=e[15],A=d*y*u-x*p*u+x*l*m-a*y*m-d*l*g+a*p*g,S=v*p*u-h*y*u-v*l*m+o*y*m+h*l*g-o*p*g,w=h*x*u-v*d*u+v*a*m-o*x*m-h*a*g+o*d*g,P=v*d*l-h*x*l-v*a*p+o*x*p+h*a*y-o*d*y,T=t*A+i*S+r*w+s*P;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/T;return e[0]=A*R,e[1]=(x*p*s-d*y*s-x*r*m+i*y*m+d*r*g-i*p*g)*R,e[2]=(a*y*s-x*l*s+x*r*u-i*y*u-a*r*g+i*l*g)*R,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*m-i*l*m)*R,e[4]=S*R,e[5]=(h*y*s-v*p*s+v*r*m-t*y*m-h*r*g+t*p*g)*R,e[6]=(v*l*s-o*y*s-v*r*u+t*y*u+o*r*g-t*l*g)*R,e[7]=(o*p*s-h*l*s+h*r*u-t*p*u-o*r*m+t*l*m)*R,e[8]=w*R,e[9]=(v*d*s-h*x*s-v*i*m+t*x*m+h*i*g-t*d*g)*R,e[10]=(o*x*s-v*a*s+v*i*u-t*x*u-o*i*g+t*a*g)*R,e[11]=(h*a*s-o*d*s-h*i*u+t*d*u+o*i*m-t*a*m)*R,e[12]=P*R,e[13]=(h*x*r-v*d*r+v*i*p-t*x*p-h*i*y+t*d*y)*R,e[14]=(v*a*r-o*x*r-v*i*l+t*x*l+o*i*y-t*a*y)*R,e[15]=(o*d*r-h*a*r+h*i*l-t*d*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,d=a+a,p=s*u,m=s*h,v=s*d,x=o*h,y=o*d,g=a*d,A=l*u,S=l*h,w=l*d,P=i.x,T=i.y,R=i.z;return r[0]=(1-(x+g))*P,r[1]=(m+w)*P,r[2]=(v-S)*P,r[3]=0,r[4]=(m-w)*T,r[5]=(1-(p+g))*T,r[6]=(y+A)*T,r[7]=0,r[8]=(v+S)*R,r[9]=(y-A)*R,r[10]=(1-(p+x))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=rc.set(r[0],r[1],r[2]).length();const o=rc.set(r[4],r[5],r[6]).length(),a=rc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ws.copy(this);const u=1/s,h=1/o,d=1/a;return ws.elements[0]*=u,ws.elements[1]*=u,ws.elements[2]*=u,ws.elements[4]*=h,ws.elements[5]*=h,ws.elements[6]*=h,ws.elements[8]*=d,ws.elements[9]*=d,ws.elements[10]*=d,t.setFromRotationMatrix(ws),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ro){const l=this.elements,u=2*s/(t-e),h=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===ro)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Kd)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ro){const l=this.elements,u=1/(t-e),h=1/(i-r),d=1/(o-s),p=(t+e)*u,m=(i+r)*h;let v,x;if(a===ro)v=(o+s)*d,x=-2*d;else if(a===Kd)v=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const rc=new z,ws=new dt,Z4=new z(0,0,0),q4=new z(1,1,1),ga=new z,rg=new z,Cr=new z,NR=new dt,UR=new Ni;class Hr{constructor(e=0,t=0,i=0,r=Hr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Un(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Un(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Un(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Un(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Un(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return NR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(NR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return UR.setFromEuler(this),this.setFromQuaternion(UR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Hr.DEFAULT_ORDER="XYZ";class cu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $4=0;const OR=new z,sc=new Ni,To=new dt,sg=new z,Ch=new z,ez=new z,tz=new Ni,kR=new z(1,0,0),zR=new z(0,1,0),HR=new z(0,0,1),GR={type:"added"},nz={type:"removed"},oc={type:"childadded",child:null},q1={type:"childremoved",child:null};class Gt extends _o{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$4++}),this.uuid=Ur(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DEFAULT_UP.clone();const e=new z,t=new Hr,i=new Ni,r=new z(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dt},normalMatrix:{value:new Rt}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=Gt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sc.setFromAxisAngle(e,t),this.quaternion.multiply(sc),this}rotateOnWorldAxis(e,t){return sc.setFromAxisAngle(e,t),this.quaternion.premultiply(sc),this}rotateX(e){return this.rotateOnAxis(kR,e)}rotateY(e){return this.rotateOnAxis(zR,e)}rotateZ(e){return this.rotateOnAxis(HR,e)}translateOnAxis(e,t){return OR.copy(e).applyQuaternion(this.quaternion),this.position.add(OR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(kR,e)}translateY(e){return this.translateOnAxis(zR,e)}translateZ(e){return this.translateOnAxis(HR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(To.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?sg.copy(e):sg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Ch.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?To.lookAt(Ch,sg,this.up):To.lookAt(sg,Ch,this.up),this.quaternion.setFromRotationMatrix(To),r&&(To.extractRotation(r.matrixWorld),sc.setFromRotationMatrix(To),this.quaternion.premultiply(sc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(GR),oc.child=e,this.dispatchEvent(oc),oc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nz),q1.child=e,this.dispatchEvent(q1),q1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),To.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),To.multiply(e.parent.matrixWorld)),e.applyMatrix4(To),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(GR),oc.child=e,this.dispatchEvent(oc),oc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ch,e,ez),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ch,tz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Gt.DEFAULT_UP=new z(0,1,0);Gt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Es=new z,Ro=new z,$1=new z,bo=new z,ac=new z,lc=new z,VR=new z,ex=new z,tx=new z,nx=new z;class Br{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Es.subVectors(e,t),r.cross(Es);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Es.subVectors(r,t),Ro.subVectors(i,t),$1.subVectors(e,t);const o=Es.dot(Es),a=Es.dot(Ro),l=Es.dot($1),u=Ro.dot(Ro),h=Ro.dot($1),d=o*u-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(u*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,bo)===null?!1:bo.x>=0&&bo.y>=0&&bo.x+bo.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,bo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,bo.x),l.addScaledVector(o,bo.y),l.addScaledVector(a,bo.z),l)}static isFrontFacing(e,t,i,r){return Es.subVectors(i,t),Ro.subVectors(e,t),Es.cross(Ro).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Es.subVectors(this.c,this.b),Ro.subVectors(this.a,this.b),Es.cross(Ro).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Br.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Br.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Br.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Br.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Br.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;ac.subVectors(r,i),lc.subVectors(s,i),ex.subVectors(e,i);const l=ac.dot(ex),u=lc.dot(ex);if(l<=0&&u<=0)return t.copy(i);tx.subVectors(e,r);const h=ac.dot(tx),d=lc.dot(tx);if(h>=0&&d<=h)return t.copy(r);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(ac,o);nx.subVectors(e,s);const m=ac.dot(nx),v=lc.dot(nx);if(v>=0&&m<=v)return t.copy(s);const x=m*u-l*v;if(x<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(lc,a);const y=h*v-m*d;if(y<=0&&d-h>=0&&m-v>=0)return VR.subVectors(s,r),a=(d-h)/(d-h+(m-v)),t.copy(r).addScaledVector(VR,a);const g=1/(y+x+p);return o=x*g,a=p*g,t.copy(i).addScaledVector(ac,o).addScaledVector(lc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const G3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},va={h:0,s:0,l:0},og={h:0,s:0,l:0};function ix(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class He{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Pr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,$t.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=$t.workingColorSpace){return this.r=e,this.g=t,this.b=i,$t.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=$t.workingColorSpace){if(e=aw(e,1),t=Un(t,0,1),i=Un(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=ix(o,s,e+1/3),this.g=ix(o,s,e),this.b=ix(o,s,e-1/3)}return $t.toWorkingColorSpace(this,r),this}setStyle(e,t=Pr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Pr){const i=G3[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=tf(e.r),this.g=tf(e.g),this.b=tf(e.b),this}copyLinearToSRGB(e){return this.r=W1(e.r),this.g=W1(e.g),this.b=W1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pr){return $t.fromWorkingColorSpace(Ii.copy(this),e),Math.round(Un(Ii.r*255,0,255))*65536+Math.round(Un(Ii.g*255,0,255))*256+Math.round(Un(Ii.b*255,0,255))}getHexString(e=Pr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=$t.workingColorSpace){$t.fromWorkingColorSpace(Ii.copy(this),t);const i=Ii.r,r=Ii.g,s=Ii.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=$t.workingColorSpace){return $t.fromWorkingColorSpace(Ii.copy(this),t),e.r=Ii.r,e.g=Ii.g,e.b=Ii.b,e}getStyle(e=Pr){$t.fromWorkingColorSpace(Ii.copy(this),e);const t=Ii.r,i=Ii.g,r=Ii.b;return e!==Pr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(va),this.setHSL(va.h+e,va.s+t,va.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(va),e.getHSL(og);const i=hd(va.h,og.h,t),r=hd(va.s,og.s,t),s=hd(va.l,og.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ii=new He;He.NAMES=G3;let iz=0;class $n extends _o{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iz++}),this.uuid=Ur(),this.name="",this.type="Material",this.blending=au,this.side=ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ev,this.blendDst=tv,this.blendEquation=ba,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new He(0,0,0),this.blendAlpha=0,this.depthFunc=zd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=aS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gl,this.stencilZFail=Gl,this.stencilZPass=Gl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==au&&(i.blending=this.blending),this.side!==ho&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==ev&&(i.blendSrc=this.blendSrc),this.blendDst!==tv&&(i.blendDst=this.blendDst),this.blendEquation!==ba&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==zd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==aS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Gl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Gl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class cr extends $n{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hr,this.combine=yp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ko=rz();function rz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function or(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Un(n,-65504,65504),ko.floatView[0]=n;const e=ko.uint32View[0],t=e>>23&511;return ko.baseTable[t]+((e&8388607)>>ko.shiftTable[t])}function Jh(n){const e=n>>10;return ko.uint32View[0]=ko.mantissaTable[ko.offsetTable[e]+(n&1023)]+ko.exponentTable[e],ko.floatView[0]}const $l={toHalfFloat:or,fromHalfFloat:Jh},jn=new z,ag=new Ee;class jt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Jd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=En,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ef("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)ag.fromBufferAttribute(this,t),ag.applyMatrix3(e),this.setXY(t,ag.x,ag.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix3(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix4(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.applyNormalMatrix(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)jn.fromBufferAttribute(this,t),jn.transformDirection(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ji(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ji(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ji(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ji(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ji(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Jd&&(e.usage=this.usage),e}}class sz extends jt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class oz extends jt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class az extends jt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class lz extends jt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class cw extends jt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class uz extends jt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class fw extends jt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class cz extends jt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Jh(this.array[e*this.itemSize]);return this.normalized&&(t=ji(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=or(t),this}getY(e){let t=Jh(this.array[e*this.itemSize+1]);return this.normalized&&(t=ji(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=or(t),this}getZ(e){let t=Jh(this.array[e*this.itemSize+2]);return this.normalized&&(t=ji(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=or(t),this}getW(e){let t=Jh(this.array[e*this.itemSize+3]);return this.normalized&&(t=ji(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=or(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=or(t),this.array[e+1]=or(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=or(t),this.array[e+1]=or(i),this.array[e+2]=or(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=or(t),this.array[e+1]=or(i),this.array[e+2]=or(r),this.array[e+3]=or(s),this}}class ot extends jt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let fz=0;const ts=new dt,rx=new Gt,uc=new z,Tr=new Ui,Th=new Ui,ci=new z;class Et extends _o{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fz++}),this.uuid=Ur(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(O3(e)?fw:cw)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Rt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ts.makeRotationFromQuaternion(e),this.applyMatrix4(ts),this}rotateX(e){return ts.makeRotationX(e),this.applyMatrix4(ts),this}rotateY(e){return ts.makeRotationY(e),this.applyMatrix4(ts),this}rotateZ(e){return ts.makeRotationZ(e),this.applyMatrix4(ts),this}translate(e,t,i){return ts.makeTranslation(e,t,i),this.applyMatrix4(ts),this}scale(e,t,i){return ts.makeScale(e,t,i),this.applyMatrix4(ts),this}lookAt(e){return rx.lookAt(e),rx.updateMatrix(),this.applyMatrix4(rx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uc).negate(),this.translate(uc.x,uc.y,uc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Tr.setFromBufferAttribute(s),this.morphTargetsRelative?(ci.addVectors(this.boundingBox.min,Tr.min),this.boundingBox.expandByPoint(ci),ci.addVectors(this.boundingBox.max,Tr.max),this.boundingBox.expandByPoint(ci)):(this.boundingBox.expandByPoint(Tr.min),this.boundingBox.expandByPoint(Tr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(e){const i=this.boundingSphere.center;if(Tr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Th.setFromBufferAttribute(a),this.morphTargetsRelative?(ci.addVectors(Tr.min,Th.min),Tr.expandByPoint(ci),ci.addVectors(Tr.max,Th.max),Tr.expandByPoint(ci)):(Tr.expandByPoint(Th.min),Tr.expandByPoint(Th.max))}Tr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ci.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ci));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)ci.fromBufferAttribute(a,u),l&&(uc.fromBufferAttribute(e,u),ci.add(uc)),r=Math.max(r,i.distanceToSquared(ci))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<i.count;D++)a[D]=new z,l[D]=new z;const u=new z,h=new z,d=new z,p=new Ee,m=new Ee,v=new Ee,x=new z,y=new z;function g(D,C,b){u.fromBufferAttribute(i,D),h.fromBufferAttribute(i,C),d.fromBufferAttribute(i,b),p.fromBufferAttribute(s,D),m.fromBufferAttribute(s,C),v.fromBufferAttribute(s,b),h.sub(u),d.sub(u),m.sub(p),v.sub(p);const N=1/(m.x*v.y-v.x*m.y);isFinite(N)&&(x.copy(h).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(N),y.copy(d).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(N),a[D].add(x),a[C].add(x),a[b].add(x),l[D].add(y),l[C].add(y),l[b].add(y))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let D=0,C=A.length;D<C;++D){const b=A[D],N=b.start,J=b.count;for(let K=N,q=N+J;K<q;K+=3)g(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const S=new z,w=new z,P=new z,T=new z;function R(D){P.fromBufferAttribute(r,D),T.copy(P);const C=a[D];S.copy(C),S.sub(P.multiplyScalar(P.dot(C))).normalize(),w.crossVectors(T,C);const N=w.dot(l[D])<0?-1:1;o.setXYZW(D,S.x,S.y,S.z,N)}for(let D=0,C=A.length;D<C;++D){const b=A[D],N=b.start,J=b.count;for(let K=N,q=N+J;K<q;K+=3)R(e.getX(K+0)),R(e.getX(K+1)),R(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new jt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new z,s=new z,o=new z,a=new z,l=new z,u=new z,h=new z,d=new z;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),x=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,y),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),u.fromBufferAttribute(i,y),a.add(h),l.add(h),u.add(h),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ci.fromBufferAttribute(e,t),ci.normalize(),e.setXYZ(t,ci.x,ci.y,ci.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let m=0,v=0;for(let x=0,y=l.length;x<y;x++){a.isInterleavedBufferAttribute?m=l[x]*a.data.stride+a.offset:m=l[x]*h;for(let g=0;g<h;g++)p[v++]=u[m++]}return new jt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Et,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,d=u.length;h<d;h++){const p=u[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const WR=new dt,Tl=new Wf,lg=new xi,XR=new z,cc=new z,fc=new z,hc=new z,sx=new z,ug=new z,cg=new Ee,fg=new Ee,hg=new Ee,JR=new z,KR=new z,YR=new z,dg=new z,pg=new z;class xn extends Gt{constructor(e=new Et,t=new cr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){ug.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],d=s[l];h!==0&&(sx.fromBufferAttribute(d,e),o?ug.addScaledVector(sx,h):ug.addScaledVector(sx.sub(t),h))}t.add(ug)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),lg.copy(i.boundingSphere),lg.applyMatrix4(s),Tl.copy(e.ray).recast(e.near),!(lg.containsPoint(Tl.origin)===!1&&(Tl.intersectSphere(lg,XR)===null||Tl.origin.distanceToSquared(XR)>(e.far-e.near)**2))&&(WR.copy(s).invert(),Tl.copy(e.ray).applyMatrix4(WR),!(i.boundingBox!==null&&Tl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Tl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const y=p[v],g=o[y.materialIndex],A=Math.max(y.start,m.start),S=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let w=A,P=S;w<P;w+=3){const T=a.getX(w),R=a.getX(w+1),D=a.getX(w+2);r=mg(this,g,e,i,u,h,d,T,R,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),x=Math.min(a.count,m.start+m.count);for(let y=v,g=x;y<g;y+=3){const A=a.getX(y),S=a.getX(y+1),w=a.getX(y+2);r=mg(this,o,e,i,u,h,d,A,S,w),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const y=p[v],g=o[y.materialIndex],A=Math.max(y.start,m.start),S=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let w=A,P=S;w<P;w+=3){const T=w,R=w+1,D=w+2;r=mg(this,g,e,i,u,h,d,T,R,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let y=v,g=x;y<g;y+=3){const A=y,S=y+1,w=y+2;r=mg(this,o,e,i,u,h,d,A,S,w),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}}function hz(n,e,t,i,r,s,o,a){let l;if(e.side===Fi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===ho,a),l===null)return null;pg.copy(a),pg.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(pg);return u<t.near||u>t.far?null:{distance:u,point:pg.clone(),object:n}}function mg(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,cc),n.getVertexPosition(l,fc),n.getVertexPosition(u,hc);const h=hz(n,e,t,i,cc,fc,hc,dg);if(h){r&&(cg.fromBufferAttribute(r,a),fg.fromBufferAttribute(r,l),hg.fromBufferAttribute(r,u),h.uv=Br.getInterpolation(dg,cc,fc,hc,cg,fg,hg,new Ee)),s&&(cg.fromBufferAttribute(s,a),fg.fromBufferAttribute(s,l),hg.fromBufferAttribute(s,u),h.uv1=Br.getInterpolation(dg,cc,fc,hc,cg,fg,hg,new Ee)),o&&(JR.fromBufferAttribute(o,a),KR.fromBufferAttribute(o,l),YR.fromBufferAttribute(o,u),h.normal=Br.getInterpolation(dg,cc,fc,hc,JR,KR,YR,new z),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new z,materialIndex:0};Br.getNormal(cc,fc,hc,d.normal),h.face=d}return h}class cl extends Et{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],d=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(u,3)),this.setAttribute("normal",new ot(h,3)),this.setAttribute("uv",new ot(d,2));function v(x,y,g,A,S,w,P,T,R,D,C){const b=w/R,N=P/D,J=w/2,K=P/2,q=T/2,te=R+1,Z=D+1;let oe=0,H=0;const ee=new z;for(let Q=0;Q<Z;Q++){const ue=Q*N-K;for(let me=0;me<te;me++){const Ie=me*b-J;ee[x]=Ie*A,ee[y]=ue*S,ee[g]=q,u.push(ee.x,ee.y,ee.z),ee[x]=0,ee[y]=0,ee[g]=T>0?1:-1,h.push(ee.x,ee.y,ee.z),d.push(me/R),d.push(1-Q/D),oe+=1}}for(let Q=0;Q<D;Q++)for(let ue=0;ue<R;ue++){const me=p+ue+te*Q,Ie=p+ue+te*(Q+1),ae=p+(ue+1)+te*(Q+1),ve=p+(ue+1)+te*Q;l.push(me,Ie,ve),l.push(Ie,ae,ve),H+=6}a.addGroup(m,H,C),m+=H,p+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ki(n){const e={};for(let t=0;t<n.length;t++){const i=wf(n[t]);for(const r in i)e[r]=i[r]}return e}function dz(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function V3(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:$t.workingColorSpace}const C_={clone:wf,merge:Ki};var pz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class mi extends $n{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pz,this.fragmentShader=mz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wf(e.uniforms),this.uniformsGroups=dz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class wp extends Gt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt,this.coordinateSystem=ro}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _a=new z,jR=new Ee,QR=new Ee;let Wn=class extends wp{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Mf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(uu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Mf*2*Math.atan(Math.tan(uu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){_a.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_a.x,_a.y).multiplyScalar(-e/_a.z),_a.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(_a.x,_a.y).multiplyScalar(-e/_a.z)}getViewSize(e,t){return this.getViewBounds(e,jR,QR),t.subVectors(QR,jR)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(uu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const dc=-90,pc=1;class W3 extends Gt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Wn(dc,pc,e,t);r.layers=this.layers,this.add(r);const s=new Wn(dc,pc,e,t);s.layers=this.layers,this.add(s);const o=new Wn(dc,pc,e,t);o.layers=this.layers,this.add(o);const a=new Wn(dc,pc,e,t);a.layers=this.layers,this.add(a);const l=new Wn(dc,pc,e,t);l.layers=this.layers,this.add(l);const u=new Wn(dc,pc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===ro)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Kd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Ep extends en{constructor(e,t,i,r,s,o,a,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:po,super(e,t,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hw extends xr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ep(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new cl(5,5,5),s=new mi({name:"CubemapFromEquirect",uniforms:wf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Fi,blending:lo});s.uniforms.tEquirect.value=t;const o=new xn(r,s),a=t.minFilter;return t.minFilter===us&&(t.minFilter=Jt),new W3(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const ox=new z,gz=new z,vz=new Rt;class Ca{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ox.subVectors(i,t).cross(gz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ox),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vz.getNormalMatrix(e),r=this.coplanarPoint(ox).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rl=new xi,gg=new z;class Cp{constructor(e=new Ca,t=new Ca,i=new Ca,r=new Ca,s=new Ca,o=new Ca){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ro){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],h=r[5],d=r[6],p=r[7],m=r[8],v=r[9],x=r[10],y=r[11],g=r[12],A=r[13],S=r[14],w=r[15];if(i[0].setComponents(l-s,p-u,y-m,w-g).normalize(),i[1].setComponents(l+s,p+u,y+m,w+g).normalize(),i[2].setComponents(l+o,p+h,y+v,w+A).normalize(),i[3].setComponents(l-o,p-h,y-v,w-A).normalize(),i[4].setComponents(l-a,p-d,y-x,w-S).normalize(),t===ro)i[5].setComponents(l+a,p+d,y+x,w+S).normalize();else if(t===Kd)i[5].setComponents(a,d,x,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Rl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rl)}intersectsSprite(e){return Rl.center.set(0,0,0),Rl.radius=.7071067811865476,Rl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(gg.x=r.normal.x>0?e.max.x:e.min.x,gg.y=r.normal.y>0?e.max.y:e.min.y,gg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(gg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function X3(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _z(n){const e=new WeakMap;function t(a,l){const u=a.array,h=a.usage,d=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,h),a.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,u){const h=l.array,d=l._updateRange,p=l.updateRanges;if(n.bindBuffer(u,a),d.count===-1&&p.length===0&&n.bufferSubData(u,0,h),p.length!==0){for(let m=0,v=p.length;m<v;m++){const x=p[m];n.bufferSubData(u,x.start*h.BYTES_PER_ELEMENT,h,x.start,x.count)}l.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(u,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count),d.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}class ta extends Et{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,d=e/a,p=t/l,m=[],v=[],x=[],y=[];for(let g=0;g<h;g++){const A=g*p-o;for(let S=0;S<u;S++){const w=S*d-s;v.push(w,-A,0),x.push(0,0,1),y.push(S/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let A=0;A<a;A++){const S=A+u*g,w=A+u*(g+1),P=A+1+u*(g+1),T=A+1+u*g;m.push(S,w,T),m.push(w,P,T)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(x,3)),this.setAttribute("uv",new ot(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ta(e.width,e.height,e.widthSegments,e.heightSegments)}}var yz=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,xz=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Az=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Sz=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mz=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wz=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ez=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Cz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Tz=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Rz=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,bz=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Pz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Iz=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Bz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Dz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Lz=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Fz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Nz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Oz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Hz=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Gz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Vz=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wz=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Xz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Jz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Kz=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jz="gl_FragColor = linearToOutputTexel( gl_FragColor );",Qz=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Zz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,qz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$z=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,oH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,aH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,vH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_H=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,AH=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SH=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MH=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wH=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,EH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,CH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,TH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,RH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,PH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,IH=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,BH=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,DH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LH=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,FH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,NH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,UH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,OH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,HH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,GH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,VH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,WH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,XH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,KH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,YH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,QH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ZH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,qH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,$H=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,eG=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,tG=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,nG=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,iG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,rG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,sG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,oG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,aG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,lG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,cG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,fG=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hG=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,dG=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,pG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gG=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,vG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _G=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yG=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AG=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MG=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wG=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,EG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,CG=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,IG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,BG=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,DG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LG=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FG=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NG=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,UG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kG=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zG=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GG=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,VG=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,KG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,YG=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,QG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ZG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Pt={alphahash_fragment:yz,alphahash_pars_fragment:xz,alphamap_fragment:Az,alphamap_pars_fragment:Sz,alphatest_fragment:Mz,alphatest_pars_fragment:wz,aomap_fragment:Ez,aomap_pars_fragment:Cz,batching_pars_vertex:Tz,batching_vertex:Rz,begin_vertex:bz,beginnormal_vertex:Pz,bsdfs:Iz,iridescence_fragment:Bz,bumpmap_pars_fragment:Dz,clipping_planes_fragment:Lz,clipping_planes_pars_fragment:Fz,clipping_planes_pars_vertex:Nz,clipping_planes_vertex:Uz,color_fragment:Oz,color_pars_fragment:kz,color_pars_vertex:zz,color_vertex:Hz,common:Gz,cube_uv_reflection_fragment:Vz,defaultnormal_vertex:Wz,displacementmap_pars_vertex:Xz,displacementmap_vertex:Jz,emissivemap_fragment:Kz,emissivemap_pars_fragment:Yz,colorspace_fragment:jz,colorspace_pars_fragment:Qz,envmap_fragment:Zz,envmap_common_pars_fragment:qz,envmap_pars_fragment:$z,envmap_pars_vertex:eH,envmap_physical_pars_fragment:fH,envmap_vertex:tH,fog_vertex:nH,fog_pars_vertex:iH,fog_fragment:rH,fog_pars_fragment:sH,gradientmap_pars_fragment:oH,lightmap_pars_fragment:aH,lights_lambert_fragment:lH,lights_lambert_pars_fragment:uH,lights_pars_begin:cH,lights_toon_fragment:hH,lights_toon_pars_fragment:dH,lights_phong_fragment:pH,lights_phong_pars_fragment:mH,lights_physical_fragment:gH,lights_physical_pars_fragment:vH,lights_fragment_begin:_H,lights_fragment_maps:yH,lights_fragment_end:xH,logdepthbuf_fragment:AH,logdepthbuf_pars_fragment:SH,logdepthbuf_pars_vertex:MH,logdepthbuf_vertex:wH,map_fragment:EH,map_pars_fragment:CH,map_particle_fragment:TH,map_particle_pars_fragment:RH,metalnessmap_fragment:bH,metalnessmap_pars_fragment:PH,morphinstance_vertex:IH,morphcolor_vertex:BH,morphnormal_vertex:DH,morphtarget_pars_vertex:LH,morphtarget_vertex:FH,normal_fragment_begin:NH,normal_fragment_maps:UH,normal_pars_fragment:OH,normal_pars_vertex:kH,normal_vertex:zH,normalmap_pars_fragment:HH,clearcoat_normal_fragment_begin:GH,clearcoat_normal_fragment_maps:VH,clearcoat_pars_fragment:WH,iridescence_pars_fragment:XH,opaque_fragment:JH,packing:KH,premultiplied_alpha_fragment:YH,project_vertex:jH,dithering_fragment:QH,dithering_pars_fragment:ZH,roughnessmap_fragment:qH,roughnessmap_pars_fragment:$H,shadowmap_pars_fragment:eG,shadowmap_pars_vertex:tG,shadowmap_vertex:nG,shadowmask_pars_fragment:iG,skinbase_vertex:rG,skinning_pars_vertex:sG,skinning_vertex:oG,skinnormal_vertex:aG,specularmap_fragment:lG,specularmap_pars_fragment:uG,tonemapping_fragment:cG,tonemapping_pars_fragment:fG,transmission_fragment:hG,transmission_pars_fragment:dG,uv_pars_fragment:pG,uv_pars_vertex:mG,uv_vertex:gG,worldpos_vertex:vG,background_vert:_G,background_frag:yG,backgroundCube_vert:xG,backgroundCube_frag:AG,cube_vert:SG,cube_frag:MG,depth_vert:wG,depth_frag:EG,distanceRGBA_vert:CG,distanceRGBA_frag:TG,equirect_vert:RG,equirect_frag:bG,linedashed_vert:PG,linedashed_frag:IG,meshbasic_vert:BG,meshbasic_frag:DG,meshlambert_vert:LG,meshlambert_frag:FG,meshmatcap_vert:NG,meshmatcap_frag:UG,meshnormal_vert:OG,meshnormal_frag:kG,meshphong_vert:zG,meshphong_frag:HG,meshphysical_vert:GG,meshphysical_frag:VG,meshtoon_vert:WG,meshtoon_frag:XG,points_vert:JG,points_frag:KG,shadow_vert:YG,shadow_frag:jG,sprite_vert:QG,sprite_frag:ZG},Ke={common:{diffuse:{value:new He(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},envMapRotation:{value:new Rt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new Ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new He(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new He(16777215)},opacity:{value:1},center:{value:new Ee(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},Is={basic:{uniforms:Ki([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:Pt.meshbasic_vert,fragmentShader:Pt.meshbasic_frag},lambert:{uniforms:Ki([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new He(0)}}]),vertexShader:Pt.meshlambert_vert,fragmentShader:Pt.meshlambert_frag},phong:{uniforms:Ki([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Pt.meshphong_vert,fragmentShader:Pt.meshphong_frag},standard:{uniforms:Ki([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pt.meshphysical_vert,fragmentShader:Pt.meshphysical_frag},toon:{uniforms:Ki([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new He(0)}}]),vertexShader:Pt.meshtoon_vert,fragmentShader:Pt.meshtoon_frag},matcap:{uniforms:Ki([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:Pt.meshmatcap_vert,fragmentShader:Pt.meshmatcap_frag},points:{uniforms:Ki([Ke.points,Ke.fog]),vertexShader:Pt.points_vert,fragmentShader:Pt.points_frag},dashed:{uniforms:Ki([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pt.linedashed_vert,fragmentShader:Pt.linedashed_frag},depth:{uniforms:Ki([Ke.common,Ke.displacementmap]),vertexShader:Pt.depth_vert,fragmentShader:Pt.depth_frag},normal:{uniforms:Ki([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:Pt.meshnormal_vert,fragmentShader:Pt.meshnormal_frag},sprite:{uniforms:Ki([Ke.sprite,Ke.fog]),vertexShader:Pt.sprite_vert,fragmentShader:Pt.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Pt.background_vert,fragmentShader:Pt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rt}},vertexShader:Pt.backgroundCube_vert,fragmentShader:Pt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pt.cube_vert,fragmentShader:Pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pt.equirect_vert,fragmentShader:Pt.equirect_frag},distanceRGBA:{uniforms:Ki([Ke.common,Ke.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pt.distanceRGBA_vert,fragmentShader:Pt.distanceRGBA_frag},shadow:{uniforms:Ki([Ke.lights,Ke.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:Pt.shadow_vert,fragmentShader:Pt.shadow_frag}};Is.physical={uniforms:Ki([Is.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new Ee(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new He(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new Ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new He(0)},specularColor:{value:new He(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new Ee},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:Pt.meshphysical_vert,fragmentShader:Pt.meshphysical_frag};const vg={r:0,b:0,g:0},bl=new Hr,qG=new dt;function $G(n,e,t,i,r,s,o){const a=new He(0);let l=s===!0?0:1,u,h,d=null,p=0,m=null;function v(A){let S=A.isScene===!0?A.background:null;return S&&S.isTexture&&(S=(A.backgroundBlurriness>0?t:e).get(S)),S}function x(A){let S=!1;const w=v(A);w===null?g(a,l):w&&w.isColor&&(g(w,1),S=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(A,S){const w=v(S);w&&(w.isCubeTexture||w.mapping===Vf)?(h===void 0&&(h=new xn(new cl(1,1,1),new mi({name:"BackgroundCubeMaterial",uniforms:wf(Is.backgroundCube.uniforms),vertexShader:Is.backgroundCube.vertexShader,fragmentShader:Is.backgroundCube.fragmentShader,side:Fi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,T,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),bl.copy(S.backgroundRotation),bl.x*=-1,bl.y*=-1,bl.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(bl.y*=-1,bl.z*=-1),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(qG.makeRotationFromEuler(bl)),h.material.toneMapped=$t.getTransfer(w.colorSpace)!==fn,(d!==w||p!==w.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=w,p=w.version,m=n.toneMapping),h.layers.enableAll(),A.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new xn(new ta(2,2),new mi({name:"BackgroundMaterial",uniforms:wf(Is.background.uniforms),vertexShader:Is.background.vertexShader,fragmentShader:Is.background.fragmentShader,side:ho,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=$t.getTransfer(w.colorSpace)!==fn,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||p!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,p=w.version,m=n.toneMapping),u.layers.enableAll(),A.unshift(u,u.geometry,u.material,0,0,null))}function g(A,S){A.getRGB(vg,V3(n)),i.buffers.color.setClear(vg.r,vg.g,vg.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(A,S=1){a.set(A),l=S,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(A){l=A,g(a,l)},render:x,addToRenderList:y}}function e5(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(b,N,J,K,q){let te=!1;const Z=d(K,J,N);s!==Z&&(s=Z,u(s.object)),te=m(b,K,J,q),te&&v(b,K,J,q),q!==null&&e.update(q,n.ELEMENT_ARRAY_BUFFER),(te||o)&&(o=!1,w(b,N,J,K),q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return n.createVertexArray()}function u(b){return n.bindVertexArray(b)}function h(b){return n.deleteVertexArray(b)}function d(b,N,J){const K=J.wireframe===!0;let q=i[b.id];q===void 0&&(q={},i[b.id]=q);let te=q[N.id];te===void 0&&(te={},q[N.id]=te);let Z=te[K];return Z===void 0&&(Z=p(l()),te[K]=Z),Z}function p(b){const N=[],J=[],K=[];for(let q=0;q<t;q++)N[q]=0,J[q]=0,K[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:J,attributeDivisors:K,object:b,attributes:{},index:null}}function m(b,N,J,K){const q=s.attributes,te=N.attributes;let Z=0;const oe=J.getAttributes();for(const H in oe)if(oe[H].location>=0){const Q=q[H];let ue=te[H];if(ue===void 0&&(H==="instanceMatrix"&&b.instanceMatrix&&(ue=b.instanceMatrix),H==="instanceColor"&&b.instanceColor&&(ue=b.instanceColor)),Q===void 0||Q.attribute!==ue||ue&&Q.data!==ue.data)return!0;Z++}return s.attributesNum!==Z||s.index!==K}function v(b,N,J,K){const q={},te=N.attributes;let Z=0;const oe=J.getAttributes();for(const H in oe)if(oe[H].location>=0){let Q=te[H];Q===void 0&&(H==="instanceMatrix"&&b.instanceMatrix&&(Q=b.instanceMatrix),H==="instanceColor"&&b.instanceColor&&(Q=b.instanceColor));const ue={};ue.attribute=Q,Q&&Q.data&&(ue.data=Q.data),q[H]=ue,Z++}s.attributes=q,s.attributesNum=Z,s.index=K}function x(){const b=s.newAttributes;for(let N=0,J=b.length;N<J;N++)b[N]=0}function y(b){g(b,0)}function g(b,N){const J=s.newAttributes,K=s.enabledAttributes,q=s.attributeDivisors;J[b]=1,K[b]===0&&(n.enableVertexAttribArray(b),K[b]=1),q[b]!==N&&(n.vertexAttribDivisor(b,N),q[b]=N)}function A(){const b=s.newAttributes,N=s.enabledAttributes;for(let J=0,K=N.length;J<K;J++)N[J]!==b[J]&&(n.disableVertexAttribArray(J),N[J]=0)}function S(b,N,J,K,q,te,Z){Z===!0?n.vertexAttribIPointer(b,N,J,q,te):n.vertexAttribPointer(b,N,J,K,q,te)}function w(b,N,J,K){x();const q=K.attributes,te=J.getAttributes(),Z=N.defaultAttributeValues;for(const oe in te){const H=te[oe];if(H.location>=0){let ee=q[oe];if(ee===void 0&&(oe==="instanceMatrix"&&b.instanceMatrix&&(ee=b.instanceMatrix),oe==="instanceColor"&&b.instanceColor&&(ee=b.instanceColor)),ee!==void 0){const Q=ee.normalized,ue=ee.itemSize,me=e.get(ee);if(me===void 0)continue;const Ie=me.buffer,ae=me.type,ve=me.bytesPerElement,ye=ae===n.INT||ae===n.UNSIGNED_INT||ee.gpuType===xp;if(ee.isInterleavedBufferAttribute){const be=ee.data,Xe=be.stride,st=ee.offset;if(be.isInstancedInterleavedBuffer){for(let $e=0;$e<H.locationSize;$e++)g(H.location+$e,be.meshPerAttribute);b.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let $e=0;$e<H.locationSize;$e++)y(H.location+$e);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let $e=0;$e<H.locationSize;$e++)S(H.location+$e,ue/H.locationSize,ae,Q,Xe*ve,(st+ue/H.locationSize*$e)*ve,ye)}else{if(ee.isInstancedBufferAttribute){for(let be=0;be<H.locationSize;be++)g(H.location+be,ee.meshPerAttribute);b.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let be=0;be<H.locationSize;be++)y(H.location+be);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let be=0;be<H.locationSize;be++)S(H.location+be,ue/H.locationSize,ae,Q,ue*ve,ue/H.locationSize*be*ve,ye)}}else if(Z!==void 0){const Q=Z[oe];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(H.location,Q);break;case 3:n.vertexAttrib3fv(H.location,Q);break;case 4:n.vertexAttrib4fv(H.location,Q);break;default:n.vertexAttrib1fv(H.location,Q)}}}}A()}function P(){D();for(const b in i){const N=i[b];for(const J in N){const K=N[J];for(const q in K)h(K[q].object),delete K[q];delete N[J]}delete i[b]}}function T(b){if(i[b.id]===void 0)return;const N=i[b.id];for(const J in N){const K=N[J];for(const q in K)h(K[q].object),delete K[q];delete N[J]}delete i[b.id]}function R(b){for(const N in i){const J=i[N];if(J[b.id]===void 0)continue;const K=J[b.id];for(const q in K)h(K[q].object),delete K[q];delete J[b.id]}}function D(){C(),o=!0,s!==r&&(s=r,u(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:D,resetDefaultState:C,dispose:P,releaseStatesOfGeometry:T,releaseStatesOfProgram:R,initAttributes:x,enableAttribute:y,disableUnusedAttributes:A}}function t5(n,e,t){let i;function r(u){i=u}function s(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function o(u,h,d){d!==0&&(n.drawArraysInstanced(i,u,h,d),t.update(h,i,d))}function a(u,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,d);let m=0;for(let v=0;v<d;v++)m+=h[v];t.update(m,i,1)}function l(u,h,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<u.length;v++)o(u[v],h[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,u,0,h,0,p,0,d);let v=0;for(let x=0;x<d;x++)v+=h[x];for(let x=0;x<p.length;x++)t.update(v,i,p[x])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function n5(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(T){return!(T!==Jn&&i.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(T){const R=T===ri&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(T!==yr&&i.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&T!==En&&!R)}function l(T){if(T==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),A=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=m>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:x,maxAttributes:y,maxVertexUniforms:g,maxVaryings:A,maxFragmentUniforms:S,vertexTextures:w,maxSamples:P}}function i5(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Ca,a=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,x=d.clipIntersection,y=d.clipShadows,g=n.get(d);if(!r||v===null||v.length===0||s&&!y)s?h(null):u();else{const A=s?0:i,S=A*4;let w=g.clippingState||null;l.value=w,w=h(v,p,S,m);for(let P=0;P!==S;++P)w[P]=t[P];g.clippingState=w,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,m,v){const x=d!==null?d.length:0;let y=null;if(x!==0){if(y=l.value,v!==!0||y===null){const g=m+x*4,A=p.matrixWorldInverse;a.getNormalMatrix(A),(y===null||y.length<g)&&(y=new Float32Array(g));for(let S=0,w=m;S!==x;++S,w+=4)o.copy(d[S]).applyMatrix4(A,a),o.normal.toArray(y,w),y[w+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,y}}function r5(n){let e=new WeakMap;function t(o,a){return a===_f?o.mapping=po:a===Hd&&(o.mapping=tl),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===_f||a===Hd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new hw(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class na extends wp{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Hc=4,ZR=[.125,.215,.35,.446,.526,.582],Xl=20,ax=new na,qR=new He;let lx=null,ux=0,cx=0,fx=!1;const Vl=(1+Math.sqrt(5))/2,mc=1/Vl,$R=[new z(-Vl,mc,0),new z(Vl,mc,0),new z(-mc,0,Vl),new z(mc,0,Vl),new z(0,Vl,-mc),new z(0,Vl,mc),new z(-1,1,-1),new z(1,1,-1),new z(-1,1,1),new z(1,1,1)];class uS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){lx=this._renderer.getRenderTarget(),ux=this._renderer.getActiveCubeFace(),cx=this._renderer.getActiveMipmapLevel(),fx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(lx,ux,cx),this._renderer.xr.enabled=fx,e.scissorTest=!1,_g(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===po||e.mapping===tl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),lx=this._renderer.getRenderTarget(),ux=this._renderer.getActiveCubeFace(),cx=this._renderer.getActiveMipmapLevel(),fx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Jt,minFilter:Jt,generateMipmaps:!1,type:ri,format:Jn,colorSpace:ms,depthBuffer:!1},r=eb(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eb(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=s5(s)),this._blurMaterial=o5(s,e,t)}return r}_compileMaterial(e){const t=new xn(this._lodPlanes[0],e);this._renderer.compile(t,ax)}_sceneToCubeUV(e,t,i,r){const a=new Wn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(qR),h.toneMapping=uo,h.autoClear=!1;const m=new cr({name:"PMREM.Background",side:Fi,depthWrite:!1,depthTest:!1}),v=new xn(new cl,m);let x=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,x=!0):(m.color.copy(qR),x=!0);for(let g=0;g<6;g++){const A=g%3;A===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):A===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const S=this._cubeSize;_g(r,A*S,g>2?S:0,S,S),h.setRenderTarget(r),x&&h.render(v,a),h.render(e,a)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===po||e.mapping===tl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=nb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tb());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new xn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;_g(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,ax)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=$R[(r-s-1)%$R.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new xn(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Xl-1),x=s/v,y=isFinite(s)?1+Math.floor(h*x):Xl;y>Xl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Xl}`);const g=[];let A=0;for(let R=0;R<Xl;++R){const D=R/x,C=Math.exp(-D*D/2);g.push(C),R===0?A+=C:R<y&&(A+=2*C)}for(let R=0;R<g.length;R++)g[R]=g[R]/A;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;const w=this._sizeLods[r],P=3*w*(r>S-Hc?r-S+Hc:0),T=4*(this._cubeSize-w);_g(t,P,T,3*w,2*w),l.setRenderTarget(t),l.render(d,ax)}}function s5(n){const e=[],t=[],i=[];let r=n;const s=n-Hc+1+ZR.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Hc?l=ZR[o-n+Hc-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),h=-u,d=1+u,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,v=6,x=3,y=2,g=1,A=new Float32Array(x*v*m),S=new Float32Array(y*v*m),w=new Float32Array(g*v*m);for(let T=0;T<m;T++){const R=T%3*2/3-1,D=T>2?0:-1,C=[R,D,0,R+2/3,D,0,R+2/3,D+1,0,R,D,0,R+2/3,D+1,0,R,D+1,0];A.set(C,x*v*T),S.set(p,y*v*T);const b=[T,T,T,T,T,T];w.set(b,g*v*T)}const P=new Et;P.setAttribute("position",new jt(A,x)),P.setAttribute("uv",new jt(S,y)),P.setAttribute("faceIndex",new jt(w,g)),e.push(P),r>Hc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function eb(n,e,t){const i=new xr(n,e,t);return i.texture.mapping=Vf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function _g(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function o5(n,e,t){const i=new Float32Array(Xl),r=new z(0,1,0);return new mi({name:"SphericalGaussianBlur",defines:{n:Xl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:dw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:lo,depthTest:!1,depthWrite:!1})}function tb(){return new mi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:dw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:lo,depthTest:!1,depthWrite:!1})}function nb(){return new mi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:dw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:lo,depthTest:!1,depthWrite:!1})}function dw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function a5(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===_f||l===Hd,h=l===po||l===tl;if(u||h){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new uS(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return u&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new uS(n)),d=u?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function l5(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&ef("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function u5(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const x=p.morphAttributes[v];for(let y=0,g=x.length;y<g;y++)e.remove(x[y])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const v in m){const x=m[v];for(let y=0,g=x.length;y<g;y++)e.update(x[y],n.ARRAY_BUFFER)}}function u(d){const p=[],m=d.index,v=d.attributes.position;let x=0;if(m!==null){const A=m.array;x=m.version;for(let S=0,w=A.length;S<w;S+=3){const P=A[S+0],T=A[S+1],R=A[S+2];p.push(P,T,T,R,R,P)}}else if(v!==void 0){const A=v.array;x=v.version;for(let S=0,w=A.length/3-1;S<w;S+=3){const P=S+0,T=S+1,R=S+2;p.push(P,T,T,R,R,P)}}else return;const y=new(O3(p)?fw:cw)(p,1);y.version=x;const g=s.get(d);g&&e.remove(g),s.set(d,y)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function c5(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function u(p,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}function h(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,v);let y=0;for(let g=0;g<v;g++)y+=m[g];t.update(y,i,1)}function d(p,m,v,x){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<p.length;g++)u(p[g]/o,m[g],x[g]);else{y.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,x,0,v);let g=0;for(let A=0;A<v;A++)g+=m[A];for(let A=0;A<x.length;A++)t.update(g,i,x[A])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function f5(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function h5(n,e,t){const i=new WeakMap,r=new sn;function s(o,a,l){const u=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==d){let b=function(){D.dispose(),i.delete(a),a.removeEventListener("dispose",b)};var m=b;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],A=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let w=0;v===!0&&(w=1),x===!0&&(w=2),y===!0&&(w=3);let P=a.attributes.position.count*w,T=1;P>e.maxTextureSize&&(T=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const R=new Float32Array(P*T*4*d),D=new E_(R,P,T,d);D.type=En,D.needsUpdate=!0;const C=w*4;for(let N=0;N<d;N++){const J=g[N],K=A[N],q=S[N],te=P*T*4*N;for(let Z=0;Z<J.count;Z++){const oe=Z*C;v===!0&&(r.fromBufferAttribute(J,Z),R[te+oe+0]=r.x,R[te+oe+1]=r.y,R[te+oe+2]=r.z,R[te+oe+3]=0),x===!0&&(r.fromBufferAttribute(K,Z),R[te+oe+4]=r.x,R[te+oe+5]=r.y,R[te+oe+6]=r.z,R[te+oe+7]=0),y===!0&&(r.fromBufferAttribute(q,Z),R[te+oe+8]=r.x,R[te+oe+9]=r.y,R[te+oe+10]=r.z,R[te+oe+11]=q.itemSize===4?r.w:1)}}p={count:d,texture:D,size:new Ee(P,T)},i.set(a,p),a.addEventListener("dispose",b)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let y=0;y<u.length;y++)v+=u[y];const x=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function d5(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class T_ extends en{constructor(e,t,i,r,s,o,a,l,u,h=lu){if(h!==lu&&h!==Eu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===lu&&(i=mo),i===void 0&&h===Eu&&(i=wu),super(null,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ii,this.minFilter=l!==void 0?l:ii,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const J3=new en,ib=new T_(1,1),K3=new E_,Y3=new uw,j3=new Ep,rb=[],sb=[],ob=new Float32Array(16),ab=new Float32Array(9),lb=new Float32Array(4);function Xf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=rb[r];if(s===void 0&&(s=new Float32Array(r),rb[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function si(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function oi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function R_(n,e){let t=sb[e];t===void 0&&(t=new Int32Array(e),sb[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function p5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function m5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;n.uniform2fv(this.addr,e),oi(t,e)}}function g5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(si(t,e))return;n.uniform3fv(this.addr,e),oi(t,e)}}function v5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;n.uniform4fv(this.addr,e),oi(t,e)}}function _5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(si(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),oi(t,e)}else{if(si(t,i))return;lb.set(i),n.uniformMatrix2fv(this.addr,!1,lb),oi(t,i)}}function y5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(si(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),oi(t,e)}else{if(si(t,i))return;ab.set(i),n.uniformMatrix3fv(this.addr,!1,ab),oi(t,i)}}function x5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(si(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),oi(t,e)}else{if(si(t,i))return;ob.set(i),n.uniformMatrix4fv(this.addr,!1,ob),oi(t,i)}}function A5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function S5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;n.uniform2iv(this.addr,e),oi(t,e)}}function M5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;n.uniform3iv(this.addr,e),oi(t,e)}}function w5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;n.uniform4iv(this.addr,e),oi(t,e)}}function E5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function C5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;n.uniform2uiv(this.addr,e),oi(t,e)}}function T5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;n.uniform3uiv(this.addr,e),oi(t,e)}}function R5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;n.uniform4uiv(this.addr,e),oi(t,e)}}function b5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(ib.compareFunction=ow,s=ib):s=J3,t.setTexture2D(e||s,r)}function P5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Y3,r)}function I5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||j3,r)}function B5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||K3,r)}function D5(n){switch(n){case 5126:return p5;case 35664:return m5;case 35665:return g5;case 35666:return v5;case 35674:return _5;case 35675:return y5;case 35676:return x5;case 5124:case 35670:return A5;case 35667:case 35671:return S5;case 35668:case 35672:return M5;case 35669:case 35673:return w5;case 5125:return E5;case 36294:return C5;case 36295:return T5;case 36296:return R5;case 35678:case 36198:case 36298:case 36306:case 35682:return b5;case 35679:case 36299:case 36307:return P5;case 35680:case 36300:case 36308:case 36293:return I5;case 36289:case 36303:case 36311:case 36292:return B5}}function L5(n,e){n.uniform1fv(this.addr,e)}function F5(n,e){const t=Xf(e,this.size,2);n.uniform2fv(this.addr,t)}function N5(n,e){const t=Xf(e,this.size,3);n.uniform3fv(this.addr,t)}function U5(n,e){const t=Xf(e,this.size,4);n.uniform4fv(this.addr,t)}function O5(n,e){const t=Xf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function k5(n,e){const t=Xf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function z5(n,e){const t=Xf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function H5(n,e){n.uniform1iv(this.addr,e)}function G5(n,e){n.uniform2iv(this.addr,e)}function V5(n,e){n.uniform3iv(this.addr,e)}function W5(n,e){n.uniform4iv(this.addr,e)}function X5(n,e){n.uniform1uiv(this.addr,e)}function J5(n,e){n.uniform2uiv(this.addr,e)}function K5(n,e){n.uniform3uiv(this.addr,e)}function Y5(n,e){n.uniform4uiv(this.addr,e)}function j5(n,e,t){const i=this.cache,r=e.length,s=R_(t,r);si(i,s)||(n.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||J3,s[o])}function Q5(n,e,t){const i=this.cache,r=e.length,s=R_(t,r);si(i,s)||(n.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Y3,s[o])}function Z5(n,e,t){const i=this.cache,r=e.length,s=R_(t,r);si(i,s)||(n.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||j3,s[o])}function q5(n,e,t){const i=this.cache,r=e.length,s=R_(t,r);si(i,s)||(n.uniform1iv(this.addr,s),oi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||K3,s[o])}function $5(n){switch(n){case 5126:return L5;case 35664:return F5;case 35665:return N5;case 35666:return U5;case 35674:return O5;case 35675:return k5;case 35676:return z5;case 5124:case 35670:return H5;case 35667:case 35671:return G5;case 35668:case 35672:return V5;case 35669:case 35673:return W5;case 5125:return X5;case 36294:return J5;case 36295:return K5;case 36296:return Y5;case 35678:case 36198:case 36298:case 36306:case 35682:return j5;case 35679:case 36299:case 36307:return Q5;case 35680:case 36300:case 36308:case 36293:return Z5;case 36289:case 36303:case 36311:case 36292:return q5}}class e9{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=D5(t.type)}}class t9{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=$5(t.type)}}class n9{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const hx=/(\w+)(\])?(\[|\.)?/g;function ub(n,e){n.seq.push(e),n.map[e.id]=e}function i9(n,e,t){const i=n.name,r=i.length;for(hx.lastIndex=0;;){const s=hx.exec(i),o=hx.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){ub(t,u===void 0?new e9(a,n,e):new t9(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new n9(a),ub(t,d)),t=d}}}class g0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);i9(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function cb(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const r9=37297;let s9=0;function o9(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function a9(n){const e=$t.getPrimaries($t.workingColorSpace),t=$t.getPrimaries(n);let i;switch(e===t?i="":e===Xd&&t===Wd?i="LinearDisplayP3ToLinearSRGB":e===Wd&&t===Xd&&(i="LinearSRGBToLinearDisplayP3"),n){case ms:case Mp:return[i,"LinearTransferOETF"];case Pr:case w_:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function fb(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+o9(n.getShaderSource(e),o)}else return r}function l9(n,e){const t=a9(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function u9(n,e){let t;switch(e){case v3:t="Linear";break;case _3:t="Reinhard";break;case y3:t="Cineon";break;case QM:t="ACESFilmic";break;case A3:t="AgX";break;case S3:t="Neutral";break;case x3:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const yg=new z;function c9(){$t.getLuminanceCoefficients(yg);const n=yg.x.toFixed(4),e=yg.y.toFixed(4),t=yg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function f9(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Kh).join(`
`)}function h9(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function d9(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Kh(n){return n!==""}function hb(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function db(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const p9=/^[ \t]*#include +<([\w\d./]+)>/gm;function cS(n){return n.replace(p9,g9)}const m9=new Map;function g9(n,e){let t=Pt[e];if(t===void 0){const i=m9.get(e);if(i!==void 0)t=Pt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return cS(t)}const v9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pb(n){return n.replace(v9,_9)}function _9(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mb(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function y9(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===m_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===od?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Rs&&(e="SHADOWMAP_TYPE_VSM"),e}function x9(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case po:case tl:e="ENVMAP_TYPE_CUBE";break;case Vf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function A9(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case tl:e="ENVMAP_MODE_REFRACTION";break}return e}function S9(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case yp:e="ENVMAP_BLENDING_MULTIPLY";break;case m3:e="ENVMAP_BLENDING_MIX";break;case g3:e="ENVMAP_BLENDING_ADD";break}return e}function M9(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function w9(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=y9(t),u=x9(t),h=A9(t),d=S9(t),p=M9(t),m=f9(t),v=h9(s),x=r.createProgram();let y,g,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Kh).join(`
`),y.length>0&&(y+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Kh).join(`
`),g.length>0&&(g+=`
`)):(y=[mb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Kh).join(`
`),g=[mb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==uo?"#define TONE_MAPPING":"",t.toneMapping!==uo?Pt.tonemapping_pars_fragment:"",t.toneMapping!==uo?u9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Pt.colorspace_pars_fragment,l9("linearToOutputTexel",t.outputColorSpace),c9(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Kh).join(`
`)),o=cS(o),o=hb(o,t),o=db(o,t),a=cS(a),a=hb(a,t),a=db(a,t),o=pb(o),a=pb(a),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,y=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===lS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===lS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=A+y+o,w=A+g+a,P=cb(r,r.VERTEX_SHADER,S),T=cb(r,r.FRAGMENT_SHADER,w);r.attachShader(x,P),r.attachShader(x,T),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);function R(N){if(n.debug.checkShaderErrors){const J=r.getProgramInfoLog(x).trim(),K=r.getShaderInfoLog(P).trim(),q=r.getShaderInfoLog(T).trim();let te=!0,Z=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(te=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,x,P,T);else{const oe=fb(r,P,"vertex"),H=fb(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+J+`
`+oe+`
`+H)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(K===""||q==="")&&(Z=!1);Z&&(N.diagnostics={runnable:te,programLog:J,vertexShader:{log:K,prefix:y},fragmentShader:{log:q,prefix:g}})}r.deleteShader(P),r.deleteShader(T),D=new g0(r,x),C=d9(r,x)}let D;this.getUniforms=function(){return D===void 0&&R(this),D};let C;this.getAttributes=function(){return C===void 0&&R(this),C};let b=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return b===!1&&(b=r.getProgramParameter(x,r9)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=s9++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=P,this.fragmentShader=T,this}let E9=0;class C9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new T9(e),t.set(e,i)),i}}class T9{constructor(e){this.id=E9++,this.code=e,this.usedTimes=0}}function R9(n,e,t,i,r,s,o){const a=new cu,l=new C9,u=new Set,h=[],d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(C){return u.add(C),C===0?"uv":`uv${C}`}function y(C,b,N,J,K){const q=J.fog,te=K.geometry,Z=C.isMeshStandardMaterial?J.environment:null,oe=(C.isMeshStandardMaterial?t:e).get(C.envMap||Z),H=oe&&oe.mapping===Vf?oe.image.height:null,ee=v[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const Q=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,ue=Q!==void 0?Q.length:0;let me=0;te.morphAttributes.position!==void 0&&(me=1),te.morphAttributes.normal!==void 0&&(me=2),te.morphAttributes.color!==void 0&&(me=3);let Ie,ae,ve,ye;if(ee){const Vt=Is[ee];Ie=Vt.vertexShader,ae=Vt.fragmentShader}else Ie=C.vertexShader,ae=C.fragmentShader,l.update(C),ve=l.getVertexShaderID(C),ye=l.getFragmentShaderID(C);const be=n.getRenderTarget(),Xe=K.isInstancedMesh===!0,st=K.isBatchedMesh===!0,$e=!!C.map,Ve=!!C.matcap,k=!!oe,Te=!!C.aoMap,Pe=!!C.lightMap,Oe=!!C.bumpMap,Ae=!!C.normalMap,rt=!!C.displacementMap,ze=!!C.emissiveMap,Qe=!!C.metalnessMap,X=!!C.roughnessMap,F=C.anisotropy>0,he=C.clearcoat>0,Se=C.dispersion>0,xe=C.iridescence>0,Ce=C.sheen>0,lt=C.transmission>0,Ue=F&&!!C.anisotropyMap,et=he&&!!C.clearcoatMap,yt=he&&!!C.clearcoatNormalMap,Le=he&&!!C.clearcoatRoughnessMap,Ze=xe&&!!C.iridescenceMap,Nt=xe&&!!C.iridescenceThicknessMap,pt=Ce&&!!C.sheenColorMap,Ge=Ce&&!!C.sheenRoughnessMap,At=!!C.specularMap,St=!!C.specularColorMap,Dt=!!C.specularIntensityMap,$=lt&&!!C.transmissionMap,Fe=lt&&!!C.thicknessMap,ie=!!C.gradientMap,Me=!!C.alphaMap,ke=C.alphaTest>0,_t=!!C.alphaHash,Ut=!!C.extensions;let mn=uo;C.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(mn=n.toneMapping);const kn={shaderID:ee,shaderType:C.type,shaderName:C.name,vertexShader:Ie,fragmentShader:ae,defines:C.defines,customVertexShaderID:ve,customFragmentShaderID:ye,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:st,batchingColor:st&&K._colorsTexture!==null,instancing:Xe,instancingColor:Xe&&K.instanceColor!==null,instancingMorph:Xe&&K.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:be===null?n.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:ms,alphaToCoverage:!!C.alphaToCoverage,map:$e,matcap:Ve,envMap:k,envMapMode:k&&oe.mapping,envMapCubeUVHeight:H,aoMap:Te,lightMap:Pe,bumpMap:Oe,normalMap:Ae,displacementMap:p&&rt,emissiveMap:ze,normalMapObjectSpace:Ae&&C.normalMapType===P3,normalMapTangentSpace:Ae&&C.normalMapType===ul,metalnessMap:Qe,roughnessMap:X,anisotropy:F,anisotropyMap:Ue,clearcoat:he,clearcoatMap:et,clearcoatNormalMap:yt,clearcoatRoughnessMap:Le,dispersion:Se,iridescence:xe,iridescenceMap:Ze,iridescenceThicknessMap:Nt,sheen:Ce,sheenColorMap:pt,sheenRoughnessMap:Ge,specularMap:At,specularColorMap:St,specularIntensityMap:Dt,transmission:lt,transmissionMap:$,thicknessMap:Fe,gradientMap:ie,opaque:C.transparent===!1&&C.blending===au&&C.alphaToCoverage===!1,alphaMap:Me,alphaTest:ke,alphaHash:_t,combine:C.combine,mapUv:$e&&x(C.map.channel),aoMapUv:Te&&x(C.aoMap.channel),lightMapUv:Pe&&x(C.lightMap.channel),bumpMapUv:Oe&&x(C.bumpMap.channel),normalMapUv:Ae&&x(C.normalMap.channel),displacementMapUv:rt&&x(C.displacementMap.channel),emissiveMapUv:ze&&x(C.emissiveMap.channel),metalnessMapUv:Qe&&x(C.metalnessMap.channel),roughnessMapUv:X&&x(C.roughnessMap.channel),anisotropyMapUv:Ue&&x(C.anisotropyMap.channel),clearcoatMapUv:et&&x(C.clearcoatMap.channel),clearcoatNormalMapUv:yt&&x(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&x(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ze&&x(C.iridescenceMap.channel),iridescenceThicknessMapUv:Nt&&x(C.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&x(C.sheenColorMap.channel),sheenRoughnessMapUv:Ge&&x(C.sheenRoughnessMap.channel),specularMapUv:At&&x(C.specularMap.channel),specularColorMapUv:St&&x(C.specularColorMap.channel),specularIntensityMapUv:Dt&&x(C.specularIntensityMap.channel),transmissionMapUv:$&&x(C.transmissionMap.channel),thicknessMapUv:Fe&&x(C.thicknessMap.channel),alphaMapUv:Me&&x(C.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(Ae||F),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!te.attributes.uv&&($e||Me),fog:!!q,useFog:C.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:K.isSkinnedMesh===!0,morphTargets:te.morphAttributes.position!==void 0,morphNormals:te.morphAttributes.normal!==void 0,morphColors:te.morphAttributes.color!==void 0,morphTargetsCount:ue,morphTextureStride:me,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:mn,decodeVideoTexture:$e&&C.map.isVideoTexture===!0&&$t.getTransfer(C.map.colorSpace)===fn,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===lr,flipSided:C.side===Fi,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Ut&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ut&&C.extensions.multiDraw===!0||st)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return kn.vertexUv1s=u.has(1),kn.vertexUv2s=u.has(2),kn.vertexUv3s=u.has(3),u.clear(),kn}function g(C){const b=[];if(C.shaderID?b.push(C.shaderID):(b.push(C.customVertexShaderID),b.push(C.customFragmentShaderID)),C.defines!==void 0)for(const N in C.defines)b.push(N),b.push(C.defines[N]);return C.isRawShaderMaterial===!1&&(A(b,C),S(b,C),b.push(n.outputColorSpace)),b.push(C.customProgramCacheKey),b.join()}function A(C,b){C.push(b.precision),C.push(b.outputColorSpace),C.push(b.envMapMode),C.push(b.envMapCubeUVHeight),C.push(b.mapUv),C.push(b.alphaMapUv),C.push(b.lightMapUv),C.push(b.aoMapUv),C.push(b.bumpMapUv),C.push(b.normalMapUv),C.push(b.displacementMapUv),C.push(b.emissiveMapUv),C.push(b.metalnessMapUv),C.push(b.roughnessMapUv),C.push(b.anisotropyMapUv),C.push(b.clearcoatMapUv),C.push(b.clearcoatNormalMapUv),C.push(b.clearcoatRoughnessMapUv),C.push(b.iridescenceMapUv),C.push(b.iridescenceThicknessMapUv),C.push(b.sheenColorMapUv),C.push(b.sheenRoughnessMapUv),C.push(b.specularMapUv),C.push(b.specularColorMapUv),C.push(b.specularIntensityMapUv),C.push(b.transmissionMapUv),C.push(b.thicknessMapUv),C.push(b.combine),C.push(b.fogExp2),C.push(b.sizeAttenuation),C.push(b.morphTargetsCount),C.push(b.morphAttributeCount),C.push(b.numDirLights),C.push(b.numPointLights),C.push(b.numSpotLights),C.push(b.numSpotLightMaps),C.push(b.numHemiLights),C.push(b.numRectAreaLights),C.push(b.numDirLightShadows),C.push(b.numPointLightShadows),C.push(b.numSpotLightShadows),C.push(b.numSpotLightShadowsWithMaps),C.push(b.numLightProbes),C.push(b.shadowMapType),C.push(b.toneMapping),C.push(b.numClippingPlanes),C.push(b.numClipIntersection),C.push(b.depthPacking)}function S(C,b){a.disableAll(),b.supportsVertexTextures&&a.enable(0),b.instancing&&a.enable(1),b.instancingColor&&a.enable(2),b.instancingMorph&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUv1s&&a.enable(13),b.vertexUv2s&&a.enable(14),b.vertexUv3s&&a.enable(15),b.vertexTangents&&a.enable(16),b.anisotropy&&a.enable(17),b.alphaHash&&a.enable(18),b.batching&&a.enable(19),b.dispersion&&a.enable(20),b.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.skinning&&a.enable(4),b.morphTargets&&a.enable(5),b.morphNormals&&a.enable(6),b.morphColors&&a.enable(7),b.premultipliedAlpha&&a.enable(8),b.shadowMapEnabled&&a.enable(9),b.doubleSided&&a.enable(10),b.flipSided&&a.enable(11),b.useDepthPacking&&a.enable(12),b.dithering&&a.enable(13),b.transmission&&a.enable(14),b.sheen&&a.enable(15),b.opaque&&a.enable(16),b.pointsUvs&&a.enable(17),b.decodeVideoTexture&&a.enable(18),b.alphaToCoverage&&a.enable(19),C.push(a.mask)}function w(C){const b=v[C.type];let N;if(b){const J=Is[b];N=C_.clone(J.uniforms)}else N=C.uniforms;return N}function P(C,b){let N;for(let J=0,K=h.length;J<K;J++){const q=h[J];if(q.cacheKey===b){N=q,++N.usedTimes;break}}return N===void 0&&(N=new w9(n,b,C,s),h.push(N)),N}function T(C){if(--C.usedTimes===0){const b=h.indexOf(C);h[b]=h[h.length-1],h.pop(),C.destroy()}}function R(C){l.remove(C)}function D(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:w,acquireProgram:P,releaseProgram:T,releaseShaderCache:R,programs:h,dispose:D}}function b9(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function P9(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gb(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function vb(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,v,x,y){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:x,group:y},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=d.renderOrder,g.z=x,g.group=y),e++,g}function a(d,p,m,v,x,y){const g=o(d,p,m,v,x,y);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(d,p,m,v,x,y){const g=o(d,p,m,v,x,y);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function u(d,p){t.length>1&&t.sort(d||P9),i.length>1&&i.sort(p||gb),r.length>1&&r.sort(p||gb)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function I9(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new vb,n.set(i,[o])):r>=s.length?(o=new vb,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function B9(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new He};break;case"SpotLight":t={position:new z,direction:new z,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new He,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new He,groundColor:new He};break;case"RectAreaLight":t={color:new He,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function D9(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let L9=0;function F9(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function N9(n){const e=new B9,t=D9(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new z);const r=new z,s=new dt,o=new dt;function a(u){let h=0,d=0,p=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let m=0,v=0,x=0,y=0,g=0,A=0,S=0,w=0,P=0,T=0,R=0;u.sort(F9);for(let C=0,b=u.length;C<b;C++){const N=u[C],J=N.color,K=N.intensity,q=N.distance,te=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)h+=J.r*K,d+=J.g*K,p+=J.b*K;else if(N.isLightProbe){for(let Z=0;Z<9;Z++)i.probe[Z].addScaledVector(N.sh.coefficients[Z],K);R++}else if(N.isDirectionalLight){const Z=e.get(N);if(Z.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){const oe=N.shadow,H=t.get(N);H.shadowIntensity=oe.intensity,H.shadowBias=oe.bias,H.shadowNormalBias=oe.normalBias,H.shadowRadius=oe.radius,H.shadowMapSize=oe.mapSize,i.directionalShadow[m]=H,i.directionalShadowMap[m]=te,i.directionalShadowMatrix[m]=N.shadow.matrix,A++}i.directional[m]=Z,m++}else if(N.isSpotLight){const Z=e.get(N);Z.position.setFromMatrixPosition(N.matrixWorld),Z.color.copy(J).multiplyScalar(K),Z.distance=q,Z.coneCos=Math.cos(N.angle),Z.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),Z.decay=N.decay,i.spot[x]=Z;const oe=N.shadow;if(N.map&&(i.spotLightMap[P]=N.map,P++,oe.updateMatrices(N),N.castShadow&&T++),i.spotLightMatrix[x]=oe.matrix,N.castShadow){const H=t.get(N);H.shadowIntensity=oe.intensity,H.shadowBias=oe.bias,H.shadowNormalBias=oe.normalBias,H.shadowRadius=oe.radius,H.shadowMapSize=oe.mapSize,i.spotShadow[x]=H,i.spotShadowMap[x]=te,w++}x++}else if(N.isRectAreaLight){const Z=e.get(N);Z.color.copy(J).multiplyScalar(K),Z.halfWidth.set(N.width*.5,0,0),Z.halfHeight.set(0,N.height*.5,0),i.rectArea[y]=Z,y++}else if(N.isPointLight){const Z=e.get(N);if(Z.color.copy(N.color).multiplyScalar(N.intensity),Z.distance=N.distance,Z.decay=N.decay,N.castShadow){const oe=N.shadow,H=t.get(N);H.shadowIntensity=oe.intensity,H.shadowBias=oe.bias,H.shadowNormalBias=oe.normalBias,H.shadowRadius=oe.radius,H.shadowMapSize=oe.mapSize,H.shadowCameraNear=oe.camera.near,H.shadowCameraFar=oe.camera.far,i.pointShadow[v]=H,i.pointShadowMap[v]=te,i.pointShadowMatrix[v]=N.shadow.matrix,S++}i.point[v]=Z,v++}else if(N.isHemisphereLight){const Z=e.get(N);Z.skyColor.copy(N.color).multiplyScalar(K),Z.groundColor.copy(N.groundColor).multiplyScalar(K),i.hemi[g]=Z,g++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ke.LTC_FLOAT_1,i.rectAreaLTC2=Ke.LTC_FLOAT_2):(i.rectAreaLTC1=Ke.LTC_HALF_1,i.rectAreaLTC2=Ke.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const D=i.hash;(D.directionalLength!==m||D.pointLength!==v||D.spotLength!==x||D.rectAreaLength!==y||D.hemiLength!==g||D.numDirectionalShadows!==A||D.numPointShadows!==S||D.numSpotShadows!==w||D.numSpotMaps!==P||D.numLightProbes!==R)&&(i.directional.length=m,i.spot.length=x,i.rectArea.length=y,i.point.length=v,i.hemi.length=g,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=w+P-T,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=R,D.directionalLength=m,D.pointLength=v,D.spotLength=x,D.rectAreaLength=y,D.hemiLength=g,D.numDirectionalShadows=A,D.numPointShadows=S,D.numSpotShadows=w,D.numSpotMaps=P,D.numLightProbes=R,i.version=L9++)}function l(u,h){let d=0,p=0,m=0,v=0,x=0;const y=h.matrixWorldInverse;for(let g=0,A=u.length;g<A;g++){const S=u[g];if(S.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(y),d++}else if(S.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(y),m++}else if(S.isRectAreaLight){const w=i.rectArea[v];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(y),o.identity(),s.copy(S.matrixWorld),s.premultiply(y),o.extractRotation(s),w.halfWidth.set(S.width*.5,0,0),w.halfHeight.set(0,S.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const w=i.point[p];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(y),p++}else if(S.isHemisphereLight){const w=i.hemi[x];w.direction.setFromMatrixPosition(S.matrixWorld),w.direction.transformDirection(y),x++}}}return{setup:a,setupView:l,state:i}}function _b(n){const e=new N9(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function U9(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new _b(n),e.set(r,[a])):s>=o.length?(a=new _b(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class pw extends $n{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=R3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mw extends $n{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const O9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,k9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function z9(n,e,t){let i=new Cp;const r=new Ee,s=new Ee,o=new sn,a=new pw({depthPacking:b3}),l=new mw,u={},h=t.maxTextureSize,d={[ho]:Fi,[Fi]:ho,[lr]:lr},p=new mi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ee},radius:{value:4}},vertexShader:O9,fragmentShader:k9}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new Et;v.setAttribute("position",new jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new xn(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=m_;let g=this.type;this.render=function(T,R,D){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||T.length===0)return;const C=n.getRenderTarget(),b=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),J=n.state;J.setBlending(lo),J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const K=g!==Rs&&this.type===Rs,q=g===Rs&&this.type!==Rs;for(let te=0,Z=T.length;te<Z;te++){const oe=T[te],H=oe.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;r.copy(H.mapSize);const ee=H.getFrameExtents();if(r.multiply(ee),s.copy(H.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/ee.x),r.x=s.x*ee.x,H.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/ee.y),r.y=s.y*ee.y,H.mapSize.y=s.y)),H.map===null||K===!0||q===!0){const ue=this.type!==Rs?{minFilter:ii,magFilter:ii}:{};H.map!==null&&H.map.dispose(),H.map=new xr(r.x,r.y,ue),H.map.texture.name=oe.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const Q=H.getViewportCount();for(let ue=0;ue<Q;ue++){const me=H.getViewport(ue);o.set(s.x*me.x,s.y*me.y,s.x*me.z,s.y*me.w),J.viewport(o),H.updateMatrices(oe,ue),i=H.getFrustum(),w(R,D,H.camera,oe,this.type)}H.isPointLightShadow!==!0&&this.type===Rs&&A(H,D),H.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(C,b,N)};function A(T,R){const D=e.update(x);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new xr(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(R,null,D,p,x,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(R,null,D,m,x,null)}function S(T,R,D,C){let b=null;const N=D.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(N!==void 0)b=N;else if(b=D.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const J=b.uuid,K=R.uuid;let q=u[J];q===void 0&&(q={},u[J]=q);let te=q[K];te===void 0&&(te=b.clone(),q[K]=te,R.addEventListener("dispose",P)),b=te}if(b.visible=R.visible,b.wireframe=R.wireframe,C===Rs?b.side=R.shadowSide!==null?R.shadowSide:R.side:b.side=R.shadowSide!==null?R.shadowSide:d[R.side],b.alphaMap=R.alphaMap,b.alphaTest=R.alphaTest,b.map=R.map,b.clipShadows=R.clipShadows,b.clippingPlanes=R.clippingPlanes,b.clipIntersection=R.clipIntersection,b.displacementMap=R.displacementMap,b.displacementScale=R.displacementScale,b.displacementBias=R.displacementBias,b.wireframeLinewidth=R.wireframeLinewidth,b.linewidth=R.linewidth,D.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const J=n.properties.get(b);J.light=D}return b}function w(T,R,D,C,b){if(T.visible===!1)return;if(T.layers.test(R.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&b===Rs)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,T.matrixWorld);const K=e.update(T),q=T.material;if(Array.isArray(q)){const te=K.groups;for(let Z=0,oe=te.length;Z<oe;Z++){const H=te[Z],ee=q[H.materialIndex];if(ee&&ee.visible){const Q=S(T,ee,C,b);T.onBeforeShadow(n,T,R,D,K,Q,H),n.renderBufferDirect(D,null,K,Q,T,H),T.onAfterShadow(n,T,R,D,K,Q,H)}}}else if(q.visible){const te=S(T,q,C,b);T.onBeforeShadow(n,T,R,D,K,te,null),n.renderBufferDirect(D,null,K,te,T,null),T.onAfterShadow(n,T,R,D,K,te,null)}}const J=T.children;for(let K=0,q=J.length;K<q;K++)w(J[K],R,D,C,b)}function P(T){T.target.removeEventListener("dispose",P);for(const D in u){const C=u[D],b=T.target.uuid;b in C&&(C[b].dispose(),delete C[b])}}}function H9(n){function e(){let $=!1;const Fe=new sn;let ie=null;const Me=new sn(0,0,0,0);return{setMask:function(ke){ie!==ke&&!$&&(n.colorMask(ke,ke,ke,ke),ie=ke)},setLocked:function(ke){$=ke},setClear:function(ke,_t,Ut,mn,kn){kn===!0&&(ke*=mn,_t*=mn,Ut*=mn),Fe.set(ke,_t,Ut,mn),Me.equals(Fe)===!1&&(n.clearColor(ke,_t,Ut,mn),Me.copy(Fe))},reset:function(){$=!1,ie=null,Me.set(-1,0,0,0)}}}function t(){let $=!1,Fe=null,ie=null,Me=null;return{setTest:function(ke){ke?ye(n.DEPTH_TEST):be(n.DEPTH_TEST)},setMask:function(ke){Fe!==ke&&!$&&(n.depthMask(ke),Fe=ke)},setFunc:function(ke){if(ie!==ke){switch(ke){case l3:n.depthFunc(n.NEVER);break;case u3:n.depthFunc(n.ALWAYS);break;case c3:n.depthFunc(n.LESS);break;case zd:n.depthFunc(n.LEQUAL);break;case f3:n.depthFunc(n.EQUAL);break;case h3:n.depthFunc(n.GEQUAL);break;case d3:n.depthFunc(n.GREATER);break;case p3:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ie=ke}},setLocked:function(ke){$=ke},setClear:function(ke){Me!==ke&&(n.clearDepth(ke),Me=ke)},reset:function(){$=!1,Fe=null,ie=null,Me=null}}}function i(){let $=!1,Fe=null,ie=null,Me=null,ke=null,_t=null,Ut=null,mn=null,kn=null;return{setTest:function(Vt){$||(Vt?ye(n.STENCIL_TEST):be(n.STENCIL_TEST))},setMask:function(Vt){Fe!==Vt&&!$&&(n.stencilMask(Vt),Fe=Vt)},setFunc:function(Vt,tr,Gi){(ie!==Vt||Me!==tr||ke!==Gi)&&(n.stencilFunc(Vt,tr,Gi),ie=Vt,Me=tr,ke=Gi)},setOp:function(Vt,tr,Gi){(_t!==Vt||Ut!==tr||mn!==Gi)&&(n.stencilOp(Vt,tr,Gi),_t=Vt,Ut=tr,mn=Gi)},setLocked:function(Vt){$=Vt},setClear:function(Vt){kn!==Vt&&(n.clearStencil(Vt),kn=Vt)},reset:function(){$=!1,Fe=null,ie=null,Me=null,ke=null,_t=null,Ut=null,mn=null,kn=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let u={},h={},d=new WeakMap,p=[],m=null,v=!1,x=null,y=null,g=null,A=null,S=null,w=null,P=null,T=new He(0,0,0),R=0,D=!1,C=null,b=null,N=null,J=null,K=null;const q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,Z=0;const oe=n.getParameter(n.VERSION);oe.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(oe)[1]),te=Z>=1):oe.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),te=Z>=2);let H=null,ee={};const Q=n.getParameter(n.SCISSOR_BOX),ue=n.getParameter(n.VIEWPORT),me=new sn().fromArray(Q),Ie=new sn().fromArray(ue);function ae($,Fe,ie,Me){const ke=new Uint8Array(4),_t=n.createTexture();n.bindTexture($,_t),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ut=0;Ut<ie;Ut++)$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?n.texImage3D(Fe,0,n.RGBA,1,1,Me,0,n.RGBA,n.UNSIGNED_BYTE,ke):n.texImage2D(Fe+Ut,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ke);return _t}const ve={};ve[n.TEXTURE_2D]=ae(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[n.TEXTURE_2D_ARRAY]=ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),ye(n.DEPTH_TEST),s.setFunc(zd),Oe(!1),Ae(nS),ye(n.CULL_FACE),Te(lo);function ye($){u[$]!==!0&&(n.enable($),u[$]=!0)}function be($){u[$]!==!1&&(n.disable($),u[$]=!1)}function Xe($,Fe){return h[$]!==Fe?(n.bindFramebuffer($,Fe),h[$]=Fe,$===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Fe),$===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Fe),!0):!1}function st($,Fe){let ie=p,Me=!1;if($){ie=d.get(Fe),ie===void 0&&(ie=[],d.set(Fe,ie));const ke=$.textures;if(ie.length!==ke.length||ie[0]!==n.COLOR_ATTACHMENT0){for(let _t=0,Ut=ke.length;_t<Ut;_t++)ie[_t]=n.COLOR_ATTACHMENT0+_t;ie.length=ke.length,Me=!0}}else ie[0]!==n.BACK&&(ie[0]=n.BACK,Me=!0);Me&&n.drawBuffers(ie)}function $e($){return m!==$?(n.useProgram($),m=$,!0):!1}const Ve={[ba]:n.FUNC_ADD,[XB]:n.FUNC_SUBTRACT,[JB]:n.FUNC_REVERSE_SUBTRACT};Ve[KB]=n.MIN,Ve[YB]=n.MAX;const k={[jB]:n.ZERO,[QB]:n.ONE,[ZB]:n.SRC_COLOR,[ev]:n.SRC_ALPHA,[i3]:n.SRC_ALPHA_SATURATE,[t3]:n.DST_COLOR,[$B]:n.DST_ALPHA,[qB]:n.ONE_MINUS_SRC_COLOR,[tv]:n.ONE_MINUS_SRC_ALPHA,[n3]:n.ONE_MINUS_DST_COLOR,[e3]:n.ONE_MINUS_DST_ALPHA,[r3]:n.CONSTANT_COLOR,[s3]:n.ONE_MINUS_CONSTANT_COLOR,[o3]:n.CONSTANT_ALPHA,[a3]:n.ONE_MINUS_CONSTANT_ALPHA};function Te($,Fe,ie,Me,ke,_t,Ut,mn,kn,Vt){if($===lo){v===!0&&(be(n.BLEND),v=!1);return}if(v===!1&&(ye(n.BLEND),v=!0),$!==WB){if($!==x||Vt!==D){if((y!==ba||S!==ba)&&(n.blendEquation(n.FUNC_ADD),y=ba,S=ba),Vt)switch($){case au:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $0:n.blendFunc(n.ONE,n.ONE);break;case iS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case au:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $0:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case iS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}g=null,A=null,w=null,P=null,T.set(0,0,0),R=0,x=$,D=Vt}return}ke=ke||Fe,_t=_t||ie,Ut=Ut||Me,(Fe!==y||ke!==S)&&(n.blendEquationSeparate(Ve[Fe],Ve[ke]),y=Fe,S=ke),(ie!==g||Me!==A||_t!==w||Ut!==P)&&(n.blendFuncSeparate(k[ie],k[Me],k[_t],k[Ut]),g=ie,A=Me,w=_t,P=Ut),(mn.equals(T)===!1||kn!==R)&&(n.blendColor(mn.r,mn.g,mn.b,kn),T.copy(mn),R=kn),x=$,D=!1}function Pe($,Fe){$.side===lr?be(n.CULL_FACE):ye(n.CULL_FACE);let ie=$.side===Fi;Fe&&(ie=!ie),Oe(ie),$.blending===au&&$.transparent===!1?Te(lo):Te($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),s.setFunc($.depthFunc),s.setTest($.depthTest),s.setMask($.depthWrite),r.setMask($.colorWrite);const Me=$.stencilWrite;o.setTest(Me),Me&&(o.setMask($.stencilWriteMask),o.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),o.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),ze($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?ye(n.SAMPLE_ALPHA_TO_COVERAGE):be(n.SAMPLE_ALPHA_TO_COVERAGE)}function Oe($){C!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),C=$)}function Ae($){$!==HB?(ye(n.CULL_FACE),$!==b&&($===nS?n.cullFace(n.BACK):$===GB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):be(n.CULL_FACE),b=$}function rt($){$!==N&&(te&&n.lineWidth($),N=$)}function ze($,Fe,ie){$?(ye(n.POLYGON_OFFSET_FILL),(J!==Fe||K!==ie)&&(n.polygonOffset(Fe,ie),J=Fe,K=ie)):be(n.POLYGON_OFFSET_FILL)}function Qe($){$?ye(n.SCISSOR_TEST):be(n.SCISSOR_TEST)}function X($){$===void 0&&($=n.TEXTURE0+q-1),H!==$&&(n.activeTexture($),H=$)}function F($,Fe,ie){ie===void 0&&(H===null?ie=n.TEXTURE0+q-1:ie=H);let Me=ee[ie];Me===void 0&&(Me={type:void 0,texture:void 0},ee[ie]=Me),(Me.type!==$||Me.texture!==Fe)&&(H!==ie&&(n.activeTexture(ie),H=ie),n.bindTexture($,Fe||ve[$]),Me.type=$,Me.texture=Fe)}function he(){const $=ee[H];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function xe(){try{n.compressedTexImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ce(){try{n.texSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function lt(){try{n.texSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ue(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function et(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function yt(){try{n.texStorage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Le(){try{n.texStorage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ze(){try{n.texImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Nt(){try{n.texImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function pt($){me.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),me.copy($))}function Ge($){Ie.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),Ie.copy($))}function At($,Fe){let ie=l.get(Fe);ie===void 0&&(ie=new WeakMap,l.set(Fe,ie));let Me=ie.get($);Me===void 0&&(Me=n.getUniformBlockIndex(Fe,$.name),ie.set($,Me))}function St($,Fe){const Me=l.get(Fe).get($);a.get(Fe)!==Me&&(n.uniformBlockBinding(Fe,Me,$.__bindingPointIndex),a.set(Fe,Me))}function Dt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},H=null,ee={},h={},d=new WeakMap,p=[],m=null,v=!1,x=null,y=null,g=null,A=null,S=null,w=null,P=null,T=new He(0,0,0),R=0,D=!1,C=null,b=null,N=null,J=null,K=null,me.set(0,0,n.canvas.width,n.canvas.height),Ie.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:ye,disable:be,bindFramebuffer:Xe,drawBuffers:st,useProgram:$e,setBlending:Te,setMaterial:Pe,setFlipSided:Oe,setCullFace:Ae,setLineWidth:rt,setPolygonOffset:ze,setScissorTest:Qe,activeTexture:X,bindTexture:F,unbindTexture:he,compressedTexImage2D:Se,compressedTexImage3D:xe,texImage2D:Ze,texImage3D:Nt,updateUBOMapping:At,uniformBlockBinding:St,texStorage2D:yt,texStorage3D:Le,texSubImage2D:Ce,texSubImage3D:lt,compressedTexSubImage2D:Ue,compressedTexSubImage3D:et,scissor:pt,viewport:Ge,reset:Dt}}function G9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function V9(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function W9(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function fS(n,e,t,i){const r=X9(i);switch(t){case qM:return n*e;case ew:return n*e;case tw:return n*e*2;case Ap:return n*e/r.components*r.byteLength;case Sp:return n*e/r.components*r.byteLength;case nw:return n*e*2/r.components*r.byteLength;case A_:return n*e*2/r.components*r.byteLength;case $M:return n*e*3/r.components*r.byteLength;case Jn:return n*e*4/r.components*r.byteLength;case S_:return n*e*4/r.components*r.byteLength;case ad:case ld:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case ud:case cd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iv:case sv:return Math.max(n,16)*Math.max(e,8)/4;case nv:case rv:return Math.max(n,8)*Math.max(e,8)/2;case ov:case av:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case lv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case uv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case cv:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case fv:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case hv:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case dv:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case pv:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case mv:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case gv:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case vv:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case _v:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case yv:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case xv:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Av:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Sv:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case fd:case Mv:case wv:return Math.ceil(n/4)*Math.ceil(e/4)*16;case iw:case Ev:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Cv:case Tv:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function X9(n){switch(n){case yr:case v_:return{byteLength:1,components:1};case xf:case __:case ri:return{byteLength:2,components:1};case y_:case x_:return{byteLength:2,components:4};case mo:case xp:case En:return{byteLength:4,components:1};case ZM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const J9={contain:G9,cover:V9,fill:W9,getByteLength:fS};function K9(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ee,h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(X,F){return m?new OffscreenCanvas(X,F):Yd("canvas")}function x(X,F,he){let Se=1;const xe=Qe(X);if((xe.width>he||xe.height>he)&&(Se=he/Math.max(xe.width,xe.height)),Se<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const Ce=Math.floor(Se*xe.width),lt=Math.floor(Se*xe.height);d===void 0&&(d=v(Ce,lt));const Ue=F?v(Ce,lt):d;return Ue.width=Ce,Ue.height=lt,Ue.getContext("2d").drawImage(X,0,0,Ce,lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+Ce+"x"+lt+")."),Ue}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),X;return X}function y(X){return X.generateMipmaps&&X.minFilter!==ii&&X.minFilter!==Jt}function g(X){n.generateMipmap(X)}function A(X,F,he,Se,xe=!1){if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ce=F;if(F===n.RED&&(he===n.FLOAT&&(Ce=n.R32F),he===n.HALF_FLOAT&&(Ce=n.R16F),he===n.UNSIGNED_BYTE&&(Ce=n.R8)),F===n.RED_INTEGER&&(he===n.UNSIGNED_BYTE&&(Ce=n.R8UI),he===n.UNSIGNED_SHORT&&(Ce=n.R16UI),he===n.UNSIGNED_INT&&(Ce=n.R32UI),he===n.BYTE&&(Ce=n.R8I),he===n.SHORT&&(Ce=n.R16I),he===n.INT&&(Ce=n.R32I)),F===n.RG&&(he===n.FLOAT&&(Ce=n.RG32F),he===n.HALF_FLOAT&&(Ce=n.RG16F),he===n.UNSIGNED_BYTE&&(Ce=n.RG8)),F===n.RG_INTEGER&&(he===n.UNSIGNED_BYTE&&(Ce=n.RG8UI),he===n.UNSIGNED_SHORT&&(Ce=n.RG16UI),he===n.UNSIGNED_INT&&(Ce=n.RG32UI),he===n.BYTE&&(Ce=n.RG8I),he===n.SHORT&&(Ce=n.RG16I),he===n.INT&&(Ce=n.RG32I)),F===n.RGB&&he===n.UNSIGNED_INT_5_9_9_9_REV&&(Ce=n.RGB9_E5),F===n.RGBA){const lt=xe?Vd:$t.getTransfer(Se);he===n.FLOAT&&(Ce=n.RGBA32F),he===n.HALF_FLOAT&&(Ce=n.RGBA16F),he===n.UNSIGNED_BYTE&&(Ce=lt===fn?n.SRGB8_ALPHA8:n.RGBA8),he===n.UNSIGNED_SHORT_4_4_4_4&&(Ce=n.RGBA4),he===n.UNSIGNED_SHORT_5_5_5_1&&(Ce=n.RGB5_A1)}return(Ce===n.R16F||Ce===n.R32F||Ce===n.RG16F||Ce===n.RG32F||Ce===n.RGBA16F||Ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ce}function S(X,F){let he;return X?F===null||F===mo||F===wu?he=n.DEPTH24_STENCIL8:F===En?he=n.DEPTH32F_STENCIL8:F===xf&&(he=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===mo||F===wu?he=n.DEPTH_COMPONENT24:F===En?he=n.DEPTH_COMPONENT32F:F===xf&&(he=n.DEPTH_COMPONENT16),he}function w(X,F){return y(X)===!0||X.isFramebufferTexture&&X.minFilter!==ii&&X.minFilter!==Jt?Math.log2(Math.max(F.width,F.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?F.mipmaps.length:1}function P(X){const F=X.target;F.removeEventListener("dispose",P),R(F),F.isVideoTexture&&h.delete(F)}function T(X){const F=X.target;F.removeEventListener("dispose",T),C(F)}function R(X){const F=i.get(X);if(F.__webglInit===void 0)return;const he=X.source,Se=p.get(he);if(Se){const xe=Se[F.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&D(X),Object.keys(Se).length===0&&p.delete(he)}i.remove(X)}function D(X){const F=i.get(X);n.deleteTexture(F.__webglTexture);const he=X.source,Se=p.get(he);delete Se[F.__cacheKey],o.memory.textures--}function C(X){const F=i.get(X);if(X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(F.__webglFramebuffer[Se]))for(let xe=0;xe<F.__webglFramebuffer[Se].length;xe++)n.deleteFramebuffer(F.__webglFramebuffer[Se][xe]);else n.deleteFramebuffer(F.__webglFramebuffer[Se]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[Se])}else{if(Array.isArray(F.__webglFramebuffer))for(let Se=0;Se<F.__webglFramebuffer.length;Se++)n.deleteFramebuffer(F.__webglFramebuffer[Se]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let Se=0;Se<F.__webglColorRenderbuffer.length;Se++)F.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[Se]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const he=X.textures;for(let Se=0,xe=he.length;Se<xe;Se++){const Ce=i.get(he[Se]);Ce.__webglTexture&&(n.deleteTexture(Ce.__webglTexture),o.memory.textures--),i.remove(he[Se])}i.remove(X)}let b=0;function N(){b=0}function J(){const X=b;return X>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+r.maxTextures),b+=1,X}function K(X){const F=[];return F.push(X.wrapS),F.push(X.wrapT),F.push(X.wrapR||0),F.push(X.magFilter),F.push(X.minFilter),F.push(X.anisotropy),F.push(X.internalFormat),F.push(X.format),F.push(X.type),F.push(X.generateMipmaps),F.push(X.premultiplyAlpha),F.push(X.flipY),F.push(X.unpackAlignment),F.push(X.colorSpace),F.join()}function q(X,F){const he=i.get(X);if(X.isVideoTexture&&rt(X),X.isRenderTargetTexture===!1&&X.version>0&&he.__version!==X.version){const Se=X.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ie(he,X,F);return}}t.bindTexture(n.TEXTURE_2D,he.__webglTexture,n.TEXTURE0+F)}function te(X,F){const he=i.get(X);if(X.version>0&&he.__version!==X.version){Ie(he,X,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,he.__webglTexture,n.TEXTURE0+F)}function Z(X,F){const he=i.get(X);if(X.version>0&&he.__version!==X.version){Ie(he,X,F);return}t.bindTexture(n.TEXTURE_3D,he.__webglTexture,n.TEXTURE0+F)}function oe(X,F){const he=i.get(X);if(X.version>0&&he.__version!==X.version){ae(he,X,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+F)}const H={[nl]:n.REPEAT,[Xn]:n.CLAMP_TO_EDGE,[yf]:n.MIRRORED_REPEAT},ee={[ii]:n.NEAREST,[g_]:n.NEAREST_MIPMAP_NEAREST,[jl]:n.NEAREST_MIPMAP_LINEAR,[Jt]:n.LINEAR,[$c]:n.LINEAR_MIPMAP_NEAREST,[us]:n.LINEAR_MIPMAP_LINEAR},Q={[I3]:n.NEVER,[U3]:n.ALWAYS,[B3]:n.LESS,[ow]:n.LEQUAL,[D3]:n.EQUAL,[N3]:n.GEQUAL,[L3]:n.GREATER,[F3]:n.NOTEQUAL};function ue(X,F){if(F.type===En&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===Jt||F.magFilter===$c||F.magFilter===jl||F.magFilter===us||F.minFilter===Jt||F.minFilter===$c||F.minFilter===jl||F.minFilter===us)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(X,n.TEXTURE_WRAP_S,H[F.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,H[F.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,H[F.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,ee[F.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,ee[F.minFilter]),F.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,Q[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===ii||F.minFilter!==jl&&F.minFilter!==us||F.type===En&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||i.get(F).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");n.texParameterf(X,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy}}}function me(X,F){let he=!1;X.__webglInit===void 0&&(X.__webglInit=!0,F.addEventListener("dispose",P));const Se=F.source;let xe=p.get(Se);xe===void 0&&(xe={},p.set(Se,xe));const Ce=K(F);if(Ce!==X.__cacheKey){xe[Ce]===void 0&&(xe[Ce]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,he=!0),xe[Ce].usedTimes++;const lt=xe[X.__cacheKey];lt!==void 0&&(xe[X.__cacheKey].usedTimes--,lt.usedTimes===0&&D(F)),X.__cacheKey=Ce,X.__webglTexture=xe[Ce].texture}return he}function Ie(X,F,he){let Se=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(Se=n.TEXTURE_3D);const xe=me(X,F),Ce=F.source;t.bindTexture(Se,X.__webglTexture,n.TEXTURE0+he);const lt=i.get(Ce);if(Ce.version!==lt.__version||xe===!0){t.activeTexture(n.TEXTURE0+he);const Ue=$t.getPrimaries($t.workingColorSpace),et=F.colorSpace===Oo?null:$t.getPrimaries(F.colorSpace),yt=F.colorSpace===Oo||Ue===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let Le=x(F.image,!1,r.maxTextureSize);Le=ze(F,Le);const Ze=s.convert(F.format,F.colorSpace),Nt=s.convert(F.type);let pt=A(F.internalFormat,Ze,Nt,F.colorSpace,F.isVideoTexture);ue(Se,F);let Ge;const At=F.mipmaps,St=F.isVideoTexture!==!0,Dt=lt.__version===void 0||xe===!0,$=Ce.dataReady,Fe=w(F,Le);if(F.isDepthTexture)pt=S(F.format===Eu,F.type),Dt&&(St?t.texStorage2D(n.TEXTURE_2D,1,pt,Le.width,Le.height):t.texImage2D(n.TEXTURE_2D,0,pt,Le.width,Le.height,0,Ze,Nt,null));else if(F.isDataTexture)if(At.length>0){St&&Dt&&t.texStorage2D(n.TEXTURE_2D,Fe,pt,At[0].width,At[0].height);for(let ie=0,Me=At.length;ie<Me;ie++)Ge=At[ie],St?$&&t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ge.width,Ge.height,Ze,Nt,Ge.data):t.texImage2D(n.TEXTURE_2D,ie,pt,Ge.width,Ge.height,0,Ze,Nt,Ge.data);F.generateMipmaps=!1}else St?(Dt&&t.texStorage2D(n.TEXTURE_2D,Fe,pt,Le.width,Le.height),$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le.width,Le.height,Ze,Nt,Le.data)):t.texImage2D(n.TEXTURE_2D,0,pt,Le.width,Le.height,0,Ze,Nt,Le.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){St&&Dt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Fe,pt,At[0].width,At[0].height,Le.depth);for(let ie=0,Me=At.length;ie<Me;ie++)if(Ge=At[ie],F.format!==Jn)if(Ze!==null)if(St){if($)if(F.layerUpdates.size>0){const ke=fS(Ge.width,Ge.height,F.format,F.type);for(const _t of F.layerUpdates){const Ut=Ge.data.subarray(_t*ke/Ge.data.BYTES_PER_ELEMENT,(_t+1)*ke/Ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,_t,Ge.width,Ge.height,1,Ze,Ut,0,0)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,Ge.width,Ge.height,Le.depth,Ze,Ge.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ie,pt,Ge.width,Ge.height,Le.depth,0,Ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else St?$&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,Ge.width,Ge.height,Le.depth,Ze,Nt,Ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ie,pt,Ge.width,Ge.height,Le.depth,0,Ze,Nt,Ge.data)}else{St&&Dt&&t.texStorage2D(n.TEXTURE_2D,Fe,pt,At[0].width,At[0].height);for(let ie=0,Me=At.length;ie<Me;ie++)Ge=At[ie],F.format!==Jn?Ze!==null?St?$&&t.compressedTexSubImage2D(n.TEXTURE_2D,ie,0,0,Ge.width,Ge.height,Ze,Ge.data):t.compressedTexImage2D(n.TEXTURE_2D,ie,pt,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?$&&t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ge.width,Ge.height,Ze,Nt,Ge.data):t.texImage2D(n.TEXTURE_2D,ie,pt,Ge.width,Ge.height,0,Ze,Nt,Ge.data)}else if(F.isDataArrayTexture)if(St){if(Dt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Fe,pt,Le.width,Le.height,Le.depth),$)if(F.layerUpdates.size>0){const ie=fS(Le.width,Le.height,F.format,F.type);for(const Me of F.layerUpdates){const ke=Le.data.subarray(Me*ie/Le.data.BYTES_PER_ELEMENT,(Me+1)*ie/Le.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Me,Le.width,Le.height,1,Ze,Nt,ke)}F.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Le.width,Le.height,Le.depth,Ze,Nt,Le.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,pt,Le.width,Le.height,Le.depth,0,Ze,Nt,Le.data);else if(F.isData3DTexture)St?(Dt&&t.texStorage3D(n.TEXTURE_3D,Fe,pt,Le.width,Le.height,Le.depth),$&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Le.width,Le.height,Le.depth,Ze,Nt,Le.data)):t.texImage3D(n.TEXTURE_3D,0,pt,Le.width,Le.height,Le.depth,0,Ze,Nt,Le.data);else if(F.isFramebufferTexture){if(Dt)if(St)t.texStorage2D(n.TEXTURE_2D,Fe,pt,Le.width,Le.height);else{let ie=Le.width,Me=Le.height;for(let ke=0;ke<Fe;ke++)t.texImage2D(n.TEXTURE_2D,ke,pt,ie,Me,0,Ze,Nt,null),ie>>=1,Me>>=1}}else if(At.length>0){if(St&&Dt){const ie=Qe(At[0]);t.texStorage2D(n.TEXTURE_2D,Fe,pt,ie.width,ie.height)}for(let ie=0,Me=At.length;ie<Me;ie++)Ge=At[ie],St?$&&t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ze,Nt,Ge):t.texImage2D(n.TEXTURE_2D,ie,pt,Ze,Nt,Ge);F.generateMipmaps=!1}else if(St){if(Dt){const ie=Qe(Le);t.texStorage2D(n.TEXTURE_2D,Fe,pt,ie.width,ie.height)}$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ze,Nt,Le)}else t.texImage2D(n.TEXTURE_2D,0,pt,Ze,Nt,Le);y(F)&&g(Se),lt.__version=Ce.version,F.onUpdate&&F.onUpdate(F)}X.__version=F.version}function ae(X,F,he){if(F.image.length!==6)return;const Se=me(X,F),xe=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+he);const Ce=i.get(xe);if(xe.version!==Ce.__version||Se===!0){t.activeTexture(n.TEXTURE0+he);const lt=$t.getPrimaries($t.workingColorSpace),Ue=F.colorSpace===Oo?null:$t.getPrimaries(F.colorSpace),et=F.colorSpace===Oo||lt===Ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,et);const yt=F.isCompressedTexture||F.image[0].isCompressedTexture,Le=F.image[0]&&F.image[0].isDataTexture,Ze=[];for(let Me=0;Me<6;Me++)!yt&&!Le?Ze[Me]=x(F.image[Me],!0,r.maxCubemapSize):Ze[Me]=Le?F.image[Me].image:F.image[Me],Ze[Me]=ze(F,Ze[Me]);const Nt=Ze[0],pt=s.convert(F.format,F.colorSpace),Ge=s.convert(F.type),At=A(F.internalFormat,pt,Ge,F.colorSpace),St=F.isVideoTexture!==!0,Dt=Ce.__version===void 0||Se===!0,$=xe.dataReady;let Fe=w(F,Nt);ue(n.TEXTURE_CUBE_MAP,F);let ie;if(yt){St&&Dt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Fe,At,Nt.width,Nt.height);for(let Me=0;Me<6;Me++){ie=Ze[Me].mipmaps;for(let ke=0;ke<ie.length;ke++){const _t=ie[ke];F.format!==Jn?pt!==null?St?$&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke,0,0,_t.width,_t.height,pt,_t.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke,At,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):St?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke,0,0,_t.width,_t.height,pt,Ge,_t.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke,At,_t.width,_t.height,0,pt,Ge,_t.data)}}}else{if(ie=F.mipmaps,St&&Dt){ie.length>0&&Fe++;const Me=Qe(Ze[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Fe,At,Me.width,Me.height)}for(let Me=0;Me<6;Me++)if(Le){St?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Ze[Me].width,Ze[Me].height,pt,Ge,Ze[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,At,Ze[Me].width,Ze[Me].height,0,pt,Ge,Ze[Me].data);for(let ke=0;ke<ie.length;ke++){const Ut=ie[ke].image[Me].image;St?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke+1,0,0,Ut.width,Ut.height,pt,Ge,Ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke+1,At,Ut.width,Ut.height,0,pt,Ge,Ut.data)}}else{St?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,pt,Ge,Ze[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,At,pt,Ge,Ze[Me]);for(let ke=0;ke<ie.length;ke++){const _t=ie[ke];St?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke+1,0,0,pt,Ge,_t.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ke+1,At,pt,Ge,_t.image[Me])}}}y(F)&&g(n.TEXTURE_CUBE_MAP),Ce.__version=xe.version,F.onUpdate&&F.onUpdate(F)}X.__version=F.version}function ve(X,F,he,Se,xe,Ce){const lt=s.convert(he.format,he.colorSpace),Ue=s.convert(he.type),et=A(he.internalFormat,lt,Ue,he.colorSpace);if(!i.get(F).__hasExternalTextures){const Le=Math.max(1,F.width>>Ce),Ze=Math.max(1,F.height>>Ce);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,Ce,et,Le,Ze,F.depth,0,lt,Ue,null):t.texImage2D(xe,Ce,et,Le,Ze,0,lt,Ue,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),Ae(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,xe,i.get(he).__webglTexture,0,Oe(F)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,xe,i.get(he).__webglTexture,Ce),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ye(X,F,he){if(n.bindRenderbuffer(n.RENDERBUFFER,X),F.depthBuffer){const Se=F.depthTexture,xe=Se&&Se.isDepthTexture?Se.type:null,Ce=S(F.stencilBuffer,xe),lt=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=Oe(F);Ae(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,Ce,F.width,F.height):he?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,Ce,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,Ce,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,lt,n.RENDERBUFFER,X)}else{const Se=F.textures;for(let xe=0;xe<Se.length;xe++){const Ce=Se[xe],lt=s.convert(Ce.format,Ce.colorSpace),Ue=s.convert(Ce.type),et=A(Ce.internalFormat,lt,Ue,Ce.colorSpace),yt=Oe(F);he&&Ae(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,et,F.width,F.height):Ae(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,yt,et,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,et,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function be(X,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),q(F.depthTexture,0);const Se=i.get(F.depthTexture).__webglTexture,xe=Oe(F);if(F.depthTexture.format===lu)Ae(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(F.depthTexture.format===Eu)Ae(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function Xe(X){const F=i.get(X),he=X.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==X.depthTexture){const Se=X.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),Se){const xe=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,Se.removeEventListener("dispose",xe)};Se.addEventListener("dispose",xe),F.__depthDisposeCallback=xe}F.__boundDepthTexture=Se}if(X.depthTexture&&!F.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");be(F.__webglFramebuffer,X)}else if(he){F.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[Se]),F.__webglDepthbuffer[Se]===void 0)F.__webglDepthbuffer[Se]=n.createRenderbuffer(),ye(F.__webglDepthbuffer[Se],X,!1);else{const xe=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ce=F.__webglDepthbuffer[Se];n.bindRenderbuffer(n.RENDERBUFFER,Ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,xe,n.RENDERBUFFER,Ce)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=n.createRenderbuffer(),ye(F.__webglDepthbuffer,X,!1);else{const Se=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=F.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,xe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function st(X,F,he){const Se=i.get(X);F!==void 0&&ve(Se.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),he!==void 0&&Xe(X)}function $e(X){const F=X.texture,he=i.get(X),Se=i.get(F);X.addEventListener("dispose",T);const xe=X.textures,Ce=X.isWebGLCubeRenderTarget===!0,lt=xe.length>1;if(lt||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=F.version,o.memory.textures++),Ce){he.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(F.mipmaps&&F.mipmaps.length>0){he.__webglFramebuffer[Ue]=[];for(let et=0;et<F.mipmaps.length;et++)he.__webglFramebuffer[Ue][et]=n.createFramebuffer()}else he.__webglFramebuffer[Ue]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){he.__webglFramebuffer=[];for(let Ue=0;Ue<F.mipmaps.length;Ue++)he.__webglFramebuffer[Ue]=n.createFramebuffer()}else he.__webglFramebuffer=n.createFramebuffer();if(lt)for(let Ue=0,et=xe.length;Ue<et;Ue++){const yt=i.get(xe[Ue]);yt.__webglTexture===void 0&&(yt.__webglTexture=n.createTexture(),o.memory.textures++)}if(X.samples>0&&Ae(X)===!1){he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let Ue=0;Ue<xe.length;Ue++){const et=xe[Ue];he.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,he.__webglColorRenderbuffer[Ue]);const yt=s.convert(et.format,et.colorSpace),Le=s.convert(et.type),Ze=A(et.internalFormat,yt,Le,et.colorSpace,X.isXRRenderTarget===!0),Nt=Oe(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,Nt,Ze,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,he.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),ye(he.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ce){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),ue(n.TEXTURE_CUBE_MAP,F);for(let Ue=0;Ue<6;Ue++)if(F.mipmaps&&F.mipmaps.length>0)for(let et=0;et<F.mipmaps.length;et++)ve(he.__webglFramebuffer[Ue][et],X,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,et);else ve(he.__webglFramebuffer[Ue],X,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);y(F)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(lt){for(let Ue=0,et=xe.length;Ue<et;Ue++){const yt=xe[Ue],Le=i.get(yt);t.bindTexture(n.TEXTURE_2D,Le.__webglTexture),ue(n.TEXTURE_2D,yt),ve(he.__webglFramebuffer,X,yt,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,0),y(yt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Ue=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Ue=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ue,Se.__webglTexture),ue(Ue,F),F.mipmaps&&F.mipmaps.length>0)for(let et=0;et<F.mipmaps.length;et++)ve(he.__webglFramebuffer[et],X,F,n.COLOR_ATTACHMENT0,Ue,et);else ve(he.__webglFramebuffer,X,F,n.COLOR_ATTACHMENT0,Ue,0);y(F)&&g(Ue),t.unbindTexture()}X.depthBuffer&&Xe(X)}function Ve(X){const F=X.textures;for(let he=0,Se=F.length;he<Se;he++){const xe=F[he];if(y(xe)){const Ce=X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,lt=i.get(xe).__webglTexture;t.bindTexture(Ce,lt),g(Ce),t.unbindTexture()}}}const k=[],Te=[];function Pe(X){if(X.samples>0){if(Ae(X)===!1){const F=X.textures,he=X.width,Se=X.height;let xe=n.COLOR_BUFFER_BIT;const Ce=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=i.get(X),Ue=F.length>1;if(Ue)for(let et=0;et<F.length;et++)t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,lt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglFramebuffer);for(let et=0;et<F.length;et++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),Ue){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,lt.__webglColorRenderbuffer[et]);const yt=i.get(F[et]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,yt,0)}n.blitFramebuffer(0,0,he,Se,0,0,he,Se,xe,n.NEAREST),l===!0&&(k.length=0,Te.length=0,k.push(n.COLOR_ATTACHMENT0+et),X.depthBuffer&&X.resolveDepthBuffer===!1&&(k.push(Ce),Te.push(Ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Te)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,k))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let et=0;et<F.length;et++){t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,lt.__webglColorRenderbuffer[et]);const yt=i.get(F[et]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&l){const F=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])}}}function Oe(X){return Math.min(r.maxSamples,X.samples)}function Ae(X){const F=i.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function rt(X){const F=o.render.frame;h.get(X)!==F&&(h.set(X,F),X.update())}function ze(X,F){const he=X.colorSpace,Se=X.format,xe=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||he!==ms&&he!==Oo&&($t.getTransfer(he)===fn?(Se!==Jn||xe!==yr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",he)),F}function Qe(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(u.width=X.naturalWidth||X.width,u.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(u.width=X.displayWidth,u.height=X.displayHeight):(u.width=X.width,u.height=X.height),u}this.allocateTextureUnit=J,this.resetTextureUnits=N,this.setTexture2D=q,this.setTexture2DArray=te,this.setTexture3D=Z,this.setTextureCube=oe,this.rebindTextures=st,this.setupRenderTarget=$e,this.updateRenderTargetMipmap=Ve,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=Ae}function Q3(n,e){function t(i,r=Oo){let s;const o=$t.getTransfer(r);if(i===yr)return n.UNSIGNED_BYTE;if(i===y_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===x_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ZM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===v_)return n.BYTE;if(i===__)return n.SHORT;if(i===xf)return n.UNSIGNED_SHORT;if(i===xp)return n.INT;if(i===mo)return n.UNSIGNED_INT;if(i===En)return n.FLOAT;if(i===ri)return n.HALF_FLOAT;if(i===qM)return n.ALPHA;if(i===$M)return n.RGB;if(i===Jn)return n.RGBA;if(i===ew)return n.LUMINANCE;if(i===tw)return n.LUMINANCE_ALPHA;if(i===lu)return n.DEPTH_COMPONENT;if(i===Eu)return n.DEPTH_STENCIL;if(i===Ap)return n.RED;if(i===Sp)return n.RED_INTEGER;if(i===nw)return n.RG;if(i===A_)return n.RG_INTEGER;if(i===S_)return n.RGBA_INTEGER;if(i===ad||i===ld||i===ud||i===cd)if(o===fn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ad)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ld)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ud)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===cd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ad)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ld)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ud)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===cd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===nv||i===iv||i===rv||i===sv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===nv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===iv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===rv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===sv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===ov||i===av||i===lv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===ov||i===av)return o===fn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===lv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===uv||i===cv||i===fv||i===hv||i===dv||i===pv||i===mv||i===gv||i===vv||i===_v||i===yv||i===xv||i===Av||i===Sv)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===uv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===cv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===fv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===hv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===dv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===pv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===mv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===gv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===vv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===_v)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===yv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===xv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Av)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Sv)return o===fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===fd||i===Mv||i===wv)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===fd)return o===fn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Mv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===wv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===iw||i===Ev||i===Cv||i===Tv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===fd)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Ev)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Cv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Tv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===wu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class Z3 extends Wn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Go extends Gt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Y9={type:"move"};class dx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const y=t.getJointPose(x,i),g=this._getHandJoint(u,x);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Y9)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Go;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const j9=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Q9=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Z9{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new en,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new mi({vertexShader:j9,fragmentShader:Q9,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new xn(new ta(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class q9 extends _o{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,d=null,p=null,m=null,v=null;const x=new Z9,y=t.getContextAttributes();let g=null,A=null;const S=[],w=[],P=new Ee;let T=null;const R=new Wn;R.layers.enable(1),R.viewport=new sn;const D=new Wn;D.layers.enable(2),D.viewport=new sn;const C=[R,D],b=new Z3;b.layers.enable(1),b.layers.enable(2);let N=null,J=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let ve=S[ae];return ve===void 0&&(ve=new dx,S[ae]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(ae){let ve=S[ae];return ve===void 0&&(ve=new dx,S[ae]=ve),ve.getGripSpace()},this.getHand=function(ae){let ve=S[ae];return ve===void 0&&(ve=new dx,S[ae]=ve),ve.getHandSpace()};function K(ae){const ve=w.indexOf(ae.inputSource);if(ve===-1)return;const ye=S[ve];ye!==void 0&&(ye.update(ae.inputSource,ae.frame,u||o),ye.dispatchEvent({type:ae.type,data:ae.inputSource}))}function q(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",q),r.removeEventListener("inputsourceschange",te);for(let ae=0;ae<S.length;ae++){const ve=w[ae];ve!==null&&(w[ae]=null,S[ae].disconnect(ve))}N=null,J=null,x.reset(),e.setRenderTarget(g),m=null,p=null,d=null,r=null,A=null,Ie.stop(),i.isPresenting=!1,e.setPixelRatio(T),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){s=ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){a=ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ae){u=ae},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ae){if(r=ae,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",q),r.addEventListener("inputsourceschange",te),y.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0){const ve={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,ve),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),A=new xr(m.framebufferWidth,m.framebufferHeight,{format:Jn,type:yr,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let ve=null,ye=null,be=null;y.depth&&(be=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=y.stencil?Eu:lu,ye=y.stencil?wu:mo);const Xe={colorFormat:t.RGBA8,depthFormat:be,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(Xe),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),A=new xr(p.textureWidth,p.textureHeight,{format:Jn,type:yr,depthTexture:new T_(p.textureWidth,p.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Ie.setContext(r),Ie.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function te(ae){for(let ve=0;ve<ae.removed.length;ve++){const ye=ae.removed[ve],be=w.indexOf(ye);be>=0&&(w[be]=null,S[be].disconnect(ye))}for(let ve=0;ve<ae.added.length;ve++){const ye=ae.added[ve];let be=w.indexOf(ye);if(be===-1){for(let st=0;st<S.length;st++)if(st>=w.length){w.push(ye),be=st;break}else if(w[st]===null){w[st]=ye,be=st;break}if(be===-1)break}const Xe=S[be];Xe&&Xe.connect(ye)}}const Z=new z,oe=new z;function H(ae,ve,ye){Z.setFromMatrixPosition(ve.matrixWorld),oe.setFromMatrixPosition(ye.matrixWorld);const be=Z.distanceTo(oe),Xe=ve.projectionMatrix.elements,st=ye.projectionMatrix.elements,$e=Xe[14]/(Xe[10]-1),Ve=Xe[14]/(Xe[10]+1),k=(Xe[9]+1)/Xe[5],Te=(Xe[9]-1)/Xe[5],Pe=(Xe[8]-1)/Xe[0],Oe=(st[8]+1)/st[0],Ae=$e*Pe,rt=$e*Oe,ze=be/(-Pe+Oe),Qe=ze*-Pe;if(ve.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(Qe),ae.translateZ(ze),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert(),Xe[10]===-1)ae.projectionMatrix.copy(ve.projectionMatrix),ae.projectionMatrixInverse.copy(ve.projectionMatrixInverse);else{const X=$e+ze,F=Ve+ze,he=Ae-Qe,Se=rt+(be-Qe),xe=k*Ve/F*X,Ce=Te*Ve/F*X;ae.projectionMatrix.makePerspective(he,Se,xe,Ce,X,F),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}}function ee(ae,ve){ve===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(ve.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(r===null)return;let ve=ae.near,ye=ae.far;x.texture!==null&&(x.depthNear>0&&(ve=x.depthNear),x.depthFar>0&&(ye=x.depthFar)),b.near=D.near=R.near=ve,b.far=D.far=R.far=ye,(N!==b.near||J!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),N=b.near,J=b.far);const be=ae.parent,Xe=b.cameras;ee(b,be);for(let st=0;st<Xe.length;st++)ee(Xe[st],be);Xe.length===2?H(b,R,D):b.projectionMatrix.copy(R.projectionMatrix),Q(ae,b,be)};function Q(ae,ve,ye){ye===null?ae.matrix.copy(ve.matrixWorld):(ae.matrix.copy(ye.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(ve.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(ve.projectionMatrix),ae.projectionMatrixInverse.copy(ve.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=Mf*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ae){l=ae,p!==null&&(p.fixedFoveation=ae),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ae)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(b)};let ue=null;function me(ae,ve){if(h=ve.getViewerPose(u||o),v=ve,h!==null){const ye=h.views;m!==null&&(e.setRenderTargetFramebuffer(A,m.framebuffer),e.setRenderTarget(A));let be=!1;ye.length!==b.cameras.length&&(b.cameras.length=0,be=!0);for(let st=0;st<ye.length;st++){const $e=ye[st];let Ve=null;if(m!==null)Ve=m.getViewport($e);else{const Te=d.getViewSubImage(p,$e);Ve=Te.viewport,st===0&&(e.setRenderTargetTextures(A,Te.colorTexture,p.ignoreDepthValues?void 0:Te.depthStencilTexture),e.setRenderTarget(A))}let k=C[st];k===void 0&&(k=new Wn,k.layers.enable(st),k.viewport=new sn,C[st]=k),k.matrix.fromArray($e.transform.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale),k.projectionMatrix.fromArray($e.projectionMatrix),k.projectionMatrixInverse.copy(k.projectionMatrix).invert(),k.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),st===0&&(b.matrix.copy(k.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),be===!0&&b.cameras.push(k)}const Xe=r.enabledFeatures;if(Xe&&Xe.includes("depth-sensing")){const st=d.getDepthInformation(ye[0]);st&&st.isValid&&st.texture&&x.init(e,st,r.renderState)}}for(let ye=0;ye<S.length;ye++){const be=w[ye],Xe=S[ye];be!==null&&Xe!==void 0&&Xe.update(be,ve,u||o)}ue&&ue(ae,ve),ve.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ve}),v=null}const Ie=new X3;Ie.setAnimationLoop(me),this.setAnimationLoop=function(ae){ue=ae},this.dispose=function(){}}}const Pl=new Hr,$9=new dt;function e8(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function i(y,g){g.color.getRGB(y.fogColor.value,V3(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function r(y,g,A,S,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),d(y,g)):g.isMeshPhongMaterial?(s(y,g),h(y,g)):g.isMeshStandardMaterial?(s(y,g),p(y,g),g.isMeshPhysicalMaterial&&m(y,g,w)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),x(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,A,S):g.isSpriteMaterial?u(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===Fi&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===Fi&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const A=e.get(g),S=A.envMap,w=A.envMapRotation;S&&(y.envMap.value=S,Pl.copy(w),Pl.x*=-1,Pl.y*=-1,Pl.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Pl.y*=-1,Pl.z*=-1),y.envMapRotation.value.setFromMatrix4($9.makeRotationFromEuler(Pl)),y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap&&(y.lightMap.value=g.lightMap,y.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,y.lightMapTransform)),g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,A,S){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*A,y.scale.value=S*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function u(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function h(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function d(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function p(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),g.envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,A){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Fi&&y.clearcoatNormalScale.value.negate())),g.dispersion>0&&(y.dispersion.value=g.dispersion),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=A.texture,y.transmissionSamplerSize.value.set(A.width,A.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function x(y,g){const A=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(A.matrixWorld),y.nearDistance.value=A.shadow.camera.near,y.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function t8(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,S){const w=S.program;i.uniformBlockBinding(A,w)}function u(A,S){let w=r[A.id];w===void 0&&(v(A),w=h(A),r[A.id]=w,A.addEventListener("dispose",y));const P=S.program;i.updateUBOMapping(A,P);const T=e.render.frame;s[A.id]!==T&&(p(A),s[A.id]=T)}function h(A){const S=d();A.__bindingPointIndex=S;const w=n.createBuffer(),P=A.__size,T=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,P,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,w),w}function d(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(A){const S=r[A.id],w=A.uniforms,P=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let T=0,R=w.length;T<R;T++){const D=Array.isArray(w[T])?w[T]:[w[T]];for(let C=0,b=D.length;C<b;C++){const N=D[C];if(m(N,T,C,P)===!0){const J=N.__offset,K=Array.isArray(N.value)?N.value:[N.value];let q=0;for(let te=0;te<K.length;te++){const Z=K[te],oe=x(Z);typeof Z=="number"||typeof Z=="boolean"?(N.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,J+q,N.__data)):Z.isMatrix3?(N.__data[0]=Z.elements[0],N.__data[1]=Z.elements[1],N.__data[2]=Z.elements[2],N.__data[3]=0,N.__data[4]=Z.elements[3],N.__data[5]=Z.elements[4],N.__data[6]=Z.elements[5],N.__data[7]=0,N.__data[8]=Z.elements[6],N.__data[9]=Z.elements[7],N.__data[10]=Z.elements[8],N.__data[11]=0):(Z.toArray(N.__data,q),q+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,J,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(A,S,w,P){const T=A.value,R=S+"_"+w;if(P[R]===void 0)return typeof T=="number"||typeof T=="boolean"?P[R]=T:P[R]=T.clone(),!0;{const D=P[R];if(typeof T=="number"||typeof T=="boolean"){if(D!==T)return P[R]=T,!0}else if(D.equals(T)===!1)return D.copy(T),!0}return!1}function v(A){const S=A.uniforms;let w=0;const P=16;for(let R=0,D=S.length;R<D;R++){const C=Array.isArray(S[R])?S[R]:[S[R]];for(let b=0,N=C.length;b<N;b++){const J=C[b],K=Array.isArray(J.value)?J.value:[J.value];for(let q=0,te=K.length;q<te;q++){const Z=K[q],oe=x(Z),H=w%P,ee=H%oe.boundary,Q=H+ee;w+=ee,Q!==0&&P-Q<oe.storage&&(w+=P-Q),J.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=w,w+=oe.storage}}}const T=w%P;return T>0&&(w+=P-T),A.__size=w,A.__cache={},this}function x(A){const S={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(S.boundary=4,S.storage=4):A.isVector2?(S.boundary=8,S.storage=8):A.isVector3||A.isColor?(S.boundary=16,S.storage=12):A.isVector4?(S.boundary=16,S.storage=16):A.isMatrix3?(S.boundary=48,S.storage=48):A.isMatrix4?(S.boundary=64,S.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),S}function y(A){const S=A.target;S.removeEventListener("dispose",y);const w=o.indexOf(S.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const A in r)n.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:u,dispose:g}}class gw{constructor(e={}){const{canvas:t=k3(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),v=new Int32Array(4);let x=null,y=null;const g=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pr,this.toneMapping=uo,this.toneMappingExposure=1;const S=this;let w=!1,P=0,T=0,R=null,D=-1,C=null;const b=new sn,N=new sn;let J=null;const K=new He(0);let q=0,te=t.width,Z=t.height,oe=1,H=null,ee=null;const Q=new sn(0,0,te,Z),ue=new sn(0,0,te,Z);let me=!1;const Ie=new Cp;let ae=!1,ve=!1;const ye=new dt,be=new z,Xe=new sn,st={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let $e=!1;function Ve(){return R===null?oe:1}let k=i;function Te(B,O){return t.getContext(B,O)}try{const B={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Lu}`),t.addEventListener("webglcontextlost",ie,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",ke,!1),k===null){const O="webgl2";if(k=Te(O,B),k===null)throw Te(O)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let Pe,Oe,Ae,rt,ze,Qe,X,F,he,Se,xe,Ce,lt,Ue,et,yt,Le,Ze,Nt,pt,Ge,At,St,Dt;function $(){Pe=new l5(k),Pe.init(),At=new Q3(k,Pe),Oe=new n5(k,Pe,e,At),Ae=new H9(k),rt=new f5(k),ze=new b9,Qe=new K9(k,Pe,Ae,ze,Oe,At,rt),X=new r5(S),F=new a5(S),he=new _z(k),St=new e5(k,he),Se=new u5(k,he,rt,St),xe=new d5(k,Se,he,rt),Nt=new h5(k,Oe,Qe),yt=new i5(ze),Ce=new R9(S,X,F,Pe,Oe,St,yt),lt=new e8(S,ze),Ue=new I9,et=new U9(Pe),Ze=new $G(S,X,F,Ae,xe,p,l),Le=new z9(S,xe,Oe),Dt=new t8(k,rt,Oe,Ae),pt=new t5(k,Pe,rt),Ge=new c5(k,Pe,rt),rt.programs=Ce.programs,S.capabilities=Oe,S.extensions=Pe,S.properties=ze,S.renderLists=Ue,S.shadowMap=Le,S.state=Ae,S.info=rt}$();const Fe=new q9(S,k);this.xr=Fe,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){const B=Pe.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=Pe.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(B){B!==void 0&&(oe=B,this.setSize(te,Z,!1))},this.getSize=function(B){return B.set(te,Z)},this.setSize=function(B,O,G=!0){if(Fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}te=B,Z=O,t.width=Math.floor(B*oe),t.height=Math.floor(O*oe),G===!0&&(t.style.width=B+"px",t.style.height=O+"px"),this.setViewport(0,0,B,O)},this.getDrawingBufferSize=function(B){return B.set(te*oe,Z*oe).floor()},this.setDrawingBufferSize=function(B,O,G){te=B,Z=O,oe=G,t.width=Math.floor(B*G),t.height=Math.floor(O*G),this.setViewport(0,0,B,O)},this.getCurrentViewport=function(B){return B.copy(b)},this.getViewport=function(B){return B.copy(Q)},this.setViewport=function(B,O,G,Y){B.isVector4?Q.set(B.x,B.y,B.z,B.w):Q.set(B,O,G,Y),Ae.viewport(b.copy(Q).multiplyScalar(oe).round())},this.getScissor=function(B){return B.copy(ue)},this.setScissor=function(B,O,G,Y){B.isVector4?ue.set(B.x,B.y,B.z,B.w):ue.set(B,O,G,Y),Ae.scissor(N.copy(ue).multiplyScalar(oe).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(B){Ae.setScissorTest(me=B)},this.setOpaqueSort=function(B){H=B},this.setTransparentSort=function(B){ee=B},this.getClearColor=function(B){return B.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(B=!0,O=!0,G=!0){let Y=0;if(B){let V=!1;if(R!==null){const le=R.texture.format;V=le===S_||le===A_||le===Sp}if(V){const le=R.texture.type,ce=le===yr||le===mo||le===xf||le===wu||le===y_||le===x_,pe=Ze.getClearColor(),de=Ze.getClearAlpha(),We=pe.r,Re=pe.g,we=pe.b;ce?(m[0]=We,m[1]=Re,m[2]=we,m[3]=de,k.clearBufferuiv(k.COLOR,0,m)):(v[0]=We,v[1]=Re,v[2]=we,v[3]=de,k.clearBufferiv(k.COLOR,0,v))}else Y|=k.COLOR_BUFFER_BIT}O&&(Y|=k.DEPTH_BUFFER_BIT),G&&(Y|=k.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),k.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ie,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),Ue.dispose(),et.dispose(),ze.dispose(),X.dispose(),F.dispose(),xe.dispose(),St.dispose(),Dt.dispose(),Ce.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",Gi),Fe.removeEventListener("sessionend",ku),ys.stop()};function ie(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const B=rt.autoReset,O=Le.enabled,G=Le.autoUpdate,Y=Le.needsUpdate,V=Le.type;$(),rt.autoReset=B,Le.enabled=O,Le.autoUpdate=G,Le.needsUpdate=Y,Le.type=V}function ke(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function _t(B){const O=B.target;O.removeEventListener("dispose",_t),Ut(O)}function Ut(B){mn(B),ze.remove(B)}function mn(B){const O=ze.get(B).programs;O!==void 0&&(O.forEach(function(G){Ce.releaseProgram(G)}),B.isShaderMaterial&&Ce.releaseShaderCache(B))}this.renderBufferDirect=function(B,O,G,Y,V,le){O===null&&(O=st);const ce=V.isMesh&&V.matrixWorld.determinant()<0,pe=L(B,O,G,Y,V);Ae.setMaterial(Y,ce);let de=G.index,We=1;if(Y.wireframe===!0){if(de=Se.getWireframeAttribute(G),de===void 0)return;We=2}const Re=G.drawRange,we=G.attributes.position;let Ye=Re.start*We,nt=(Re.start+Re.count)*We;le!==null&&(Ye=Math.max(Ye,le.start*We),nt=Math.min(nt,(le.start+le.count)*We)),de!==null?(Ye=Math.max(Ye,0),nt=Math.min(nt,de.count)):we!=null&&(Ye=Math.max(Ye,0),nt=Math.min(nt,we.count));const ft=nt-Ye;if(ft<0||ft===1/0)return;St.setup(V,Y,pe,G,de);let xt,Je=pt;if(de!==null&&(xt=he.get(de),Je=Ge,Je.setIndex(xt)),V.isMesh)Y.wireframe===!0?(Ae.setLineWidth(Y.wireframeLinewidth*Ve()),Je.setMode(k.LINES)):Je.setMode(k.TRIANGLES);else if(V.isLine){let Be=Y.linewidth;Be===void 0&&(Be=1),Ae.setLineWidth(Be*Ve()),V.isLineSegments?Je.setMode(k.LINES):V.isLineLoop?Je.setMode(k.LINE_LOOP):Je.setMode(k.LINE_STRIP)}else V.isPoints?Je.setMode(k.POINTS):V.isSprite&&Je.setMode(k.TRIANGLES);if(V.isBatchedMesh)if(V._multiDrawInstances!==null)Je.renderMultiDrawInstances(V._multiDrawStarts,V._multiDrawCounts,V._multiDrawCount,V._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))Je.renderMultiDraw(V._multiDrawStarts,V._multiDrawCounts,V._multiDrawCount);else{const Be=V._multiDrawStarts,mt=V._multiDrawCounts,ut=V._multiDrawCount,gt=de?he.get(de).bytesPerElement:1,Kt=ze.get(Y).currentProgram.getUniforms();for(let nn=0;nn<ut;nn++)Kt.setValue(k,"_gl_DrawID",nn),Je.render(Be[nn]/gt,mt[nn])}else if(V.isInstancedMesh)Je.renderInstances(Ye,ft,V.count);else if(G.isInstancedBufferGeometry){const Be=G._maxInstanceCount!==void 0?G._maxInstanceCount:1/0,mt=Math.min(G.instanceCount,Be);Je.renderInstances(Ye,ft,mt)}else Je.render(Ye,ft)};function kn(B,O,G){B.transparent===!0&&B.side===lr&&B.forceSinglePass===!1?(B.side=Fi,B.needsUpdate=!0,Ct(B,O,G),B.side=ho,B.needsUpdate=!0,Ct(B,O,G),B.side=lr):Ct(B,O,G)}this.compile=function(B,O,G=null){G===null&&(G=B),y=et.get(G),y.init(O),A.push(y),G.traverseVisible(function(V){V.isLight&&V.layers.test(O.layers)&&(y.pushLight(V),V.castShadow&&y.pushShadow(V))}),B!==G&&B.traverseVisible(function(V){V.isLight&&V.layers.test(O.layers)&&(y.pushLight(V),V.castShadow&&y.pushShadow(V))}),y.setupLights();const Y=new Set;return B.traverse(function(V){const le=V.material;if(le)if(Array.isArray(le))for(let ce=0;ce<le.length;ce++){const pe=le[ce];kn(pe,G,V),Y.add(pe)}else kn(le,G,V),Y.add(le)}),A.pop(),y=null,Y},this.compileAsync=function(B,O,G=null){const Y=this.compile(B,O,G);return new Promise(V=>{function le(){if(Y.forEach(function(ce){ze.get(ce).currentProgram.isReady()&&Y.delete(ce)}),Y.size===0){V(B);return}setTimeout(le,10)}Pe.get("KHR_parallel_shader_compile")!==null?le():setTimeout(le,10)})};let Vt=null;function tr(B){Vt&&Vt(B)}function Gi(){ys.stop()}function ku(){ys.start()}const ys=new X3;ys.setAnimationLoop(tr),typeof self<"u"&&ys.setContext(self),this.setAnimationLoop=function(B){Vt=B,Fe.setAnimationLoop(B),B===null?ys.stop():ys.start()},Fe.addEventListener("sessionstart",Gi),Fe.addEventListener("sessionend",ku),this.render=function(B,O){if(O!==void 0&&O.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),O.parent===null&&O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),Fe.enabled===!0&&Fe.isPresenting===!0&&(Fe.cameraAutoUpdate===!0&&Fe.updateCamera(O),O=Fe.getCamera()),B.isScene===!0&&B.onBeforeRender(S,B,O,R),y=et.get(B,A.length),y.init(O),A.push(y),ye.multiplyMatrices(O.projectionMatrix,O.matrixWorldInverse),Ie.setFromProjectionMatrix(ye),ve=this.localClippingEnabled,ae=yt.init(this.clippingPlanes,ve),x=Ue.get(B,g.length),x.init(),g.push(x),Fe.enabled===!0&&Fe.isPresenting===!0){const le=S.xr.getDepthSensingMesh();le!==null&&pl(le,O,-1/0,S.sortObjects)}pl(B,O,0,S.sortObjects),x.finish(),S.sortObjects===!0&&x.sort(H,ee),$e=Fe.enabled===!1||Fe.isPresenting===!1||Fe.hasDepthSensing()===!1,$e&&Ze.addToRenderList(x,B),this.info.render.frame++,ae===!0&&yt.beginShadows();const G=y.state.shadowsArray;Le.render(G,B,O),ae===!0&&yt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Y=x.opaque,V=x.transmissive;if(y.setupLights(),O.isArrayCamera){const le=O.cameras;if(V.length>0)for(let ce=0,pe=le.length;ce<pe;ce++){const de=le[ce];ia(Y,V,B,de)}$e&&Ze.render(B);for(let ce=0,pe=le.length;ce<pe;ce++){const de=le[ce];Vs(x,B,de,de.viewport)}}else V.length>0&&ia(Y,V,B,O),$e&&Ze.render(B),Vs(x,B,O);R!==null&&(Qe.updateMultisampleRenderTarget(R),Qe.updateRenderTargetMipmap(R)),B.isScene===!0&&B.onAfterRender(S,B,O),St.resetDefaultState(),D=-1,C=null,A.pop(),A.length>0?(y=A[A.length-1],ae===!0&&yt.setGlobalState(S.clippingPlanes,y.state.camera)):y=null,g.pop(),g.length>0?x=g[g.length-1]:x=null};function pl(B,O,G,Y){if(B.visible===!1)return;if(B.layers.test(O.layers)){if(B.isGroup)G=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(O);else if(B.isLight)y.pushLight(B),B.castShadow&&y.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Ie.intersectsSprite(B)){Y&&Xe.setFromMatrixPosition(B.matrixWorld).applyMatrix4(ye);const ce=xe.update(B),pe=B.material;pe.visible&&x.push(B,ce,pe,G,Xe.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||Ie.intersectsObject(B))){const ce=xe.update(B),pe=B.material;if(Y&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),Xe.copy(B.boundingSphere.center)):(ce.boundingSphere===null&&ce.computeBoundingSphere(),Xe.copy(ce.boundingSphere.center)),Xe.applyMatrix4(B.matrixWorld).applyMatrix4(ye)),Array.isArray(pe)){const de=ce.groups;for(let We=0,Re=de.length;We<Re;We++){const we=de[We],Ye=pe[we.materialIndex];Ye&&Ye.visible&&x.push(B,ce,Ye,G,Xe.z,we)}}else pe.visible&&x.push(B,ce,pe,G,Xe.z,null)}}const le=B.children;for(let ce=0,pe=le.length;ce<pe;ce++)pl(le[ce],O,G,Y)}function Vs(B,O,G,Y){const V=B.opaque,le=B.transmissive,ce=B.transparent;y.setupLightsView(G),ae===!0&&yt.setGlobalState(S.clippingPlanes,G),Y&&Ae.viewport(b.copy(Y)),V.length>0&&Xr(V,O,G),le.length>0&&Xr(le,O,G),ce.length>0&&Xr(ce,O,G),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function ia(B,O,G,Y){if((G.isScene===!0?G.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[Y.id]===void 0&&(y.state.transmissionRenderTarget[Y.id]=new xr(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?ri:yr,minFilter:us,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:$t.workingColorSpace}));const le=y.state.transmissionRenderTarget[Y.id],ce=Y.viewport||b;le.setSize(ce.z,ce.w);const pe=S.getRenderTarget();S.setRenderTarget(le),S.getClearColor(K),q=S.getClearAlpha(),q<1&&S.setClearColor(16777215,.5),S.clear(),$e&&Ze.render(G);const de=S.toneMapping;S.toneMapping=uo;const We=Y.viewport;if(Y.viewport!==void 0&&(Y.viewport=void 0),y.setupLightsView(Y),ae===!0&&yt.setGlobalState(S.clippingPlanes,Y),Xr(B,G,Y),Qe.updateMultisampleRenderTarget(le),Qe.updateRenderTargetMipmap(le),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Re=!1;for(let we=0,Ye=O.length;we<Ye;we++){const nt=O[we],ft=nt.object,xt=nt.geometry,Je=nt.material,Be=nt.group;if(Je.side===lr&&ft.layers.test(Y.layers)){const mt=Je.side;Je.side=Fi,Je.needsUpdate=!0,nr(ft,G,Y,xt,Je,Be),Je.side=mt,Je.needsUpdate=!0,Re=!0}}Re===!0&&(Qe.updateMultisampleRenderTarget(le),Qe.updateRenderTargetMipmap(le))}S.setRenderTarget(pe),S.setClearColor(K,q),We!==void 0&&(Y.viewport=We),S.toneMapping=de}function Xr(B,O,G){const Y=O.isScene===!0?O.overrideMaterial:null;for(let V=0,le=B.length;V<le;V++){const ce=B[V],pe=ce.object,de=ce.geometry,We=Y===null?ce.material:Y,Re=ce.group;pe.layers.test(G.layers)&&nr(pe,O,G,de,We,Re)}}function nr(B,O,G,Y,V,le){B.onBeforeRender(S,O,G,Y,V,le),B.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),V.onBeforeRender(S,O,G,Y,B,le),V.transparent===!0&&V.side===lr&&V.forceSinglePass===!1?(V.side=Fi,V.needsUpdate=!0,S.renderBufferDirect(G,O,Y,V,B,le),V.side=ho,V.needsUpdate=!0,S.renderBufferDirect(G,O,Y,V,B,le),V.side=lr):S.renderBufferDirect(G,O,Y,V,B,le),B.onAfterRender(S,O,G,Y,V,le)}function Ct(B,O,G){O.isScene!==!0&&(O=st);const Y=ze.get(B),V=y.state.lights,le=y.state.shadowsArray,ce=V.state.version,pe=Ce.getParameters(B,V.state,le,O,G),de=Ce.getProgramCacheKey(pe);let We=Y.programs;Y.environment=B.isMeshStandardMaterial?O.environment:null,Y.fog=O.fog,Y.envMap=(B.isMeshStandardMaterial?F:X).get(B.envMap||Y.environment),Y.envMapRotation=Y.environment!==null&&B.envMap===null?O.environmentRotation:B.envMapRotation,We===void 0&&(B.addEventListener("dispose",_t),We=new Map,Y.programs=We);let Re=We.get(de);if(Re!==void 0){if(Y.currentProgram===Re&&Y.lightsStateVersion===ce)return zu(B,pe),Re}else pe.uniforms=Ce.getUniforms(B),B.onBeforeCompile(pe,S),Re=Ce.acquireProgram(pe,de),We.set(de,Re),Y.uniforms=pe.uniforms;const we=Y.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(we.clippingPlanes=yt.uniform),zu(B,pe),Y.needsLights=j(B),Y.lightsStateVersion=ce,Y.needsLights&&(we.ambientLightColor.value=V.state.ambient,we.lightProbe.value=V.state.probe,we.directionalLights.value=V.state.directional,we.directionalLightShadows.value=V.state.directionalShadow,we.spotLights.value=V.state.spot,we.spotLightShadows.value=V.state.spotShadow,we.rectAreaLights.value=V.state.rectArea,we.ltc_1.value=V.state.rectAreaLTC1,we.ltc_2.value=V.state.rectAreaLTC2,we.pointLights.value=V.state.point,we.pointLightShadows.value=V.state.pointShadow,we.hemisphereLights.value=V.state.hemi,we.directionalShadowMap.value=V.state.directionalShadowMap,we.directionalShadowMatrix.value=V.state.directionalShadowMatrix,we.spotShadowMap.value=V.state.spotShadowMap,we.spotLightMatrix.value=V.state.spotLightMatrix,we.spotLightMap.value=V.state.spotLightMap,we.pointShadowMap.value=V.state.pointShadowMap,we.pointShadowMatrix.value=V.state.pointShadowMatrix),Y.currentProgram=Re,Y.uniformsList=null,Re}function ml(B){if(B.uniformsList===null){const O=B.currentProgram.getUniforms();B.uniformsList=g0.seqWithValue(O.seq,B.uniforms)}return B.uniformsList}function zu(B,O){const G=ze.get(B);G.outputColorSpace=O.outputColorSpace,G.batching=O.batching,G.batchingColor=O.batchingColor,G.instancing=O.instancing,G.instancingColor=O.instancingColor,G.instancingMorph=O.instancingMorph,G.skinning=O.skinning,G.morphTargets=O.morphTargets,G.morphNormals=O.morphNormals,G.morphColors=O.morphColors,G.morphTargetsCount=O.morphTargetsCount,G.numClippingPlanes=O.numClippingPlanes,G.numIntersection=O.numClipIntersection,G.vertexAlphas=O.vertexAlphas,G.vertexTangents=O.vertexTangents,G.toneMapping=O.toneMapping}function L(B,O,G,Y,V){O.isScene!==!0&&(O=st),Qe.resetTextureUnits();const le=O.fog,ce=Y.isMeshStandardMaterial?O.environment:null,pe=R===null?S.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:ms,de=(Y.isMeshStandardMaterial?F:X).get(Y.envMap||ce),We=Y.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,Re=!!G.attributes.tangent&&(!!Y.normalMap||Y.anisotropy>0),we=!!G.morphAttributes.position,Ye=!!G.morphAttributes.normal,nt=!!G.morphAttributes.color;let ft=uo;Y.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(ft=S.toneMapping);const xt=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,Je=xt!==void 0?xt.length:0,Be=ze.get(Y),mt=y.state.lights;if(ae===!0&&(ve===!0||B!==C)){const Tt=B===C&&Y.id===D;yt.setState(Y,B,Tt)}let ut=!1;Y.version===Be.__version?(Be.needsLights&&Be.lightsStateVersion!==mt.state.version||Be.outputColorSpace!==pe||V.isBatchedMesh&&Be.batching===!1||!V.isBatchedMesh&&Be.batching===!0||V.isBatchedMesh&&Be.batchingColor===!0&&V.colorTexture===null||V.isBatchedMesh&&Be.batchingColor===!1&&V.colorTexture!==null||V.isInstancedMesh&&Be.instancing===!1||!V.isInstancedMesh&&Be.instancing===!0||V.isSkinnedMesh&&Be.skinning===!1||!V.isSkinnedMesh&&Be.skinning===!0||V.isInstancedMesh&&Be.instancingColor===!0&&V.instanceColor===null||V.isInstancedMesh&&Be.instancingColor===!1&&V.instanceColor!==null||V.isInstancedMesh&&Be.instancingMorph===!0&&V.morphTexture===null||V.isInstancedMesh&&Be.instancingMorph===!1&&V.morphTexture!==null||Be.envMap!==de||Y.fog===!0&&Be.fog!==le||Be.numClippingPlanes!==void 0&&(Be.numClippingPlanes!==yt.numPlanes||Be.numIntersection!==yt.numIntersection)||Be.vertexAlphas!==We||Be.vertexTangents!==Re||Be.morphTargets!==we||Be.morphNormals!==Ye||Be.morphColors!==nt||Be.toneMapping!==ft||Be.morphTargetsCount!==Je)&&(ut=!0):(ut=!0,Be.__version=Y.version);let gt=Be.currentProgram;ut===!0&&(gt=Ct(Y,O,V));let Kt=!1,nn=!1,An=!1;const Ot=gt.getUniforms(),Lt=Be.uniforms;if(Ae.useProgram(gt.program)&&(Kt=!0,nn=!0,An=!0),Y.id!==D&&(D=Y.id,nn=!0),Kt||C!==B){Ot.setValue(k,"projectionMatrix",B.projectionMatrix),Ot.setValue(k,"viewMatrix",B.matrixWorldInverse);const Tt=Ot.map.cameraPosition;Tt!==void 0&&Tt.setValue(k,be.setFromMatrixPosition(B.matrixWorld)),Oe.logarithmicDepthBuffer&&Ot.setValue(k,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&Ot.setValue(k,"isOrthographic",B.isOrthographicCamera===!0),C!==B&&(C=B,nn=!0,An=!0)}if(V.isSkinnedMesh){Ot.setOptional(k,V,"bindMatrix"),Ot.setOptional(k,V,"bindMatrixInverse");const Tt=V.skeleton;Tt&&(Tt.boneTexture===null&&Tt.computeBoneTexture(),Ot.setValue(k,"boneTexture",Tt.boneTexture,Qe))}V.isBatchedMesh&&(Ot.setOptional(k,V,"batchingTexture"),Ot.setValue(k,"batchingTexture",V._matricesTexture,Qe),Ot.setOptional(k,V,"batchingIdTexture"),Ot.setValue(k,"batchingIdTexture",V._indirectTexture,Qe),Ot.setOptional(k,V,"batchingColorTexture"),V._colorsTexture!==null&&Ot.setValue(k,"batchingColorTexture",V._colorsTexture,Qe));const Cn=G.morphAttributes;if((Cn.position!==void 0||Cn.normal!==void 0||Cn.color!==void 0)&&Nt.update(V,G,gt),(nn||Be.receiveShadow!==V.receiveShadow)&&(Be.receiveShadow=V.receiveShadow,Ot.setValue(k,"receiveShadow",V.receiveShadow)),Y.isMeshGouraudMaterial&&Y.envMap!==null&&(Lt.envMap.value=de,Lt.flipEnvMap.value=de.isCubeTexture&&de.isRenderTargetTexture===!1?-1:1),Y.isMeshStandardMaterial&&Y.envMap===null&&O.environment!==null&&(Lt.envMapIntensity.value=O.environmentIntensity),nn&&(Ot.setValue(k,"toneMappingExposure",S.toneMappingExposure),Be.needsLights&&U(Lt,An),le&&Y.fog===!0&&lt.refreshFogUniforms(Lt,le),lt.refreshMaterialUniforms(Lt,Y,oe,Z,y.state.transmissionRenderTarget[B.id]),g0.upload(k,ml(Be),Lt,Qe)),Y.isShaderMaterial&&Y.uniformsNeedUpdate===!0&&(g0.upload(k,ml(Be),Lt,Qe),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&Ot.setValue(k,"center",V.center),Ot.setValue(k,"modelViewMatrix",V.modelViewMatrix),Ot.setValue(k,"normalMatrix",V.normalMatrix),Ot.setValue(k,"modelMatrix",V.matrixWorld),Y.isShaderMaterial||Y.isRawShaderMaterial){const Tt=Y.uniformsGroups;for(let Ht=0,cn=Tt.length;Ht<cn;Ht++){const Jr=Tt[Ht];Dt.update(Jr,gt),Dt.bind(Jr,gt)}}return gt}function U(B,O){B.ambientLightColor.needsUpdate=O,B.lightProbe.needsUpdate=O,B.directionalLights.needsUpdate=O,B.directionalLightShadows.needsUpdate=O,B.pointLights.needsUpdate=O,B.pointLightShadows.needsUpdate=O,B.spotLights.needsUpdate=O,B.spotLightShadows.needsUpdate=O,B.rectAreaLights.needsUpdate=O,B.hemisphereLights.needsUpdate=O}function j(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(B,O,G){ze.get(B.texture).__webglTexture=O,ze.get(B.depthTexture).__webglTexture=G;const Y=ze.get(B);Y.__hasExternalTextures=!0,Y.__autoAllocateDepthBuffer=G===void 0,Y.__autoAllocateDepthBuffer||Pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(B,O){const G=ze.get(B);G.__webglFramebuffer=O,G.__useDefaultFramebuffer=O===void 0},this.setRenderTarget=function(B,O=0,G=0){R=B,P=O,T=G;let Y=!0,V=null,le=!1,ce=!1;if(B){const de=ze.get(B);if(de.__useDefaultFramebuffer!==void 0)Ae.bindFramebuffer(k.FRAMEBUFFER,null),Y=!1;else if(de.__webglFramebuffer===void 0)Qe.setupRenderTarget(B);else if(de.__hasExternalTextures)Qe.rebindTextures(B,ze.get(B.texture).__webglTexture,ze.get(B.depthTexture).__webglTexture);else if(B.depthBuffer){const we=B.depthTexture;if(de.__boundDepthTexture!==we){if(we!==null&&ze.has(we)&&(B.width!==we.image.width||B.height!==we.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Qe.setupDepthRenderbuffer(B)}}const We=B.texture;(We.isData3DTexture||We.isDataArrayTexture||We.isCompressedArrayTexture)&&(ce=!0);const Re=ze.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(Re[O])?V=Re[O][G]:V=Re[O],le=!0):B.samples>0&&Qe.useMultisampledRTT(B)===!1?V=ze.get(B).__webglMultisampledFramebuffer:Array.isArray(Re)?V=Re[G]:V=Re,b.copy(B.viewport),N.copy(B.scissor),J=B.scissorTest}else b.copy(Q).multiplyScalar(oe).floor(),N.copy(ue).multiplyScalar(oe).floor(),J=me;if(Ae.bindFramebuffer(k.FRAMEBUFFER,V)&&Y&&Ae.drawBuffers(B,V),Ae.viewport(b),Ae.scissor(N),Ae.setScissorTest(J),le){const de=ze.get(B.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+O,de.__webglTexture,G)}else if(ce){const de=ze.get(B.texture),We=O||0;k.framebufferTextureLayer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,de.__webglTexture,G||0,We)}D=-1},this.readRenderTargetPixels=function(B,O,G,Y,V,le,ce){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pe=ze.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&ce!==void 0&&(pe=pe[ce]),pe){Ae.bindFramebuffer(k.FRAMEBUFFER,pe);try{const de=B.texture,We=de.format,Re=de.type;if(!Oe.textureFormatReadable(We)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Oe.textureTypeReadable(Re)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}O>=0&&O<=B.width-Y&&G>=0&&G<=B.height-V&&k.readPixels(O,G,Y,V,At.convert(We),At.convert(Re),le)}finally{const de=R!==null?ze.get(R).__webglFramebuffer:null;Ae.bindFramebuffer(k.FRAMEBUFFER,de)}}},this.readRenderTargetPixelsAsync=async function(B,O,G,Y,V,le,ce){if(!(B&&B.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pe=ze.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&ce!==void 0&&(pe=pe[ce]),pe){Ae.bindFramebuffer(k.FRAMEBUFFER,pe);try{const de=B.texture,We=de.format,Re=de.type;if(!Oe.textureFormatReadable(We))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Oe.textureTypeReadable(Re))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(O>=0&&O<=B.width-Y&&G>=0&&G<=B.height-V){const we=k.createBuffer();k.bindBuffer(k.PIXEL_PACK_BUFFER,we),k.bufferData(k.PIXEL_PACK_BUFFER,le.byteLength,k.STREAM_READ),k.readPixels(O,G,Y,V,At.convert(We),At.convert(Re),0),k.flush();const Ye=k.fenceSync(k.SYNC_GPU_COMMANDS_COMPLETE,0);await W4(k,Ye,4);try{k.bindBuffer(k.PIXEL_PACK_BUFFER,we),k.getBufferSubData(k.PIXEL_PACK_BUFFER,0,le)}finally{k.deleteBuffer(we),k.deleteSync(Ye)}return le}}finally{const de=R!==null?ze.get(R).__webglFramebuffer:null;Ae.bindFramebuffer(k.FRAMEBUFFER,de)}}},this.copyFramebufferToTexture=function(B,O=null,G=0){B.isTexture!==!0&&(ef("WebGLRenderer: copyFramebufferToTexture function signature has changed."),O=arguments[0]||null,B=arguments[1]);const Y=Math.pow(2,-G),V=Math.floor(B.image.width*Y),le=Math.floor(B.image.height*Y),ce=O!==null?O.x:0,pe=O!==null?O.y:0;Qe.setTexture2D(B,0),k.copyTexSubImage2D(k.TEXTURE_2D,G,0,0,ce,pe,V,le),Ae.unbindTexture()},this.copyTextureToTexture=function(B,O,G=null,Y=null,V=0){B.isTexture!==!0&&(ef("WebGLRenderer: copyTextureToTexture function signature has changed."),Y=arguments[0]||null,B=arguments[1],O=arguments[2],V=arguments[3]||0,G=null);let le,ce,pe,de,We,Re;G!==null?(le=G.max.x-G.min.x,ce=G.max.y-G.min.y,pe=G.min.x,de=G.min.y):(le=B.image.width,ce=B.image.height,pe=0,de=0),Y!==null?(We=Y.x,Re=Y.y):(We=0,Re=0);const we=At.convert(O.format),Ye=At.convert(O.type);Qe.setTexture2D(O,0),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,O.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,O.unpackAlignment);const nt=k.getParameter(k.UNPACK_ROW_LENGTH),ft=k.getParameter(k.UNPACK_IMAGE_HEIGHT),xt=k.getParameter(k.UNPACK_SKIP_PIXELS),Je=k.getParameter(k.UNPACK_SKIP_ROWS),Be=k.getParameter(k.UNPACK_SKIP_IMAGES),mt=B.isCompressedTexture?B.mipmaps[V]:B.image;k.pixelStorei(k.UNPACK_ROW_LENGTH,mt.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,mt.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,pe),k.pixelStorei(k.UNPACK_SKIP_ROWS,de),B.isDataTexture?k.texSubImage2D(k.TEXTURE_2D,V,We,Re,le,ce,we,Ye,mt.data):B.isCompressedTexture?k.compressedTexSubImage2D(k.TEXTURE_2D,V,We,Re,mt.width,mt.height,we,mt.data):k.texSubImage2D(k.TEXTURE_2D,V,We,Re,le,ce,we,Ye,mt),k.pixelStorei(k.UNPACK_ROW_LENGTH,nt),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,ft),k.pixelStorei(k.UNPACK_SKIP_PIXELS,xt),k.pixelStorei(k.UNPACK_SKIP_ROWS,Je),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Be),V===0&&O.generateMipmaps&&k.generateMipmap(k.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(B,O,G=null,Y=null,V=0){B.isTexture!==!0&&(ef("WebGLRenderer: copyTextureToTexture3D function signature has changed."),G=arguments[0]||null,Y=arguments[1]||null,B=arguments[2],O=arguments[3],V=arguments[4]||0);let le,ce,pe,de,We,Re,we,Ye,nt;const ft=B.isCompressedTexture?B.mipmaps[V]:B.image;G!==null?(le=G.max.x-G.min.x,ce=G.max.y-G.min.y,pe=G.max.z-G.min.z,de=G.min.x,We=G.min.y,Re=G.min.z):(le=ft.width,ce=ft.height,pe=ft.depth,de=0,We=0,Re=0),Y!==null?(we=Y.x,Ye=Y.y,nt=Y.z):(we=0,Ye=0,nt=0);const xt=At.convert(O.format),Je=At.convert(O.type);let Be;if(O.isData3DTexture)Qe.setTexture3D(O,0),Be=k.TEXTURE_3D;else if(O.isDataArrayTexture||O.isCompressedArrayTexture)Qe.setTexture2DArray(O,0),Be=k.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,O.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,O.unpackAlignment);const mt=k.getParameter(k.UNPACK_ROW_LENGTH),ut=k.getParameter(k.UNPACK_IMAGE_HEIGHT),gt=k.getParameter(k.UNPACK_SKIP_PIXELS),Kt=k.getParameter(k.UNPACK_SKIP_ROWS),nn=k.getParameter(k.UNPACK_SKIP_IMAGES);k.pixelStorei(k.UNPACK_ROW_LENGTH,ft.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,ft.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,de),k.pixelStorei(k.UNPACK_SKIP_ROWS,We),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Re),B.isDataTexture||B.isData3DTexture?k.texSubImage3D(Be,V,we,Ye,nt,le,ce,pe,xt,Je,ft.data):O.isCompressedArrayTexture?k.compressedTexSubImage3D(Be,V,we,Ye,nt,le,ce,pe,xt,ft.data):k.texSubImage3D(Be,V,we,Ye,nt,le,ce,pe,xt,Je,ft),k.pixelStorei(k.UNPACK_ROW_LENGTH,mt),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,ut),k.pixelStorei(k.UNPACK_SKIP_PIXELS,gt),k.pixelStorei(k.UNPACK_SKIP_ROWS,Kt),k.pixelStorei(k.UNPACK_SKIP_IMAGES,nn),V===0&&O.generateMipmaps&&k.generateMipmap(Be),Ae.unbindTexture()},this.initRenderTarget=function(B){ze.get(B).__webglFramebuffer===void 0&&Qe.setupRenderTarget(B)},this.initTexture=function(B){B.isCubeTexture?Qe.setTextureCube(B,0):B.isData3DTexture?Qe.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?Qe.setTexture2DArray(B,0):Qe.setTexture2D(B,0),Ae.unbindTexture()},this.resetState=function(){P=0,T=0,R=null,Ae.reset(),St.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ro}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===w_?"display-p3":"srgb",t.unpackColorSpace=$t.workingColorSpace===Mp?"display-p3":"srgb"}}class b_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new He(e),this.density=t}clone(){return new b_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class P_{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new He(e),this.near=t,this.far=i}clone(){return new P_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Ef=class extends Gt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Hr,this.environmentIntensity=1,this.environmentRotation=new Hr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class Tp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Jd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ur()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return ef("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ji=new z;class il{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.applyMatrix4(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.applyNormalMatrix(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ji.fromBufferAttribute(this,t),Ji.transformDirection(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ji(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ji(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ji(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ji(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ji(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new jt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new il(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vw extends $n{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gc;const Rh=new z,vc=new z,_c=new z,yc=new Ee,bh=new Ee,q3=new dt,xg=new z,Ph=new z,Ag=new z,yb=new Ee,px=new Ee,xb=new Ee;class $3 extends Gt{constructor(e=new vw){if(super(),this.isSprite=!0,this.type="Sprite",gc===void 0){gc=new Et;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Tp(t,5);gc.setIndex([0,1,2,0,2,3]),gc.setAttribute("position",new il(i,3,0,!1)),gc.setAttribute("uv",new il(i,2,3,!1))}this.geometry=gc,this.material=e,this.center=new Ee(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vc.setFromMatrixScale(this.matrixWorld),q3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_c.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vc.multiplyScalar(-_c.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Sg(xg.set(-.5,-.5,0),_c,o,vc,r,s),Sg(Ph.set(.5,-.5,0),_c,o,vc,r,s),Sg(Ag.set(.5,.5,0),_c,o,vc,r,s),yb.set(0,0),px.set(1,0),xb.set(1,1);let a=e.ray.intersectTriangle(xg,Ph,Ag,!1,Rh);if(a===null&&(Sg(Ph.set(-.5,.5,0),_c,o,vc,r,s),px.set(0,1),a=e.ray.intersectTriangle(xg,Ag,Ph,!1,Rh),a===null))return;const l=e.ray.origin.distanceTo(Rh);l<e.near||l>e.far||t.push({distance:l,point:Rh.clone(),uv:Br.getInterpolation(Rh,xg,Ph,Ag,yb,px,xb,new Ee),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Sg(n,e,t,i,r,s){yc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(bh.x=s*yc.x-r*yc.y,bh.y=r*yc.x+s*yc.y):bh.copy(yc),n.copy(e),n.x+=bh.x,n.y+=bh.y,n.applyMatrix4(q3)}const Mg=new z,Ab=new z;class eD extends Gt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Mg.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Mg);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Mg.setFromMatrixPosition(e.matrixWorld),Ab.setFromMatrixPosition(this.matrixWorld);const i=Mg.distanceTo(Ab)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Sb=new z,Mb=new sn,wb=new sn,n8=new z,Eb=new dt,wg=new z,mx=new xi,Cb=new dt,gx=new Wf;class _w extends xn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=sS,this.bindMatrix=new dt,this.bindMatrixInverse=new dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ui),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,wg),this.boundingBox.expandByPoint(wg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,wg),this.boundingSphere.expandByPoint(wg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),mx.copy(this.boundingSphere),mx.applyMatrix4(r),e.ray.intersectsSphere(mx)!==!1&&(Cb.copy(r).invert(),gx.copy(e.ray).applyMatrix4(Cb),!(this.boundingBox!==null&&gx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,gx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===sS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===M3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;Mb.fromBufferAttribute(r.attributes.skinIndex,e),wb.fromBufferAttribute(r.attributes.skinWeight,e),Sb.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=wb.getComponent(s);if(o!==0){const a=Mb.getComponent(s);Eb.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(n8.copy(Sb).applyMatrix4(Eb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class I_ extends Gt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ns extends en{constructor(e=null,t=1,i=1,r,s,o,a,l,u=ii,h=ii,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Tb=new dt,i8=new dt;class Rp{constructor(e=[],t=[]){this.uuid=Ur(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:i8;Tb.multiplyMatrices(a,t[s]),Tb.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Rp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ns(t,e,e,Jn,En);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new I_),this.bones.push(o),this.boneInverses.push(new dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Qo extends jt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xc=new dt,Rb=new dt,Eg=[],bb=new Ui,r8=new dt,Ih=new xn,Bh=new xi;class yw extends xn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qo(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,r8)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ui),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xc),bb.copy(e.boundingBox).applyMatrix4(xc),this.boundingBox.union(bb)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xc),Bh.copy(e.boundingSphere).applyMatrix4(xc),this.boundingSphere.union(Bh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ih.geometry=this.geometry,Ih.material=this.material,Ih.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bh.copy(this.boundingSphere),Bh.applyMatrix4(i),e.ray.intersectsSphere(Bh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,xc),Rb.multiplyMatrices(i,xc),Ih.matrixWorld=Rb,Ih.raycast(e,Eg);for(let o=0,a=Eg.length;o<a;o++){const l=Eg[o];l.instanceId=s,l.object=this,t.push(l)}Eg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qo(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ns(new Float32Array(r*this.count),r,this.count,Ap,En));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function s8(n,e){return n.z-e.z}function o8(n,e){return e.z-n.z}class a8{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const ya=new dt,vx=new dt,l8=new dt,u8=new He(1,1,1),Pb=new dt,_x=new Cp,Cg=new Ui,Il=new xi,Dh=new z,Ib=new z,c8=new z,yx=new a8,Bi=new xn,Tg=[];function f8(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class tD extends xn{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,r){super(new Et,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ns(t,e,e,Jn,En);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ns(t,e,e,Sp,mo);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ns(t,e,e,Jn,En);i.colorSpace=$t.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,h=new a.constructor(i*l),d=new jt(h,l,u);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new jt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ya),this.getBoundingBoxAt(s,Cg).applyMatrix4(ya),e.union(Cg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xi);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ya),this.getBoundingSphereAt(s,Il).applyMatrix4(ya),e.union(Il)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,i=this._matricesTexture,r=i.image.data;l8.toArray(r,t*16),i.needsUpdate=!0;const s=this._colorsTexture;return s&&(u8.toArray(s.image.data,t*4),s.needsUpdate=!0),t}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),h=u!==null;if(h&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:h?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ui,sphereInitialized:!1,sphere:new xi}),this.setGeometryAt(d,e),d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const m in i.attributes){const v=t.getAttribute(m),x=i.getAttribute(m);f8(v,x,l);const y=v.itemSize;for(let g=v.count,A=u;g<A;g++){const S=l+g;for(let w=0;w<y;w++)x.setComponent(S,w,0)}x.needsUpdate=!0,x.addUpdateRange(l*y,u*y)}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,x=a.indexCount;v<x;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let u=l.start,h=l.start+l.count;u<h;u++){let d=u;o&&(d=o.getX(d)),r.expandByPoint(Dh.fromBufferAttribute(a,d))}i.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,Cg),Cg.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let u=0;for(let h=l.start,d=l.start+l.count;h<d;h++){let p=h;o&&(p=o.getX(p)),Dh.fromBufferAttribute(a,p),u=Math.max(u,r.center.distanceToSquared(Dh))}r.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;Bi.material=this.material,Bi.geometry.index=o.index,Bi.geometry.attributes=o.attributes,Bi.geometry.boundingBox===null&&(Bi.geometry.boundingBox=new Ui),Bi.geometry.boundingSphere===null&&(Bi.geometry.boundingSphere=new xi);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,h=r[u];Bi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,Bi.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Bi.geometry.boundingBox),this.getBoundingSphereAt(u,Bi.geometry.boundingSphere),Bi.raycast(e,Tg);for(let d=0,p=Tg.length;d<p;d++){const m=Tg[d];m.object=this,m.batchId=a,t.push(m)}Tg.length=0}Bi.material=null,Bi.geometry.index=null,Bi.geometry.attributes={},Bi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data;p&&(Pb.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),_x.setFromProjectionMatrix(Pb,e.coordinateSystem));let x=0;if(this.sortObjects){vx.copy(this.matrixWorld).invert(),Dh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(vx),Ib.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(vx);for(let A=0,S=l.length;A<S;A++)if(l[A].visible&&l[A].active){const w=l[A].geometryIndex;this.getMatrixAt(A,ya),this.getBoundingSphereAt(w,Il).applyMatrix4(ya);let P=!1;if(p&&(P=!_x.intersectsSphere(Il)),!P){const T=c8.subVectors(Il.center,Dh).dot(Ib);yx.push(d[w],T,A)}}const y=yx.list,g=this.customSort;g===null?y.sort(s.transparent?o8:s8):g.call(this,y,i);for(let A=0,S=y.length;A<S;A++){const w=y[A];u[x]=w.start*a,h[x]=w.count,v[x]=w.index,x++}yx.reset()}else for(let y=0,g=l.length;y<g;y++)if(l[y].visible&&l[y].active){const A=l[y].geometryIndex;let S=!1;if(p&&(this.getMatrixAt(y,ya),this.getBoundingSphereAt(A,Il).applyMatrix4(ya),S=!_x.intersectsSphere(Il)),!S){const w=d[A];u[x]=w.start*a,h[x]=w.count,v[x]=y,x++}}m.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Hi extends $n{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new He(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const bv=new z,Pv=new z,Bb=new dt,Lh=new Wf,Rg=new xi,xx=new z,Db=new z;class Zo extends Gt{constructor(e=new Et,t=new Hi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)bv.fromBufferAttribute(t,r-1),Pv.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=bv.distanceTo(Pv);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Rg.copy(i.boundingSphere),Rg.applyMatrix4(r),Rg.radius+=s,e.ray.intersectsSphere(Rg)===!1)return;Bb.copy(r).invert(),Lh.copy(e.ray).applyMatrix4(Bb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let x=m,y=v-1;x<y;x+=u){const g=h.getX(x),A=h.getX(x+1),S=bg(this,e,Lh,l,g,A);S&&t.push(S)}if(this.isLineLoop){const x=h.getX(v-1),y=h.getX(m),g=bg(this,e,Lh,l,x,y);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let x=m,y=v-1;x<y;x+=u){const g=bg(this,e,Lh,l,x,x+1);g&&t.push(g)}if(this.isLineLoop){const x=bg(this,e,Lh,l,v-1,m);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function bg(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(bv.fromBufferAttribute(o,r),Pv.fromBufferAttribute(o,s),t.distanceSqToSegment(bv,Pv,xx,Db)>i)return;xx.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(xx);if(!(l<e.near||l>e.far))return{distance:l,point:Db.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const Lb=new z,Fb=new z;class zs extends Zo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Lb.fromBufferAttribute(t,r),Fb.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Lb.distanceTo(Fb);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xw extends Zo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class B_ extends $n{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Nb=new dt,hS=new Wf,Pg=new xi,Ig=new z;class Aw extends Gt{constructor(e=new Et,t=new B_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Pg.copy(i.boundingSphere),Pg.applyMatrix4(r),Pg.radius+=s,e.ray.intersectsSphere(Pg)===!1)return;Nb.copy(r).invert(),hS.copy(e.ray).applyMatrix4(Nb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=p,x=m;v<x;v++){const y=u.getX(v);Ig.fromBufferAttribute(d,y),Ub(Ig,y,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=p,x=m;v<x;v++)Ig.fromBufferAttribute(d,v),Ub(Ig,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Ub(n,e,t,i,r,s,o){const a=hS.distanceSqToPoint(n);if(a<t){const l=new z;hS.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class h8 extends en{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Jt,this.magFilter=s!==void 0?s:Jt,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class d8 extends en{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ii,this.minFilter=ii,this.generateMipmaps=!1,this.needsUpdate=!0}}class D_ extends en{constructor(e,t,i,r,s,o,a,l,u,h,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class p8 extends D_{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Xn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class m8 extends D_{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,po),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class g8 extends en{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Hs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ee:new z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],o=[],a=new z,l=new dt;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new z)}s[0]=new z,o[0]=new z;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Un(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Un(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class L_ extends Hs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ee){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*d+this.aX,u=p*d+m*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class nD extends L_{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Sw(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,d){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Bg=new z,Ax=new Sw,Sx=new Sw,Mx=new Sw;class iD extends Hs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(Bg.subVectors(r[0],r[1]).add(r[0]),u=Bg);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(Bg.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=Bg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(h),m);x<1e-4&&(x=1),v<1e-4&&(v=x),y<1e-4&&(y=x),Ax.initNonuniformCatmullRom(u.x,d.x,p.x,h.x,v,x,y),Sx.initNonuniformCatmullRom(u.y,d.y,p.y,h.y,v,x,y),Mx.initNonuniformCatmullRom(u.z,d.z,p.z,h.z,v,x,y)}else this.curveType==="catmullrom"&&(Ax.initCatmullRom(u.x,d.x,p.x,h.x,this.tension),Sx.initCatmullRom(u.y,d.y,p.y,h.y,this.tension),Mx.initCatmullRom(u.z,d.z,p.z,h.z,this.tension));return i.set(Ax.calc(l),Sx.calc(l),Mx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ob(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function v8(n,e){const t=1-n;return t*t*e}function _8(n,e){return 2*(1-n)*n*e}function y8(n,e){return n*n*e}function dd(n,e,t,i){return v8(n,e)+_8(n,t)+y8(n,i)}function x8(n,e){const t=1-n;return t*t*t*e}function A8(n,e){const t=1-n;return 3*t*t*n*e}function S8(n,e){return 3*(1-n)*n*n*e}function M8(n,e){return n*n*n*e}function pd(n,e,t,i,r){return x8(n,e)+A8(n,t)+S8(n,i)+M8(n,r)}class Mw extends Hs{constructor(e=new Ee,t=new Ee,i=new Ee,r=new Ee){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pd(e,r.x,s.x,o.x,a.x),pd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rD extends Hs{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pd(e,r.x,s.x,o.x,a.x),pd(e,r.y,s.y,o.y,a.y),pd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ww extends Hs{constructor(e=new Ee,t=new Ee){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ee){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sD extends Hs{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ew extends Hs{constructor(e=new Ee,t=new Ee,i=new Ee){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(dd(e,r.x,s.x,o.x),dd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cw extends Hs{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(dd(e,r.x,s.x,o.x),dd(e,r.y,s.y,o.y),dd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tw extends Hs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ee){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(Ob(a,l.x,u.x,h.x,d.x),Ob(a,l.y,u.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ee().fromArray(r))}return this}}var Iv=Object.freeze({__proto__:null,ArcCurve:nD,CatmullRomCurve3:iD,CubicBezierCurve:Mw,CubicBezierCurve3:rD,EllipseCurve:L_,LineCurve:ww,LineCurve3:sD,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Cw,SplineCurve:Tw});class oD extends Hs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Iv[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Iv[r.type]().fromJSON(r))}return this}}class jd extends oD{constructor(e){super(),this.type="Path",this.currentPoint=new Ee,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ww(this.currentPoint.clone(),new Ee(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Ew(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Mw(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r),new Ee(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Tw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new L_(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class bp extends Et{constructor(e=[new Ee(0,-.5),new Ee(.5,0),new Ee(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Un(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,d=new z,p=new Ee,m=new z,v=new z,x=new z;let y=0,g=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:y=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-y,m.z=g*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:y=e[A+1].x-e[A].x,g=e[A+1].y-e[A].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(v)}for(let A=0;A<=t;A++){const S=i+A*h*r,w=Math.sin(S),P=Math.cos(S);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*w,d.y=e[T].y,d.z=e[T].x*P,o.push(d.x,d.y,d.z),p.x=A/t,p.y=T/(e.length-1),a.push(p.x,p.y);const R=l[3*T+0]*w,D=l[3*T+1],C=l[3*T+0]*P;u.push(R,D,C)}}for(let A=0;A<t;A++)for(let S=0;S<e.length-1;S++){const w=S+A*e.length,P=w,T=w+e.length,R=w+e.length+1,D=w+1;s.push(P,T,D),s.push(R,D,T)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bp(e.points,e.segments,e.phiStart,e.phiLength)}}class F_ extends bp{constructor(e=1,t=1,i=4,r=8){const s=new jd;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new F_(e.radius,e.length,e.capSegments,e.radialSegments)}}class N_ extends Et{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new z,h=new Ee;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(a,3)),this.setAttribute("uv",new ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Jf extends Et{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],m=[];let v=0;const x=[],y=i/2;let g=0;A(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new ot(d,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function A(){const w=new z,P=new z;let T=0;const R=(t-e)/i;for(let D=0;D<=s;D++){const C=[],b=D/s,N=b*(t-e)+e;for(let J=0;J<=r;J++){const K=J/r,q=K*l+a,te=Math.sin(q),Z=Math.cos(q);P.x=N*te,P.y=-b*i+y,P.z=N*Z,d.push(P.x,P.y,P.z),w.set(te,R,Z).normalize(),p.push(w.x,w.y,w.z),m.push(K,1-b),C.push(v++)}x.push(C)}for(let D=0;D<r;D++)for(let C=0;C<s;C++){const b=x[C][D],N=x[C+1][D],J=x[C+1][D+1],K=x[C][D+1];h.push(b,N,K),h.push(N,J,K),T+=6}u.addGroup(g,T,0),g+=T}function S(w){const P=v,T=new Ee,R=new z;let D=0;const C=w===!0?e:t,b=w===!0?1:-1;for(let J=1;J<=r;J++)d.push(0,y*b,0),p.push(0,b,0),m.push(.5,.5),v++;const N=v;for(let J=0;J<=r;J++){const q=J/r*l+a,te=Math.cos(q),Z=Math.sin(q);R.x=C*Z,R.y=y*b,R.z=C*te,d.push(R.x,R.y,R.z),p.push(0,b,0),T.x=te*.5+.5,T.y=Z*.5*b+.5,m.push(T.x,T.y),v++}for(let J=0;J<r;J++){const K=P+J,q=N+J;w===!0?h.push(q,q+1,K):h.push(q+1,q,K),D+=3}u.addGroup(g,D,w===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class U_ extends Jf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new U_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fl extends Et{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const S=new z,w=new z,P=new z;for(let T=0;T<t.length;T+=3)m(t[T+0],S),m(t[T+1],w),m(t[T+2],P),l(S,w,P,A)}function l(A,S,w,P){const T=P+1,R=[];for(let D=0;D<=T;D++){R[D]=[];const C=A.clone().lerp(w,D/T),b=S.clone().lerp(w,D/T),N=T-D;for(let J=0;J<=N;J++)J===0&&D===T?R[D][J]=C:R[D][J]=C.clone().lerp(b,J/N)}for(let D=0;D<T;D++)for(let C=0;C<2*(T-D)-1;C++){const b=Math.floor(C/2);C%2===0?(p(R[D][b+1]),p(R[D+1][b]),p(R[D][b])):(p(R[D][b+1]),p(R[D+1][b+1]),p(R[D+1][b]))}}function u(A){const S=new z;for(let w=0;w<s.length;w+=3)S.x=s[w+0],S.y=s[w+1],S.z=s[w+2],S.normalize().multiplyScalar(A),s[w+0]=S.x,s[w+1]=S.y,s[w+2]=S.z}function h(){const A=new z;for(let S=0;S<s.length;S+=3){A.x=s[S+0],A.y=s[S+1],A.z=s[S+2];const w=y(A)/2/Math.PI+.5,P=g(A)/Math.PI+.5;o.push(w,1-P)}v(),d()}function d(){for(let A=0;A<o.length;A+=6){const S=o[A+0],w=o[A+2],P=o[A+4],T=Math.max(S,w,P),R=Math.min(S,w,P);T>.9&&R<.1&&(S<.2&&(o[A+0]+=1),w<.2&&(o[A+2]+=1),P<.2&&(o[A+4]+=1))}}function p(A){s.push(A.x,A.y,A.z)}function m(A,S){const w=A*3;S.x=e[w+0],S.y=e[w+1],S.z=e[w+2]}function v(){const A=new z,S=new z,w=new z,P=new z,T=new Ee,R=new Ee,D=new Ee;for(let C=0,b=0;C<s.length;C+=9,b+=6){A.set(s[C+0],s[C+1],s[C+2]),S.set(s[C+3],s[C+4],s[C+5]),w.set(s[C+6],s[C+7],s[C+8]),T.set(o[b+0],o[b+1]),R.set(o[b+2],o[b+3]),D.set(o[b+4],o[b+5]),P.copy(A).add(S).add(w).divideScalar(3);const N=y(P);x(T,b+0,A,N),x(R,b+2,S,N),x(D,b+4,w,N)}}function x(A,S,w,P){P<0&&A.x===1&&(o[S]=A.x-1),w.x===0&&w.z===0&&(o[S]=P/2/Math.PI+.5)}function y(A){return Math.atan2(A.z,-A.x)}function g(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fl(e.vertices,e.indices,e.radius,e.details)}}class O_ extends fl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O_(e.radius,e.detail)}}const Dg=new z,Lg=new z,wx=new z,Fg=new Br;class aD extends Et{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(uu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:x,b:y,c:g}=Fg;if(x.fromBufferAttribute(a,u[0]),y.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),Fg.getNormal(wx),d[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[1]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let A=0;A<3;A++){const S=(A+1)%3,w=d[A],P=d[S],T=Fg[h[A]],R=Fg[h[S]],D=`${w}_${P}`,C=`${P}_${w}`;C in p&&p[C]?(wx.dot(p[C].normal)<=s&&(m.push(T.x,T.y,T.z),m.push(R.x,R.y,R.z)),p[C]=null):D in p||(p[D]={index0:u[A],index1:u[S],normal:wx.clone()})}}for(const v in p)if(p[v]){const{index0:x,index1:y}=p[v];Dg.fromBufferAttribute(a,x),Lg.fromBufferAttribute(a,y),m.push(Dg.x,Dg.y,Dg.z),m.push(Lg.x,Lg.y,Lg.z)}this.setAttribute("position",new ot(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class fu extends jd{constructor(e){super(e),this.uuid=Ur(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new jd().fromJSON(r))}return this}}const w8={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=lD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,d,p,m;if(i&&(s=b8(n,e,s,t)),n.length>80*t){a=u=n[0],l=h=n[1];for(let v=t;v<r;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?32767/m:0}return Qd(s,o,t,a,l,m,0),o}};function lD(n,e,t,i,r){let s,o;if(r===z8(n,e,t,i)>0)for(s=e;s<t;s+=i)o=kb(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=kb(s,n[s],n[s+1],o);return o&&k_(o,o.next)&&(qd(o),o=o.next),o}function Cu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(k_(t,t.next)||Pn(t.prev,t,t.next)===0)){if(qd(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Qd(n,e,t,i,r,s,o){if(!n)return;!o&&s&&L8(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?C8(n,i,r,s):E8(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),qd(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=T8(Cu(n),e,t),Qd(n,e,t,i,r,s,2)):o===2&&R8(n,e,t,i,r,s):Qd(Cu(n),e,t,i,r,s,1);break}}}function E8(n){const e=n.prev,t=n,i=n.next;if(Pn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=i.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=d&&v.y<=m&&Gc(r,a,s,l,o,u,v.x,v.y)&&Pn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function C8(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Pn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,d=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,v=h<d?h<p?h:p:d<p?d:p,x=a>l?a>u?a:u:l>u?l:u,y=h>d?h>p?h:p:d>p?d:p,g=dS(m,v,e,t,i),A=dS(x,y,e,t,i);let S=n.prevZ,w=n.nextZ;for(;S&&S.z>=g&&w&&w.z<=A;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=y&&S!==r&&S!==o&&Gc(a,h,l,d,u,p,S.x,S.y)&&Pn(S.prev,S,S.next)>=0||(S=S.prevZ,w.x>=m&&w.x<=x&&w.y>=v&&w.y<=y&&w!==r&&w!==o&&Gc(a,h,l,d,u,p,w.x,w.y)&&Pn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=y&&S!==r&&S!==o&&Gc(a,h,l,d,u,p,S.x,S.y)&&Pn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=A;){if(w.x>=m&&w.x<=x&&w.y>=v&&w.y<=y&&w!==r&&w!==o&&Gc(a,h,l,d,u,p,w.x,w.y)&&Pn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function T8(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!k_(r,s)&&uD(r,i,i.next,s)&&Zd(r,s)&&Zd(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),qd(i),qd(i.next),i=n=s),i=i.next}while(i!==n);return Cu(i)}function R8(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&U8(o,a)){let l=cD(o,a);o=Cu(o,o.next),l=Cu(l,l.next),Qd(o,e,t,i,r,s,0),Qd(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function b8(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=lD(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(N8(u));for(r.sort(P8),s=0;s<r.length;s++)t=I8(r[s],t);return t}function P8(n,e){return n.x-e.x}function I8(n,e){const t=B8(n,e);if(!t)return e;const i=cD(t,n);return Cu(i,i.next),Cu(t,t.next)}function B8(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let h=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Gc(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Zd(t,n)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&D8(r,t)))&&(r=t,h=d)),t=t.next;while(t!==a);return r}function D8(n,e){return Pn(n.prev,n,e.prev)<0&&Pn(e.next,n,n.next)<0}function L8(n,e,t,i){let r=n;do r.z===0&&(r.z=dS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,F8(r)}function F8(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function dS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function N8(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Gc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function U8(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!O8(n,e)&&(Zd(n,e)&&Zd(e,n)&&k8(n,e)&&(Pn(n.prev,n,e.prev)||Pn(n,e.prev,e))||k_(n,e)&&Pn(n.prev,n,n.next)>0&&Pn(e.prev,e,e.next)>0)}function Pn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function k_(n,e){return n.x===e.x&&n.y===e.y}function uD(n,e,t,i){const r=Ug(Pn(n,e,t)),s=Ug(Pn(n,e,i)),o=Ug(Pn(t,i,n)),a=Ug(Pn(t,i,e));return!!(r!==s&&o!==a||r===0&&Ng(n,t,e)||s===0&&Ng(n,i,e)||o===0&&Ng(t,n,i)||a===0&&Ng(t,e,i))}function Ng(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Ug(n){return n>0?1:n<0?-1:0}function O8(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&uD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Zd(n,e){return Pn(n.prev,n,n.next)<0?Pn(n,e,n.next)>=0&&Pn(n,n.prev,e)>=0:Pn(n,e,n.prev)<0||Pn(n,n.next,e)<0}function k8(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function cD(n,e){const t=new pS(n.i,n.x,n.y),i=new pS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function kb(n,e,t,i){const r=new pS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function qd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function pS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function z8(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class co{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return co.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];zb(e),Hb(i,e);let o=e.length;t.forEach(zb);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,Hb(i,t[l]);const a=w8.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function zb(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Hb(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class z_ extends Et{constructor(e=new fu([new Ee(.5,.5),new Ee(-.5,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new ot(r,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:H8;let S,w=!1,P,T,R,D;g&&(S=g.getSpacedPoints(h),w=!0,p=!1,P=g.computeFrenetFrames(h,!1),T=new z,R=new z,D=new z),p||(y=0,m=0,v=0,x=0);const C=a.extractPoints(u);let b=C.shape;const N=C.holes;if(!co.isClockWise(b)){b=b.reverse();for(let k=0,Te=N.length;k<Te;k++){const Pe=N[k];co.isClockWise(Pe)&&(N[k]=Pe.reverse())}}const K=co.triangulateShape(b,N),q=b;for(let k=0,Te=N.length;k<Te;k++){const Pe=N[k];b=b.concat(Pe)}function te(k,Te,Pe){return Te||console.error("THREE.ExtrudeGeometry: vec does not exist"),k.clone().addScaledVector(Te,Pe)}const Z=b.length,oe=K.length;function H(k,Te,Pe){let Oe,Ae,rt;const ze=k.x-Te.x,Qe=k.y-Te.y,X=Pe.x-k.x,F=Pe.y-k.y,he=ze*ze+Qe*Qe,Se=ze*F-Qe*X;if(Math.abs(Se)>Number.EPSILON){const xe=Math.sqrt(he),Ce=Math.sqrt(X*X+F*F),lt=Te.x-Qe/xe,Ue=Te.y+ze/xe,et=Pe.x-F/Ce,yt=Pe.y+X/Ce,Le=((et-lt)*F-(yt-Ue)*X)/(ze*F-Qe*X);Oe=lt+ze*Le-k.x,Ae=Ue+Qe*Le-k.y;const Ze=Oe*Oe+Ae*Ae;if(Ze<=2)return new Ee(Oe,Ae);rt=Math.sqrt(Ze/2)}else{let xe=!1;ze>Number.EPSILON?X>Number.EPSILON&&(xe=!0):ze<-Number.EPSILON?X<-Number.EPSILON&&(xe=!0):Math.sign(Qe)===Math.sign(F)&&(xe=!0),xe?(Oe=-Qe,Ae=ze,rt=Math.sqrt(he)):(Oe=ze,Ae=Qe,rt=Math.sqrt(he/2))}return new Ee(Oe/rt,Ae/rt)}const ee=[];for(let k=0,Te=q.length,Pe=Te-1,Oe=k+1;k<Te;k++,Pe++,Oe++)Pe===Te&&(Pe=0),Oe===Te&&(Oe=0),ee[k]=H(q[k],q[Pe],q[Oe]);const Q=[];let ue,me=ee.concat();for(let k=0,Te=N.length;k<Te;k++){const Pe=N[k];ue=[];for(let Oe=0,Ae=Pe.length,rt=Ae-1,ze=Oe+1;Oe<Ae;Oe++,rt++,ze++)rt===Ae&&(rt=0),ze===Ae&&(ze=0),ue[Oe]=H(Pe[Oe],Pe[rt],Pe[ze]);Q.push(ue),me=me.concat(ue)}for(let k=0;k<y;k++){const Te=k/y,Pe=m*Math.cos(Te*Math.PI/2),Oe=v*Math.sin(Te*Math.PI/2)+x;for(let Ae=0,rt=q.length;Ae<rt;Ae++){const ze=te(q[Ae],ee[Ae],Oe);be(ze.x,ze.y,-Pe)}for(let Ae=0,rt=N.length;Ae<rt;Ae++){const ze=N[Ae];ue=Q[Ae];for(let Qe=0,X=ze.length;Qe<X;Qe++){const F=te(ze[Qe],ue[Qe],Oe);be(F.x,F.y,-Pe)}}}const Ie=v+x;for(let k=0;k<Z;k++){const Te=p?te(b[k],me[k],Ie):b[k];w?(R.copy(P.normals[0]).multiplyScalar(Te.x),T.copy(P.binormals[0]).multiplyScalar(Te.y),D.copy(S[0]).add(R).add(T),be(D.x,D.y,D.z)):be(Te.x,Te.y,0)}for(let k=1;k<=h;k++)for(let Te=0;Te<Z;Te++){const Pe=p?te(b[Te],me[Te],Ie):b[Te];w?(R.copy(P.normals[k]).multiplyScalar(Pe.x),T.copy(P.binormals[k]).multiplyScalar(Pe.y),D.copy(S[k]).add(R).add(T),be(D.x,D.y,D.z)):be(Pe.x,Pe.y,d/h*k)}for(let k=y-1;k>=0;k--){const Te=k/y,Pe=m*Math.cos(Te*Math.PI/2),Oe=v*Math.sin(Te*Math.PI/2)+x;for(let Ae=0,rt=q.length;Ae<rt;Ae++){const ze=te(q[Ae],ee[Ae],Oe);be(ze.x,ze.y,d+Pe)}for(let Ae=0,rt=N.length;Ae<rt;Ae++){const ze=N[Ae];ue=Q[Ae];for(let Qe=0,X=ze.length;Qe<X;Qe++){const F=te(ze[Qe],ue[Qe],Oe);w?be(F.x,F.y+S[h-1].y,S[h-1].x+Pe):be(F.x,F.y,d+Pe)}}}ae(),ve();function ae(){const k=r.length/3;if(p){let Te=0,Pe=Z*Te;for(let Oe=0;Oe<oe;Oe++){const Ae=K[Oe];Xe(Ae[2]+Pe,Ae[1]+Pe,Ae[0]+Pe)}Te=h+y*2,Pe=Z*Te;for(let Oe=0;Oe<oe;Oe++){const Ae=K[Oe];Xe(Ae[0]+Pe,Ae[1]+Pe,Ae[2]+Pe)}}else{for(let Te=0;Te<oe;Te++){const Pe=K[Te];Xe(Pe[2],Pe[1],Pe[0])}for(let Te=0;Te<oe;Te++){const Pe=K[Te];Xe(Pe[0]+Z*h,Pe[1]+Z*h,Pe[2]+Z*h)}}i.addGroup(k,r.length/3-k,0)}function ve(){const k=r.length/3;let Te=0;ye(q,Te),Te+=q.length;for(let Pe=0,Oe=N.length;Pe<Oe;Pe++){const Ae=N[Pe];ye(Ae,Te),Te+=Ae.length}i.addGroup(k,r.length/3-k,1)}function ye(k,Te){let Pe=k.length;for(;--Pe>=0;){const Oe=Pe;let Ae=Pe-1;Ae<0&&(Ae=k.length-1);for(let rt=0,ze=h+y*2;rt<ze;rt++){const Qe=Z*rt,X=Z*(rt+1),F=Te+Oe+Qe,he=Te+Ae+Qe,Se=Te+Ae+X,xe=Te+Oe+X;st(F,he,Se,xe)}}}function be(k,Te,Pe){l.push(k),l.push(Te),l.push(Pe)}function Xe(k,Te,Pe){$e(k),$e(Te),$e(Pe);const Oe=r.length/3,Ae=A.generateTopUV(i,r,Oe-3,Oe-2,Oe-1);Ve(Ae[0]),Ve(Ae[1]),Ve(Ae[2])}function st(k,Te,Pe,Oe){$e(k),$e(Te),$e(Oe),$e(Te),$e(Pe),$e(Oe);const Ae=r.length/3,rt=A.generateSideWallUV(i,r,Ae-6,Ae-3,Ae-2,Ae-1);Ve(rt[0]),Ve(rt[1]),Ve(rt[3]),Ve(rt[1]),Ve(rt[2]),Ve(rt[3])}function $e(k){r.push(l[k*3+0]),r.push(l[k*3+1]),r.push(l[k*3+2])}function Ve(k){s.push(k.x),s.push(k.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return G8(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Iv[r.type]().fromJSON(r)),new z_(i,e.options)}}const H8={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new Ee(s,o),new Ee(a,l),new Ee(u,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],x=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new Ee(o,1-l),new Ee(u,1-d),new Ee(p,1-v),new Ee(x,1-g)]:[new Ee(a,1-l),new Ee(h,1-d),new Ee(m,1-v),new Ee(y,1-g)]}};function G8(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Pp extends fl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pp(e.radius,e.detail)}}class Ip extends fl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ip(e.radius,e.detail)}}class H_ extends Et{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let d=e;const p=(t-e)/r,m=new z,v=new Ee;for(let x=0;x<=r;x++){for(let y=0;y<=i;y++){const g=s+y/i*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}d+=p}for(let x=0;x<r;x++){const y=x*(i+1);for(let g=0;g<i;g++){const A=g+y,S=A,w=A+i+1,P=A+i+2,T=A+1;a.push(S,w,T),a.push(w,P,T)}}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class G_ extends Et{constructor(e=new fu([new Ee(0,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ot(r,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(o,2));function u(h){const d=r.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;co.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const A=v[y];co.isClockWise(A)===!0&&(v[y]=A.reverse())}const x=co.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const A=v[y];m=m.concat(A)}for(let y=0,g=m.length;y<g;y++){const A=m[y];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let y=0,g=x.length;y<g;y++){const A=x[y],S=A[0]+d,w=A[1]+d,P=A[2]+d;i.push(S,w,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return V8(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new G_(i,e.curveSegments)}}function V8(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Bp extends Et{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],d=new z,p=new z,m=[],v=[],x=[],y=[];for(let g=0;g<=i;g++){const A=[],S=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let P=0;P<=t;P++){const T=P/t;d.x=-e*Math.cos(r+T*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(r+T*s)*Math.sin(o+S*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),x.push(p.x,p.y,p.z),y.push(T+w,1-S),A.push(u++)}h.push(A)}for(let g=0;g<i;g++)for(let A=0;A<t;A++){const S=h[g][A+1],w=h[g][A],P=h[g+1][A],T=h[g+1][A+1];(g!==0||o>0)&&m.push(S,w,T),(g!==i-1||l<Math.PI)&&m.push(w,P,T)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(x,3)),this.setAttribute("uv",new ot(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class V_ extends fl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V_(e.radius,e.detail)}}class W_ extends Et{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new z,d=new z,p=new z;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const x=v/r*s,y=m/i*Math.PI*2;d.x=(e+t*Math.cos(y))*Math.cos(x),d.y=(e+t*Math.cos(y))*Math.sin(x),d.z=t*Math.sin(y),a.push(d.x,d.y,d.z),h.x=e*Math.cos(x),h.y=e*Math.sin(x),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(v/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const x=(r+1)*m+v-1,y=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,A=(r+1)*m+v;o.push(x,y,A),o.push(y,g,A)}this.setIndex(o),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class X_ extends Et{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],d=new z,p=new z,m=new z,v=new z,x=new z,y=new z,g=new z;for(let S=0;S<=i;++S){const w=S/i*s*Math.PI*2;A(w,s,o,e,m),A(w+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),x.crossVectors(y,g),g.crossVectors(x,y),x.normalize(),g.normalize();for(let P=0;P<=r;++P){const T=P/r*Math.PI*2,R=-t*Math.cos(T),D=t*Math.sin(T);d.x=m.x+(R*g.x+D*x.x),d.y=m.y+(R*g.y+D*x.y),d.z=m.z+(R*g.z+D*x.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),h.push(S/i),h.push(P/r)}}for(let S=1;S<=i;S++)for(let w=1;w<=r;w++){const P=(r+1)*(S-1)+(w-1),T=(r+1)*S+(w-1),R=(r+1)*S+w,D=(r+1)*(S-1)+w;a.push(P,T,D),a.push(T,R,D)}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(h,2));function A(S,w,P,T,R){const D=Math.cos(S),C=Math.sin(S),b=P/w*S,N=Math.cos(b);R.x=T*(2+N)*.5*D,R.y=T*(2+N)*C*.5,R.z=T*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new X_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class J_ extends Et{constructor(e=new Cw(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new z,l=new z,u=new Ee;let h=new z;const d=[],p=[],m=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new ot(d,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function x(){for(let S=0;S<t;S++)y(S);y(s===!1?t:0),A(),g()}function y(S){h=e.getPointAt(S/t,h);const w=o.normals[S],P=o.binormals[S];for(let T=0;T<=r;T++){const R=T/r*Math.PI*2,D=Math.sin(R),C=-Math.cos(R);l.x=C*w.x+D*P.x,l.y=C*w.y+D*P.y,l.z=C*w.z+D*P.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let w=1;w<=r;w++){const P=(r+1)*(S-1)+(w-1),T=(r+1)*S+(w-1),R=(r+1)*S+w,D=(r+1)*(S-1)+w;v.push(P,T,D),v.push(T,R,D)}}function A(){for(let S=0;S<=t;S++)for(let w=0;w<=r;w++)u.x=S/t,u.y=w/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new J_(new Iv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fD extends Et{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new z,s=new z;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start,m=d.count;for(let v=p,x=p+m;v<x;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),A=a.getX(v+(y+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,A),Gb(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),Gb(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Gb(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Vb=Object.freeze({__proto__:null,BoxGeometry:cl,CapsuleGeometry:F_,CircleGeometry:N_,ConeGeometry:U_,CylinderGeometry:Jf,DodecahedronGeometry:O_,EdgesGeometry:aD,ExtrudeGeometry:z_,IcosahedronGeometry:Pp,LatheGeometry:bp,OctahedronGeometry:Ip,PlaneGeometry:ta,PolyhedronGeometry:fl,RingGeometry:H_,ShapeGeometry:G_,SphereGeometry:Bp,TetrahedronGeometry:V_,TorusGeometry:W_,TorusKnotGeometry:X_,TubeGeometry:J_,WireframeGeometry:fD});class hD extends $n{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new He(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class dD extends mi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Dp extends $n{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new He(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _s extends Dp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ee(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new He(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new He(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new He(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pD extends $n{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hr,this.combine=yp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mD extends $n{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new He(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gD extends $n{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vD extends $n{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hr,this.combine=yp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _D extends $n{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new He(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yD extends Hi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function eu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function xD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function AD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function mS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function Rw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function W8(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*r;if(!(v<t||v>=i)){d.push(u.times[m]);for(let x=0;x<h;++x)p.push(u.values[m*h+x])}}d.length!==0&&(u.times=eu(d,u.times.constructor),u.values=eu(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function X8(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const g=h,A=d-h;x=a.values.slice(g,A)}else if(s>=a.times[v]){const g=v*d+h,A=g+d-h;x=a.values.slice(g,A)}else{const g=a.createInterpolant(),A=h,S=d-h;g.evaluate(s),x=g.resultBuffer.slice(A,S)}l==="quaternion"&&new Ni().fromArray(x).normalize().conjugate().toArray(x);const y=u.times.length;for(let g=0;g<y;++g){const A=g*m+p;if(l==="quaternion")Ni.multiplyQuaternionsFlat(u.values,A,x,0,u.values,A);else{const S=m-p*2;for(let w=0;w<S;++w)u.values[A+w]-=x[w]}}}return n.blendMode=rw,n}const J8={convertArray:eu,isTypedArray:xD,getKeyframeOrder:AD,sortedArray:mS,flattenJSON:Rw,subclip:W8,makeClipAdditive:X8};class Kf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class SD extends Kf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ql,endingEnd:Ql}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Zl:s=e,a=2*t-i;break;case Gd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Zl:o=e,l=2*i-t;break;case Gd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),x=v*v,y=x*v,g=-p*y+2*p*x-p*v,A=(1+p)*y+(-1.5-2*p)*x+(-.5+p)*v+1,S=(-1-m)*y+(1.5+m)*x+.5*v,w=m*y-m*x;for(let P=0;P!==a;++P)s[P]=g*o[h+P]+A*o[u+P]+S*o[l+P]+w*o[d+P];return s}}class bw extends Kf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-t)/(r-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*h;return s}}class MD extends Kf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Gs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eu(t,this.TimeBufferType),this.values=eu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:eu(e.times,Array),values:eu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new MD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new bw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new SD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Af:t=this.InterpolantFactoryMethodDiscrete;break;case Sf:t=this.InterpolantFactoryMethodLinear;break;case m0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Af;case this.InterpolantFactoryMethodLinear:return Sf;case this.InterpolantFactoryMethodSmooth:return m0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&xD(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===m0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let v=0;v!==i;++v){const x=t[d+v];if(x!==t[p+v]||x!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Gs.prototype.TimeBufferType=Float32Array;Gs.prototype.ValueBufferType=Float32Array;Gs.prototype.DefaultInterpolation=Sf;class Fu extends Gs{constructor(e,t,i){super(e,t,i)}}Fu.prototype.ValueTypeName="bool";Fu.prototype.ValueBufferType=Array;Fu.prototype.DefaultInterpolation=Af;Fu.prototype.InterpolantFactoryMethodLinear=void 0;Fu.prototype.InterpolantFactoryMethodSmooth=void 0;class Pw extends Gs{}Pw.prototype.ValueTypeName="color";class Tu extends Gs{}Tu.prototype.ValueTypeName="number";class wD extends Kf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Ni.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Ru extends Gs{InterpolantFactoryMethodLinear(e){return new wD(this.times,this.values,this.getValueSize(),e)}}Ru.prototype.ValueTypeName="quaternion";Ru.prototype.InterpolantFactoryMethodSmooth=void 0;class Nu extends Gs{constructor(e,t,i){super(e,t,i)}}Nu.prototype.ValueTypeName="string";Nu.prototype.ValueBufferType=Array;Nu.prototype.DefaultInterpolation=Af;Nu.prototype.InterpolantFactoryMethodLinear=void 0;Nu.prototype.InterpolantFactoryMethodSmooth=void 0;class bu extends Gs{}bu.prototype.ValueTypeName="vector";class Cf{constructor(e="",t=-1,i=[],r=M_){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ur(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Y8(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Gs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=AD(l);l=mS(l,1,h),u=mS(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Tu(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,v,x){if(m.length!==0){const y=[],g=[];Rw(m,y,g,v),y.length!==0&&x.push(new d(p,y,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let x=0;x<p[v].morphTargets.length;x++)m[p[v].morphTargets[x]]=-1;for(const x in m){const y=[],g=[];for(let A=0;A!==p[v].morphTargets.length;++A){const S=p[v];y.push(S.time),g.push(S.morphTarget===x?1:0)}r.push(new Tu(".morphTargetInfluence["+x+"]",y,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(bu,m+".position",p,"pos",r),i(Ru,m+".quaternion",p,"rot",r),i(bu,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function K8(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tu;case"vector":case"vector2":case"vector3":case"vector4":return bu;case"color":return Pw;case"quaternion":return Ru;case"bool":case"boolean":return Fu;case"string":return Nu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Y8(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=K8(n.type);if(n.times===void 0){const t=[],i=[];Rw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Vo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class K_{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],v=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const ED=new K_;class Mi{constructor(e){this.manager=e!==void 0?e:ED,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Mi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Po={};class j8 extends Error{constructor(e,t){super(e),this.response=t}}class Ai extends Mi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Vo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Po[e]!==void 0){Po[e].push({onLoad:t,onProgress:i,onError:r});return}Po[e]=[],Po[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Po[e],d=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let x=0;const y=new ReadableStream({start(g){A();function A(){d.read().then(({done:S,value:w})=>{if(S)g.close();else{x+=w.byteLength;const P=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:m});for(let T=0,R=h.length;T<R;T++){const D=h[T];D.onProgress&&D.onProgress(P)}g.enqueue(w),A()}},S=>{g.error(S)})}}});return new Response(y)}else throw new j8(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{Vo.add(e,u);const h=Po[e];delete Po[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=Po[e];if(h===void 0)throw this.manager.itemError(e),u;delete Po[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Q8 extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ai(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Cf.parse(e[i]);t.push(r)}return t}}class Z8 extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new D_,l=new Ai(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=Jt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let x=0;x<p.mipmapCount;x++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+x]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Jt),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class $d extends Mi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Vo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Yd("img");function l(){h(),Vo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class CD extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=new Ep;s.colorSpace=Pr;const o=new $d(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class Iw extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ns,a=new Ai(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Xn,o.wrapT=u.wrapT!==void 0?u.wrapT:Xn,o.magFilter=u.magFilter!==void 0?u.magFilter:Jt,o.minFilter=u.minFilter!==void 0?u.minFilter:Jt,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=us),u.mipmapCount===1&&(o.minFilter=Jt),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class Bw extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=new en,o=new $d(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class hl extends Gt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new He(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class TD extends hl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new He(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ex=new dt,Wb=new z,Xb=new z;class Dw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ee(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cp,this._frameExtents=new Ee(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Wb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Wb),Xb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Xb),t.updateMatrixWorld(),Ex.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ex),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Ex)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class q8 extends Dw{constructor(){super(new Wn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Mf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Lw extends hl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new q8}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Jb=new dt,Fh=new z,Cx=new z;class $8 extends Dw{constructor(){super(new Wn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ee(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Fh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Fh),Cx.copy(i.position),Cx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Cx),i.updateMatrixWorld(),r.makeTranslation(-Fh.x,-Fh.y,-Fh.z),Jb.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jb)}}class Fw extends hl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new $8}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class e6 extends Dw{constructor(){super(new na(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Nw extends hl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.shadow=new e6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class RD extends hl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class bD extends hl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class PD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class ID extends hl{constructor(e=new PD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Y_ extends Mi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ai(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Y_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new He().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new He().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ee().fromArray(o.value);break;case"v3":r.uniforms[s].value=new z().fromArray(o.value);break;case"v4":r.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Rt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new dt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ee().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ee().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:hD,SpriteMaterial:vw,RawShaderMaterial:dD,ShaderMaterial:mi,PointsMaterial:B_,MeshPhysicalMaterial:_s,MeshStandardMaterial:Dp,MeshPhongMaterial:pD,MeshToonMaterial:mD,MeshNormalMaterial:gD,MeshLambertMaterial:vD,MeshDepthMaterial:pw,MeshDistanceMaterial:mw,MeshBasicMaterial:cr,MeshMatcapMaterial:_D,LineDashedMaterial:yD,LineBasicMaterial:Hi,Material:$n};return new t[e]}}class Ya{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class BD extends Et{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class DD extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ai(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),A=zc(y.type,g),S=new Tp(A,y.stride);return S.uuid=y.uuid,t[v]=S,S}function s(m,v){if(i[v]!==void 0)return i[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new BD:new Et,a=e.data.index;if(a!==void 0){const m=zc(a.type,a.array);o.setIndex(new jt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let x;if(v.isInterleavedBufferAttribute){const y=r(e.data,v.data);x=new il(y,v.itemSize,v.offset,v.normalized)}else{const y=zc(v.type,v.array),g=v.isInstancedBufferAttribute?Qo:jt;x=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),o.setAttribute(m,x)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],x=[];for(let y=0,g=v.length;y<g;y++){const A=v[y];let S;if(A.isInterleavedBufferAttribute){const w=r(e.data,A.data);S=new il(w,A.itemSize,A.offset,A.normalized)}else{const w=zc(A.type,A.array);S=new jt(w,A.itemSize,A.normalized)}A.name!==void 0&&(S.name=A.name),x.push(S)}o.morphAttributes[m]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const x=d[m];o.addGroup(x.start,x.count,x.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new z;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new xi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class t6 extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Ya.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ai(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ya.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ai(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new fu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Rp().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new DD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in Vb?a=Vb[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Y_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Cf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:zc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new K_(t);s=new $d(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const y=p[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Ns(g.data,g.width,g.height)))}r[d.uuid]=new ql(m)}else{const m=a(d.url);r[d.uuid]=new ql(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:zc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new $d(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new Ns(v.data,v.width,v.height)))}i[l.uuid]=new ql(h)}else{const h=await s(l.url);i[l.uuid]=new ql(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new Ep,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Ns:h=new en,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,n6)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],Kb),h.wrapT=i(a.wrap[1],Kb)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,Yb)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,Yb)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const y=p[v];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(i[y])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new Ef,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new He(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new P_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new b_(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Wn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new na(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new RD(e.color,e.intensity);break;case"DirectionalLight":o=new Nw(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Fw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new bD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Lw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new TD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new ID().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new _w(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new xn(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new yw(h,d,p),o.instanceMatrix=new Qo(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Qo(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new tD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const y=new Ui;y.min.fromArray(x.boxMin),y.max.fromArray(x.boxMax);const g=new xi;return g.radius=x.sphereRadius,g.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:y,sphereInitialized:x.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new eD;break;case"Line":o=new Zo(a(e.geometry),l(e.material));break;case"LineLoop":o=new xw(a(e.geometry),l(e.material));break;case"LineSegments":o=new zs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Aw(a(e.geometry),l(e.material));break;case"Sprite":o=new $3(l(e.material));break;case"Group":o=new Go;break;case"Bone":o=new I_;break;default:o=new Gt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Gt}})}}const n6={UVMapping:el,CubeReflectionMapping:po,CubeRefractionMapping:tl,EquirectangularReflectionMapping:_f,EquirectangularRefractionMapping:Hd,CubeUVReflectionMapping:Vf},Kb={RepeatWrapping:nl,ClampToEdgeWrapping:Xn,MirroredRepeatWrapping:yf},Yb={NearestFilter:ii,NearestMipmapNearestFilter:g_,NearestMipmapLinearFilter:jl,LinearFilter:Jt,LinearMipmapNearestFilter:$c,LinearMipmapLinearFilter:us};class LD extends Mi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Vo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Vo.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Vo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Vo.add(e,l),s.manager.itemStart(e)}}let Og;class Uw{static getContext(){return Og===void 0&&(Og=new(window.AudioContext||window.webkitAudioContext)),Og}static setContext(e){Og=e}}class i6 extends Mi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ai(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);Uw.getContext().decodeAudioData(u,function(d){t(d)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const jb=new dt,Qb=new dt,Bl=new dt;class r6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Bl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(uu*t.fov*.5)/t.zoom;let a,l;Qb.elements[12]=-r,jb.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Bl.elements[0]=2*t.near/(l-a),Bl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Bl),a=-o*t.aspect-s,l=o*t.aspect-s,Bl.elements[0]=2*t.near/(l-a),Bl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Bl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Qb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jb)}}class Ow{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Zb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Zb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Zb(){return(typeof performance>"u"?Date:performance).now()}const Dl=new z,qb=new Ni,s6=new z,Ll=new z;class o6 extends Gt{constructor(){super(),this.type="AudioListener",this.context=Uw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ow}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dl,qb,s6),Ll.set(0,0,-1).applyQuaternion(qb),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Dl.x,r),t.positionY.linearRampToValueAtTime(Dl.y,r),t.positionZ.linearRampToValueAtTime(Dl.z,r),t.forwardX.linearRampToValueAtTime(Ll.x,r),t.forwardY.linearRampToValueAtTime(Ll.y,r),t.forwardZ.linearRampToValueAtTime(Ll.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Dl.x,Dl.y,Dl.z),t.setOrientation(Ll.x,Ll.y,Ll.z,i.x,i.y,i.z)}}class FD extends Gt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Fl=new z,$b=new Ni,a6=new z,Nl=new z;class l6 extends FD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Fl,$b,a6),Nl.set(0,0,1).applyQuaternion($b);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Fl.x,i),t.positionY.linearRampToValueAtTime(Fl.y,i),t.positionZ.linearRampToValueAtTime(Fl.z,i),t.orientationX.linearRampToValueAtTime(Nl.x,i),t.orientationY.linearRampToValueAtTime(Nl.y,i),t.orientationZ.linearRampToValueAtTime(Nl.z,i)}else t.setPosition(Fl.x,Fl.y,Fl.z),t.setOrientation(Nl.x,Nl.y,Nl.z)}}class u6{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class ND{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Ni.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Ni.multiplyQuaternionsFlat(e,o,e,t,e,i),Ni.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const kw="\\[\\]\\.:\\/",c6=new RegExp("["+kw+"]","g"),zw="[^"+kw+"]",f6="[^"+kw.replace("\\.","")+"]",h6=/((?:WC+[\/:])*)/.source.replace("WC",zw),d6=/(WCOD+)?/.source.replace("WCOD",f6),p6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zw),m6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zw),g6=new RegExp("^"+h6+d6+p6+m6+"$"),v6=["material","materials","bones","map"];class _6{constructor(e,t,i){const r=i||Xt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Xt{constructor(e,t,i){this.path=t,this.parsedPath=i||Xt.parseTrackName(t),this.node=Xt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Xt.Composite(e,t,i):new Xt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(c6,"")}static parseTrackName(e){const t=g6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);v6.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Xt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Xt.Composite=_6;Xt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Xt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Xt.prototype.GetterByBindingType=[Xt.prototype._getValue_direct,Xt.prototype._getValue_array,Xt.prototype._getValue_arrayElement,Xt.prototype._getValue_toArray];Xt.prototype.SetterByBindingTypeAndVersioning=[[Xt.prototype._setValue_direct,Xt.prototype._setValue_direct_setNeedsUpdate,Xt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_array,Xt.prototype._setValue_array_setNeedsUpdate,Xt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_arrayElement,Xt.prototype._setValue_arrayElement_setNeedsUpdate,Xt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_fromArray,Xt.prototype._setValue_fromArray_setNeedsUpdate,Xt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class y6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ur(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let x=0,y=o;x!==y;++x)s[x].push(new Xt(p,i[x],r[x]))}else if(v<u){a=e[v];const x=--u,y=e[x];t[y.uuid]=v,e[v]=y,t[m]=x,e[x]=p;for(let g=0,A=o;g!==A;++g){const S=s[g],w=S[x];let P=S[v];S[v]=w,P===void 0&&(P=new Xt(p,i[g],r[g])),S[x]=P}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[u]=d,e[d]=l;for(let m=0,v=r;m!==v;++m){const x=i[m],y=x[d],g=x[h];x[h]=y,x[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],v=--o,x=e[v];t[m.uuid]=d,e[d]=m,t[x.uuid]=p,e[p]=x,e.pop();for(let y=0,g=r;y!==g;++y){const A=i[y],S=A[p],w=A[v];A[d]=S,A[p]=w,A.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,x=r;v!==x;++v){const y=i[v];y[d]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const v=l[p];d[p]=new Xt(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class UD{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ql,endingEnd:Ql};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=E3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case rw:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case M_:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===C3;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===w3){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Zl,r.endingEnd=Zl):(e?r.endingStart=this.zeroSlopeAtStart?Zl:Ql:r.endingStart=Gd,t?r.endingEnd=this.zeroSlopeAtEnd?Zl:Ql:r.endingEnd=Gd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const x6=new Float32Array(1);class A6 extends _o{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;v=new ND(Xt.create(i,m,x),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new bw(new Float32Array(2),new Float32Array(2),1,x6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Cf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=M_),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new UD(this,o,t,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Cf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Hw{constructor(e){this.value=e}clone(){return new Hw(this.value.clone===void 0?this.value:this.value.clone())}}let S6=0;class M6 extends _o{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:S6++}),this.name="",this.usage=Jd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class w6 extends Tp{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class E6{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const eP=new dt;class Gw{constructor(e,t,i=0,r=1/0){this.ray=new Wf(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new cu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return eP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(eP),this}intersectObject(e,t=!0,i=[]){return gS(e,this,i,t),i.sort(tP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)gS(e[r],this,i,t);return i.sort(tP),i}}function tP(n,e){return n.distance-e.distance}function gS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)gS(s[o],e,t,!0)}}class OD{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Un(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class C6{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Vw{constructor(e,t,i,r){Vw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const nP=new Ee;class T6{constructor(e=new Ee(1/0,1/0),t=new Ee(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=nP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const iP=new z,kg=new z;class R6{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){iP.subVectors(e,this.start),kg.subVectors(this.end,this.start);const i=kg.dot(kg);let s=kg.dot(iP)/i;return t&&(s=Un(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const rP=new z;class b6 extends Gt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Et,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new ot(r,3));const s=new Hi({fog:!1,toneMapped:!1});this.cone=new zs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xa=new z,zg=new dt,Tx=new dt;class P6 extends zs{constructor(e){const t=kD(e),i=new Et,r=[],s=[],o=new He(0,0,1),a=new He(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ot(r,3)),i.setAttribute("color",new ot(s,3));const l=new Hi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Tx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(zg.multiplyMatrices(Tx,a.matrixWorld),xa.setFromMatrixPosition(zg),r.setXYZ(o,xa.x,xa.y,xa.z),zg.multiplyMatrices(Tx,a.parent.matrixWorld),xa.setFromMatrixPosition(zg),r.setXYZ(o+1,xa.x,xa.y,xa.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function kD(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,kD(n.children[t]));return e}class I6 extends xn{constructor(e,t,i){const r=new Bp(t,4,2),s=new cr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const B6=new z,sP=new He,oP=new He;class D6 extends Gt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Ip(t);r.rotateY(Math.PI*.5),this.material=new cr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new jt(o,3)),this.add(new xn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");sP.copy(this.light.color),oP.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?sP:oP;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(B6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class L6 extends zs{constructor(e=10,t=10,i=4473924,r=8947848){i=new He(i),r=new He(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=p===s?i:r;x.toArray(u,m),m+=3,x.toArray(u,m),m+=3,x.toArray(u,m),m+=3,x.toArray(u,m),m+=3}const h=new Et;h.setAttribute("position",new ot(l,3)),h.setAttribute("color",new ot(u,3));const d=new Hi({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class F6 extends zs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new He(s),o=new He(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const x=d&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let v=0;v<r;v++){let x=v/r*(Math.PI*2),y=Math.sin(x)*m,g=Math.cos(x)*m;a.push(y,0,g),l.push(p.r,p.g,p.b),x=(v+1)/r*(Math.PI*2),y=Math.sin(x)*m,g=Math.cos(x)*m,a.push(y,0,g),l.push(p.r,p.g,p.b)}}const u=new Et;u.setAttribute("position",new ot(a,3)),u.setAttribute("color",new ot(l,3));const h=new Hi({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const aP=new z,Hg=new z,lP=new z;class N6 extends Gt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Et;r.setAttribute("position",new ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Hi({fog:!1,toneMapped:!1});this.lightPlane=new Zo(r,s),this.add(this.lightPlane),r=new Et,r.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new Zo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),aP.setFromMatrixPosition(this.light.matrixWorld),Hg.setFromMatrixPosition(this.light.target.matrixWorld),lP.subVectors(Hg,aP),this.lightPlane.lookAt(Hg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hg),this.targetLine.scale.z=lP.length()}}const Gg=new z,Fn=new wp;class U6 extends zs{constructor(e){const t=new Et,i=new Hi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new ot(r,3)),t.setAttribute("color",new ot(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new He(16755200),h=new He(16711680),d=new He(43775),p=new He(16777215),m=new He(3355443);this.setColors(u,h,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Fn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Hn("c",t,e,Fn,0,0,-1),Hn("t",t,e,Fn,0,0,1),Hn("n1",t,e,Fn,-i,-r,-1),Hn("n2",t,e,Fn,i,-r,-1),Hn("n3",t,e,Fn,-i,r,-1),Hn("n4",t,e,Fn,i,r,-1),Hn("f1",t,e,Fn,-i,-r,1),Hn("f2",t,e,Fn,i,-r,1),Hn("f3",t,e,Fn,-i,r,1),Hn("f4",t,e,Fn,i,r,1),Hn("u1",t,e,Fn,i*.7,r*1.1,-1),Hn("u2",t,e,Fn,-i*.7,r*1.1,-1),Hn("u3",t,e,Fn,0,r*2,-1),Hn("cf1",t,e,Fn,-i,0,1),Hn("cf2",t,e,Fn,i,0,1),Hn("cf3",t,e,Fn,0,-r,1),Hn("cf4",t,e,Fn,0,r,1),Hn("cn1",t,e,Fn,-i,0,-1),Hn("cn2",t,e,Fn,i,0,-1),Hn("cn3",t,e,Fn,0,-r,-1),Hn("cn4",t,e,Fn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Hn(n,e,t,i,r,s,o){Gg.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],Gg.x,Gg.y,Gg.z)}}const Vg=new Ui;class O6 extends zs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Et;s.setIndex(new jt(i,1)),s.setAttribute("position",new jt(r,3)),super(s,new Hi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Vg.setFromObject(this.object),Vg.isEmpty())return;const t=Vg.min,i=Vg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class k6 extends zs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Et;s.setIndex(new jt(i,1)),s.setAttribute("position",new ot(r,3)),super(s,new Hi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class z6 extends Zo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Et;o.setAttribute("position",new ot(s,3)),o.computeBoundingSphere(),super(o,new Hi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Et;l.setAttribute("position",new ot(a,3)),l.computeBoundingSphere(),this.add(new xn(l,new cr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const uP=new z;let Wg,Rx;class H6 extends Gt{constructor(e=new z(0,0,1),t=new z(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Wg===void 0&&(Wg=new Et,Wg.setAttribute("position",new ot([0,0,0,0,1,0],3)),Rx=new Jf(0,.5,1,5,1),Rx.translate(0,-.5,0)),this.position.copy(t),this.line=new Zo(Wg,new Hi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xn(Rx,new cr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(uP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class G6 extends zs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Et;r.setAttribute("position",new ot(t,3)),r.setAttribute("color",new ot(i,3));const s=new Hi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new He,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class V6{constructor(){this.type="ShapePath",this.color=new He,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const A=[];for(let S=0,w=g.length;S<w;S++){const P=g[S],T=new fu;T.curves=P.curves,A.push(T)}return A}function i(g,A){const S=A.length;let w=!1;for(let P=S-1,T=0;T<S;P=T++){let R=A[P],D=A[T],C=D.x-R.x,b=D.y-R.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(R=A[T],C=-C,D=A[P],b=-b),g.y<R.y||g.y>D.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const N=b*(g.x-R.x)-C*(g.y-R.y);if(N===0)return!0;if(N<0)continue;w=!w}}else{if(g.y!==R.y)continue;if(D.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=D.x)return!0}}return w}const r=co.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new fu,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],v=0,x;p[v]=void 0,m[v]=[];for(let g=0,A=s.length;g<A;g++)a=s[g],x=a.getPoints(),o=r(x),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new fu,p:x},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:x[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,A=0;for(let S=0,w=p.length;S<w;S++)d[S]=[];for(let S=0,w=p.length;S<w;S++){const P=m[S];for(let T=0;T<P.length;T++){const R=P[T];let D=!0;for(let C=0;C<p.length;C++)i(R.p,p[C].p)&&(S!==C&&A++,D?(D=!1,d[C].push(R)):g=!0);D&&d[S].push(R)}}A>0&&g===!1&&(m=d)}let y;for(let g=0,A=p.length;g<A;g++){l=p[g].s,u.push(l),y=m[g];for(let S=0,w=y.length;S<w;S++)l.holes.push(y[S].h)}return u}}class W6 extends _o{constructor(e,t){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class X6 extends xr{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lu);const zD=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:QM,AddEquation:ba,AddOperation:g3,AdditiveAnimationBlendMode:rw,AdditiveBlending:$0,AgXToneMapping:A3,AlphaFormat:qM,AlwaysCompare:U3,AlwaysDepth:u3,AlwaysStencilFunc:aS,AmbientLight:RD,AnimationAction:UD,AnimationClip:Cf,AnimationLoader:Q8,AnimationMixer:A6,AnimationObjectGroup:y6,AnimationUtils:J8,ArcCurve:nD,ArrayCamera:Z3,ArrowHelper:H6,AttachedBindMode:sS,Audio:FD,AudioAnalyser:u6,AudioContext:Uw,AudioListener:o6,AudioLoader:i6,AxesHelper:G6,BackSide:Fi,BasicDepthPacking:R3,BasicShadowMap:VB,BatchedMesh:tD,Bone:I_,BooleanKeyframeTrack:Fu,Box2:T6,Box3:Ui,Box3Helper:k6,BoxGeometry:cl,BoxHelper:O6,BufferAttribute:jt,BufferGeometry:Et,BufferGeometryLoader:DD,ByteType:v_,Cache:Vo,Camera:wp,CameraHelper:U6,CanvasTexture:g8,CapsuleGeometry:F_,CatmullRomCurve3:iD,CineonToneMapping:y3,CircleGeometry:N_,ClampToEdgeWrapping:Xn,Clock:Ow,Color:He,ColorKeyframeTrack:Pw,ColorManagement:$t,CompressedArrayTexture:p8,CompressedCubeTexture:m8,CompressedTexture:D_,CompressedTextureLoader:Z8,ConeGeometry:U_,ConstantAlphaFactor:o3,ConstantColorFactor:r3,Controls:W6,CubeCamera:W3,CubeReflectionMapping:po,CubeRefractionMapping:tl,CubeTexture:Ep,CubeTextureLoader:CD,CubeUVReflectionMapping:Vf,CubicBezierCurve:Mw,CubicBezierCurve3:rD,CubicInterpolant:SD,CullFaceBack:nS,CullFaceFront:GB,CullFaceFrontBack:Zk,CullFaceNone:HB,Curve:Hs,CurvePath:oD,CustomBlending:WB,CustomToneMapping:x3,CylinderGeometry:Jf,Cylindrical:C6,Data3DTexture:uw,DataArrayTexture:E_,DataTexture:Ns,DataTextureLoader:Iw,DataUtils:$l,DecrementStencilOp:a4,DecrementWrapStencilOp:u4,DefaultLoadingManager:ED,DepthFormat:lu,DepthStencilFormat:Eu,DepthTexture:T_,DetachedBindMode:M3,DirectionalLight:Nw,DirectionalLightHelper:N6,DiscreteInterpolant:MD,DisplayP3ColorSpace:w_,DodecahedronGeometry:O_,DoubleSide:lr,DstAlphaFactor:$B,DstColorFactor:t3,DynamicCopyUsage:w4,DynamicDrawUsage:_4,DynamicReadUsage:A4,EdgesGeometry:aD,EllipseCurve:L_,EqualCompare:D3,EqualDepth:f3,EqualStencilFunc:d4,EquirectangularReflectionMapping:_f,EquirectangularRefractionMapping:Hd,Euler:Hr,EventDispatcher:_o,ExtrudeGeometry:z_,FileLoader:Ai,Float16BufferAttribute:cz,Float32BufferAttribute:ot,FloatType:En,Fog:P_,FogExp2:b_,FramebufferTexture:d8,FrontSide:ho,Frustum:Cp,GLBufferAttribute:E6,GLSL1:C4,GLSL3:lS,GreaterCompare:L3,GreaterDepth:d3,GreaterEqualCompare:N3,GreaterEqualDepth:h3,GreaterEqualStencilFunc:v4,GreaterStencilFunc:m4,GridHelper:L6,Group:Go,HalfFloatType:ri,HemisphereLight:TD,HemisphereLightHelper:D6,IcosahedronGeometry:Pp,ImageBitmapLoader:LD,ImageLoader:$d,ImageUtils:z3,IncrementStencilOp:o4,IncrementWrapStencilOp:l4,InstancedBufferAttribute:Qo,InstancedBufferGeometry:BD,InstancedInterleavedBuffer:w6,InstancedMesh:yw,Int16BufferAttribute:lz,Int32BufferAttribute:uz,Int8BufferAttribute:sz,IntType:xp,InterleavedBuffer:Tp,InterleavedBufferAttribute:il,Interpolant:Kf,InterpolateDiscrete:Af,InterpolateLinear:Sf,InterpolateSmooth:m0,InvertStencilOp:c4,KeepStencilOp:Gl,KeyframeTrack:Gs,LOD:eD,LatheGeometry:bp,Layers:cu,LessCompare:B3,LessDepth:c3,LessEqualCompare:ow,LessEqualDepth:zd,LessEqualStencilFunc:p4,LessStencilFunc:h4,Light:hl,LightProbe:ID,Line:Zo,Line3:R6,LineBasicMaterial:Hi,LineCurve:ww,LineCurve3:sD,LineDashedMaterial:yD,LineLoop:xw,LineSegments:zs,LinearDisplayP3ColorSpace:Mp,LinearFilter:Jt,LinearInterpolant:bw,LinearMipMapLinearFilter:oS,LinearMipMapNearestFilter:e4,LinearMipmapLinearFilter:us,LinearMipmapNearestFilter:$c,LinearSRGBColorSpace:ms,LinearToneMapping:v3,LinearTransfer:Vd,Loader:Mi,LoaderUtils:Ya,LoadingManager:K_,LoopOnce:w3,LoopPingPong:C3,LoopRepeat:E3,LuminanceAlphaFormat:tw,LuminanceFormat:ew,MOUSE:jk,Material:$n,MaterialLoader:Y_,MathUtils:lw,Matrix2:Vw,Matrix3:Rt,Matrix4:dt,MaxEquation:YB,Mesh:xn,MeshBasicMaterial:cr,MeshDepthMaterial:pw,MeshDistanceMaterial:mw,MeshLambertMaterial:vD,MeshMatcapMaterial:_D,MeshNormalMaterial:gD,MeshPhongMaterial:pD,MeshPhysicalMaterial:_s,MeshStandardMaterial:Dp,MeshToonMaterial:mD,MinEquation:KB,MirroredRepeatWrapping:yf,MixOperation:m3,MultiplyBlending:rS,MultiplyOperation:yp,NearestFilter:ii,NearestMipMapLinearFilter:$k,NearestMipMapNearestFilter:qk,NearestMipmapLinearFilter:jl,NearestMipmapNearestFilter:g_,NeutralToneMapping:S3,NeverCompare:I3,NeverDepth:l3,NeverStencilFunc:f4,NoBlending:lo,NoColorSpace:Oo,NoToneMapping:uo,NormalAnimationBlendMode:M_,NormalBlending:au,NotEqualCompare:F3,NotEqualDepth:p3,NotEqualStencilFunc:g4,NumberKeyframeTrack:Tu,Object3D:Gt,ObjectLoader:t6,ObjectSpaceNormalMap:P3,OctahedronGeometry:Ip,OneFactor:QB,OneMinusConstantAlphaFactor:a3,OneMinusConstantColorFactor:s3,OneMinusDstAlphaFactor:e3,OneMinusDstColorFactor:n3,OneMinusSrcAlphaFactor:tv,OneMinusSrcColorFactor:qB,OrthographicCamera:na,P3Primaries:Xd,PCFShadowMap:m_,PCFSoftShadowMap:od,PMREMGenerator:uS,Path:jd,PerspectiveCamera:Wn,Plane:Ca,PlaneGeometry:ta,PlaneHelper:z6,PointLight:Fw,PointLightHelper:I6,Points:Aw,PointsMaterial:B_,PolarGridHelper:F6,PolyhedronGeometry:fl,PositionalAudio:l6,PropertyBinding:Xt,PropertyMixer:ND,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Cw,Quaternion:Ni,QuaternionKeyframeTrack:Ru,QuaternionLinearInterpolant:wD,RED_GREEN_RGTC2_Format:Cv,RED_RGTC1_Format:iw,REVISION:Lu,RGBADepthPacking:b3,RGBAFormat:Jn,RGBAIntegerFormat:S_,RGBA_ASTC_10x10_Format:xv,RGBA_ASTC_10x5_Format:vv,RGBA_ASTC_10x6_Format:_v,RGBA_ASTC_10x8_Format:yv,RGBA_ASTC_12x10_Format:Av,RGBA_ASTC_12x12_Format:Sv,RGBA_ASTC_4x4_Format:uv,RGBA_ASTC_5x4_Format:cv,RGBA_ASTC_5x5_Format:fv,RGBA_ASTC_6x5_Format:hv,RGBA_ASTC_6x6_Format:dv,RGBA_ASTC_8x5_Format:pv,RGBA_ASTC_8x6_Format:mv,RGBA_ASTC_8x8_Format:gv,RGBA_BPTC_Format:fd,RGBA_ETC2_EAC_Format:lv,RGBA_PVRTC_2BPPV1_Format:sv,RGBA_PVRTC_4BPPV1_Format:rv,RGBA_S3TC_DXT1_Format:ld,RGBA_S3TC_DXT3_Format:ud,RGBA_S3TC_DXT5_Format:cd,RGBDepthPacking:n4,RGBFormat:$M,RGBIntegerFormat:t4,RGB_BPTC_SIGNED_Format:Mv,RGB_BPTC_UNSIGNED_Format:wv,RGB_ETC1_Format:ov,RGB_ETC2_Format:av,RGB_PVRTC_2BPPV1_Format:iv,RGB_PVRTC_4BPPV1_Format:nv,RGB_S3TC_DXT1_Format:ad,RGDepthPacking:i4,RGFormat:nw,RGIntegerFormat:A_,RawShaderMaterial:dD,Ray:Wf,Raycaster:Gw,Rec709Primaries:Wd,RectAreaLight:bD,RedFormat:Ap,RedIntegerFormat:Sp,ReinhardToneMapping:_3,RenderTarget:H3,RepeatWrapping:nl,ReplaceStencilOp:s4,ReverseSubtractEquation:JB,RingGeometry:H_,SIGNED_RED_GREEN_RGTC2_Format:Tv,SIGNED_RED_RGTC1_Format:Ev,SRGBColorSpace:Pr,SRGBTransfer:fn,Scene:Ef,ShaderChunk:Pt,ShaderLib:Is,ShaderMaterial:mi,ShadowMaterial:hD,Shape:fu,ShapeGeometry:G_,ShapePath:V6,ShapeUtils:co,ShortType:__,Skeleton:Rp,SkeletonHelper:P6,SkinnedMesh:_w,Source:ql,Sphere:xi,SphereGeometry:Bp,Spherical:OD,SphericalHarmonics3:PD,SplineCurve:Tw,SpotLight:Lw,SpotLightHelper:b6,Sprite:$3,SpriteMaterial:vw,SrcAlphaFactor:ev,SrcAlphaSaturateFactor:i3,SrcColorFactor:ZB,StaticCopyUsage:M4,StaticDrawUsage:Jd,StaticReadUsage:x4,StereoCamera:r6,StreamCopyUsage:E4,StreamDrawUsage:y4,StreamReadUsage:S4,StringKeyframeTrack:Nu,SubtractEquation:XB,SubtractiveBlending:iS,TOUCH:Qk,TangentSpaceNormalMap:ul,TetrahedronGeometry:V_,Texture:en,TextureLoader:Bw,TextureUtils:J9,TorusGeometry:W_,TorusKnotGeometry:X_,Triangle:Br,TriangleFanDrawMode:Rv,TriangleStripDrawMode:sw,TrianglesDrawMode:T3,TubeGeometry:J_,UVMapping:el,Uint16BufferAttribute:cw,Uint32BufferAttribute:fw,Uint8BufferAttribute:oz,Uint8ClampedBufferAttribute:az,Uniform:Hw,UniformsGroup:M6,UniformsLib:Ke,UniformsUtils:C_,UnsignedByteType:yr,UnsignedInt248Type:wu,UnsignedInt5999Type:ZM,UnsignedIntType:mo,UnsignedShort4444Type:y_,UnsignedShort5551Type:x_,UnsignedShortType:xf,VSMShadowMap:Rs,Vector2:Ee,Vector3:z,Vector4:sn,VectorKeyframeTrack:bu,VideoTexture:h8,WebGL3DRenderTarget:j4,WebGLArrayRenderTarget:Y4,WebGLCoordinateSystem:ro,WebGLCubeRenderTarget:hw,WebGLMultipleRenderTargets:X6,WebGLRenderTarget:xr,WebGLRenderer:gw,WebGLUtils:Q3,WebGPUCoordinateSystem:Kd,WireframeGeometry:fD,WrapAroundEnding:Gd,ZeroCurvatureEnding:Ql,ZeroFactor:jB,ZeroSlopeEnding:Zl,ZeroStencilOp:r4,createCanvasElement:k3},Symbol.toStringTag,{value:"Module"}));var HD={exports:{}},Uu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Uu.ConcurrentRoot=1;Uu.ContinuousEventPriority=4;Uu.DefaultEventPriority=16;Uu.DiscreteEventPriority=1;Uu.IdleEventPriority=536870912;Uu.LegacyRoot=0;HD.exports=Uu;var Vc=HD.exports;function J6(n){let e;const t=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(u,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const v=h(e);if(!d(p,v)){const x=p;u(p=v,x)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,h,d)=>h||d?s(u,h,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const K6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),cP=K6?se.useEffect:se.useLayoutEffect;function GD(n){const e=typeof n=="function"?J6(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=se.useReducer(y=>y+1,0),o=e.getState(),a=se.useRef(o),l=se.useRef(i),u=se.useRef(r),h=se.useRef(!1),d=se.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(p=i(o),m=!r(d.current,p)),cP(()=>{m&&(d.current=p),a.current=o,l.current=i,u.current=r,h.current=!1});const v=se.useRef(o);cP(()=>{const y=()=>{try{const A=e.getState(),S=l.current(A);u.current(d.current,S)||(a.current=A,d.current=S,s())}catch{h.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const x=m?p:d.current;return se.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const Y6=n=>typeof n=="object"&&typeof n.then=="function",tu=[];function VD(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function WD(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of tu)if(VD(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=tu.indexOf(r);s!==-1&&tu.splice(s,1)},promise:(Y6(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(tu.push(r),!t)throw r.promise}const j6=(n,e,t)=>WD(n,e,!1,t),Q6=(n,e,t)=>void WD(n,e,!0,t),Z6=n=>{if(n===void 0||n.length===0)tu.splice(0,tu.length);else{const e=tu.find(t=>VD(n,t.keys,t.equal));e&&e.remove()}};var XD={exports:{}},JD={exports:{}},KD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,ee){var Q=H.length;H.push(ee);e:for(;0<Q;){var ue=Q-1>>>1,me=H[ue];if(0<r(me,ee))H[ue]=ee,H[Q]=me,Q=ue;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ee=H[0],Q=H.pop();if(Q!==ee){H[0]=Q;e:for(var ue=0,me=H.length,Ie=me>>>1;ue<Ie;){var ae=2*(ue+1)-1,ve=H[ae],ye=ae+1,be=H[ye];if(0>r(ve,Q))ye<me&&0>r(be,ve)?(H[ue]=be,H[ye]=Q,ue=ye):(H[ue]=ve,H[ae]=Q,ue=ae);else if(ye<me&&0>r(be,Q))H[ue]=be,H[ye]=Q,ue=ye;else break e}}return ee}function r(H,ee){var Q=H.sortIndex-ee.sortIndex;return Q!==0?Q:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,v=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var ee=t(u);ee!==null;){if(ee.callback===null)i(u);else if(ee.startTime<=H)i(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function w(H){if(x=!1,S(H),!v)if(t(l)!==null)v=!0,Z(P);else{var ee=t(u);ee!==null&&oe(w,ee.startTime-H)}}function P(H,ee){v=!1,x&&(x=!1,g(D),D=-1),m=!0;var Q=p;try{for(S(ee),d=t(l);d!==null&&(!(d.expirationTime>ee)||H&&!N());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,p=d.priorityLevel;var me=ue(d.expirationTime<=ee);ee=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&i(l),S(ee)}else i(l);d=t(l)}if(d!==null)var Ie=!0;else{var ae=t(u);ae!==null&&oe(w,ae.startTime-ee),Ie=!1}return Ie}finally{d=null,p=Q,m=!1}}var T=!1,R=null,D=-1,C=5,b=-1;function N(){return!(n.unstable_now()-b<C)}function J(){if(R!==null){var H=n.unstable_now();b=H;var ee=!0;try{ee=R(!0,H)}finally{ee?K():(T=!1,R=null)}}else T=!1}var K;if(typeof A=="function")K=function(){A(J)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=J,K=function(){te.postMessage(null)}}else K=function(){y(J,0)};function Z(H){R=H,T||(T=!0,K())}function oe(H,ee){D=y(function(){H(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,Z(P))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var Q=p;p=ee;try{return H()}finally{p=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=p;p=H;try{return ee()}finally{p=Q}},n.unstable_scheduleCallback=function(H,ee,Q){var ue=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Q+me,H={id:h++,callback:ee,priorityLevel:H,startTime:Q,expirationTime:me,sortIndex:-1},Q>ue?(H.sortIndex=Q,e(u,H),t(l)===null&&H===t(u)&&(x?(g(D),D=-1):x=!0,oe(w,Q-ue))):(H.sortIndex=me,e(l,H),v||m||(v=!0,Z(P))),H},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(H){var ee=p;return function(){var Q=p;p=ee;try{return H.apply(this,arguments)}finally{p=Q}}}})(KD);JD.exports=KD;var vS=JD.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q6=function(e){var t={},i=se,r=vS,s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,_=1;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),P=Symbol.iterator;function T(c){return c===null||typeof c!="object"?null:(c=P&&c[P]||c["@@iterator"],typeof c=="function"?c:null)}function R(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case x:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case A:return f=c.displayName||null,f!==null?f:R(c.type)||"Memo";case S:f=c._payload,c=c._init;try{return R(c(f))}catch{}}return null}function D(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function C(c){var f=c,_=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(_=f.return),c=f.return;while(c)}return f.tag===3?_:null}function b(c){if(C(c)!==c)throw Error(o(188))}function N(c){var f=c.alternate;if(!f){if(f=C(c),f===null)throw Error(o(188));return f!==c?null:c}for(var _=c,M=f;;){var E=_.return;if(E===null)break;var I=E.alternate;if(I===null){if(M=E.return,M!==null){_=M;continue}break}if(E.child===I.child){for(I=E.child;I;){if(I===_)return b(E),c;if(I===M)return b(E),f;I=I.sibling}throw Error(o(188))}if(_.return!==M.return)_=E,M=I;else{for(var W=!1,ne=E.child;ne;){if(ne===_){W=!0,_=E,M=I;break}if(ne===M){W=!0,M=E,_=I;break}ne=ne.sibling}if(!W){for(ne=I.child;ne;){if(ne===_){W=!0,_=I,M=E;break}if(ne===M){W=!0,M=I,_=E;break}ne=ne.sibling}if(!W)throw Error(o(189))}}if(_.alternate!==M)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?c:f}function J(c){return c=N(c),c!==null?K(c):null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=K(c);if(f!==null)return f;c=c.sibling}return null}function q(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=q(c);if(f!==null)return f}c=c.sibling}return null}var te=Array.isArray,Z=e.getPublicInstance,oe=e.getRootHostContext,H=e.getChildHostContext,ee=e.prepareForCommit,Q=e.resetAfterCommit,ue=e.createInstance,me=e.appendInitialChild,Ie=e.finalizeInitialChildren,ae=e.prepareUpdate,ve=e.shouldSetTextContent,ye=e.createTextInstance,be=e.scheduleTimeout,Xe=e.cancelTimeout,st=e.noTimeout,$e=e.isPrimaryRenderer,Ve=e.supportsMutation,k=e.supportsPersistence,Te=e.supportsHydration,Pe=e.getInstanceFromNode,Oe=e.preparePortalMount,Ae=e.getCurrentEventPriority,rt=e.detachDeletedInstance,ze=e.supportsMicrotasks,Qe=e.scheduleMicrotask,X=e.supportsTestSelectors,F=e.findFiberRoot,he=e.getBoundingRect,Se=e.getTextContent,xe=e.isHiddenSubtree,Ce=e.matchAccessibilityRole,lt=e.setFocusIfFocusable,Ue=e.setupIntersectionObserver,et=e.appendChild,yt=e.appendChildToContainer,Le=e.commitTextUpdate,Ze=e.commitMount,Nt=e.commitUpdate,pt=e.insertBefore,Ge=e.insertInContainerBefore,At=e.removeChild,St=e.removeChildFromContainer,Dt=e.resetTextContent,$=e.hideInstance,Fe=e.hideTextInstance,ie=e.unhideInstance,Me=e.unhideTextInstance,ke=e.clearContainer,_t=e.cloneInstance,Ut=e.createContainerChildSet,mn=e.appendChildToContainerChildSet,kn=e.finalizeContainerChildren,Vt=e.replaceContainerChildren,tr=e.cloneHiddenInstance,Gi=e.cloneHiddenTextInstance,ku=e.canHydrateInstance,ys=e.canHydrateTextInstance,pl=e.canHydrateSuspenseInstance,Vs=e.isSuspenseInstancePending,ia=e.isSuspenseInstanceFallback,Xr=e.registerSuspenseInstanceRetry,nr=e.getNextHydratableSibling,Ct=e.getFirstHydratableChild,ml=e.getFirstHydratableChildWithinContainer,zu=e.getFirstHydratableChildWithinSuspenseInstance,L=e.hydrateInstance,U=e.hydrateTextInstance,j=e.hydrateSuspenseInstance,B=e.getNextHydratableInstanceAfterSuspenseInstance,O=e.commitHydratedContainer,G=e.commitHydratedSuspenseInstance,Y=e.clearSuspenseBoundary,V=e.clearSuspenseBoundaryFromContainer,le=e.shouldDeleteUnhydratedTailInstances,ce=e.didNotMatchHydratedContainerTextInstance,pe=e.didNotMatchHydratedTextInstance,de;function We(c){if(de===void 0)try{throw Error()}catch(_){var f=_.stack.trim().match(/\n( *(at )?)/);de=f&&f[1]||""}return`
`+de+c}var Re=!1;function we(c,f){if(!c||Re)return"";Re=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ne){var M=Ne}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ne){M=Ne}c.call(f.prototype)}else{try{throw Error()}catch(Ne){M=Ne}c()}}catch(Ne){if(Ne&&M&&typeof Ne.stack=="string"){for(var E=Ne.stack.split(`
`),I=M.stack.split(`
`),W=E.length-1,ne=I.length-1;1<=W&&0<=ne&&E[W]!==I[ne];)ne--;for(;1<=W&&0<=ne;W--,ne--)if(E[W]!==I[ne]){if(W!==1||ne!==1)do if(W--,ne--,0>ne||E[W]!==I[ne]){var _e=`
`+E[W].replace(" at new "," at ");return c.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",c.displayName)),_e}while(1<=W&&0<=ne);break}}}finally{Re=!1,Error.prepareStackTrace=_}return(c=c?c.displayName||c.name:"")?We(c):""}var Ye=Object.prototype.hasOwnProperty,nt=[],ft=-1;function xt(c){return{current:c}}function Je(c){0>ft||(c.current=nt[ft],nt[ft]=null,ft--)}function Be(c,f){ft++,nt[ft]=c.current,c.current=f}var mt={},ut=xt(mt),gt=xt(!1),Kt=mt;function nn(c,f){var _=c.type.contextTypes;if(!_)return mt;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var E={},I;for(I in _)E[I]=f[I];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=E),E}function An(c){return c=c.childContextTypes,c!=null}function Ot(){Je(gt),Je(ut)}function Lt(c,f,_){if(ut.current!==mt)throw Error(o(168));Be(ut,f),Be(gt,_)}function Cn(c,f,_){var M=c.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return _;M=M.getChildContext();for(var E in M)if(!(E in f))throw Error(o(108,D(c)||"Unknown",E));return s({},_,M)}function Tt(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||mt,Kt=ut.current,Be(ut,c),Be(gt,gt.current),!0}function Ht(c,f,_){var M=c.stateNode;if(!M)throw Error(o(169));_?(c=Cn(c,f,Kt),M.__reactInternalMemoizedMergedChildContext=c,Je(gt),Je(ut),Be(ut,c)):Je(gt),Be(gt,_)}var cn=Math.clz32?Math.clz32:Ws,Jr=Math.log,Vi=Math.LN2;function Ws(c){return c>>>=0,c===0?32:31-(Jr(c)/Vi|0)|0}var Wp=64,Xp=4194304;function Qf(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Jp(c,f){var _=c.pendingLanes;if(_===0)return 0;var M=0,E=c.suspendedLanes,I=c.pingedLanes,W=_&268435455;if(W!==0){var ne=W&~E;ne!==0?M=Qf(ne):(I&=W,I!==0&&(M=Qf(I)))}else W=_&~E,W!==0?M=Qf(W):I!==0&&(M=Qf(I));if(M===0)return 0;if(f!==0&&f!==M&&!(f&E)&&(E=M&-M,I=f&-f,E>=I||E===16&&(I&4194240)!==0))return f;if(M&4&&(M|=_&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=M;0<f;)_=31-cn(f),E=1<<_,M|=c[_],f&=~E;return M}function FN(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NN(c,f){for(var _=c.suspendedLanes,M=c.pingedLanes,E=c.expirationTimes,I=c.pendingLanes;0<I;){var W=31-cn(I),ne=1<<W,_e=E[W];_e===-1?(!(ne&_)||ne&M)&&(E[W]=FN(ne,f)):_e<=f&&(c.expiredLanes|=ne),I&=~ne}}function dy(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function py(c){for(var f=[],_=0;31>_;_++)f.push(c);return f}function Zf(c,f,_){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-cn(f),c[f]=_}function UN(c,f){var _=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<_;){var E=31-cn(_),I=1<<E;f[E]=0,M[E]=-1,c[E]=-1,_&=~I}}function my(c,f){var _=c.entangledLanes|=f;for(c=c.entanglements;_;){var M=31-cn(_),E=1<<M;E&f|c[M]&f&&(c[M]|=f),_&=~E}}var Qt=0;function XE(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var gy=r.unstable_scheduleCallback,JE=r.unstable_cancelCallback,ON=r.unstable_shouldYield,kN=r.unstable_requestPaint,ai=r.unstable_now,vy=r.unstable_ImmediatePriority,zN=r.unstable_UserBlockingPriority,_y=r.unstable_NormalPriority,HN=r.unstable_IdlePriority,Kp=null,Xs=null;function GN(c){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(Kp,c,void 0,(c.current.flags&128)===128)}catch{}}function VN(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Js=typeof Object.is=="function"?Object.is:VN,yo=null,Yp=!1,yy=!1;function KE(c){yo===null?yo=[c]:yo.push(c)}function WN(c){Yp=!0,KE(c)}function Ks(){if(!yy&&yo!==null){yy=!0;var c=0,f=Qt;try{var _=yo;for(Qt=1;c<_.length;c++){var M=_[c];do M=M(!0);while(M!==null)}yo=null,Yp=!1}catch(E){throw yo!==null&&(yo=yo.slice(c+1)),gy(vy,Ks),E}finally{Qt=f,yy=!1}}return null}var XN=a.ReactCurrentBatchConfig;function jp(c,f){if(Js(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var _=Object.keys(c),M=Object.keys(f);if(_.length!==M.length)return!1;for(M=0;M<_.length;M++){var E=_[M];if(!Ye.call(f,E)||!Js(c[E],f[E]))return!1}return!0}function JN(c){switch(c.tag){case 5:return We(c.type);case 16:return We("Lazy");case 13:return We("Suspense");case 19:return We("SuspenseList");case 0:case 2:case 15:return c=we(c.type,!1),c;case 11:return c=we(c.type.render,!1),c;case 1:return c=we(c.type,!0),c;default:return""}}function xs(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var _ in c)f[_]===void 0&&(f[_]=c[_]);return f}return f}var Qp=xt(null),Zp=null,Hu=null,xy=null;function Ay(){xy=Hu=Zp=null}function YE(c,f,_){$e?(Be(Qp,f._currentValue),f._currentValue=_):(Be(Qp,f._currentValue2),f._currentValue2=_)}function Sy(c){var f=Qp.current;Je(Qp),$e?c._currentValue=f:c._currentValue2=f}function My(c,f,_){for(;c!==null;){var M=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),c===_)break;c=c.return}}function Gu(c,f){Zp=c,xy=Hu=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(wr=!0),c.firstContext=null)}function Kr(c){var f=$e?c._currentValue:c._currentValue2;if(xy!==c)if(c={context:c,memoizedValue:f,next:null},Hu===null){if(Zp===null)throw Error(o(308));Hu=c,Zp.dependencies={lanes:0,firstContext:c}}else Hu=Hu.next=c;return f}var Ys=null,ra=!1;function wy(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jE(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function xo(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function sa(c,f){var _=c.updateQueue;_!==null&&(_=_.shared,Kn!==null&&c.mode&1&&!(Ft&2)?(c=_.interleaved,c===null?(f.next=f,Ys===null?Ys=[_]:Ys.push(_)):(f.next=c.next,c.next=f),_.interleaved=f):(c=_.pending,c===null?f.next=f:(f.next=c.next,c.next=f),_.pending=f))}function qp(c,f,_){if(f=f.updateQueue,f!==null&&(f=f.shared,(_&4194240)!==0)){var M=f.lanes;M&=c.pendingLanes,_|=M,f.lanes=_,my(c,_)}}function QE(c,f){var _=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,_===M)){var E=null,I=null;if(_=_.firstBaseUpdate,_!==null){do{var W={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};I===null?E=I=W:I=I.next=W,_=_.next}while(_!==null);I===null?E=I=f:I=I.next=f}else E=I=f;_={baseState:M.baseState,firstBaseUpdate:E,lastBaseUpdate:I,shared:M.shared,effects:M.effects},c.updateQueue=_;return}c=_.lastBaseUpdate,c===null?_.firstBaseUpdate=f:c.next=f,_.lastBaseUpdate=f}function $p(c,f,_,M){var E=c.updateQueue;ra=!1;var I=E.firstBaseUpdate,W=E.lastBaseUpdate,ne=E.shared.pending;if(ne!==null){E.shared.pending=null;var _e=ne,Ne=_e.next;_e.next=null,W===null?I=Ne:W.next=Ne,W=_e;var it=c.alternate;it!==null&&(it=it.updateQueue,ne=it.lastBaseUpdate,ne!==W&&(ne===null?it.firstBaseUpdate=Ne:ne.next=Ne,it.lastBaseUpdate=_e))}if(I!==null){var Mt=E.baseState;W=0,it=Ne=_e=null,ne=I;do{var vt=ne.lane,ln=ne.eventTime;if((M&vt)===vt){it!==null&&(it=it.next={eventTime:ln,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var ht=c,Ti=ne;switch(vt=f,ln=_,Ti.tag){case 1:if(ht=Ti.payload,typeof ht=="function"){Mt=ht.call(ln,Mt,vt);break e}Mt=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Ti.payload,vt=typeof ht=="function"?ht.call(ln,Mt,vt):ht,vt==null)break e;Mt=s({},Mt,vt);break e;case 2:ra=!0}}ne.callback!==null&&ne.lane!==0&&(c.flags|=64,vt=E.effects,vt===null?E.effects=[ne]:vt.push(ne))}else ln={eventTime:ln,lane:vt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},it===null?(Ne=it=ln,_e=Mt):it=it.next=ln,W|=vt;if(ne=ne.next,ne===null){if(ne=E.shared.pending,ne===null)break;vt=ne,ne=vt.next,vt.next=null,E.lastBaseUpdate=vt,E.shared.pending=null}}while(!0);if(it===null&&(_e=Mt),E.baseState=_e,E.firstBaseUpdate=Ne,E.lastBaseUpdate=it,f=E.shared.interleaved,f!==null){E=f;do W|=E.lane,E=E.next;while(E!==f)}else I===null&&(E.shared.lanes=0);Zu|=W,c.lanes=W,c.memoizedState=Mt}}function ZE(c,f,_){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var M=c[f],E=M.callback;if(E!==null){if(M.callback=null,M=_,typeof E!="function")throw Error(o(191,E));E.call(M)}}}var qE=new i.Component().refs;function Ey(c,f,_,M){f=c.memoizedState,_=_(M,f),_=_==null?f:s({},f,_),c.memoizedState=_,c.lanes===0&&(c.updateQueue.baseState=_)}var em={isMounted:function(c){return(c=c._reactInternals)?C(c)===c:!1},enqueueSetState:function(c,f,_){c=c._reactInternals;var M=Xi(),E=la(c),I=xo(M,E);I.payload=f,_!=null&&(I.callback=_),sa(c,I),f=qr(c,E,M),f!==null&&qp(f,c,E)},enqueueReplaceState:function(c,f,_){c=c._reactInternals;var M=Xi(),E=la(c),I=xo(M,E);I.tag=1,I.payload=f,_!=null&&(I.callback=_),sa(c,I),f=qr(c,E,M),f!==null&&qp(f,c,E)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var _=Xi(),M=la(c),E=xo(_,M);E.tag=2,f!=null&&(E.callback=f),sa(c,E),f=qr(c,M,_),f!==null&&qp(f,c,M)}};function $E(c,f,_,M,E,I,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,I,W):f.prototype&&f.prototype.isPureReactComponent?!jp(_,M)||!jp(E,I):!0}function eC(c,f,_){var M=!1,E=mt,I=f.contextType;return typeof I=="object"&&I!==null?I=Kr(I):(E=An(f)?Kt:ut.current,M=f.contextTypes,I=(M=M!=null)?nn(c,E):mt),f=new f(_,I),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=em,c.stateNode=f,f._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=I),f}function tC(c,f,_,M){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_,M),f.state!==c&&em.enqueueReplaceState(f,f.state,null)}function Cy(c,f,_,M){var E=c.stateNode;E.props=_,E.state=c.memoizedState,E.refs=qE,wy(c);var I=f.contextType;typeof I=="object"&&I!==null?E.context=Kr(I):(I=An(f)?Kt:ut.current,E.context=nn(c,I)),E.state=c.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&(Ey(c,f,I,_),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(f=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),f!==E.state&&em.enqueueReplaceState(E,E.state,null),$p(c,_,E,M),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}var Vu=[],Wu=0,tm=null,nm=0,Yr=[],jr=0,gl=null,Ao=1,So="";function vl(c,f){Vu[Wu++]=nm,Vu[Wu++]=tm,tm=c,nm=f}function nC(c,f,_){Yr[jr++]=Ao,Yr[jr++]=So,Yr[jr++]=gl,gl=c;var M=Ao;c=So;var E=32-cn(M)-1;M&=~(1<<E),_+=1;var I=32-cn(f)+E;if(30<I){var W=E-E%5;I=(M&(1<<W)-1).toString(32),M>>=W,E-=W,Ao=1<<32-cn(f)+E|_<<E|M,So=I+c}else Ao=1<<I|_<<E|M,So=c}function Ty(c){c.return!==null&&(vl(c,1),nC(c,1,0))}function Ry(c){for(;c===tm;)tm=Vu[--Wu],Vu[Wu]=null,nm=Vu[--Wu],Vu[Wu]=null;for(;c===gl;)gl=Yr[--jr],Yr[jr]=null,So=Yr[--jr],Yr[jr]=null,Ao=Yr[--jr],Yr[jr]=null}var Sr=null,Mr=null,Sn=!1,qf=!1,As=null;function iC(c,f){var _=$r(5,null,null,0);_.elementType="DELETED",_.stateNode=f,_.return=c,f=c.deletions,f===null?(c.deletions=[_],c.flags|=16):f.push(_)}function rC(c,f){switch(c.tag){case 5:return f=ku(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,Sr=c,Mr=Ct(f),!0):!1;case 6:return f=ys(f,c.pendingProps),f!==null?(c.stateNode=f,Sr=c,Mr=null,!0):!1;case 13:if(f=pl(f),f!==null){var _=gl!==null?{id:Ao,overflow:So}:null;return c.memoizedState={dehydrated:f,treeContext:_,retryLane:1073741824},_=$r(18,null,null,0),_.stateNode=f,_.return=c,c.child=_,Sr=c,Mr=null,!0}return!1;default:return!1}}function by(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Py(c){if(Sn){var f=Mr;if(f){var _=f;if(!rC(c,f)){if(by(c))throw Error(o(418));f=nr(_);var M=Sr;f&&rC(c,f)?iC(M,_):(c.flags=c.flags&-4097|2,Sn=!1,Sr=c)}}else{if(by(c))throw Error(o(418));c.flags=c.flags&-4097|2,Sn=!1,Sr=c}}}function sC(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Sr=c}function $f(c){if(!Te||c!==Sr)return!1;if(!Sn)return sC(c),Sn=!0,!1;if(c.tag!==3&&(c.tag!==5||le(c.type)&&!ve(c.type,c.memoizedProps))){var f=Mr;if(f){if(by(c)){for(c=Mr;c;)c=nr(c);throw Error(o(418))}for(;f;)iC(c,f),f=nr(f)}}if(sC(c),c.tag===13){if(!Te)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Mr=B(c)}else Mr=Sr?nr(c.stateNode):null;return!0}function Xu(){Te&&(Mr=Sr=null,qf=Sn=!1)}function Iy(c){As===null?As=[c]:As.push(c)}function eh(c,f,_){if(c=_.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var M=_.stateNode}if(!M)throw Error(o(147,c));var E=M,I=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===I?f.ref:(f=function(W){var ne=E.refs;ne===qE&&(ne=E.refs={}),W===null?delete ne[I]:ne[I]=W},f._stringRef=I,f)}if(typeof c!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,c))}return c}function im(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function oC(c){var f=c._init;return f(c._payload)}function aC(c){function f(fe,re){if(c){var ge=fe.deletions;ge===null?(fe.deletions=[re],fe.flags|=16):ge.push(re)}}function _(fe,re){if(!c)return null;for(;re!==null;)f(fe,re),re=re.sibling;return null}function M(fe,re){for(fe=new Map;re!==null;)re.key!==null?fe.set(re.key,re):fe.set(re.index,re),re=re.sibling;return fe}function E(fe,re){return fe=ca(fe,re),fe.index=0,fe.sibling=null,fe}function I(fe,re,ge){return fe.index=ge,c?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<re?(fe.flags|=2,re):ge):(fe.flags|=2,re)):(fe.flags|=1048576,re)}function W(fe){return c&&fe.alternate===null&&(fe.flags|=2),fe}function ne(fe,re,ge,qe){return re===null||re.tag!==6?(re=p1(ge,fe.mode,qe),re.return=fe,re):(re=E(re,ge),re.return=fe,re)}function _e(fe,re,ge,qe){var ct=ge.type;return ct===h?it(fe,re,ge.props.children,qe,ge.key):re!==null&&(re.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===S&&oC(ct)===re.type)?(qe=E(re,ge.props),qe.ref=eh(fe,re,ge),qe.return=fe,qe):(qe=Lm(ge.type,ge.key,ge.props,null,fe.mode,qe),qe.ref=eh(fe,re,ge),qe.return=fe,qe)}function Ne(fe,re,ge,qe){return re===null||re.tag!==4||re.stateNode.containerInfo!==ge.containerInfo||re.stateNode.implementation!==ge.implementation?(re=m1(ge,fe.mode,qe),re.return=fe,re):(re=E(re,ge.children||[]),re.return=fe,re)}function it(fe,re,ge,qe,ct){return re===null||re.tag!==7?(re=wl(ge,fe.mode,qe,ct),re.return=fe,re):(re=E(re,ge),re.return=fe,re)}function Mt(fe,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return re=p1(""+re,fe.mode,ge),re.return=fe,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case l:return ge=Lm(re.type,re.key,re.props,null,fe.mode,ge),ge.ref=eh(fe,null,re),ge.return=fe,ge;case u:return re=m1(re,fe.mode,ge),re.return=fe,re;case S:var qe=re._init;return Mt(fe,qe(re._payload),ge)}if(te(re)||T(re))return re=wl(re,fe.mode,ge,null),re.return=fe,re;im(fe,re)}return null}function vt(fe,re,ge,qe){var ct=re!==null?re.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ct!==null?null:ne(fe,re,""+ge,qe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===ct?_e(fe,re,ge,qe):null;case u:return ge.key===ct?Ne(fe,re,ge,qe):null;case S:return ct=ge._init,vt(fe,re,ct(ge._payload),qe)}if(te(ge)||T(ge))return ct!==null?null:it(fe,re,ge,qe,null);im(fe,ge)}return null}function ln(fe,re,ge,qe,ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return fe=fe.get(ge)||null,ne(re,fe,""+qe,ct);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case l:return fe=fe.get(qe.key===null?ge:qe.key)||null,_e(re,fe,qe,ct);case u:return fe=fe.get(qe.key===null?ge:qe.key)||null,Ne(re,fe,qe,ct);case S:var It=qe._init;return ln(fe,re,ge,It(qe._payload),ct)}if(te(qe)||T(qe))return fe=fe.get(ge)||null,it(re,fe,qe,ct,null);im(re,qe)}return null}function ht(fe,re,ge,qe){for(var ct=null,It=null,wt=re,Zt=re=0,ui=null;wt!==null&&Zt<ge.length;Zt++){wt.index>Zt?(ui=wt,wt=null):ui=wt.sibling;var qt=vt(fe,wt,ge[Zt],qe);if(qt===null){wt===null&&(wt=ui);break}c&&wt&&qt.alternate===null&&f(fe,wt),re=I(qt,re,Zt),It===null?ct=qt:It.sibling=qt,It=qt,wt=ui}if(Zt===ge.length)return _(fe,wt),Sn&&vl(fe,Zt),ct;if(wt===null){for(;Zt<ge.length;Zt++)wt=Mt(fe,ge[Zt],qe),wt!==null&&(re=I(wt,re,Zt),It===null?ct=wt:It.sibling=wt,It=wt);return Sn&&vl(fe,Zt),ct}for(wt=M(fe,wt);Zt<ge.length;Zt++)ui=ln(wt,fe,Zt,ge[Zt],qe),ui!==null&&(c&&ui.alternate!==null&&wt.delete(ui.key===null?Zt:ui.key),re=I(ui,re,Zt),It===null?ct=ui:It.sibling=ui,It=ui);return c&&wt.forEach(function(fa){return f(fe,fa)}),Sn&&vl(fe,Zt),ct}function Ti(fe,re,ge,qe){var ct=T(ge);if(typeof ct!="function")throw Error(o(150));if(ge=ct.call(ge),ge==null)throw Error(o(151));for(var It=ct=null,wt=re,Zt=re=0,ui=null,qt=ge.next();wt!==null&&!qt.done;Zt++,qt=ge.next()){wt.index>Zt?(ui=wt,wt=null):ui=wt.sibling;var fa=vt(fe,wt,qt.value,qe);if(fa===null){wt===null&&(wt=ui);break}c&&wt&&fa.alternate===null&&f(fe,wt),re=I(fa,re,Zt),It===null?ct=fa:It.sibling=fa,It=fa,wt=ui}if(qt.done)return _(fe,wt),Sn&&vl(fe,Zt),ct;if(wt===null){for(;!qt.done;Zt++,qt=ge.next())qt=Mt(fe,qt.value,qe),qt!==null&&(re=I(qt,re,Zt),It===null?ct=qt:It.sibling=qt,It=qt);return Sn&&vl(fe,Zt),ct}for(wt=M(fe,wt);!qt.done;Zt++,qt=ge.next())qt=ln(wt,fe,Zt,qt.value,qe),qt!==null&&(c&&qt.alternate!==null&&wt.delete(qt.key===null?Zt:qt.key),re=I(qt,re,Zt),It===null?ct=qt:It.sibling=qt,It=qt);return c&&wt.forEach(function(SU){return f(fe,SU)}),Sn&&vl(fe,Zt),ct}function es(fe,re,ge,qe){if(typeof ge=="object"&&ge!==null&&ge.type===h&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var ct=ge.key,It=re;It!==null;){if(It.key===ct){if(ct=ge.type,ct===h){if(It.tag===7){_(fe,It.sibling),re=E(It,ge.props.children),re.return=fe,fe=re;break e}}else if(It.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===S&&oC(ct)===It.type){_(fe,It.sibling),re=E(It,ge.props),re.ref=eh(fe,It,ge),re.return=fe,fe=re;break e}_(fe,It);break}else f(fe,It);It=It.sibling}ge.type===h?(re=wl(ge.props.children,fe.mode,qe,ge.key),re.return=fe,fe=re):(qe=Lm(ge.type,ge.key,ge.props,null,fe.mode,qe),qe.ref=eh(fe,re,ge),qe.return=fe,fe=qe)}return W(fe);case u:e:{for(It=ge.key;re!==null;){if(re.key===It)if(re.tag===4&&re.stateNode.containerInfo===ge.containerInfo&&re.stateNode.implementation===ge.implementation){_(fe,re.sibling),re=E(re,ge.children||[]),re.return=fe,fe=re;break e}else{_(fe,re);break}else f(fe,re);re=re.sibling}re=m1(ge,fe.mode,qe),re.return=fe,fe=re}return W(fe);case S:return It=ge._init,es(fe,re,It(ge._payload),qe)}if(te(ge))return ht(fe,re,ge,qe);if(T(ge))return Ti(fe,re,ge,qe);im(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,re!==null&&re.tag===6?(_(fe,re.sibling),re=E(re,ge),re.return=fe,fe=re):(_(fe,re),re=p1(ge,fe.mode,qe),re.return=fe,fe=re),W(fe)):_(fe,re)}return es}var Ju=aC(!0),lC=aC(!1),th={},Qr=xt(th),nh=xt(th),Ku=xt(th);function js(c){if(c===th)throw Error(o(174));return c}function By(c,f){Be(Ku,f),Be(nh,c),Be(Qr,th),c=oe(f),Je(Qr),Be(Qr,c)}function Yu(){Je(Qr),Je(nh),Je(Ku)}function uC(c){var f=js(Ku.current),_=js(Qr.current);f=H(_,c.type,f),_!==f&&(Be(nh,c),Be(Qr,f))}function Dy(c){nh.current===c&&(Je(Qr),Je(nh))}var Tn=xt(0);function rm(c){for(var f=c;f!==null;){if(f.tag===13){var _=f.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Vs(_)||ia(_)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Ly=[];function Fy(){for(var c=0;c<Ly.length;c++){var f=Ly[c];$e?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Ly.length=0}var sm=a.ReactCurrentDispatcher,Zr=a.ReactCurrentBatchConfig,ju=0,Ln=null,wi=null,li=null,om=!1,ih=!1,rh=0,KN=0;function Ei(){throw Error(o(321))}function Ny(c,f){if(f===null)return!1;for(var _=0;_<f.length&&_<c.length;_++)if(!Js(c[_],f[_]))return!1;return!0}function Uy(c,f,_,M,E,I){if(ju=I,Ln=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,sm.current=c===null||c.memoizedState===null?ZN:qN,c=_(M,E),ih){I=0;do{if(ih=!1,rh=0,25<=I)throw Error(o(301));I+=1,li=wi=null,f.updateQueue=null,sm.current=$N,c=_(M,E)}while(ih)}if(sm.current=fm,f=wi!==null&&wi.next!==null,ju=0,li=wi=Ln=null,om=!1,f)throw Error(o(300));return c}function Oy(){var c=rh!==0;return rh=0,c}function Mo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?Ln.memoizedState=li=c:li=li.next=c,li}function Qs(){if(wi===null){var c=Ln.alternate;c=c!==null?c.memoizedState:null}else c=wi.next;var f=li===null?Ln.memoizedState:li.next;if(f!==null)li=f,wi=c;else{if(c===null)throw Error(o(310));wi=c,c={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},li===null?Ln.memoizedState=li=c:li=li.next=c}return li}function _l(c,f){return typeof f=="function"?f(c):f}function am(c){var f=Qs(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=c;var M=wi,E=M.baseQueue,I=_.pending;if(I!==null){if(E!==null){var W=E.next;E.next=I.next,I.next=W}M.baseQueue=E=I,_.pending=null}if(E!==null){I=E.next,M=M.baseState;var ne=W=null,_e=null,Ne=I;do{var it=Ne.lane;if((ju&it)===it)_e!==null&&(_e=_e.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),M=Ne.hasEagerState?Ne.eagerState:c(M,Ne.action);else{var Mt={lane:it,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};_e===null?(ne=_e=Mt,W=M):_e=_e.next=Mt,Ln.lanes|=it,Zu|=it}Ne=Ne.next}while(Ne!==null&&Ne!==I);_e===null?W=M:_e.next=ne,Js(M,f.memoizedState)||(wr=!0),f.memoizedState=M,f.baseState=W,f.baseQueue=_e,_.lastRenderedState=M}if(c=_.interleaved,c!==null){E=c;do I=E.lane,Ln.lanes|=I,Zu|=I,E=E.next;while(E!==c)}else E===null&&(_.lanes=0);return[f.memoizedState,_.dispatch]}function lm(c){var f=Qs(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=c;var M=_.dispatch,E=_.pending,I=f.memoizedState;if(E!==null){_.pending=null;var W=E=E.next;do I=c(I,W.action),W=W.next;while(W!==E);Js(I,f.memoizedState)||(wr=!0),f.memoizedState=I,f.baseQueue===null&&(f.baseState=I),_.lastRenderedState=I}return[I,M]}function cC(){}function fC(c,f){var _=Ln,M=Qs(),E=f(),I=!Js(M.memoizedState,E);if(I&&(M.memoizedState=E,wr=!0),M=M.queue,oh(pC.bind(null,_,M,c),[c]),M.getSnapshot!==f||I||li!==null&&li.memoizedState.tag&1){if(_.flags|=2048,sh(9,dC.bind(null,_,M,E,f),void 0,null),Kn===null)throw Error(o(349));ju&30||hC(_,f,E)}return E}function hC(c,f,_){c.flags|=16384,c={getSnapshot:f,value:_},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.stores=[c]):(_=f.stores,_===null?f.stores=[c]:_.push(c))}function dC(c,f,_,M){f.value=_,f.getSnapshot=M,mC(f)&&qr(c,1,-1)}function pC(c,f,_){return _(function(){mC(f)&&qr(c,1,-1)})}function mC(c){var f=c.getSnapshot;c=c.value;try{var _=f();return!Js(c,_)}catch{return!0}}function ky(c){var f=Mo();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_l,lastRenderedState:c},f.queue=c,c=c.dispatch=QN.bind(null,Ln,c),[f.memoizedState,c]}function sh(c,f,_,M){return c={tag:c,create:f,destroy:_,deps:M,next:null},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.lastEffect=c.next=c):(_=f.lastEffect,_===null?f.lastEffect=c.next=c:(M=_.next,_.next=c,c.next=M,f.lastEffect=c)),c}function gC(){return Qs().memoizedState}function um(c,f,_,M){var E=Mo();Ln.flags|=c,E.memoizedState=sh(1|f,_,void 0,M===void 0?null:M)}function cm(c,f,_,M){var E=Qs();M=M===void 0?null:M;var I=void 0;if(wi!==null){var W=wi.memoizedState;if(I=W.destroy,M!==null&&Ny(M,W.deps)){E.memoizedState=sh(f,_,I,M);return}}Ln.flags|=c,E.memoizedState=sh(1|f,_,I,M)}function zy(c,f){return um(8390656,8,c,f)}function oh(c,f){return cm(2048,8,c,f)}function vC(c,f){return cm(4,2,c,f)}function _C(c,f){return cm(4,4,c,f)}function yC(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function xC(c,f,_){return _=_!=null?_.concat([c]):null,cm(4,4,yC.bind(null,f,c),_)}function Hy(){}function AC(c,f){var _=Qs();f=f===void 0?null:f;var M=_.memoizedState;return M!==null&&f!==null&&Ny(f,M[1])?M[0]:(_.memoizedState=[c,f],c)}function SC(c,f){var _=Qs();f=f===void 0?null:f;var M=_.memoizedState;return M!==null&&f!==null&&Ny(f,M[1])?M[0]:(c=c(),_.memoizedState=[c,f],c)}function YN(c,f){var _=Qt;Qt=_!==0&&4>_?_:4,c(!0);var M=Zr.transition;Zr.transition={};try{c(!1),f()}finally{Qt=_,Zr.transition=M}}function MC(){return Qs().memoizedState}function jN(c,f,_){var M=la(c);_={lane:M,action:_,hasEagerState:!1,eagerState:null,next:null},wC(c)?EC(f,_):(CC(c,f,_),_=Xi(),c=qr(c,M,_),c!==null&&TC(c,f,M))}function QN(c,f,_){var M=la(c),E={lane:M,action:_,hasEagerState:!1,eagerState:null,next:null};if(wC(c))EC(f,E);else{CC(c,f,E);var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=f.lastRenderedReducer,I!==null))try{var W=f.lastRenderedState,ne=I(W,_);if(E.hasEagerState=!0,E.eagerState=ne,Js(ne,W))return}catch{}finally{}_=Xi(),c=qr(c,M,_),c!==null&&TC(c,f,M)}}function wC(c){var f=c.alternate;return c===Ln||f!==null&&f===Ln}function EC(c,f){ih=om=!0;var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}function CC(c,f,_){Kn!==null&&c.mode&1&&!(Ft&2)?(c=f.interleaved,c===null?(_.next=_,Ys===null?Ys=[f]:Ys.push(f)):(_.next=c.next,c.next=_),f.interleaved=_):(c=f.pending,c===null?_.next=_:(_.next=c.next,c.next=_),f.pending=_)}function TC(c,f,_){if(_&4194240){var M=f.lanes;M&=c.pendingLanes,_|=M,f.lanes=_,my(c,_)}}var fm={readContext:Kr,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},ZN={readContext:Kr,useCallback:function(c,f){return Mo().memoizedState=[c,f===void 0?null:f],c},useContext:Kr,useEffect:zy,useImperativeHandle:function(c,f,_){return _=_!=null?_.concat([c]):null,um(4194308,4,yC.bind(null,f,c),_)},useLayoutEffect:function(c,f){return um(4194308,4,c,f)},useInsertionEffect:function(c,f){return um(4,2,c,f)},useMemo:function(c,f){var _=Mo();return f=f===void 0?null:f,c=c(),_.memoizedState=[c,f],c},useReducer:function(c,f,_){var M=Mo();return f=_!==void 0?_(f):f,M.memoizedState=M.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},M.queue=c,c=c.dispatch=jN.bind(null,Ln,c),[M.memoizedState,c]},useRef:function(c){var f=Mo();return c={current:c},f.memoizedState=c},useState:ky,useDebugValue:Hy,useDeferredValue:function(c){var f=ky(c),_=f[0],M=f[1];return zy(function(){var E=Zr.transition;Zr.transition={};try{M(c)}finally{Zr.transition=E}},[c]),_},useTransition:function(){var c=ky(!1),f=c[0];return c=YN.bind(null,c[1]),Mo().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,_){var M=Ln,E=Mo();if(Sn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=f(),Kn===null)throw Error(o(349));ju&30||hC(M,f,_)}E.memoizedState=_;var I={value:_,getSnapshot:f};return E.queue=I,zy(pC.bind(null,M,I,c),[c]),M.flags|=2048,sh(9,dC.bind(null,M,I,_,f),void 0,null),_},useId:function(){var c=Mo(),f=Kn.identifierPrefix;if(Sn){var _=So,M=Ao;_=(M&~(1<<32-cn(M)-1)).toString(32)+_,f=":"+f+"R"+_,_=rh++,0<_&&(f+="H"+_.toString(32)),f+=":"}else _=KN++,f=":"+f+"r"+_.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},qN={readContext:Kr,useCallback:AC,useContext:Kr,useEffect:oh,useImperativeHandle:xC,useInsertionEffect:vC,useLayoutEffect:_C,useMemo:SC,useReducer:am,useRef:gC,useState:function(){return am(_l)},useDebugValue:Hy,useDeferredValue:function(c){var f=am(_l),_=f[0],M=f[1];return oh(function(){var E=Zr.transition;Zr.transition={};try{M(c)}finally{Zr.transition=E}},[c]),_},useTransition:function(){var c=am(_l)[0],f=Qs().memoizedState;return[c,f]},useMutableSource:cC,useSyncExternalStore:fC,useId:MC,unstable_isNewReconciler:!1},$N={readContext:Kr,useCallback:AC,useContext:Kr,useEffect:oh,useImperativeHandle:xC,useInsertionEffect:vC,useLayoutEffect:_C,useMemo:SC,useReducer:lm,useRef:gC,useState:function(){return lm(_l)},useDebugValue:Hy,useDeferredValue:function(c){var f=lm(_l),_=f[0],M=f[1];return oh(function(){var E=Zr.transition;Zr.transition={};try{M(c)}finally{Zr.transition=E}},[c]),_},useTransition:function(){var c=lm(_l)[0],f=Qs().memoizedState;return[c,f]},useMutableSource:cC,useSyncExternalStore:fC,useId:MC,unstable_isNewReconciler:!1};function Gy(c,f){try{var _="",M=f;do _+=JN(M),M=M.return;while(M);var E=_}catch(I){E=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:f,stack:E}}function Vy(c,f){try{console.error(f.value)}catch(_){setTimeout(function(){throw _})}}var eU=typeof WeakMap=="function"?WeakMap:Map;function RC(c,f,_){_=xo(-1,_),_.tag=3,_.payload={element:null};var M=f.value;return _.callback=function(){Tm||(Tm=!0,a1=M),Vy(c,f)},_}function bC(c,f,_){_=xo(-1,_),_.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var E=f.value;_.payload=function(){return M(E)},_.callback=function(){Vy(c,f)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(_.callback=function(){Vy(c,f),typeof M!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var W=f.stack;this.componentDidCatch(f.value,{componentStack:W!==null?W:""})}),_}function PC(c,f,_){var M=c.pingCache;if(M===null){M=c.pingCache=new eU;var E=new Set;M.set(f,E)}else E=M.get(f),E===void 0&&(E=new Set,M.set(f,E));E.has(_)||(E.add(_),c=pU.bind(null,c,f,_),f.then(c,c))}function IC(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function BC(c,f,_,M,E){return c.mode&1?(c.flags|=65536,c.lanes=E,c):(c===f?c.flags|=65536:(c.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(f=xo(-1,1),f.tag=2,sa(_,f))),_.lanes|=1),c)}function Zs(c){c.flags|=4}function DC(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var ah,lh,hm,dm;if(Ve)ah=function(c,f){for(var _=f.child;_!==null;){if(_.tag===5||_.tag===6)me(c,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},lh=function(){},hm=function(c,f,_,M,E){if(c=c.memoizedProps,c!==M){var I=f.stateNode,W=js(Qr.current);_=ae(I,_,c,M,E,W),(f.updateQueue=_)&&Zs(f)}},dm=function(c,f,_,M){_!==M&&Zs(f)};else if(k){ah=function(c,f,_,M){for(var E=f.child;E!==null;){if(E.tag===5){var I=E.stateNode;_&&M&&(I=tr(I,E.type,E.memoizedProps,E)),me(c,I)}else if(E.tag===6)I=E.stateNode,_&&M&&(I=Gi(I,E.memoizedProps,E)),me(c,I);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)I=E.child,I!==null&&(I.return=E),ah(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var LC=function(c,f,_,M){for(var E=f.child;E!==null;){if(E.tag===5){var I=E.stateNode;_&&M&&(I=tr(I,E.type,E.memoizedProps,E)),mn(c,I)}else if(E.tag===6)I=E.stateNode,_&&M&&(I=Gi(I,E.memoizedProps,E)),mn(c,I);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)I=E.child,I!==null&&(I.return=E),LC(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};lh=function(c,f){var _=f.stateNode;if(!DC(c,f)){c=_.containerInfo;var M=Ut(c);LC(M,f,!1,!1),_.pendingChildren=M,Zs(f),kn(c,M)}},hm=function(c,f,_,M,E){var I=c.stateNode,W=c.memoizedProps;if((c=DC(c,f))&&W===M)f.stateNode=I;else{var ne=f.stateNode,_e=js(Qr.current),Ne=null;W!==M&&(Ne=ae(ne,_,W,M,E,_e)),c&&Ne===null?f.stateNode=I:(I=_t(I,Ne,_,W,M,f,c,ne),Ie(I,_,M,E,_e)&&Zs(f),f.stateNode=I,c?Zs(f):ah(I,f,!1,!1))}},dm=function(c,f,_,M){_!==M?(c=js(Ku.current),_=js(Qr.current),f.stateNode=ye(M,c,_,f),Zs(f)):f.stateNode=c.stateNode}}else lh=function(){},hm=function(){},dm=function(){};function uh(c,f){if(!Sn)switch(c.tailMode){case"hidden":f=c.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?c.tail=null:_.sibling=null;break;case"collapsed":_=c.tail;for(var M=null;_!==null;)_.alternate!==null&&(M=_),_=_.sibling;M===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function Ci(c){var f=c.alternate!==null&&c.alternate.child===c.child,_=0,M=0;if(f)for(var E=c.child;E!==null;)_|=E.lanes|E.childLanes,M|=E.subtreeFlags&14680064,M|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)_|=E.lanes|E.childLanes,M|=E.subtreeFlags,M|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=M,c.childLanes=_,f}function tU(c,f,_){var M=f.pendingProps;switch(Ry(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(f),null;case 1:return An(f.type)&&Ot(),Ci(f),null;case 3:return M=f.stateNode,Yu(),Je(gt),Je(ut),Fy(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&($f(f)?Zs(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,As!==null&&(c1(As),As=null))),lh(c,f),Ci(f),null;case 5:Dy(f),_=js(Ku.current);var E=f.type;if(c!==null&&f.stateNode!=null)hm(c,f,E,M,_),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(o(166));return Ci(f),null}if(c=js(Qr.current),$f(f)){if(!Te)throw Error(o(175));c=L(f.stateNode,f.type,f.memoizedProps,_,c,f,!qf),f.updateQueue=c,c!==null&&Zs(f)}else{var I=ue(E,M,_,c,f);ah(I,f,!1,!1),f.stateNode=I,Ie(I,E,M,_,c)&&Zs(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Ci(f),null;case 6:if(c&&f.stateNode!=null)dm(c,f,c.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(o(166));if(c=js(Ku.current),_=js(Qr.current),$f(f)){if(!Te)throw Error(o(176));if(c=f.stateNode,M=f.memoizedProps,(_=U(c,M,f,!qf))&&(E=Sr,E!==null))switch(I=(E.mode&1)!==0,E.tag){case 3:ce(E.stateNode.containerInfo,c,M,I);break;case 5:pe(E.type,E.memoizedProps,E.stateNode,c,M,I)}_&&Zs(f)}else f.stateNode=ye(M,c,_,f)}return Ci(f),null;case 13:if(Je(Tn),M=f.memoizedState,Sn&&Mr!==null&&f.mode&1&&!(f.flags&128)){for(c=Mr;c;)c=nr(c);return Xu(),f.flags|=98560,f}if(M!==null&&M.dehydrated!==null){if(M=$f(f),c===null){if(!M)throw Error(o(318));if(!Te)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));j(c,f)}else Xu(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Ci(f),null}return As!==null&&(c1(As),As=null),f.flags&128?(f.lanes=_,f):(M=M!==null,_=!1,c===null?$f(f):_=c.memoizedState!==null,M&&!_&&(f.child.flags|=8192,f.mode&1&&(c===null||Tn.current&1?ei===0&&(ei=3):h1())),f.updateQueue!==null&&(f.flags|=4),Ci(f),null);case 4:return Yu(),lh(c,f),c===null&&Oe(f.stateNode.containerInfo),Ci(f),null;case 10:return Sy(f.type._context),Ci(f),null;case 17:return An(f.type)&&Ot(),Ci(f),null;case 19:if(Je(Tn),E=f.memoizedState,E===null)return Ci(f),null;if(M=(f.flags&128)!==0,I=E.rendering,I===null)if(M)uh(E,!1);else{if(ei!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(I=rm(c),I!==null){for(f.flags|=128,uh(E,!1),c=I.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=_,M=f.child;M!==null;)_=M,E=c,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=E,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,E=I.dependencies,_.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),M=M.sibling;return Be(Tn,Tn.current&1|2),f.child}c=c.sibling}E.tail!==null&&ai()>o1&&(f.flags|=128,M=!0,uh(E,!1),f.lanes=4194304)}else{if(!M)if(c=rm(I),c!==null){if(f.flags|=128,M=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),uh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!Sn)return Ci(f),null}else 2*ai()-E.renderingStartTime>o1&&_!==1073741824&&(f.flags|=128,M=!0,uh(E,!1),f.lanes=4194304);E.isBackwards?(I.sibling=f.child,f.child=I):(c=E.last,c!==null?c.sibling=I:f.child=I,E.last=I)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=ai(),f.sibling=null,c=Tn.current,Be(Tn,M?c&1|2:c&1),f):(Ci(f),null);case 22:case 23:return f1(),M=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(f.flags|=8192),M&&f.mode&1?Er&1073741824&&(Ci(f),Ve&&f.subtreeFlags&6&&(f.flags|=8192)):Ci(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var nU=a.ReactCurrentOwner,wr=!1;function Wi(c,f,_,M){f.child=c===null?lC(f,null,_,M):Ju(f,c.child,_,M)}function FC(c,f,_,M,E){_=_.render;var I=f.ref;return Gu(f,E),M=Uy(c,f,_,M,I,E),_=Oy(),c!==null&&!wr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~E,wo(c,f,E)):(Sn&&_&&Ty(f),f.flags|=1,Wi(c,f,M,E),f.child)}function NC(c,f,_,M,E){if(c===null){var I=_.type;return typeof I=="function"&&!d1(I)&&I.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(f.tag=15,f.type=I,UC(c,f,I,M,E)):(c=Lm(_.type,null,M,f,f.mode,E),c.ref=f.ref,c.return=f,f.child=c)}if(I=c.child,!(c.lanes&E)){var W=I.memoizedProps;if(_=_.compare,_=_!==null?_:jp,_(W,M)&&c.ref===f.ref)return wo(c,f,E)}return f.flags|=1,c=ca(I,M),c.ref=f.ref,c.return=f,f.child=c}function UC(c,f,_,M,E){if(c!==null&&jp(c.memoizedProps,M)&&c.ref===f.ref)if(wr=!1,(c.lanes&E)!==0)c.flags&131072&&(wr=!0);else return f.lanes=c.lanes,wo(c,f,E);return Wy(c,f,_,M,E)}function OC(c,f,_){var M=f.pendingProps,E=M.children,I=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Be(Qu,Er),Er|=_;else if(_&1073741824)f.memoizedState={baseLanes:0,cachePool:null},M=I!==null?I.baseLanes:_,Be(Qu,Er),Er|=M;else return c=I!==null?I.baseLanes|_:_,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,Be(Qu,Er),Er|=c,null;else I!==null?(M=I.baseLanes|_,f.memoizedState=null):M=_,Be(Qu,Er),Er|=M;return Wi(c,f,E,_),f.child}function kC(c,f){var _=f.ref;(c===null&&_!==null||c!==null&&c.ref!==_)&&(f.flags|=512,f.flags|=2097152)}function Wy(c,f,_,M,E){var I=An(_)?Kt:ut.current;return I=nn(f,I),Gu(f,E),_=Uy(c,f,_,M,I,E),M=Oy(),c!==null&&!wr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~E,wo(c,f,E)):(Sn&&M&&Ty(f),f.flags|=1,Wi(c,f,_,E),f.child)}function zC(c,f,_,M,E){if(An(_)){var I=!0;Tt(f)}else I=!1;if(Gu(f,E),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),eC(f,_,M),Cy(f,_,M,E),M=!0;else if(c===null){var W=f.stateNode,ne=f.memoizedProps;W.props=ne;var _e=W.context,Ne=_.contextType;typeof Ne=="object"&&Ne!==null?Ne=Kr(Ne):(Ne=An(_)?Kt:ut.current,Ne=nn(f,Ne));var it=_.getDerivedStateFromProps,Mt=typeof it=="function"||typeof W.getSnapshotBeforeUpdate=="function";Mt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ne!==M||_e!==Ne)&&tC(f,W,M,Ne),ra=!1;var vt=f.memoizedState;W.state=vt,$p(f,M,W,E),_e=f.memoizedState,ne!==M||vt!==_e||gt.current||ra?(typeof it=="function"&&(Ey(f,_,it,M),_e=f.memoizedState),(ne=ra||$E(f,_,ne,M,vt,_e,Ne))?(Mt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(f.flags|=4194308)):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=_e),W.props=M,W.state=_e,W.context=Ne,M=ne):(typeof W.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{W=f.stateNode,jE(c,f),ne=f.memoizedProps,Ne=f.type===f.elementType?ne:xs(f.type,ne),W.props=Ne,Mt=f.pendingProps,vt=W.context,_e=_.contextType,typeof _e=="object"&&_e!==null?_e=Kr(_e):(_e=An(_)?Kt:ut.current,_e=nn(f,_e));var ln=_.getDerivedStateFromProps;(it=typeof ln=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ne!==Mt||vt!==_e)&&tC(f,W,M,_e),ra=!1,vt=f.memoizedState,W.state=vt,$p(f,M,W,E);var ht=f.memoizedState;ne!==Mt||vt!==ht||gt.current||ra?(typeof ln=="function"&&(Ey(f,_,ln,M),ht=f.memoizedState),(Ne=ra||$E(f,_,Ne,M,vt,ht,_e)||!1)?(it||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(M,ht,_e),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(M,ht,_e)),typeof W.componentDidUpdate=="function"&&(f.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof W.componentDidUpdate!="function"||ne===c.memoizedProps&&vt===c.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&vt===c.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=ht),W.props=M,W.state=ht,W.context=_e,M=Ne):(typeof W.componentDidUpdate!="function"||ne===c.memoizedProps&&vt===c.memoizedState||(f.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ne===c.memoizedProps&&vt===c.memoizedState||(f.flags|=1024),M=!1)}return Xy(c,f,_,M,I,E)}function Xy(c,f,_,M,E,I){kC(c,f);var W=(f.flags&128)!==0;if(!M&&!W)return E&&Ht(f,_,!1),wo(c,f,I);M=f.stateNode,nU.current=f;var ne=W&&typeof _.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,c!==null&&W?(f.child=Ju(f,c.child,null,I),f.child=Ju(f,null,ne,I)):Wi(c,f,ne,I),f.memoizedState=M.state,E&&Ht(f,_,!0),f.child}function HC(c){var f=c.stateNode;f.pendingContext?Lt(c,f.pendingContext,f.pendingContext!==f.context):f.context&&Lt(c,f.context,!1),By(c,f.containerInfo)}function GC(c,f,_,M,E){return Xu(),Iy(E),f.flags|=256,Wi(c,f,_,M),f.child}var pm={dehydrated:null,treeContext:null,retryLane:0};function mm(c){return{baseLanes:c,cachePool:null}}function VC(c,f,_){var M=f.pendingProps,E=Tn.current,I=!1,W=(f.flags&128)!==0,ne;if((ne=W)||(ne=c!==null&&c.memoizedState===null?!1:(E&2)!==0),ne?(I=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),Be(Tn,E&1),c===null)return Py(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?ia(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(E=M.children,c=M.fallback,I?(M=f.mode,I=f.child,E={mode:"hidden",children:E},!(M&1)&&I!==null?(I.childLanes=0,I.pendingProps=E):I=Fm(E,M,0,null),c=wl(c,M,_,null),I.return=f,c.return=f,I.sibling=c,f.child=I,f.child.memoizedState=mm(_),f.memoizedState=pm,c):Jy(f,E));if(E=c.memoizedState,E!==null){if(ne=E.dehydrated,ne!==null){if(W)return f.flags&256?(f.flags&=-257,gm(c,f,_,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(I=M.fallback,E=f.mode,M=Fm({mode:"visible",children:M.children},E,0,null),I=wl(I,E,_,null),I.flags|=2,M.return=f,I.return=f,M.sibling=I,f.child=M,f.mode&1&&Ju(f,c.child,null,_),f.child.memoizedState=mm(_),f.memoizedState=pm,I);if(!(f.mode&1))f=gm(c,f,_,null);else if(ia(ne))f=gm(c,f,_,Error(o(419)));else if(M=(_&c.childLanes)!==0,wr||M){if(M=Kn,M!==null){switch(_&-_){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}M=I&(M.suspendedLanes|_)?0:I,M!==0&&M!==E.retryLane&&(E.retryLane=M,qr(c,M,-1))}h1(),f=gm(c,f,_,Error(o(421)))}else Vs(ne)?(f.flags|=128,f.child=c.child,f=mU.bind(null,c),Xr(ne,f),f=null):(_=E.treeContext,Te&&(Mr=zu(ne),Sr=f,Sn=!0,As=null,qf=!1,_!==null&&(Yr[jr++]=Ao,Yr[jr++]=So,Yr[jr++]=gl,Ao=_.id,So=_.overflow,gl=f)),f=Jy(f,f.pendingProps.children),f.flags|=4096);return f}return I?(M=XC(c,f,M.children,M.fallback,_),I=f.child,E=c.child.memoizedState,I.memoizedState=E===null?mm(_):{baseLanes:E.baseLanes|_,cachePool:null},I.childLanes=c.childLanes&~_,f.memoizedState=pm,M):(_=WC(c,f,M.children,_),f.memoizedState=null,_)}return I?(M=XC(c,f,M.children,M.fallback,_),I=f.child,E=c.child.memoizedState,I.memoizedState=E===null?mm(_):{baseLanes:E.baseLanes|_,cachePool:null},I.childLanes=c.childLanes&~_,f.memoizedState=pm,M):(_=WC(c,f,M.children,_),f.memoizedState=null,_)}function Jy(c,f){return f=Fm({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function WC(c,f,_,M){var E=c.child;return c=E.sibling,_=ca(E,{mode:"visible",children:_}),!(f.mode&1)&&(_.lanes=M),_.return=f,_.sibling=null,c!==null&&(M=f.deletions,M===null?(f.deletions=[c],f.flags|=16):M.push(c)),f.child=_}function XC(c,f,_,M,E){var I=f.mode;c=c.child;var W=c.sibling,ne={mode:"hidden",children:_};return!(I&1)&&f.child!==c?(_=f.child,_.childLanes=0,_.pendingProps=ne,f.deletions=null):(_=ca(c,ne),_.subtreeFlags=c.subtreeFlags&14680064),W!==null?M=ca(W,M):(M=wl(M,I,E,null),M.flags|=2),M.return=f,_.return=f,_.sibling=M,f.child=_,M}function gm(c,f,_,M){return M!==null&&Iy(M),Ju(f,c.child,null,_),c=Jy(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function JC(c,f,_){c.lanes|=f;var M=c.alternate;M!==null&&(M.lanes|=f),My(c.return,f,_)}function Ky(c,f,_,M,E){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:_,tailMode:E}:(I.isBackwards=f,I.rendering=null,I.renderingStartTime=0,I.last=M,I.tail=_,I.tailMode=E)}function KC(c,f,_){var M=f.pendingProps,E=M.revealOrder,I=M.tail;if(Wi(c,f,M.children,_),M=Tn.current,M&2)M=M&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&JC(c,_,f);else if(c.tag===19)JC(c,_,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(Be(Tn,M),!(f.mode&1))f.memoizedState=null;else switch(E){case"forwards":for(_=f.child,E=null;_!==null;)c=_.alternate,c!==null&&rm(c)===null&&(E=_),_=_.sibling;_=E,_===null?(E=f.child,f.child=null):(E=_.sibling,_.sibling=null),Ky(f,!1,E,_,I);break;case"backwards":for(_=null,E=f.child,f.child=null;E!==null;){if(c=E.alternate,c!==null&&rm(c)===null){f.child=E;break}c=E.sibling,E.sibling=_,_=E,E=c}Ky(f,!0,_,null,I);break;case"together":Ky(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function wo(c,f,_){if(c!==null&&(f.dependencies=c.dependencies),Zu|=f.lanes,!(_&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,_=ca(c,c.pendingProps),f.child=_,_.return=f;c.sibling!==null;)c=c.sibling,_=_.sibling=ca(c,c.pendingProps),_.return=f;_.sibling=null}return f.child}function iU(c,f,_){switch(f.tag){case 3:HC(f),Xu();break;case 5:uC(f);break;case 1:An(f.type)&&Tt(f);break;case 4:By(f,f.stateNode.containerInfo);break;case 10:YE(f,f.type._context,f.memoizedProps.value);break;case 13:var M=f.memoizedState;if(M!==null)return M.dehydrated!==null?(Be(Tn,Tn.current&1),f.flags|=128,null):_&f.child.childLanes?VC(c,f,_):(Be(Tn,Tn.current&1),c=wo(c,f,_),c!==null?c.sibling:null);Be(Tn,Tn.current&1);break;case 19:if(M=(_&f.childLanes)!==0,c.flags&128){if(M)return KC(c,f,_);f.flags|=128}var E=f.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Be(Tn,Tn.current),M)break;return null;case 22:case 23:return f.lanes=0,OC(c,f,_)}return wo(c,f,_)}function rU(c,f){switch(Ry(f),f.tag){case 1:return An(f.type)&&Ot(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Yu(),Je(gt),Je(ut),Fy(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return Dy(f),null;case 13:if(Je(Tn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Xu()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Je(Tn),null;case 4:return Yu(),null;case 10:return Sy(f.type._context),null;case 22:case 23:return f1(),null;case 24:return null;default:return null}}var vm=!1,yl=!1,sU=typeof WeakSet=="function"?WeakSet:Set,je=null;function _m(c,f){var _=c.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(M){sr(c,f,M)}else _.current=null}function Yy(c,f,_){try{_()}catch(M){sr(c,f,M)}}var YC=!1;function oU(c,f){for(ee(c.containerInfo),je=f;je!==null;)if(c=je,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,je=f;else for(;je!==null;){c=je;try{var _=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var M=_.memoizedProps,E=_.memoizedState,I=c.stateNode,W=I.getSnapshotBeforeUpdate(c.elementType===c.type?M:xs(c.type,M),E);I.__reactInternalSnapshotBeforeUpdate=W}break;case 3:Ve&&ke(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ne){sr(c,c.return,ne)}if(f=c.sibling,f!==null){f.return=c.return,je=f;break}je=c.return}return _=YC,YC=!1,_}function xl(c,f,_){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var E=M=M.next;do{if((E.tag&c)===c){var I=E.destroy;E.destroy=void 0,I!==void 0&&Yy(f,_,I)}E=E.next}while(E!==M)}}function ch(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var _=f=f.next;do{if((_.tag&c)===c){var M=_.create;_.destroy=M()}_=_.next}while(_!==f)}}function jy(c){var f=c.ref;if(f!==null){var _=c.stateNode;switch(c.tag){case 5:c=Z(_);break;default:c=_}typeof f=="function"?f(c):f.current=c}}function jC(c,f,_){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(Kp,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var E=M,I=E.destroy;E=E.tag,I!==void 0&&(E&2||E&4)&&Yy(f,_,I),M=M.next}while(M!==c)}break;case 1:if(_m(f,_),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(W){sr(f,_,W)}break;case 5:_m(f,_);break;case 4:Ve?tT(c,f,_):k&&k&&(f=f.stateNode.containerInfo,_=Ut(f),Vt(f,_))}}function QC(c,f,_){for(var M=f;;)if(jC(c,M,_),M.child===null||Ve&&M.tag===4){if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function ZC(c){var f=c.alternate;f!==null&&(c.alternate=null,ZC(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&rt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function qC(c){return c.tag===5||c.tag===3||c.tag===4}function $C(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||qC(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function eT(c){if(Ve){e:{for(var f=c.return;f!==null;){if(qC(f))break e;f=f.return}throw Error(o(160))}var _=f;switch(_.tag){case 5:f=_.stateNode,_.flags&32&&(Dt(f),_.flags&=-33),_=$C(c),Zy(c,_,f);break;case 3:case 4:f=_.stateNode.containerInfo,_=$C(c),Qy(c,_,f);break;default:throw Error(o(161))}}}function Qy(c,f,_){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?Ge(_,c,f):yt(_,c);else if(M!==4&&(c=c.child,c!==null))for(Qy(c,f,_),c=c.sibling;c!==null;)Qy(c,f,_),c=c.sibling}function Zy(c,f,_){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?pt(_,c,f):et(_,c);else if(M!==4&&(c=c.child,c!==null))for(Zy(c,f,_),c=c.sibling;c!==null;)Zy(c,f,_),c=c.sibling}function tT(c,f,_){for(var M=f,E=!1,I,W;;){if(!E){E=M.return;e:for(;;){if(E===null)throw Error(o(160));switch(I=E.stateNode,E.tag){case 5:W=!1;break e;case 3:I=I.containerInfo,W=!0;break e;case 4:I=I.containerInfo,W=!0;break e}E=E.return}E=!0}if(M.tag===5||M.tag===6)QC(c,M,_),W?St(I,M.stateNode):At(I,M.stateNode);else if(M.tag===18)W?V(I,M.stateNode):Y(I,M.stateNode);else if(M.tag===4){if(M.child!==null){I=M.stateNode.containerInfo,W=!0,M.child.return=M,M=M.child;continue}}else if(jC(c,M,_),M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return,M.tag===4&&(E=!1)}M.sibling.return=M.return,M=M.sibling}}function qy(c,f){if(Ve){switch(f.tag){case 0:case 11:case 14:case 15:xl(3,f,f.return),ch(3,f),xl(5,f,f.return);return;case 1:return;case 5:var _=f.stateNode;if(_!=null){var M=f.memoizedProps;c=c!==null?c.memoizedProps:M;var E=f.type,I=f.updateQueue;f.updateQueue=null,I!==null&&Nt(_,I,E,c,M,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));_=f.memoizedProps,Le(f.stateNode,c!==null?c.memoizedProps:_,_);return;case 3:Te&&c!==null&&c.memoizedState.isDehydrated&&O(f.stateNode.containerInfo);return;case 12:return;case 13:ym(f);return;case 19:ym(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:xl(3,f,f.return),ch(3,f),xl(5,f,f.return);return;case 12:return;case 13:ym(f);return;case 19:ym(f);return;case 3:Te&&c!==null&&c.memoizedState.isDehydrated&&O(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(k){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Vt(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function ym(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var _=c.stateNode;_===null&&(_=c.stateNode=new sU),f.forEach(function(M){var E=gU.bind(null,c,M);_.has(M)||(_.add(M),M.then(E,E))})}}function aU(c,f){for(je=f;je!==null;){f=je;var _=f.deletions;if(_!==null)for(var M=0;M<_.length;M++){var E=_[M];try{var I=c;Ve?tT(I,E,f):QC(I,E,f);var W=E.alternate;W!==null&&(W.return=null),E.return=null}catch(ct){sr(E,f,ct)}}if(_=f.child,f.subtreeFlags&12854&&_!==null)_.return=f,je=_;else for(;je!==null;){f=je;try{var ne=f.flags;if(ne&32&&Ve&&Dt(f.stateNode),ne&512){var _e=f.alternate;if(_e!==null){var Ne=_e.ref;Ne!==null&&(typeof Ne=="function"?Ne(null):Ne.current=null)}}if(ne&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var it=f.alternate;(it===null||it.memoizedState===null)&&(s1=ai())}break;case 22:var Mt=f.memoizedState!==null,vt=f.alternate,ln=vt!==null&&vt.memoizedState!==null;if(_=f,Ve){e:if(M=_,E=Mt,I=null,Ve)for(var ht=M;;){if(ht.tag===5){if(I===null){I=ht;var Ti=ht.stateNode;E?$(Ti):ie(ht.stateNode,ht.memoizedProps)}}else if(ht.tag===6){if(I===null){var es=ht.stateNode;E?Fe(es):Me(es,ht.memoizedProps)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===M)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===M)break;for(;ht.sibling===null;){if(ht.return===null||ht.return===M)break e;I===ht&&(I=null),ht=ht.return}I===ht&&(I=null),ht.sibling.return=ht.return,ht=ht.sibling}}if(Mt&&!ln&&_.mode&1){je=_;for(var fe=_.child;fe!==null;){for(_=je=fe;je!==null;){M=je;var re=M.child;switch(M.tag){case 0:case 11:case 14:case 15:xl(4,M,M.return);break;case 1:_m(M,M.return);var ge=M.stateNode;if(typeof ge.componentWillUnmount=="function"){var qe=M.return;try{ge.props=M.memoizedProps,ge.state=M.memoizedState,ge.componentWillUnmount()}catch(ct){sr(M,qe,ct)}}break;case 5:_m(M,M.return);break;case 22:if(M.memoizedState!==null){rT(_);continue}}re!==null?(re.return=M,je=re):rT(_)}fe=fe.sibling}}}switch(ne&4102){case 2:eT(f),f.flags&=-3;break;case 6:eT(f),f.flags&=-3,qy(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,qy(f.alternate,f);break;case 4:qy(f.alternate,f)}}catch(ct){sr(f,f.return,ct)}if(_=f.sibling,_!==null){_.return=f.return,je=_;break}je=f.return}}}function lU(c,f,_){je=c,nT(c)}function nT(c,f,_){for(var M=(c.mode&1)!==0;je!==null;){var E=je,I=E.child;if(E.tag===22&&M){var W=E.memoizedState!==null||vm;if(!W){var ne=E.alternate,_e=ne!==null&&ne.memoizedState!==null||yl;ne=vm;var Ne=yl;if(vm=W,(yl=_e)&&!Ne)for(je=E;je!==null;)W=je,_e=W.child,W.tag===22&&W.memoizedState!==null?sT(E):_e!==null?(_e.return=W,je=_e):sT(E);for(;I!==null;)je=I,nT(I),I=I.sibling;je=E,vm=ne,yl=Ne}iT(c)}else E.subtreeFlags&8772&&I!==null?(I.return=E,je=I):iT(c)}}function iT(c){for(;je!==null;){var f=je;if(f.flags&8772){var _=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:yl||ch(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!yl)if(_===null)M.componentDidMount();else{var E=f.elementType===f.type?_.memoizedProps:xs(f.type,_.memoizedProps);M.componentDidUpdate(E,_.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var I=f.updateQueue;I!==null&&ZE(f,I,M);break;case 3:var W=f.updateQueue;if(W!==null){if(_=null,f.child!==null)switch(f.child.tag){case 5:_=Z(f.child.stateNode);break;case 1:_=f.child.stateNode}ZE(f,W,_)}break;case 5:var ne=f.stateNode;_===null&&f.flags&4&&Ze(ne,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Te&&f.memoizedState===null){var _e=f.alternate;if(_e!==null){var Ne=_e.memoizedState;if(Ne!==null){var it=Ne.dehydrated;it!==null&&G(it)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}yl||f.flags&512&&jy(f)}catch(Mt){sr(f,f.return,Mt)}}if(f===c){je=null;break}if(_=f.sibling,_!==null){_.return=f.return,je=_;break}je=f.return}}function rT(c){for(;je!==null;){var f=je;if(f===c){je=null;break}var _=f.sibling;if(_!==null){_.return=f.return,je=_;break}je=f.return}}function sT(c){for(;je!==null;){var f=je;try{switch(f.tag){case 0:case 11:case 15:var _=f.return;try{ch(4,f)}catch(_e){sr(f,_,_e)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var E=f.return;try{M.componentDidMount()}catch(_e){sr(f,E,_e)}}var I=f.return;try{jy(f)}catch(_e){sr(f,I,_e)}break;case 5:var W=f.return;try{jy(f)}catch(_e){sr(f,W,_e)}}}catch(_e){sr(f,f.return,_e)}if(f===c){je=null;break}var ne=f.sibling;if(ne!==null){ne.return=f.return,je=ne;break}je=f.return}}var xm=0,Am=1,Sm=2,Mm=3,wm=4;if(typeof Symbol=="function"&&Symbol.for){var fh=Symbol.for;xm=fh("selector.component"),Am=fh("selector.has_pseudo_class"),Sm=fh("selector.role"),Mm=fh("selector.test_id"),wm=fh("selector.text")}function $y(c){var f=Pe(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=F(c),c===null)throw Error(o(362));return c.stateNode.current}function e1(c,f){switch(f.$$typeof){case xm:if(c.type===f.value)return!0;break;case Am:e:{f=f.value,c=[c,0];for(var _=0;_<c.length;){var M=c[_++],E=c[_++],I=f[E];if(M.tag!==5||!xe(M)){for(;I!=null&&e1(M,I);)E++,I=f[E];if(E===f.length){f=!0;break e}else for(M=M.child;M!==null;)c.push(M,E),M=M.sibling}}f=!1}return f;case Sm:if(c.tag===5&&Ce(c.stateNode,f.value))return!0;break;case wm:if((c.tag===5||c.tag===6)&&(c=Se(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Mm:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function t1(c){switch(c.$$typeof){case xm:return"<"+(R(c.value)||"Unknown")+">";case Am:return":has("+(t1(c)||"")+")";case Sm:return'[role="'+c.value+'"]';case wm:return'"'+c.value+'"';case Mm:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function oT(c,f){var _=[];c=[c,0];for(var M=0;M<c.length;){var E=c[M++],I=c[M++],W=f[I];if(E.tag!==5||!xe(E)){for(;W!=null&&e1(E,W);)I++,W=f[I];if(I===f.length)_.push(E);else for(E=E.child;E!==null;)c.push(E,I),E=E.sibling}}return _}function n1(c,f){if(!X)throw Error(o(363));c=$y(c),c=oT(c,f),f=[],c=Array.from(c);for(var _=0;_<c.length;){var M=c[_++];if(M.tag===5)xe(M)||f.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return f}var uU=Math.ceil,Em=a.ReactCurrentDispatcher,i1=a.ReactCurrentOwner,zn=a.ReactCurrentBatchConfig,Ft=0,Kn=null,Yn=null,vi=0,Er=0,Qu=xt(0),ei=0,hh=null,Zu=0,Cm=0,r1=0,dh=null,ir=null,s1=0,o1=1/0;function qu(){o1=ai()+500}var Tm=!1,a1=null,oa=null,Rm=!1,aa=null,bm=0,ph=0,l1=null,Pm=-1,Im=0;function Xi(){return Ft&6?ai():Pm!==-1?Pm:Pm=ai()}function la(c){return c.mode&1?Ft&2&&vi!==0?vi&-vi:XN.transition!==null?(Im===0&&(c=Wp,Wp<<=1,!(Wp&4194240)&&(Wp=64),Im=c),Im):(c=Qt,c!==0?c:Ae()):1}function qr(c,f,_){if(50<ph)throw ph=0,l1=null,Error(o(185));var M=Bm(c,f);return M===null?null:(Zf(M,f,_),(!(Ft&2)||M!==Kn)&&(M===Kn&&(!(Ft&2)&&(Cm|=f),ei===4&&ua(M,vi)),rr(M,_),f===1&&Ft===0&&!(c.mode&1)&&(qu(),Yp&&Ks())),M)}function Bm(c,f){c.lanes|=f;var _=c.alternate;for(_!==null&&(_.lanes|=f),_=c,c=c.return;c!==null;)c.childLanes|=f,_=c.alternate,_!==null&&(_.childLanes|=f),_=c,c=c.return;return _.tag===3?_.stateNode:null}function rr(c,f){var _=c.callbackNode;NN(c,f);var M=Jp(c,c===Kn?vi:0);if(M===0)_!==null&&JE(_),c.callbackNode=null,c.callbackPriority=0;else if(f=M&-M,c.callbackPriority!==f){if(_!=null&&JE(_),f===1)c.tag===0?WN(lT.bind(null,c)):KE(lT.bind(null,c)),ze?Qe(function(){Ft===0&&Ks()}):gy(vy,Ks),_=null;else{switch(XE(M)){case 1:_=vy;break;case 4:_=zN;break;case 16:_=_y;break;case 536870912:_=HN;break;default:_=_y}_=vT(_,aT.bind(null,c))}c.callbackPriority=f,c.callbackNode=_}}function aT(c,f){if(Pm=-1,Im=0,Ft&6)throw Error(o(327));var _=c.callbackNode;if(Ml()&&c.callbackNode!==_)return null;var M=Jp(c,c===Kn?vi:0);if(M===0)return null;if(M&30||M&c.expiredLanes||f)f=Dm(c,M);else{f=M;var E=Ft;Ft|=2;var I=fT();(Kn!==c||vi!==f)&&(qu(),Al(c,f));do try{hU();break}catch(ne){cT(c,ne)}while(!0);Ay(),Em.current=I,Ft=E,Yn!==null?f=0:(Kn=null,vi=0,f=ei)}if(f!==0){if(f===2&&(E=dy(c),E!==0&&(M=E,f=u1(c,E))),f===1)throw _=hh,Al(c,0),ua(c,M),rr(c,ai()),_;if(f===6)ua(c,M);else{if(E=c.current.alternate,!(M&30)&&!cU(E)&&(f=Dm(c,M),f===2&&(I=dy(c),I!==0&&(M=I,f=u1(c,I))),f===1))throw _=hh,Al(c,0),ua(c,M),rr(c,ai()),_;switch(c.finishedWork=E,c.finishedLanes=M,f){case 0:case 1:throw Error(o(345));case 2:Sl(c,ir);break;case 3:if(ua(c,M),(M&130023424)===M&&(f=s1+500-ai(),10<f)){if(Jp(c,0)!==0)break;if(E=c.suspendedLanes,(E&M)!==M){Xi(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=be(Sl.bind(null,c,ir),f);break}Sl(c,ir);break;case 4:if(ua(c,M),(M&4194240)===M)break;for(f=c.eventTimes,E=-1;0<M;){var W=31-cn(M);I=1<<W,W=f[W],W>E&&(E=W),M&=~I}if(M=E,M=ai()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*uU(M/1960))-M,10<M){c.timeoutHandle=be(Sl.bind(null,c,ir),M);break}Sl(c,ir);break;case 5:Sl(c,ir);break;default:throw Error(o(329))}}}return rr(c,ai()),c.callbackNode===_?aT.bind(null,c):null}function u1(c,f){var _=dh;return c.current.memoizedState.isDehydrated&&(Al(c,f).flags|=256),c=Dm(c,f),c!==2&&(f=ir,ir=_,f!==null&&c1(f)),c}function c1(c){ir===null?ir=c:ir.push.apply(ir,c)}function cU(c){for(var f=c;;){if(f.flags&16384){var _=f.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var M=0;M<_.length;M++){var E=_[M],I=E.getSnapshot;E=E.value;try{if(!Js(I(),E))return!1}catch{return!1}}}if(_=f.child,f.subtreeFlags&16384&&_!==null)_.return=f,f=_;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ua(c,f){for(f&=~r1,f&=~Cm,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var _=31-cn(f),M=1<<_;c[_]=-1,f&=~M}}function lT(c){if(Ft&6)throw Error(o(327));Ml();var f=Jp(c,0);if(!(f&1))return rr(c,ai()),null;var _=Dm(c,f);if(c.tag!==0&&_===2){var M=dy(c);M!==0&&(f=M,_=u1(c,M))}if(_===1)throw _=hh,Al(c,0),ua(c,f),rr(c,ai()),_;if(_===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Sl(c,ir),rr(c,ai()),null}function uT(c){aa!==null&&aa.tag===0&&!(Ft&6)&&Ml();var f=Ft;Ft|=1;var _=zn.transition,M=Qt;try{if(zn.transition=null,Qt=1,c)return c()}finally{Qt=M,zn.transition=_,Ft=f,!(Ft&6)&&Ks()}}function f1(){Er=Qu.current,Je(Qu)}function Al(c,f){c.finishedWork=null,c.finishedLanes=0;var _=c.timeoutHandle;if(_!==st&&(c.timeoutHandle=st,Xe(_)),Yn!==null)for(_=Yn.return;_!==null;){var M=_;switch(Ry(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Ot();break;case 3:Yu(),Je(gt),Je(ut),Fy();break;case 5:Dy(M);break;case 4:Yu();break;case 13:Je(Tn);break;case 19:Je(Tn);break;case 10:Sy(M.type._context);break;case 22:case 23:f1()}_=_.return}if(Kn=c,Yn=c=ca(c.current,null),vi=Er=f,ei=0,hh=null,r1=Cm=Zu=0,ir=dh=null,Ys!==null){for(f=0;f<Ys.length;f++)if(_=Ys[f],M=_.interleaved,M!==null){_.interleaved=null;var E=M.next,I=_.pending;if(I!==null){var W=I.next;I.next=E,M.next=W}_.pending=M}Ys=null}return c}function cT(c,f){do{var _=Yn;try{if(Ay(),sm.current=fm,om){for(var M=Ln.memoizedState;M!==null;){var E=M.queue;E!==null&&(E.pending=null),M=M.next}om=!1}if(ju=0,li=wi=Ln=null,ih=!1,rh=0,i1.current=null,_===null||_.return===null){ei=1,hh=f,Yn=null;break}e:{var I=c,W=_.return,ne=_,_e=f;if(f=vi,ne.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var Ne=_e,it=ne,Mt=it.tag;if(!(it.mode&1)&&(Mt===0||Mt===11||Mt===15)){var vt=it.alternate;vt?(it.updateQueue=vt.updateQueue,it.memoizedState=vt.memoizedState,it.lanes=vt.lanes):(it.updateQueue=null,it.memoizedState=null)}var ln=IC(W);if(ln!==null){ln.flags&=-257,BC(ln,W,ne,I,f),ln.mode&1&&PC(I,Ne,f),f=ln,_e=Ne;var ht=f.updateQueue;if(ht===null){var Ti=new Set;Ti.add(_e),f.updateQueue=Ti}else ht.add(_e);break e}else{if(!(f&1)){PC(I,Ne,f),h1();break e}_e=Error(o(426))}}else if(Sn&&ne.mode&1){var es=IC(W);if(es!==null){!(es.flags&65536)&&(es.flags|=256),BC(es,W,ne,I,f),Iy(_e);break e}}I=_e,ei!==4&&(ei=2),dh===null?dh=[I]:dh.push(I),_e=Gy(_e,ne),ne=W;do{switch(ne.tag){case 3:ne.flags|=65536,f&=-f,ne.lanes|=f;var fe=RC(ne,_e,f);QE(ne,fe);break e;case 1:I=_e;var re=ne.type,ge=ne.stateNode;if(!(ne.flags&128)&&(typeof re.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(oa===null||!oa.has(ge)))){ne.flags|=65536,f&=-f,ne.lanes|=f;var qe=bC(ne,I,f);QE(ne,qe);break e}}ne=ne.return}while(ne!==null)}dT(_)}catch(ct){f=ct,Yn===_&&_!==null&&(Yn=_=_.return);continue}break}while(!0)}function fT(){var c=Em.current;return Em.current=fm,c===null?fm:c}function h1(){(ei===0||ei===3||ei===2)&&(ei=4),Kn===null||!(Zu&268435455)&&!(Cm&268435455)||ua(Kn,vi)}function Dm(c,f){var _=Ft;Ft|=2;var M=fT();Kn===c&&vi===f||Al(c,f);do try{fU();break}catch(E){cT(c,E)}while(!0);if(Ay(),Ft=_,Em.current=M,Yn!==null)throw Error(o(261));return Kn=null,vi=0,ei}function fU(){for(;Yn!==null;)hT(Yn)}function hU(){for(;Yn!==null&&!ON();)hT(Yn)}function hT(c){var f=gT(c.alternate,c,Er);c.memoizedProps=c.pendingProps,f===null?dT(c):Yn=f,i1.current=null}function dT(c){var f=c;do{var _=f.alternate;if(c=f.return,f.flags&32768){if(_=rU(_,f),_!==null){_.flags&=32767,Yn=_;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ei=6,Yn=null;return}}else if(_=tU(_,f,Er),_!==null){Yn=_;return}if(f=f.sibling,f!==null){Yn=f;return}Yn=f=c}while(f!==null);ei===0&&(ei=5)}function Sl(c,f){var _=Qt,M=zn.transition;try{zn.transition=null,Qt=1,dU(c,f,_)}finally{zn.transition=M,Qt=_}return null}function dU(c,f,_){do Ml();while(aa!==null);if(Ft&6)throw Error(o(327));var M=c.finishedWork,E=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var I=M.lanes|M.childLanes;if(UN(c,I),c===Kn&&(Yn=Kn=null,vi=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Rm||(Rm=!0,vT(_y,function(){return Ml(),null})),I=(M.flags&15990)!==0,M.subtreeFlags&15990||I){I=zn.transition,zn.transition=null;var W=Qt;Qt=1;var ne=Ft;Ft|=4,i1.current=null,oU(c,M),aU(c,M),Q(c.containerInfo),c.current=M,lU(M),kN(),Ft=ne,Qt=W,zn.transition=I}else c.current=M;if(Rm&&(Rm=!1,aa=c,bm=E),I=c.pendingLanes,I===0&&(oa=null),GN(M.stateNode),rr(c,ai()),f!==null)for(_=c.onRecoverableError,M=0;M<f.length;M++)_(f[M]);if(Tm)throw Tm=!1,c=a1,a1=null,c;return bm&1&&c.tag!==0&&Ml(),I=c.pendingLanes,I&1?c===l1?ph++:(ph=0,l1=c):ph=0,Ks(),null}function Ml(){if(aa!==null){var c=XE(bm),f=zn.transition,_=Qt;try{if(zn.transition=null,Qt=16>c?16:c,aa===null)var M=!1;else{if(c=aa,aa=null,bm=0,Ft&6)throw Error(o(331));var E=Ft;for(Ft|=4,je=c.current;je!==null;){var I=je,W=I.child;if(je.flags&16){var ne=I.deletions;if(ne!==null){for(var _e=0;_e<ne.length;_e++){var Ne=ne[_e];for(je=Ne;je!==null;){var it=je;switch(it.tag){case 0:case 11:case 15:xl(8,it,I)}var Mt=it.child;if(Mt!==null)Mt.return=it,je=Mt;else for(;je!==null;){it=je;var vt=it.sibling,ln=it.return;if(ZC(it),it===Ne){je=null;break}if(vt!==null){vt.return=ln,je=vt;break}je=ln}}}var ht=I.alternate;if(ht!==null){var Ti=ht.child;if(Ti!==null){ht.child=null;do{var es=Ti.sibling;Ti.sibling=null,Ti=es}while(Ti!==null)}}je=I}}if(I.subtreeFlags&2064&&W!==null)W.return=I,je=W;else e:for(;je!==null;){if(I=je,I.flags&2048)switch(I.tag){case 0:case 11:case 15:xl(9,I,I.return)}var fe=I.sibling;if(fe!==null){fe.return=I.return,je=fe;break e}je=I.return}}var re=c.current;for(je=re;je!==null;){W=je;var ge=W.child;if(W.subtreeFlags&2064&&ge!==null)ge.return=W,je=ge;else e:for(W=re;je!==null;){if(ne=je,ne.flags&2048)try{switch(ne.tag){case 0:case 11:case 15:ch(9,ne)}}catch(ct){sr(ne,ne.return,ct)}if(ne===W){je=null;break e}var qe=ne.sibling;if(qe!==null){qe.return=ne.return,je=qe;break e}je=ne.return}}if(Ft=E,Ks(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(Kp,c)}catch{}M=!0}return M}finally{Qt=_,zn.transition=f}}return!1}function pT(c,f,_){f=Gy(_,f),f=RC(c,f,1),sa(c,f),f=Xi(),c=Bm(c,1),c!==null&&(Zf(c,1,f),rr(c,f))}function sr(c,f,_){if(c.tag===3)pT(c,c,_);else for(;f!==null;){if(f.tag===3){pT(f,c,_);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(oa===null||!oa.has(M))){c=Gy(_,c),c=bC(f,c,1),sa(f,c),c=Xi(),f=Bm(f,1),f!==null&&(Zf(f,1,c),rr(f,c));break}}f=f.return}}function pU(c,f,_){var M=c.pingCache;M!==null&&M.delete(f),f=Xi(),c.pingedLanes|=c.suspendedLanes&_,Kn===c&&(vi&_)===_&&(ei===4||ei===3&&(vi&130023424)===vi&&500>ai()-s1?Al(c,0):r1|=_),rr(c,f)}function mT(c,f){f===0&&(c.mode&1?(f=Xp,Xp<<=1,!(Xp&130023424)&&(Xp=4194304)):f=1);var _=Xi();c=Bm(c,f),c!==null&&(Zf(c,f,_),rr(c,_))}function mU(c){var f=c.memoizedState,_=0;f!==null&&(_=f.retryLane),mT(c,_)}function gU(c,f){var _=0;switch(c.tag){case 13:var M=c.stateNode,E=c.memoizedState;E!==null&&(_=E.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(f),mT(c,_)}var gT;gT=function(c,f,_){if(c!==null)if(c.memoizedProps!==f.pendingProps||gt.current)wr=!0;else{if(!(c.lanes&_)&&!(f.flags&128))return wr=!1,iU(c,f,_);wr=!!(c.flags&131072)}else wr=!1,Sn&&f.flags&1048576&&nC(f,nm,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var E=nn(f,ut.current);Gu(f,_),E=Uy(null,f,M,c,E,_);var I=Oy();return f.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,An(M)?(I=!0,Tt(f)):I=!1,f.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,wy(f),E.updater=em,f.stateNode=E,E._reactInternals=f,Cy(f,M,c,_),f=Xy(null,f,M,!0,I,_)):(f.tag=0,Sn&&I&&Ty(f),Wi(null,f,E,_),f=f.child),f;case 16:M=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,E=M._init,M=E(M._payload),f.type=M,E=f.tag=_U(M),c=xs(M,c),E){case 0:f=Wy(null,f,M,c,_);break e;case 1:f=zC(null,f,M,c,_);break e;case 11:f=FC(null,f,M,c,_);break e;case 14:f=NC(null,f,M,xs(M.type,c),_);break e}throw Error(o(306,M,""))}return f;case 0:return M=f.type,E=f.pendingProps,E=f.elementType===M?E:xs(M,E),Wy(c,f,M,E,_);case 1:return M=f.type,E=f.pendingProps,E=f.elementType===M?E:xs(M,E),zC(c,f,M,E,_);case 3:e:{if(HC(f),c===null)throw Error(o(387));M=f.pendingProps,I=f.memoizedState,E=I.element,jE(c,f),$p(f,M,null,_);var W=f.memoizedState;if(M=W.element,Te&&I.isDehydrated)if(I={element:M,isDehydrated:!1,cache:W.cache,transitions:W.transitions},f.updateQueue.baseState=I,f.memoizedState=I,f.flags&256){E=Error(o(423)),f=GC(c,f,M,_,E);break e}else if(M!==E){E=Error(o(424)),f=GC(c,f,M,_,E);break e}else for(Te&&(Mr=ml(f.stateNode.containerInfo),Sr=f,Sn=!0,As=null,qf=!1),_=lC(f,null,M,_),f.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Xu(),M===E){f=wo(c,f,_);break e}Wi(c,f,M,_)}f=f.child}return f;case 5:return uC(f),c===null&&Py(f),M=f.type,E=f.pendingProps,I=c!==null?c.memoizedProps:null,W=E.children,ve(M,E)?W=null:I!==null&&ve(M,I)&&(f.flags|=32),kC(c,f),Wi(c,f,W,_),f.child;case 6:return c===null&&Py(f),null;case 13:return VC(c,f,_);case 4:return By(f,f.stateNode.containerInfo),M=f.pendingProps,c===null?f.child=Ju(f,null,M,_):Wi(c,f,M,_),f.child;case 11:return M=f.type,E=f.pendingProps,E=f.elementType===M?E:xs(M,E),FC(c,f,M,E,_);case 7:return Wi(c,f,f.pendingProps,_),f.child;case 8:return Wi(c,f,f.pendingProps.children,_),f.child;case 12:return Wi(c,f,f.pendingProps.children,_),f.child;case 10:e:{if(M=f.type._context,E=f.pendingProps,I=f.memoizedProps,W=E.value,YE(f,M,W),I!==null)if(Js(I.value,W)){if(I.children===E.children&&!gt.current){f=wo(c,f,_);break e}}else for(I=f.child,I!==null&&(I.return=f);I!==null;){var ne=I.dependencies;if(ne!==null){W=I.child;for(var _e=ne.firstContext;_e!==null;){if(_e.context===M){if(I.tag===1){_e=xo(-1,_&-_),_e.tag=2;var Ne=I.updateQueue;if(Ne!==null){Ne=Ne.shared;var it=Ne.pending;it===null?_e.next=_e:(_e.next=it.next,it.next=_e),Ne.pending=_e}}I.lanes|=_,_e=I.alternate,_e!==null&&(_e.lanes|=_),My(I.return,_,f),ne.lanes|=_;break}_e=_e.next}}else if(I.tag===10)W=I.type===f.type?null:I.child;else if(I.tag===18){if(W=I.return,W===null)throw Error(o(341));W.lanes|=_,ne=W.alternate,ne!==null&&(ne.lanes|=_),My(W,_,f),W=I.sibling}else W=I.child;if(W!==null)W.return=I;else for(W=I;W!==null;){if(W===f){W=null;break}if(I=W.sibling,I!==null){I.return=W.return,W=I;break}W=W.return}I=W}Wi(c,f,E.children,_),f=f.child}return f;case 9:return E=f.type,M=f.pendingProps.children,Gu(f,_),E=Kr(E),M=M(E),f.flags|=1,Wi(c,f,M,_),f.child;case 14:return M=f.type,E=xs(M,f.pendingProps),E=xs(M.type,E),NC(c,f,M,E,_);case 15:return UC(c,f,f.type,f.pendingProps,_);case 17:return M=f.type,E=f.pendingProps,E=f.elementType===M?E:xs(M,E),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,An(M)?(c=!0,Tt(f)):c=!1,Gu(f,_),eC(f,M,E),Cy(f,M,E,_),Xy(null,f,M,!0,c,_);case 19:return KC(c,f,_);case 22:return OC(c,f,_)}throw Error(o(156,f.tag))};function vT(c,f){return gy(c,f)}function vU(c,f,_,M){this.tag=c,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(c,f,_,M){return new vU(c,f,_,M)}function d1(c){return c=c.prototype,!(!c||!c.isReactComponent)}function _U(c){if(typeof c=="function")return d1(c)?1:0;if(c!=null){if(c=c.$$typeof,c===x)return 11;if(c===A)return 14}return 2}function ca(c,f){var _=c.alternate;return _===null?(_=$r(c.tag,f,c.key,c.mode),_.elementType=c.elementType,_.type=c.type,_.stateNode=c.stateNode,_.alternate=c,c.alternate=_):(_.pendingProps=f,_.type=c.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=c.flags&14680064,_.childLanes=c.childLanes,_.lanes=c.lanes,_.child=c.child,_.memoizedProps=c.memoizedProps,_.memoizedState=c.memoizedState,_.updateQueue=c.updateQueue,f=c.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_.sibling=c.sibling,_.index=c.index,_.ref=c.ref,_}function Lm(c,f,_,M,E,I){var W=2;if(M=c,typeof c=="function")d1(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case h:return wl(_.children,E,I,f);case d:W=8,E|=8;break;case p:return c=$r(12,_,f,E|2),c.elementType=p,c.lanes=I,c;case y:return c=$r(13,_,f,E),c.elementType=y,c.lanes=I,c;case g:return c=$r(19,_,f,E),c.elementType=g,c.lanes=I,c;case w:return Fm(_,E,I,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:W=10;break e;case v:W=9;break e;case x:W=11;break e;case A:W=14;break e;case S:W=16,M=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=$r(W,_,f,E),f.elementType=c,f.type=M,f.lanes=I,f}function wl(c,f,_,M){return c=$r(7,c,M,f),c.lanes=_,c}function Fm(c,f,_,M){return c=$r(22,c,M,f),c.elementType=w,c.lanes=_,c.stateNode={},c}function p1(c,f,_){return c=$r(6,c,null,f),c.lanes=_,c}function m1(c,f,_){return f=$r(4,c.children!==null?c.children:[],c.key,f),f.lanes=_,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function yU(c,f,_,M,E){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=py(0),this.expirationTimes=py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=py(0),this.identifierPrefix=M,this.onRecoverableError=E,Te&&(this.mutableSourceEagerHydrationData=null)}function _T(c,f,_,M,E,I,W,ne,_e){return c=new yU(c,f,_,ne,_e),f===1?(f=1,I===!0&&(f|=8)):f=0,I=$r(3,null,null,f),c.current=I,I.stateNode=c,I.memoizedState={element:M,isDehydrated:_,cache:null,transitions:null},wy(I),c}function yT(c){if(!c)return mt;c=c._reactInternals;e:{if(C(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(An(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var _=c.type;if(An(_))return Cn(c,_,f)}return f}function xT(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=J(f),c===null?null:c.stateNode}function AT(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var _=c.retryLane;c.retryLane=_!==0&&_<f?_:f}}function g1(c,f){AT(c,f),(c=c.alternate)&&AT(c,f)}function xU(c){return c=J(c),c===null?null:c.stateNode}function AU(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=Xi();qr(c,134217728,f),g1(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Xi(),_=la(c);qr(c,_,f),g1(c,_)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var _=Qf(f.pendingLanes);_!==0&&(my(f,_|1),rr(f,ai()),!(Ft&6)&&(qu(),Ks()))}break;case 13:var M=Xi();uT(function(){return qr(c,1,M)}),g1(c,1)}},t.batchedUpdates=function(c,f){var _=Ft;Ft|=1;try{return c(f)}finally{Ft=_,Ft===0&&(qu(),Yp&&Ks())}},t.createComponentSelector=function(c){return{$$typeof:xm,value:c}},t.createContainer=function(c,f,_,M,E,I,W){return _T(c,f,!1,null,_,M,E,I,W)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Am,value:c}},t.createHydrationContainer=function(c,f,_,M,E,I,W,ne,_e){return c=_T(_,M,!0,c,E,I,W,ne,_e),c.context=yT(null),_=c.current,M=Xi(),E=la(_),I=xo(M,E),I.callback=f??null,sa(_,I),c.current.lanes=E,Zf(c,E,M),rr(c,M),c},t.createPortal=function(c,f,_){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:M==null?null:""+M,children:c,containerInfo:f,implementation:_}},t.createRoleSelector=function(c){return{$$typeof:Sm,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Mm,value:c}},t.createTextSelector=function(c){return{$$typeof:wm,value:c}},t.deferredUpdates=function(c){var f=Qt,_=zn.transition;try{return zn.transition=null,Qt=16,c()}finally{Qt=f,zn.transition=_}},t.discreteUpdates=function(c,f,_,M,E){var I=Qt,W=zn.transition;try{return zn.transition=null,Qt=1,c(f,_,M,E)}finally{Qt=I,zn.transition=W,Ft===0&&qu()}},t.findAllNodes=n1,t.findBoundingRects=function(c,f){if(!X)throw Error(o(363));f=n1(c,f),c=[];for(var _=0;_<f.length;_++)c.push(he(f[_]));for(f=c.length-1;0<f;f--){_=c[f];for(var M=_.x,E=M+_.width,I=_.y,W=I+_.height,ne=f-1;0<=ne;ne--)if(f!==ne){var _e=c[ne],Ne=_e.x,it=Ne+_e.width,Mt=_e.y,vt=Mt+_e.height;if(M>=Ne&&I>=Mt&&E<=it&&W<=vt){c.splice(f,1);break}else if(M!==Ne||_.width!==_e.width||vt<I||Mt>W){if(!(I!==Mt||_.height!==_e.height||it<M||Ne>E)){Ne>M&&(_e.width+=Ne-M,_e.x=M),it<E&&(_e.width=E-Ne),c.splice(f,1);break}}else{Mt>I&&(_e.height+=Mt-I,_e.y=I),vt<W&&(_e.height=W-Mt),c.splice(f,1);break}}}return c},t.findHostInstance=xT,t.findHostInstanceWithNoPortals=function(c){return c=N(c),c=c!==null?q(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return xT(c)},t.flushControlled=function(c){var f=Ft;Ft|=1;var _=zn.transition,M=Qt;try{zn.transition=null,Qt=1,c()}finally{Qt=M,zn.transition=_,Ft=f,Ft===0&&(qu(),Ks())}},t.flushPassiveEffects=Ml,t.flushSync=uT,t.focusWithin=function(c,f){if(!X)throw Error(o(363));for(c=$y(c),f=oT(c,f),f=Array.from(f),c=0;c<f.length;){var _=f[c++];if(!xe(_)){if(_.tag===5&&lt(_.stateNode))return!0;for(_=_.child;_!==null;)f.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qt},t.getFindAllNodesFailureDescription=function(c,f){if(!X)throw Error(o(363));var _=0,M=[];c=[$y(c),0];for(var E=0;E<c.length;){var I=c[E++],W=c[E++],ne=f[W];if((I.tag!==5||!xe(I))&&(e1(I,ne)&&(M.push(t1(ne)),W++,W>_&&(_=W)),W<f.length))for(I=I.child;I!==null;)c.push(I,W),I=I.sibling}if(_<f.length){for(c=[];_<f.length;_++)c.push(t1(f[_]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Z(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:xU,findFiberByHostInstance:c.findFiberByHostInstance||AU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Kp=f.inject(c),Xs=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,_,M){if(!X)throw Error(o(363));c=n1(c,f);var E=Ue(c,_,M).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(c,f){var _=f._getVersion;_=_(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,_]:c.mutableSourceEagerHydrationData.push(f,_)},t.runWithPriority=function(c,f){var _=Qt;try{return Qt=c,f()}finally{Qt=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,_,M){var E=f.current,I=Xi(),W=la(E);return _=yT(_),f.context===null?f.context=_:f.pendingContext=_,f=xo(I,W),f.payload={element:c},M=M===void 0?null:M,M!==null&&(f.callback=M),sa(E,f),c=qr(E,W,I),c!==null&&qp(c,E,W),W},t};XD.exports=q6;var $6=XD.exports;const eV=eM($6),Ww={},j_=n=>void Object.assign(Ww,n);function tV(n,e){function t(h,{args:d=[],attach:p,...m},v){let x=`${h[0].toUpperCase()}${h.slice(1)}`,y;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=Cc(g,{type:h,root:v,attach:p,primitive:!0})}else{const g=Ww[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");y=Cc(new g(...d),{type:h,root:v,attach:p,memoizedProps:{args:d}})}return y.__r3f.attach===void 0&&(y instanceof Et?y.__r3f.attach="geometry":y instanceof $n&&(y.__r3f.attach="material")),x!=="inject"&&Ix(y,m),y}function i(h,d){let p=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?Px(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(v=h.__r3f)==null||v.objects.push(d),d.__r3f||Cc(d,{}),d.__r3f.parent=h,yS(d),Tc(d)}}function r(h,d,p){let m=!1;if(d){var v,x;if((v=d.__r3f)!=null&&v.attach)Px(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:d});const y=h.children.filter(A=>A!==d),g=y.indexOf(p);h.children=[...y.slice(0,g),d,...y.slice(g)],m=!0}m||(x=h.__r3f)==null||x.objects.push(d),d.__r3f||Cc(d,{}),d.__r3f.parent=h,yS(d),Tc(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,v,x;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==d)),(v=d.__r3f)!=null&&v.attach)mP(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var y;h.remove(d),(y=d.__r3f)!=null&&y.root&&uV(v0(d),d)}const A=(x=d.__r3f)==null?void 0:x.primitive,S=!A&&(p===void 0?d.dispose!==null:p);if(!A){var g;s((g=d.__r3f)==null?void 0:g.objects,d,S),s(d.children,d,S)}if(delete d.__r3f,S&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vS.unstable_scheduleCallback(vS.unstable_IdlePriority,w):w()}Tc(h)}}function a(h,d,p,m){var v;const x=(v=h.__r3f)==null?void 0:v.parent;if(!x)return;const y=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(y,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(y,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(x,h),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),i(x,y),y.raycast&&y.__r3f.eventCount&&v0(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:eV({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:y=[],children:g,...A}=m,{args:S=[],children:w,...P}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,D)=>R!==S[D]))return[!0];const T=eL(h,A,P,!0);return T.changes.length?[!1,T]:null}},commitUpdate(h,[d,p],m,v,x,y){d?a(h,m,x,y):Ix(h,p)},commitMount(h,d,p,m){var v;const x=(v=h.__r3f)!=null?v:{};h.raycast&&x.handlers&&x.eventCount&&v0(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Cc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&mP(m,h,p),h.isObject3D&&(h.visible=!1),Tc(h)},unhideInstance(h,d){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&Px(v,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Tc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Vc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&hn.fun(performance.now)?performance.now:hn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:hn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:hn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ix}}var fP,hP;const bx=n=>"colorSpace"in n||"outputColorSpace"in n,YD=()=>{var n;return(n=Ww.ColorManagement)!=null?n:null},jD=n=>n&&n.isOrthographicCamera,nV=n=>n&&n.hasOwnProperty("current"),Lp=typeof window<"u"&&((fP=window.document)!=null&&fP.createElement||((hP=window.navigator)==null?void 0:hP.product)==="ReactNative")?se.useLayoutEffect:se.useEffect;function QD(n){const e=se.useRef(n);return Lp(()=>void(e.current=n),[n]),e}function iV({set:n}){return Lp(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class ZD extends se.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ZD.getDerivedStateFromError=()=>({error:!0});const qD="__default",dP=new Map,rV=n=>n&&!!n.memoized&&!!n.changes;function $D(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Nh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function v0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const hn={obj:n=>n===Object(n)&&!hn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(hn.str(n)||hn.num(n)||hn.boo(n))return n===e;const s=hn.obj(n);if(s&&i==="reference")return n===e;const o=hn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!hn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(hn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function sV(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function oV(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Cc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function _S(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const pP=/-\d+$/;function Px(n,e,t){if(hn.str(t)){if(pP.test(t)){const s=t.replace(pP,""),{target:o,key:a}=_S(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=_S(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function mP(n,e,t){var i,r;if(hn.str(t)){const{target:s,key:o}=_S(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function eL(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,d=Object.entries(r),p=[];if(u){const v=Object.keys(l);for(let x=0;x<v.length;x++)r.hasOwnProperty(v[x])||d.unshift([v[x],qD+"remove"])}d.forEach(([v,x])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&v==="object"||hn.equ(x,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,x,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,x,!1,g]);for(const A in r){const S=r[A];A.startsWith(`${v}-`)&&p.push([A,S,!1,A.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const aV=typeof process<"u"&&!1;function Ix(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=rV(e)?e:eL(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let h=0;h<a.length;h++){let[d,p,m,v]=a[h];if(bx(n)){const A="srgb",S="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?A:S):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?A:S)}let x=n,y=x[d];if(v.length&&(y=v.reduce((g,A)=>g[A],n),!(y&&y.set))){const[g,...A]=v.reverse();x=A.reverse().reduce((S,w)=>S[w],n),d=g}if(p===qD+"remove")if(x.constructor){let g=dP.get(x.constructor);g||(g=new x.constructor,dP.set(x.constructor,g)),p=g[d]}else p=0;if(m&&i)p?i.handlers[d]=p:delete i.handlers[d],i.eventCount=Object.keys(i.handlers).length;else if(y&&y.set&&(y.copy||y instanceof cu)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&(aV?y.constructor.name===p.constructor.name:y.constructor===p.constructor))y.copy(p);else if(p!==void 0){const g=y instanceof He;!g&&y.setScalar?y.setScalar(p):y instanceof cu&&p instanceof cu?y.mask=p.mask:y.set(p),!YD()&&s&&!s.linear&&g&&y.convertSRGBToLinear()}}else if(x[d]=p,x[d]instanceof en&&x[d].format===Jn&&x[d].type===yr&&s){const g=x[d];bx(g)&&bx(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}Tc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const h=v0(n).getState().internal,d=h.interaction.indexOf(n);d>-1&&h.interaction.splice(d,1),i.eventCount&&h.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&yS(n),n}function Tc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function yS(n){n.onUpdate==null||n.onUpdate(n)}function tL(n,e){n.manual||(jD(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Xg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function lV(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Vc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Vc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Vc.ContinuousEventPriority;default:return Vc.DefaultEventPriority}}function nL(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function uV(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{nL(t.capturedMap,e,i,r)})}function cV(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,u){const h=n.getState(),d=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const A=Nh(m[g]);A&&(A.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const A=Nh(g);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var S;A.events.compute==null||A.events.compute(l,A,(S=A.previousRoot)==null?void 0:S.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(g,!0):[]}let x=m.flatMap(v).sort((g,A)=>{const S=Nh(g.object),w=Nh(A.object);return!S||!w?g.distance-A.distance:w.events.priority-S.events.priority||g.distance-A.distance}).filter(g=>{const A=Xg(g);return d.has(A)?!1:(d.add(A),!0)});h.events.filter&&(x=h.events.filter(x,h));for(const g of x){let A=g.object;for(;A;){var y;(y=A.__r3f)!=null&&y.eventCount&&p.push({...g,eventObject:A}),A=A.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(Xg(g.intersection))||p.push(g.intersection);return p}function r(l,u,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const x=Nh(v.object)||p,{raycaster:y,pointer:g,camera:A,internal:S}=x,w=new z(g.x,g.y,0).unproject(A),P=b=>{var N,J;return(N=(J=S.capturedMap.get(b))==null?void 0:J.has(v.eventObject))!=null?N:!1},T=b=>{const N={intersection:v,target:u.target};S.capturedMap.has(b)?S.capturedMap.get(b).set(v.eventObject,N):S.capturedMap.set(b,new Map([[v.eventObject,N]])),u.target.setPointerCapture(b)},R=b=>{const N=S.capturedMap.get(b);N&&nL(S.capturedMap,v.eventObject,N,b)};let D={};for(let b in u){let N=u[b];typeof N!="function"&&(D[b]=N)}let C={...v,...D,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:y.ray,camera:A,stopPropagation(){const b="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!b||b.has(v.eventObject))&&(C.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(N=>N.eventObject===v.eventObject))){const N=l.slice(0,l.indexOf(v));s([...N,v])}},target:{hasPointerCapture:P,setPointerCapture:T,releasePointerCapture:R},currentTarget:{hasPointerCapture:P,setPointerCapture:T,releasePointerCapture:R},nativeEvent:u};if(d(C),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(Xg(h)),p!=null&&p.eventCount){const v={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=i(h,m?t:void 0),g=v?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=y.map(S=>S.eventObject)),v&&!y.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(y);function A(S){const w=S.eventObject,P=w.__r3f,T=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const R=Xg(S),D=p.hovered.get(R);D?D.stopped&&S.stopPropagation():(p.hovered.set(R,S),T.onPointerOver==null||T.onPointerOver(S),T.onPointerEnter==null||T.onPointerEnter(S))}T.onPointerMove==null||T.onPointerMove(S)}else{const R=T[l];R?(!v||p.initialHits.includes(w))&&(o(h,p.interaction.filter(D=>!p.initialHits.includes(D))),R(S)):v&&p.initialHits.includes(w)&&o(h,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(y,h,g,A)}}return{handlePointer:a}}const fV=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],iL=n=>!!(n!=null&&n.render),Xw=se.createContext(null),hV=(n,e)=>{const t=GD((a,l)=>{const u=new z,h=new z,d=new z;function p(g=l().camera,A=h,S=l().size){const{width:w,height:P,top:T,left:R}=S,D=w/P;A instanceof z?d.copy(A):d.set(...A);const C=g.getWorldPosition(u).distanceTo(d);if(jD(g))return{width:w/g.zoom,height:P/g.zoom,top:T,left:R,factor:1,distance:C,aspect:D};{const b=g.fov*Math.PI/180,N=2*Math.tan(b/2)*C,J=N*(w/P);return{width:J,height:N,top:T,left:R,factor:w/J,distance:C,aspect:D}}}let m;const v=g=>a(A=>({performance:{...A.performance,current:g}})),x=new Ee;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,A)=>e(g,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ow,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(A=>({...A,events:{...A.events,...g}})),setSize:(g,A,S,w,P)=>{const T=l().camera,R={width:g,height:A,top:w||0,left:P||0,updateStyle:S};a(D=>({size:R,viewport:{...D.viewport,...p(T,h,R)}}))},setDpr:g=>a(A=>{const S=$D(g);return{viewport:{...A.viewport,dpr:S,initialDpr:A.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,g!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:se.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,A,S)=>{const w=l().internal;return w.priority=w.priority+(A>0?1:0),w.subscribers.push({ref:g,priority:A,store:S}),w.subscribers=w.subscribers.sort((P,T)=>P.priority-T.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(A>0?1:0),P.subscribers=P.subscribers.filter(T=>T.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,tL(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function dV(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let Jg,rL=new Set,pV=new Set,mV=new Set;const gV=n=>dV(n,rL);function Bx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Uh(n,e){switch(n){case"before":return Bx(rL,e);case"after":return Bx(pV,e);case"tail":return Bx(mV,e)}}let Dx,Lx;function Fx(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Dx=e.internal.subscribers,Jg=0;Jg<Dx.length;Jg++)Lx=Dx[Jg],Lx.ref.current(Lx.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function vV(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,Uh("before",u),t=!0;for(const d of n.values()){var h;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=Fx(u,s))}if(t=!1,Uh("after",u),i===0)return Uh("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,h=1){var d;if(!u)return n.forEach(p=>a(p.store.getState(),h));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,d,p){if(h&&Uh("before",u),d)Fx(u,d,p);else for(const m of n.values())Fx(u,m.store.getState());h&&Uh("after",u)}return{loop:o,invalidate:a,advance:l}}function Jw(){const n=se.useContext(Xw);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Or(n=t=>t,e){return Jw()(n,e)}function Yf(n,e=0){const t=Jw(),i=t.getState().internal.subscribe,r=QD(n);return Lp(()=>i(r,e,t),[e,i,t]),null}const gP=new WeakMap;function sL(n,e){return function(t,...i){let r=gP.get(t);return r||(r=new t,gP.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,sV(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function go(n,e,t,i){const r=Array.isArray(e)?e:[e],s=j6(sL(t,i),[n,...r],{equal:hn.equ});return Array.isArray(e)?s:s[0]}go.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Q6(sL(t),[n,...i])};go.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Z6([n,...t])};const Tf=new Map,{invalidate:vP,advance:_P}=vV(Tf),{reconciler:ep,applyProps:No}=tV(Tf,lV),Ac={objects:"shallow",strict:!1},_V=(n,e)=>{const t=typeof n=="function"?n(e):n;return iL(t)?t:new gw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function yV(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function xV(n){const e=Tf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||hV(vP,_P),o=t||ep.createContainer(s,Vc.ConcurrentRoot,null,!1,null,"",r,null);e||Tf.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:d,size:p,scene:m,events:v,onCreated:x,shadows:y=!1,linear:g=!1,flat:A=!1,legacy:S=!1,orthographic:w=!1,frameloop:P="always",dpr:T=[1,2],performance:R,raycaster:D,camera:C,onPointerMissed:b}=h,N=s.getState(),J=N.gl;N.gl||N.set({gl:J=_V(d,n)});let K=N.raycaster;K||N.set({raycaster:K=new Gw});const{params:q,...te}=D||{};if(hn.equ(te,K,Ac)||No(K,{...te}),hn.equ(q,K.params,Ac)||No(K,{params:{...K.params,...q}}),!N.camera||N.camera===u&&!hn.equ(u,C,Ac)){u=C;const Q=C instanceof wp,ue=Q?C:w?new na(0,0,0,0,.1,1e3):new Wn(75,0,.1,1e3);Q||(ue.position.z=5,C&&(No(ue,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(ue.manual=!0,ue.updateProjectionMatrix())),!N.camera&&!(C!=null&&C.rotation)&&ue.lookAt(0,0,0)),N.set({camera:ue}),K.camera=ue}if(!N.scene){let Q;m instanceof Ef?Q=m:(Q=new Ef,m&&No(Q,m)),N.set({scene:Cc(Q)})}if(!N.xr){var Z;const Q=(Ie,ae)=>{const ve=s.getState();ve.frameloop!=="never"&&_P(Ie,!0,ve,ae)},ue=()=>{const Ie=s.getState();Ie.gl.xr.enabled=Ie.gl.xr.isPresenting,Ie.gl.xr.setAnimationLoop(Ie.gl.xr.isPresenting?Q:null),Ie.gl.xr.isPresenting||vP(Ie)},me={connect(){const Ie=s.getState().gl;Ie.xr.addEventListener("sessionstart",ue),Ie.xr.addEventListener("sessionend",ue)},disconnect(){const Ie=s.getState().gl;Ie.xr.removeEventListener("sessionstart",ue),Ie.xr.removeEventListener("sessionend",ue)}};typeof((Z=J.xr)==null?void 0:Z.addEventListener)=="function"&&me.connect(),N.set({xr:me})}if(J.shadowMap){const Q=J.shadowMap.enabled,ue=J.shadowMap.type;if(J.shadowMap.enabled=!!y,hn.boo(y))J.shadowMap.type=od;else if(hn.str(y)){var oe;const me={basic:VB,percentage:m_,soft:od,variance:Rs};J.shadowMap.type=(oe=me[y])!=null?oe:od}else hn.obj(y)&&Object.assign(J.shadowMap,y);(Q!==J.shadowMap.enabled||ue!==J.shadowMap.type)&&(J.shadowMap.needsUpdate=!0)}const H=YD();H&&("enabled"in H?H.enabled=!S:"legacyMode"in H&&(H.legacyMode=S)),l||No(J,{outputEncoding:g?3e3:3001,toneMapping:A?uo:QM}),N.legacy!==S&&N.set(()=>({legacy:S})),N.linear!==g&&N.set(()=>({linear:g})),N.flat!==A&&N.set(()=>({flat:A})),d&&!hn.fun(d)&&!iL(d)&&!hn.equ(d,J,Ac)&&No(J,d),v&&!N.events.handlers&&N.set({events:v(s)});const ee=yV(n,p);return hn.equ(ee,N.size,Ac)||N.setSize(ee.width,ee.height,ee.updateStyle,ee.top,ee.left),T&&N.viewport.dpr!==$D(T)&&N.setDpr(T),N.frameloop!==P&&N.setFrameloop(P),N.onPointerMissed||N.set({onPointerMissed:b}),R&&!hn.equ(R,N.performance,Ac)&&N.set(Q=>({performance:{...Q.performance,...R}})),a=x,l=!0,this},render(h){return l||this.configure(),ep.updateContainer(at.jsx(AV,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){oL(n)}}}function AV({store:n,children:e,onCreated:t,rootElement:i}){return Lp(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),at.jsx(Xw.Provider,{value:n,children:e})}function oL(n,e){const t=Tf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),ep.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),oV(r),Tf.delete(n)}catch{}},500)})}}function SV(n,e,t){return at.jsx(MV,{children:n,container:e,state:t},e.uuid)}function MV({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=Jw(),[a]=se.useState(()=>new Gw),[l]=se.useState(()=>new Ee),u=se.useCallback((d,p)=>{const m={...d};Object.keys(d).forEach(x=>{(fV.includes(x)||d[x]!==p[x]&&p[x])&&delete m[x]});let v;if(p&&r){const x=p.camera;v=d.viewport.getCurrentViewport(x,new z,r),x!==d.camera&&tL(x,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...p==null?void 0:p.events,...i},size:{...d.size,...r},viewport:{...d.viewport,...v},...s}},[n]),[h]=se.useState(()=>{const d=o.getState();return GD((m,v)=>({...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...i},size:{...d.size,...r},...s,set:m,get:v,setEvents:x=>m(y=>({...y,events:{...y.events,...x}}))}))});return se.useEffect(()=>{const d=o.subscribe(p=>h.setState(m=>u(p,m)));return()=>{d()}},[u]),se.useEffect(()=>{h.setState(d=>u(o.getState(),d))},[u]),se.useEffect(()=>()=>{h.destroy()},[]),at.jsx(at.Fragment,{children:ep.createPortal(at.jsx(Xw.Provider,{value:h,children:e}),h,null)})}ep.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:se.version});const Nx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wV(n){const{handlePointer:e}=cV(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Nx).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=Nx[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=Nx[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function xS(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(l,e)),h&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}xS.debounce=xS;var EV=xS;const yP=eM(EV);var CV=Object.defineProperty,TV=Object.defineProperties,RV=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,bV=Object.prototype.hasOwnProperty,PV=Object.prototype.propertyIsEnumerable,AP=(n,e,t)=>e in n?CV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,SP=(n,e)=>{for(var t in e||(e={}))bV.call(e,t)&&AP(n,t,e[t]);if(xP)for(var t of xP(e))PV.call(e,t)&&AP(n,t,e[t]);return n},IV=(n,e)=>TV(n,RV(e)),MP,wP;typeof window<"u"&&((MP=window.document)!=null&&MP.createElement||((wP=window.navigator)==null?void 0:wP.product)==="ReactNative")?se.useLayoutEffect:se.useEffect;function aL(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=aL(i,e,t);if(r)return r;i=i.sibling}}function lL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const EP=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=EP;return}return EP.apply(this,arguments)};const Kw=lL(se.createContext(null));class uL extends se.Component{render(){return se.createElement(Kw.Provider,{value:this._reactInternals},this.props.children)}}function BV(){const n=se.useContext(Kw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=se.useId();return se.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=aL(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function DV(){const n=BV(),[e]=se.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Kw&&!e.has(r)&&e.set(r,se.useContext(lL(r)))}t=t.return}return e}function LV(){const n=DV();return se.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>se.createElement(e,null,se.createElement(t.Provider,IV(SP({},i),{value:n.get(t)}))),e=>se.createElement(uL,SP({},e))),[n])}function FV({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||typeof window<"u"&&window.ResizeObserver,[s,o]=se.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=se.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=se.useRef(!1);se.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,p,m]=se.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:A,top:S,width:w,height:P,bottom:T,right:R,x:D,y:C}=a.current.element.getBoundingClientRect(),b={left:A,top:S,width:w,height:P,bottom:T,right:R,x:D,y:C};a.current.element instanceof HTMLElement&&i&&(b.height=a.current.element.offsetHeight,b.width=a.current.element.offsetWidth),Object.freeze(b),h.current&&!kV(a.current.lastBounds,b)&&o(a.current.lastBounds=b)};return[g,u?yP(g,u):g,l?yP(g,l):g]},[o,i,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null)}function x(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})))}const y=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=cL(g),x())};return UV(m,!!e),NV(p),se.useEffect(()=>{v(),x()},[e,m,p]),se.useEffect(()=>v,[]),[y,s,d]}function NV(n){se.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function UV(n,e){se.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function cL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...cL(n.parentElement)]}const OV=["x","y","top","bottom","left","right","width","height"],kV=(n,e)=>OV.every(t=>n[t]===e[t]),zV=se.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=wV,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:y,raycaster:g,camera:A,scene:S,onPointerMissed:w,onCreated:P,...T},R){se.useMemo(()=>j_(zD),[]);const D=LV(),[C,b]=FV({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=se.useRef(null),J=se.useRef(null);se.useImperativeHandle(R,()=>N.current);const K=QD(w),[q,te]=se.useState(!1),[Z,oe]=se.useState(!1);if(q)throw q;if(Z)throw Z;const H=se.useRef(null);Lp(()=>{const Q=N.current;b.width>0&&b.height>0&&Q&&(H.current||(H.current=xV(Q)),H.current.configure({gl:s,events:o,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:x,performance:y,raycaster:g,camera:A,scene:S,size:b,onPointerMissed:(...ue)=>K.current==null?void 0:K.current(...ue),onCreated:ue=>{ue.events.connect==null||ue.events.connect(a?nV(a)?a.current:a:J.current),l&&ue.setEvents({compute:(me,Ie)=>{const ae=me[l+"X"],ve=me[l+"Y"];Ie.pointer.set(ae/Ie.size.width*2-1,-(ve/Ie.size.height)*2+1),Ie.raycaster.setFromCamera(Ie.pointer,Ie.camera)}}),P==null||P(ue)}}),H.current.render(at.jsx(D,{children:at.jsx(ZD,{set:oe,children:at.jsx(se.Suspense,{fallback:at.jsx(iV,{set:te}),children:e})})})))}),se.useEffect(()=>{const Q=N.current;if(Q)return()=>oL(Q)},[]);const ee=a?"none":"auto";return at.jsx("div",{ref:J,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...r},...T,children:at.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:at.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}),HV=se.forwardRef(function(e,t){return at.jsx(uL,{children:at.jsx(zV,{...e,ref:t})})});function Rf(){return Rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rf.apply(null,arguments)}const Fp=new z,Yw=new z,GV=new z,CP=new Ee;function VV(n,e,t){const i=Fp.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function WV(n,e){const t=Fp.setFromMatrixPosition(n.matrixWorld),i=Yw.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(GV);return r.angleTo(s)>Math.PI/2}function XV(n,e,t,i){const r=Fp.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),CP.set(s.x,s.y),t.setFromCamera(CP,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function JV(n,e){if(e instanceof na)return e.zoom;if(e instanceof Wn){const t=Fp.setFromMatrixPosition(n.matrixWorld),i=Yw.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function KV(n,e,t){if(e instanceof Wn||e instanceof na){const i=Fp.setFromMatrixPosition(n.matrixWorld),r=Yw.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const AS=n=>Math.abs(n)<1e-10?0:n;function fL(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=AS(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const YV=(n=>e=>fL(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),jV=(n=>(e,t)=>fL(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function QV(n){return n&&typeof n=="object"&&"current"in n}const ZV=se.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:v,material:x,geometry:y,zIndexRange:g=[16777271,0],calculatePosition:A=VV,as:S="div",wrapperClass:w,pointerEvents:P="auto",...T},R)=>{const{gl:D,camera:C,scene:b,size:N,raycaster:J,events:K,viewport:q}=Or(),[te]=se.useState(()=>document.createElement(S)),Z=se.useRef(),oe=se.useRef(null),H=se.useRef(0),ee=se.useRef([0,0]),Q=se.useRef(null),ue=se.useRef(null),me=(a==null?void 0:a.current)||K.connected||D.domElement.parentNode,Ie=se.useRef(null),ae=se.useRef(!1),ve=se.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&QV(d[0]),[d]);se.useLayoutEffect(()=>{const $e=D.domElement;d&&d==="blending"?($e.style.zIndex=`${Math.floor(g[0]/2)}`,$e.style.position="absolute",$e.style.pointerEvents="none"):($e.style.zIndex=null,$e.style.position=null,$e.style.pointerEvents=null)},[d]),se.useLayoutEffect(()=>{if(oe.current){const $e=Z.current=jM(te);if(b.updateMatrixWorld(),h)te.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ve=A(oe.current,C,N);te.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ve[0]}px,${Ve[1]}px,0);transform-origin:0 0;`}return me&&(r?me.prepend(te):me.appendChild(te)),()=>{me&&me.removeChild(te),$e.unmount()}}},[me,h]),se.useLayoutEffect(()=>{w&&(te.className=w)},[w]);const ye=se.useMemo(()=>h?{position:"absolute",top:0,left:0,width:N.width,height:N.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-N.height/2,left:-N.width/2,width:N.width,height:N.height},...t},[t,s,o,N,h]),be=se.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);se.useLayoutEffect(()=>{if(ae.current=!1,h){var $e;($e=Z.current)==null||$e.render(se.createElement("div",{ref:Q,style:ye},se.createElement("div",{ref:ue,style:be},se.createElement("div",{ref:R,className:i,style:t,children:n}))))}else{var Ve;(Ve=Z.current)==null||Ve.render(se.createElement("div",{ref:R,style:ye,className:i,children:n}))}});const Xe=se.useRef(!0);Yf($e=>{if(oe.current){C.updateMatrixWorld(),oe.current.updateWorldMatrix(!0,!1);const Ve=h?ee.current:A(oe.current,C,N);if(h||Math.abs(H.current-C.zoom)>e||Math.abs(ee.current[0]-Ve[0])>e||Math.abs(ee.current[1]-Ve[1])>e){const k=WV(oe.current,C);let Te=!1;ve&&(Array.isArray(d)?Te=d.map(rt=>rt.current):d!=="blending"&&(Te=[b]));const Pe=Xe.current;if(Te){const rt=XV(oe.current,C,J,Te);Xe.current=rt&&!k}else Xe.current=!k;Pe!==Xe.current&&(p?p(!Xe.current):te.style.display=Xe.current?"block":"none");const Oe=Math.floor(g[0]/2),Ae=d?ve?[g[0],Oe]:[Oe-1,0]:g;if(te.style.zIndex=`${KV(oe.current,C,Ae)}`,h){const[rt,ze]=[N.width/2,N.height/2],Qe=C.projectionMatrix.elements[5]*ze,{isOrthographicCamera:X,top:F,left:he,bottom:Se,right:xe}=C,Ce=YV(C.matrixWorldInverse),lt=X?`scale(${Qe})translate(${AS(-(xe+he)/2)}px,${AS((F+Se)/2)}px)`:`translateZ(${Qe}px)`;let Ue=oe.current.matrixWorld;u&&(Ue=C.matrixWorldInverse.clone().transpose().copyPosition(Ue).scale(oe.current.scale),Ue.elements[3]=Ue.elements[7]=Ue.elements[11]=0,Ue.elements[15]=1),te.style.width=N.width+"px",te.style.height=N.height+"px",te.style.perspective=X?"":`${Qe}px`,Q.current&&ue.current&&(Q.current.style.transform=`${lt}${Ce}translate(${rt}px,${ze}px)`,ue.current.style.transform=jV(Ue,1/((l||10)/400)))}else{const rt=l===void 0?1:JV(oe.current,C)*l;te.style.transform=`translate3d(${Ve[0]}px,${Ve[1]}px,0) scale(${rt})`}ee.current=Ve,H.current=C.zoom}}if(!ve&&Ie.current&&!ae.current)if(h){if(Q.current){const Ve=Q.current.children[0];if(Ve!=null&&Ve.clientWidth&&Ve!=null&&Ve.clientHeight){const{isOrthographicCamera:k}=C;if(k||y)T.scale&&(Array.isArray(T.scale)?T.scale instanceof z?Ie.current.scale.copy(T.scale.clone().divideScalar(1)):Ie.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Ie.current.scale.setScalar(1/T.scale));else{const Te=(l||10)/400,Pe=Ve.clientWidth*Te,Oe=Ve.clientHeight*Te;Ie.current.scale.set(Pe,Oe,1)}ae.current=!0}}}else{const Ve=te.children[0];if(Ve!=null&&Ve.clientWidth&&Ve!=null&&Ve.clientHeight){const k=1/q.factor,Te=Ve.clientWidth*k,Pe=Ve.clientHeight*k;Ie.current.scale.set(Te,Pe,1),ae.current=!0}Ie.current.lookAt($e.camera.position)}});const st=se.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return se.createElement("group",Rf({},T,{ref:oe}),d&&!ve&&se.createElement("mesh",{castShadow:m,receiveShadow:v,ref:Ie},y||se.createElement("planeGeometry",null),x||se.createElement("shaderMaterial",{side:lr,vertexShader:st.vertexShader,fragmentShader:st.fragmentShader})))}),hL=parseInt(Lu.replace(/\D+/g,""));function TP(n,e){if(e===T3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Rv||e===sw){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===Rv)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var os=Uint8Array,Ba=Uint16Array,SS=Uint32Array,dL=new os([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pL=new os([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qV=new os([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mL=function(n,e){for(var t=new Ba(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new SS(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},gL=mL(dL,2),vL=gL[0],$V=gL[1];vL[28]=258,$V[258]=28;var eW=mL(pL,0),tW=eW[0],MS=new Ba(32768);for(var _n=0;_n<32768;++_n){var Aa=(_n&43690)>>>1|(_n&21845)<<1;Aa=(Aa&52428)>>>2|(Aa&13107)<<2,Aa=(Aa&61680)>>>4|(Aa&3855)<<4,MS[_n]=((Aa&65280)>>>8|(Aa&255)<<8)>>>1}var md=function(n,e,t){for(var i=n.length,r=0,s=new Ba(e);r<i;++r)++s[n[r]-1];var o=new Ba(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Ba(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],h=e-n[r],d=o[n[r]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)a[MS[d]>>>l]=u}else for(a=new Ba(i),r=0;r<i;++r)n[r]&&(a[r]=MS[o[n[r]-1]++]>>>15-n[r]);return a},Np=new os(288);for(var _n=0;_n<144;++_n)Np[_n]=8;for(var _n=144;_n<256;++_n)Np[_n]=9;for(var _n=256;_n<280;++_n)Np[_n]=7;for(var _n=280;_n<288;++_n)Np[_n]=8;var _L=new os(32);for(var _n=0;_n<32;++_n)_L[_n]=5;var nW=md(Np,9,1),iW=md(_L,5,1),Ux=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Cs=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},Ox=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},rW=function(n){return(n/8|0)+(n&7&&1)},sW=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Ba?Ba:n instanceof SS?SS:os)(t-e);return i.set(n.subarray(e,t)),i},oW=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new os(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new os(i*3));var o=function(ye){var be=e.length;if(ye>be){var Xe=new os(Math.max(be*2,ye));Xe.set(e),e=Xe}},a=t.f||0,l=t.p||0,u=t.b||0,h=t.l,d=t.d,p=t.m,m=t.n,v=i*8;do{if(!h){t.f=a=Cs(n,l,1);var x=Cs(n,l+1,3);if(l+=3,x)if(x==1)h=nW,d=iW,p=9,m=5;else if(x==2){var S=Cs(n,l,31)+257,w=Cs(n,l+10,15)+4,P=S+Cs(n,l+5,31)+1;l+=14;for(var T=new os(P),R=new os(19),D=0;D<w;++D)R[qV[D]]=Cs(n,l+D*3,7);l+=w*3;for(var C=Ux(R),b=(1<<C)-1,N=md(R,C,1),D=0;D<P;){var J=N[Cs(n,l,b)];l+=J&15;var y=J>>>4;if(y<16)T[D++]=y;else{var K=0,q=0;for(y==16?(q=3+Cs(n,l,3),l+=2,K=T[D-1]):y==17?(q=3+Cs(n,l,7),l+=3):y==18&&(q=11+Cs(n,l,127),l+=7);q--;)T[D++]=K}}var te=T.subarray(0,S),Z=T.subarray(S);p=Ux(te),m=Ux(Z),h=md(te,p,1),d=md(Z,m,1)}else throw"invalid block type";else{var y=rW(l)+4,g=n[y-4]|n[y-3]<<8,A=y+g;if(A>i){if(s)throw"unexpected EOF";break}r&&o(u+g),e.set(n.subarray(y,A),u),t.b=u+=g,t.p=l=A*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var oe=(1<<p)-1,H=(1<<m)-1,ee=l;;ee=l){var K=h[Ox(n,l)&oe],Q=K>>>4;if(l+=K&15,l>v){if(s)throw"unexpected EOF";break}if(!K)throw"invalid length/literal";if(Q<256)e[u++]=Q;else if(Q==256){ee=l,h=null;break}else{var ue=Q-254;if(Q>264){var D=Q-257,me=dL[D];ue=Cs(n,l,(1<<me)-1)+vL[D],l+=me}var Ie=d[Ox(n,l)&H],ae=Ie>>>4;if(!Ie)throw"invalid distance";l+=Ie&15;var Z=tW[ae];if(ae>3){var me=pL[ae];Z+=Ox(n,l)&(1<<me)-1,l+=me}if(l>v){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var ve=u+ue;u<ve;u+=4)e[u]=e[u-Z],e[u+1]=e[u+1-Z],e[u+2]=e[u+2-Z],e[u+3]=e[u+3-Z];u=ve}}t.l=h,t.p=ee,t.b=u,h&&(a=1,t.m=p,t.d=d,t.n=m)}while(!a);return u==e.length?e:sW(e,0,u)},aW=new os(0),lW=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Kg(n,e){return oW((lW(n),n.subarray(2,-4)),e)}var uW=typeof TextDecoder<"u"&&new TextDecoder,cW=0;try{uW.decode(aW,{stream:!0}),cW=1}catch{}var fW=Object.defineProperty,hW=(n,e,t)=>e in n?fW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yL=(n,e,t)=>(hW(n,typeof e!="symbol"?e+"":e,t),t);const _0={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new z},up:{value:new z(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${hL>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},xL=new mi({name:"SkyShader",fragmentShader:_0.fragmentShader,vertexShader:_0.vertexShader,uniforms:C_.clone(_0.uniforms),side:Fi,depthWrite:!1});let jw=class extends xn{constructor(){super(new cl(1,1,1),xL)}};yL(jw,"SkyShader",_0);yL(jw,"material",xL);const dW=n=>n&&n.isCubeTexture;class pW extends xn{constructor(e,t){var i,r;const s=dW(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),h=3*Math.max(u,16*7),d=4*u,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Lu.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new Pp(1,16),g=new mi({uniforms:x,fragmentShader:v,vertexShader:m,side:lr});super(y,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function Bv(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const nu="srgb",Xo="srgb-linear",RP=3001,mW=3e3;class Qw extends Mi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xW(t)}),this.register(function(t){return new AW(t)}),this.register(function(t){return new PW(t)}),this.register(function(t){return new IW(t)}),this.register(function(t){return new BW(t)}),this.register(function(t){return new MW(t)}),this.register(function(t){return new wW(t)}),this.register(function(t){return new EW(t)}),this.register(function(t){return new CW(t)}),this.register(function(t){return new yW(t)}),this.register(function(t){return new TW(t)}),this.register(function(t){return new SW(t)}),this.register(function(t){return new bW(t)}),this.register(function(t){return new RW(t)}),this.register(function(t){return new vW(t)}),this.register(function(t){return new DW(t)}),this.register(function(t){return new LW(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Ya.extractUrlBase(e);o=Ya.resolveURL(u,this.path)}else o=Ya.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ai(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Bv(new Uint8Array(e.slice(0,4)))===AL){try{o[kt.KHR_BINARY_GLTF]=new FW(e)}catch(h){r&&r(h);return}s=JSON.parse(o[kt.KHR_BINARY_GLTF].content)}else s=JSON.parse(Bv(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new YW(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case kt.KHR_MATERIALS_UNLIT:o[h]=new _W;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[h]=new NW(s,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[h]=new UW;break;case kt.KHR_MESH_QUANTIZATION:o[h]=new OW;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function gW(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class vW{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new He(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Xo);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new Nw(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Fw(h),u.distance=d;break;case"spot":u=new Lw(h),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Bo(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class _W{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return cr}extendParams(e,t,i){const r=[];e.color=new He(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Xo),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,nu))}return Promise.all(r)}}class yW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class xW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ee(a,a)}return Promise.all(s)}}class AW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class SW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class MW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new He(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Xo)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,nu)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class wW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class EW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new He().setRGB(a[0],a[1],a[2],Xo),Promise.all(s)}}class CW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class TW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new He().setRGB(a[0],a[1],a[2],Xo),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,nu)),Promise.all(s)}}class RW{constructor(e){this.parser=e,this.name=kt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class bW{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:_s}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class PW{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class IW{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class BW{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class DW{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,h=r.count,d=r.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,r.mode,r.filter),m})})}else return null}}class LW{constructor(e){this.name=kt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==is.TRIANGLES&&u.mode!==is.TRIANGLE_STRIP&&u.mode!==is.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),d=h.isGroup?h.children:[h],p=u[0].count,m=[];for(const v of d){const x=new dt,y=new z,g=new Ni,A=new z(1,1,1),S=new yw(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&A.fromBufferAttribute(l.SCALE,w),S.setMatrixAt(w,x.compose(y,g,A));for(const w in l)if(w==="_COLOR_0"){const P=l[w];S.instanceColor=new Qo(P.array,P.itemSize,P.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);Gt.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const AL="glTF",Oh=12,bP={JSON:1313821514,BIN:5130562};class FW{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Oh);if(this.header={magic:Bv(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==AL)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Oh,r=new DataView(e,Oh);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===bP.JSON){const l=new Uint8Array(e,Oh+s,o);this.content=Bv(l)}else if(a===bP.BIN){const l=Oh+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class NW{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const d=wS[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=wS[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=nf[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d,p){r.decodeDracoFile(h,function(m){for(const v in m.attributes){const x=m.attributes[v],y=l[v];y!==void 0&&(x.normalized=y)}d(m)},a,u,Xo,p)})})}}class UW{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class OW{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class SL extends Kf{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=r-t,d=(i-t)/h,p=d*d,m=p*d,v=e*u,x=v-u,y=-2*m+3*p,g=m-p,A=1-y,S=g-p+d;for(let w=0;w!==a;w++){const P=o[x+w+a],T=o[x+w+l]*h,R=o[v+w+a],D=o[v+w]*h;s[w]=A*P+S*T+y*R+g*D}return s}}const kW=new Ni;class zW extends SL{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return kW.fromArray(s).normalize().toArray(s),s}}const is={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},nf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},PP={9728:ii,9729:Jt,9984:g_,9985:$c,9986:jl,9987:us},IP={33071:Xn,33648:yf,10497:nl},kx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...hL>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Sa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},HW={CUBICSPLINE:void 0,LINEAR:Sf,STEP:Af},zx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GW(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Dp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ho})),n.DefaultMaterial}function Ul(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Bo(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function VW(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const d=e[u];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];if(i){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function WW(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function XW(n){let e;const t=n.extensions&&n.extensions[kt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Hx(t.attributes):e=n.indices+":"+Hx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+Hx(n.targets[i]);return e}function Hx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function ES(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function JW(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const KW=new dt;class YW{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Bw(this.options.manager):this.textureLoader=new LD(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ai(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Ul(s,a,r),Bo(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Ya.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=kx[r.type],a=nf[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new jt(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=kx[r.type],u=nf[r.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let x,y;if(m&&m!==d){const g=Math.floor(p/m),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let S=t.cache.get(A);S||(x=new u(a,g*m,r.count*m/h),S=new Tp(x,m/h),t.cache.add(A,S)),y=new il(S,l,p%m/h,v)}else a===null?x=new u(r.count*l):x=new u(a,p,r.count*l),y=new jt(x,l,v);if(r.sparse!==void 0){const g=kx.SCALAR,A=nf[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,P=new A(o[1],S,r.sparse.count*g),T=new u(o[2],w,r.sparse.count*l);a!==null&&(y=new jt(y.array.slice(),y.itemSize,y.normalized));for(let R=0,D=P.length;R<D;R++){const C=P[R];if(y.setX(C,T[R*l]),l>=2&&y.setY(C,T[R*l+1]),l>=3&&y.setZ(C,T[R*l+2]),l>=4&&y.setW(C,T[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=PP[p.magFilter]||Jt,h.minFilter=PP[p.minFilter]||us,h.wrapS=IP[p.wrapS]||nl,h.wrapT=IP[p.wrapT]||nl,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(x){const y=new en(x);y.needsUpdate=!0,p(y)}),t.load(Ya.resolveURL(d,s.path),v,void 0,m)})}).then(function(d){return u===!0&&a.revokeObjectURL(l),Bo(d,o),d.userData.mimeType=o.mimeType||JW(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===RP?nu:Xo),"colorSpace"in o?o.colorSpace=r:o.encoding=r===nu?RP:mW),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new B_,$n.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Hi,$n.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Dp}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[kt.KHR_MATERIALS_UNLIT]){const d=r[kt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),u.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new He(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Xo),a.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",d.baseColorTexture,nu)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=lr);const h=s.alphaMode||zx.OPAQUE;if(h===zx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===zx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==cr&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ee(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==cr&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==cr){const d=s.emissiveFactor;a.emissive=new He().setRGB(d[0],d[1],d[2],Xo)}return s.emissiveTexture!==void 0&&o!==cr&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,nu)),Promise.all(u).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Bo(d,s),t.associations.set(d,{materials:e}),s.extensions&&Ul(r,d,s),d})}createUniqueName(e){const t=Xt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return BP(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=XW(u),d=r[h];if(d)o.push(d.promise);else{let p;u.extensions&&u.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=BP(new Et,u,t),r[h]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?GW(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,v=h.length;m<v;m++){const x=h[m],y=o[m];let g;const A=u[m];if(y.mode===is.TRIANGLES||y.mode===is.TRIANGLE_STRIP||y.mode===is.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new _w(x,A):new xn(x,A),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),y.mode===is.TRIANGLE_STRIP?g.geometry=TP(g.geometry,sw):y.mode===is.TRIANGLE_FAN&&(g.geometry=TP(g.geometry,Rv));else if(y.mode===is.LINES)g=new zs(x,A);else if(y.mode===is.LINE_STRIP)g=new Zo(x,A);else if(y.mode===is.LINE_LOOP)g=new xw(x,A);else if(y.mode===is.POINTS)g=new Aw(x,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&WW(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Bo(g,s),y.extensions&&Ul(r,g,y),t.assignFinalMaterial(g),d.push(g)}for(let m=0,v=d.length;m<v;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Ul(r,d[0],s),d[0];const p=new Go;s.extensions&&Ul(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=d.length;m<v;m++)p.add(d[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Wn(lw.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new na(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Bo(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const d=o[u];if(d){a.push(d);const p=new dt;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Rp(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],u=[],h=[];for(let d=0,p=r.channels.length;d<p;d++){const m=r.channels[d],v=r.samplers[m.sampler],x=m.target,y=x.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,A=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",A)),u.push(v),h.push(x))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(d){const p=d[0],m=d[1],v=d[2],x=d[3],y=d[4],g=[];for(let A=0,S=p.length;A<S;A++){const w=p[A],P=m[A],T=v[A],R=x[A],D=y[A];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const C=i._createAnimationTracks(w,P,T,R,D);if(C)for(let b=0;b<C.length;b++)g.push(C[b])}return new Cf(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,h=a.length;u<h;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],d=u[1],p=u[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,KW)});for(let m=0,v=d.length;m<v;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new I_:u.length>1?h=new Go:u.length===1?h=u[0]:h=new Gt,h!==u[0])for(let d=0,p=u.length;d<p;d++)h.add(u[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Bo(h,s),s.extensions&&Ul(i,h,s),s.matrix!==void 0){const d=new dt;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Go;i.name&&(s.name=r.createUniqueName(i.name)),Bo(s,i),i.extensions&&Ul(t,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const u=h=>{const d=new Map;for(const[p,m]of r.associations)(p instanceof $n||p instanceof en)&&d.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&d.set(p,m)}),d};return r.associations=u(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Sa[s.path]===Sa.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(Sa[s.path]){case Sa.weights:u=Tu;break;case Sa.rotation:u=Ru;break;case Sa.position:case Sa.scale:u=bu;break;default:switch(i.itemSize){case 1:u=Tu;break;case 2:case 3:default:u=bu;break}break}const h=r.interpolation!==void 0?HW[r.interpolation]:Sf,d=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new u(l[p]+"."+Sa[s.path],t.array,d,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=ES(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Ru?zW:SL;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function jW(n,e,t){const i=e.attributes,r=new Ui;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new z(l[0],l[1],l[2]),new z(u[0],u[1],u[2])),a.normalized){const h=ES(nf[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new z,l=new z;for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const x=ES(nf[p.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new xi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function BP(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=wS[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Bo(n,e),jW(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?VW(n,e.targets,t):n})}class QW extends Iw{constructor(e){super(e),this.type=ri}parse(e){const o=function(D,C){switch(D){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},h=`
`,d=function(D,C,b){C=C||1024;let J=D.pos,K=-1,q=0,te="",Z=String.fromCharCode.apply(null,new Uint16Array(D.subarray(J,J+128)));for(;0>(K=Z.indexOf(h))&&q<C&&J<D.byteLength;)te+=Z,q+=Z.length,J+=128,Z+=String.fromCharCode.apply(null,new Uint16Array(D.subarray(J,J+128)));return-1<K?(D.pos+=q+K+1,te+Z.slice(0,K)):!1},p=function(D){const C=/^#\?(\S+)/,b=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,N=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,J=/^\s*FORMAT=(\S+)\s*$/,K=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,q={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let te,Z;for((D.pos>=D.byteLength||!(te=d(D)))&&o(1,"no header found"),(Z=te.match(C))||o(3,"bad initial token"),q.valid|=1,q.programtype=Z[1],q.string+=te+`
`;te=d(D),te!==!1;){if(q.string+=te+`
`,te.charAt(0)==="#"){q.comments+=te+`
`;continue}if((Z=te.match(b))&&(q.gamma=parseFloat(Z[1])),(Z=te.match(N))&&(q.exposure=parseFloat(Z[1])),(Z=te.match(J))&&(q.valid|=2,q.format=Z[1]),(Z=te.match(K))&&(q.valid|=4,q.height=parseInt(Z[1],10),q.width=parseInt(Z[2],10)),q.valid&2&&q.valid&4)break}return q.valid&2||o(3,"missing format specifier"),q.valid&4||o(3,"missing image size specifier"),q},m=function(D,C,b){const N=C;if(N<8||N>32767||D[0]!==2||D[1]!==2||D[2]&128)return new Uint8Array(D);N!==(D[2]<<8|D[3])&&o(3,"wrong scanline width");const J=new Uint8Array(4*C*b);J.length||o(4,"unable to allocate buffer space");let K=0,q=0;const te=4*N,Z=new Uint8Array(4),oe=new Uint8Array(te);let H=b;for(;H>0&&q<D.byteLength;){q+4>D.byteLength&&o(1),Z[0]=D[q++],Z[1]=D[q++],Z[2]=D[q++],Z[3]=D[q++],(Z[0]!=2||Z[1]!=2||(Z[2]<<8|Z[3])!=N)&&o(3,"bad rgbe scanline format");let ee=0,Q;for(;ee<te&&q<D.byteLength;){Q=D[q++];const me=Q>128;if(me&&(Q-=128),(Q===0||ee+Q>te)&&o(3,"bad scanline data"),me){const Ie=D[q++];for(let ae=0;ae<Q;ae++)oe[ee++]=Ie}else oe.set(D.subarray(q,q+Q),ee),ee+=Q,q+=Q}const ue=N;for(let me=0;me<ue;me++){let Ie=0;J[K]=oe[me+Ie],Ie+=N,J[K+1]=oe[me+Ie],Ie+=N,J[K+2]=oe[me+Ie],Ie+=N,J[K+3]=oe[me+Ie],K+=4}H--}return J},v=function(D,C,b,N){const J=D[C+3],K=Math.pow(2,J-128)/255;b[N+0]=D[C+0]*K,b[N+1]=D[C+1]*K,b[N+2]=D[C+2]*K,b[N+3]=1},x=function(D,C,b,N){const J=D[C+3],K=Math.pow(2,J-128)/255;b[N+0]=$l.toHalfFloat(Math.min(D[C+0]*K,65504)),b[N+1]=$l.toHalfFloat(Math.min(D[C+1]*K,65504)),b[N+2]=$l.toHalfFloat(Math.min(D[C+2]*K,65504)),b[N+3]=$l.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const g=p(y),A=g.width,S=g.height,w=m(y.subarray(y.pos),A,S);let P,T,R;switch(this.type){case En:R=w.length/4;const D=new Float32Array(R*4);for(let b=0;b<R;b++)v(w,b*4,D,b*4);P=D,T=En;break;case ri:R=w.length/4;const C=new Uint16Array(R*4);for(let b=0;b<R;b++)x(w,b*4,C,b*4);P=C,T=ri;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:S,data:P,header:g.string,gamma:g.gamma,exposure:g.exposure,type:T}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case En:case ri:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Jt,o.magFilter=Jt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const kh="colorSpace"in new en;class ZW extends Iw{constructor(e){super(e),this.type=ri}parse(e){const C=Math.pow(2.7182818,2.2);function b(L,U){for(var j=0,B=0;B<65536;++B)(B==0||L[B>>3]&1<<(B&7))&&(U[j++]=B);for(var O=j-1;j<65536;)U[j++]=0;return O}function N(L){for(var U=0;U<16384;U++)L[U]={},L[U].len=0,L[U].lit=0,L[U].p=null}const J={l:0,c:0,lc:0};function K(L,U,j,B,O){for(;j<L;)U=U<<8|At(B,O),j+=8;j-=L,J.l=U>>j&(1<<L)-1,J.c=U,J.lc=j}const q=new Array(59);function te(L){for(var U=0;U<=58;++U)q[U]=0;for(var U=0;U<65537;++U)q[L[U]]+=1;for(var j=0,U=58;U>0;--U){var B=j+q[U]>>1;q[U]=j,j=B}for(var U=0;U<65537;++U){var O=L[U];O>0&&(L[U]=O|q[O]++<<6)}}function Z(L,U,j,B,O,G,Y){for(var V=j,le=0,ce=0;O<=G;O++){if(V.value-j.value>B)return!1;K(6,le,ce,L,V);var pe=J.l;if(le=J.c,ce=J.lc,Y[O]=pe,pe==63){if(V.value-j.value>B)throw"Something wrong with hufUnpackEncTable";K(8,le,ce,L,V);var de=J.l+6;if(le=J.c,ce=J.lc,O+de>G+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)Y[O++]=0;O--}else if(pe>=59){var de=pe-59+2;if(O+de>G+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)Y[O++]=0;O--}}te(Y)}function oe(L){return L&63}function H(L){return L>>6}function ee(L,U,j,B){for(;U<=j;U++){var O=H(L[U]),G=oe(L[U]);if(O>>G)throw"Invalid table entry";if(G>14){var Y=B[O>>G-14];if(Y.len)throw"Invalid table entry";if(Y.lit++,Y.p){var V=Y.p;Y.p=new Array(Y.lit);for(var le=0;le<Y.lit-1;++le)Y.p[le]=V[le]}else Y.p=new Array(1);Y.p[Y.lit-1]=U}else if(G)for(var ce=0,le=1<<14-G;le>0;le--){var Y=B[(O<<14-G)+ce];if(Y.len||Y.p)throw"Invalid table entry";Y.len=G,Y.lit=U,ce++}}return!0}const Q={c:0,lc:0};function ue(L,U,j,B){L=L<<8|At(j,B),U+=8,Q.c=L,Q.lc=U}const me={c:0,lc:0};function Ie(L,U,j,B,O,G,Y,V,le,ce){if(L==U){B<8&&(ue(j,B,O,Y),j=Q.c,B=Q.lc),B-=8;var pe=j>>B,pe=new Uint8Array([pe])[0];if(le.value+pe>ce)return!1;for(var de=V[le.value-1];pe-- >0;)V[le.value++]=de}else if(le.value<ce)V[le.value++]=L;else return!1;me.c=j,me.lc=B}function ae(L){return L&65535}function ve(L){var U=ae(L);return U>32767?U-65536:U}const ye={a:0,b:0};function be(L,U){var j=ve(L),B=ve(U),O=B,G=j+(O&1)+(O>>1),Y=G,V=G-O;ye.a=Y,ye.b=V}function Xe(L,U){var j=ae(L),B=ae(U),O=j-(B>>1)&65535,G=B+O-32768&65535;ye.a=G,ye.b=O}function st(L,U,j,B,O,G,Y){for(var V=Y<16384,le=j>O?O:j,ce=1,pe;ce<=le;)ce<<=1;for(ce>>=1,pe=ce,ce>>=1;ce>=1;){for(var de=0,We=de+G*(O-pe),Re=G*ce,we=G*pe,Ye=B*ce,nt=B*pe,ft,xt,Je,Be;de<=We;de+=we){for(var mt=de,ut=de+B*(j-pe);mt<=ut;mt+=nt){var gt=mt+Ye,Kt=mt+Re,nn=Kt+Ye;V?(be(L[mt+U],L[Kt+U]),ft=ye.a,Je=ye.b,be(L[gt+U],L[nn+U]),xt=ye.a,Be=ye.b,be(ft,xt),L[mt+U]=ye.a,L[gt+U]=ye.b,be(Je,Be),L[Kt+U]=ye.a,L[nn+U]=ye.b):(Xe(L[mt+U],L[Kt+U]),ft=ye.a,Je=ye.b,Xe(L[gt+U],L[nn+U]),xt=ye.a,Be=ye.b,Xe(ft,xt),L[mt+U]=ye.a,L[gt+U]=ye.b,Xe(Je,Be),L[Kt+U]=ye.a,L[nn+U]=ye.b)}if(j&ce){var Kt=mt+Re;V?be(L[mt+U],L[Kt+U]):Xe(L[mt+U],L[Kt+U]),ft=ye.a,L[Kt+U]=ye.b,L[mt+U]=ft}}if(O&ce)for(var mt=de,ut=de+B*(j-pe);mt<=ut;mt+=nt){var gt=mt+Ye;V?be(L[mt+U],L[gt+U]):Xe(L[mt+U],L[gt+U]),ft=ye.a,L[gt+U]=ye.b,L[mt+U]=ft}pe=ce,ce>>=1}return de}function $e(L,U,j,B,O,G,Y,V,le,ce){for(var pe=0,de=0,We=V,Re=Math.trunc(O.value+(G+7)/8);O.value<Re;)for(ue(pe,de,j,O),pe=Q.c,de=Q.lc;de>=14;){var we=pe>>de-14&16383,Ye=U[we];if(Ye.len)de-=Ye.len,Ie(Ye.lit,Y,pe,de,j,B,O,le,ce,We),pe=me.c,de=me.lc;else{if(!Ye.p)throw"hufDecode issues";var nt;for(nt=0;nt<Ye.lit;nt++){for(var ft=oe(L[Ye.p[nt]]);de<ft&&O.value<Re;)ue(pe,de,j,O),pe=Q.c,de=Q.lc;if(de>=ft&&H(L[Ye.p[nt]])==(pe>>de-ft&(1<<ft)-1)){de-=ft,Ie(Ye.p[nt],Y,pe,de,j,B,O,le,ce,We),pe=me.c,de=me.lc;break}}if(nt==Ye.lit)throw"hufDecode issues"}}var xt=8-G&7;for(pe>>=xt,de-=xt;de>0;){var Ye=U[pe<<14-de&16383];if(Ye.len)de-=Ye.len,Ie(Ye.lit,Y,pe,de,j,B,O,le,ce,We),pe=me.c,de=me.lc;else throw"hufDecode issues"}return!0}function Ve(L,U,j,B,O,G){var Y={value:0},V=j.value,le=Ge(U,j),ce=Ge(U,j);j.value+=4;var pe=Ge(U,j);if(j.value+=4,le<0||le>=65537||ce<0||ce>=65537)throw"Something wrong with HUF_ENCSIZE";var de=new Array(65537),We=new Array(16384);N(We);var Re=B-(j.value-V);if(Z(L,U,j,Re,le,ce,de),pe>8*(B-(j.value-V)))throw"Something wrong with hufUncompress";ee(de,le,ce,We),$e(de,We,L,U,j,pe,ce,G,O,Y)}function k(L,U,j){for(var B=0;B<j;++B)U[B]=L[U[B]]}function Te(L){for(var U=1;U<L.length;U++){var j=L[U-1]+L[U]-128;L[U]=j}}function Pe(L,U){for(var j=0,B=Math.floor((L.length+1)/2),O=0,G=L.length-1;!(O>G||(U[O++]=L[j++],O>G));)U[O++]=L[B++]}function Oe(L){for(var U=L.byteLength,j=new Array,B=0,O=new DataView(L);U>0;){var G=O.getInt8(B++);if(G<0){var Y=-G;U-=Y+1;for(var V=0;V<Y;V++)j.push(O.getUint8(B++))}else{var Y=G;U-=2;for(var le=O.getUint8(B++),V=0;V<Y+1;V++)j.push(le)}}return j}function Ae(L,U,j,B,O,G){var gt=new DataView(G.buffer),Y=j[L.idx[0]].width,V=j[L.idx[0]].height,le=3,ce=Math.floor(Y/8),pe=Math.ceil(Y/8),de=Math.ceil(V/8),We=Y-(pe-1)*8,Re=V-(de-1)*8,we={value:0},Ye=new Array(le),nt=new Array(le),ft=new Array(le),xt=new Array(le),Je=new Array(le);for(let Lt=0;Lt<le;++Lt)Je[Lt]=U[L.idx[Lt]],Ye[Lt]=Lt<1?0:Ye[Lt-1]+pe*de,nt[Lt]=new Float32Array(64),ft[Lt]=new Uint16Array(64),xt[Lt]=new Uint16Array(pe*64);for(let Lt=0;Lt<de;++Lt){var Be=8;Lt==de-1&&(Be=Re);var mt=8;for(let Tt=0;Tt<pe;++Tt){Tt==pe-1&&(mt=We);for(let Ht=0;Ht<le;++Ht)ft[Ht].fill(0),ft[Ht][0]=O[Ye[Ht]++],rt(we,B,ft[Ht]),ze(ft[Ht],nt[Ht]),Qe(nt[Ht]);X(nt);for(let Ht=0;Ht<le;++Ht)F(nt[Ht],xt[Ht],Tt*64)}let Cn=0;for(let Tt=0;Tt<le;++Tt){const Ht=j[L.idx[Tt]].type;for(let cn=8*Lt;cn<8*Lt+Be;++cn){Cn=Je[Tt][cn];for(let Jr=0;Jr<ce;++Jr){const Vi=Jr*64+(cn&7)*8;gt.setUint16(Cn+0*2*Ht,xt[Tt][Vi+0],!0),gt.setUint16(Cn+1*2*Ht,xt[Tt][Vi+1],!0),gt.setUint16(Cn+2*2*Ht,xt[Tt][Vi+2],!0),gt.setUint16(Cn+3*2*Ht,xt[Tt][Vi+3],!0),gt.setUint16(Cn+4*2*Ht,xt[Tt][Vi+4],!0),gt.setUint16(Cn+5*2*Ht,xt[Tt][Vi+5],!0),gt.setUint16(Cn+6*2*Ht,xt[Tt][Vi+6],!0),gt.setUint16(Cn+7*2*Ht,xt[Tt][Vi+7],!0),Cn+=8*2*Ht}}if(ce!=pe)for(let cn=8*Lt;cn<8*Lt+Be;++cn){const Jr=Je[Tt][cn]+8*ce*2*Ht,Vi=ce*64+(cn&7)*8;for(let Ws=0;Ws<mt;++Ws)gt.setUint16(Jr+Ws*2*Ht,xt[Tt][Vi+Ws],!0)}}}for(var ut=new Uint16Array(Y),gt=new DataView(G.buffer),Kt=0;Kt<le;++Kt){j[L.idx[Kt]].decoded=!0;var nn=j[L.idx[Kt]].type;if(j[Kt].type==2)for(var An=0;An<V;++An){const Lt=Je[Kt][An];for(var Ot=0;Ot<Y;++Ot)ut[Ot]=gt.getUint16(Lt+Ot*2*nn,!0);for(var Ot=0;Ot<Y;++Ot)gt.setFloat32(Lt+Ot*2*nn,ie(ut[Ot]),!0)}}}function rt(L,U,j){for(var B,O=1;O<64;)B=U[L.value],B==65280?O=64:B>>8==255?O+=B&255:(j[O]=B,O++),L.value++}function ze(L,U){U[0]=ie(L[0]),U[1]=ie(L[1]),U[2]=ie(L[5]),U[3]=ie(L[6]),U[4]=ie(L[14]),U[5]=ie(L[15]),U[6]=ie(L[27]),U[7]=ie(L[28]),U[8]=ie(L[2]),U[9]=ie(L[4]),U[10]=ie(L[7]),U[11]=ie(L[13]),U[12]=ie(L[16]),U[13]=ie(L[26]),U[14]=ie(L[29]),U[15]=ie(L[42]),U[16]=ie(L[3]),U[17]=ie(L[8]),U[18]=ie(L[12]),U[19]=ie(L[17]),U[20]=ie(L[25]),U[21]=ie(L[30]),U[22]=ie(L[41]),U[23]=ie(L[43]),U[24]=ie(L[9]),U[25]=ie(L[11]),U[26]=ie(L[18]),U[27]=ie(L[24]),U[28]=ie(L[31]),U[29]=ie(L[40]),U[30]=ie(L[44]),U[31]=ie(L[53]),U[32]=ie(L[10]),U[33]=ie(L[19]),U[34]=ie(L[23]),U[35]=ie(L[32]),U[36]=ie(L[39]),U[37]=ie(L[45]),U[38]=ie(L[52]),U[39]=ie(L[54]),U[40]=ie(L[20]),U[41]=ie(L[22]),U[42]=ie(L[33]),U[43]=ie(L[38]),U[44]=ie(L[46]),U[45]=ie(L[51]),U[46]=ie(L[55]),U[47]=ie(L[60]),U[48]=ie(L[21]),U[49]=ie(L[34]),U[50]=ie(L[37]),U[51]=ie(L[47]),U[52]=ie(L[50]),U[53]=ie(L[56]),U[54]=ie(L[59]),U[55]=ie(L[61]),U[56]=ie(L[35]),U[57]=ie(L[36]),U[58]=ie(L[48]),U[59]=ie(L[49]),U[60]=ie(L[57]),U[61]=ie(L[58]),U[62]=ie(L[62]),U[63]=ie(L[63])}function Qe(L){const U=.5*Math.cos(.7853975),j=.5*Math.cos(3.14159/16),B=.5*Math.cos(3.14159/8),O=.5*Math.cos(3*3.14159/16),G=.5*Math.cos(5*3.14159/16),Y=.5*Math.cos(3*3.14159/8),V=.5*Math.cos(7*3.14159/16);for(var le=new Array(4),ce=new Array(4),pe=new Array(4),de=new Array(4),We=0;We<8;++We){var Re=We*8;le[0]=B*L[Re+2],le[1]=Y*L[Re+2],le[2]=B*L[Re+6],le[3]=Y*L[Re+6],ce[0]=j*L[Re+1]+O*L[Re+3]+G*L[Re+5]+V*L[Re+7],ce[1]=O*L[Re+1]-V*L[Re+3]-j*L[Re+5]-G*L[Re+7],ce[2]=G*L[Re+1]-j*L[Re+3]+V*L[Re+5]+O*L[Re+7],ce[3]=V*L[Re+1]-G*L[Re+3]+O*L[Re+5]-j*L[Re+7],pe[0]=U*(L[Re+0]+L[Re+4]),pe[3]=U*(L[Re+0]-L[Re+4]),pe[1]=le[0]+le[3],pe[2]=le[1]-le[2],de[0]=pe[0]+pe[1],de[1]=pe[3]+pe[2],de[2]=pe[3]-pe[2],de[3]=pe[0]-pe[1],L[Re+0]=de[0]+ce[0],L[Re+1]=de[1]+ce[1],L[Re+2]=de[2]+ce[2],L[Re+3]=de[3]+ce[3],L[Re+4]=de[3]-ce[3],L[Re+5]=de[2]-ce[2],L[Re+6]=de[1]-ce[1],L[Re+7]=de[0]-ce[0]}for(var we=0;we<8;++we)le[0]=B*L[16+we],le[1]=Y*L[16+we],le[2]=B*L[48+we],le[3]=Y*L[48+we],ce[0]=j*L[8+we]+O*L[24+we]+G*L[40+we]+V*L[56+we],ce[1]=O*L[8+we]-V*L[24+we]-j*L[40+we]-G*L[56+we],ce[2]=G*L[8+we]-j*L[24+we]+V*L[40+we]+O*L[56+we],ce[3]=V*L[8+we]-G*L[24+we]+O*L[40+we]-j*L[56+we],pe[0]=U*(L[we]+L[32+we]),pe[3]=U*(L[we]-L[32+we]),pe[1]=le[0]+le[3],pe[2]=le[1]-le[2],de[0]=pe[0]+pe[1],de[1]=pe[3]+pe[2],de[2]=pe[3]-pe[2],de[3]=pe[0]-pe[1],L[0+we]=de[0]+ce[0],L[8+we]=de[1]+ce[1],L[16+we]=de[2]+ce[2],L[24+we]=de[3]+ce[3],L[32+we]=de[3]-ce[3],L[40+we]=de[2]-ce[2],L[48+we]=de[1]-ce[1],L[56+we]=de[0]-ce[0]}function X(L){for(var U=0;U<64;++U){var j=L[0][U],B=L[1][U],O=L[2][U];L[0][U]=j+1.5747*O,L[1][U]=j-.1873*B-.4682*O,L[2][U]=j+1.8556*B}}function F(L,U,j){for(var B=0;B<64;++B)U[j+B]=$l.toHalfFloat(he(L[B]))}function he(L){return L<=1?Math.sign(L)*Math.pow(Math.abs(L),2.2):Math.sign(L)*Math.pow(C,Math.abs(L)-1)}function Se(L){return new DataView(L.array.buffer,L.offset.value,L.size)}function xe(L){var U=L.viewer.buffer.slice(L.offset.value,L.offset.value+L.size),j=new Uint8Array(Oe(U)),B=new Uint8Array(j.length);return Te(j),Pe(j,B),new DataView(B.buffer)}function Ce(L){var U=L.array.slice(L.offset.value,L.offset.value+L.size),j=Kg(U),B=new Uint8Array(j.length);return Te(j),Pe(j,B),new DataView(B.buffer)}function lt(L){for(var U=L.viewer,j={value:L.offset.value},B=new Uint16Array(L.width*L.scanlineBlockSize*(L.channels*L.type)),O=new Uint8Array(8192),G=0,Y=new Array(L.channels),V=0;V<L.channels;V++)Y[V]={},Y[V].start=G,Y[V].end=Y[V].start,Y[V].nx=L.width,Y[V].ny=L.lines,Y[V].size=L.type,G+=Y[V].nx*Y[V].ny*Y[V].size;var le=Me(U,j),ce=Me(U,j);if(ce>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(le<=ce)for(var V=0;V<ce-le+1;V++)O[V+le]=St(U,j);var pe=new Uint16Array(65536),de=b(O,pe),We=Ge(U,j);Ve(L.array,U,j,We,B,G);for(var V=0;V<L.channels;++V)for(var Re=Y[V],we=0;we<Y[V].size;++we)st(B,Re.start+we,Re.nx,Re.size,Re.ny,Re.nx*Re.size,de);k(pe,B,G);for(var Ye=0,nt=new Uint8Array(B.buffer.byteLength),ft=0;ft<L.lines;ft++)for(var xt=0;xt<L.channels;xt++){var Re=Y[xt],Je=Re.nx*Re.size,Be=new Uint8Array(B.buffer,Re.end*2,Je*2);nt.set(Be,Ye),Ye+=Je*2,Re.end+=Je}return new DataView(nt.buffer)}function Ue(L){var U=L.array.slice(L.offset.value,L.offset.value+L.size),j=Kg(U);const B=L.lines*L.channels*L.width,O=L.type==1?new Uint16Array(B):new Uint32Array(B);let G=0,Y=0;const V=new Array(4);for(let le=0;le<L.lines;le++)for(let ce=0;ce<L.channels;ce++){let pe=0;switch(L.type){case 1:V[0]=G,V[1]=V[0]+L.width,G=V[1]+L.width;for(let de=0;de<L.width;++de){const We=j[V[0]++]<<8|j[V[1]++];pe+=We,O[Y]=pe,Y++}break;case 2:V[0]=G,V[1]=V[0]+L.width,V[2]=V[1]+L.width,G=V[2]+L.width;for(let de=0;de<L.width;++de){const We=j[V[0]++]<<24|j[V[1]++]<<16|j[V[2]++]<<8;pe+=We,O[Y]=pe,Y++}break}}return new DataView(O.buffer)}function et(L){var U=L.viewer,j={value:L.offset.value},B=new Uint8Array(L.width*L.lines*(L.channels*L.type*2)),O={version:Dt(U,j),unknownUncompressedSize:Dt(U,j),unknownCompressedSize:Dt(U,j),acCompressedSize:Dt(U,j),dcCompressedSize:Dt(U,j),rleCompressedSize:Dt(U,j),rleUncompressedSize:Dt(U,j),rleRawSize:Dt(U,j),totalAcUncompressedCount:Dt(U,j),totalDcUncompressedCount:Dt(U,j),acCompression:Dt(U,j)};if(O.version<2)throw"EXRLoader.parse: "+nr.compression+" version "+O.version+" is unsupported";for(var G=new Array,Y=Me(U,j)-2;Y>0;){var V=yt(U.buffer,j),le=St(U,j),ce=le>>2&3,pe=(le>>4)-1,de=new Int8Array([pe])[0],We=St(U,j);G.push({name:V,index:de,type:We,compression:ce}),Y-=V.length+3}for(var Re=nr.channels,we=new Array(L.channels),Ye=0;Ye<L.channels;++Ye){var nt=we[Ye]={},ft=Re[Ye];nt.name=ft.name,nt.compression=0,nt.decoded=!1,nt.type=ft.pixelType,nt.pLinear=ft.pLinear,nt.width=L.width,nt.height=L.lines}for(var xt={idx:new Array(3)},Je=0;Je<L.channels;++Je)for(var nt=we[Je],Ye=0;Ye<G.length;++Ye){var Be=G[Ye];nt.name==Be.name&&(nt.compression=Be.compression,Be.index>=0&&(xt.idx[Be.index]=Je),nt.offset=Je)}if(O.acCompressedSize>0)switch(O.acCompression){case 0:var gt=new Uint16Array(O.totalAcUncompressedCount);Ve(L.array,U,j,O.acCompressedSize,gt,O.totalAcUncompressedCount);break;case 1:var mt=L.array.slice(j.value,j.value+O.totalAcUncompressedCount),ut=Kg(mt),gt=new Uint16Array(ut.buffer);j.value+=O.totalAcUncompressedCount;break}if(O.dcCompressedSize>0){var Kt={array:L.array,offset:j,size:O.dcCompressedSize},nn=new Uint16Array(Ce(Kt).buffer);j.value+=O.dcCompressedSize}if(O.rleRawSize>0){var mt=L.array.slice(j.value,j.value+O.rleCompressedSize),ut=Kg(mt),An=Oe(ut.buffer);j.value+=O.rleCompressedSize}for(var Ot=0,Lt=new Array(we.length),Ye=0;Ye<Lt.length;++Ye)Lt[Ye]=new Array;for(var Cn=0;Cn<L.lines;++Cn)for(var Tt=0;Tt<we.length;++Tt)Lt[Tt].push(Ot),Ot+=we[Tt].width*L.type*2;Ae(xt,Lt,we,gt,nn,B);for(var Ye=0;Ye<we.length;++Ye){var nt=we[Ye];if(!nt.decoded)switch(nt.compression){case 2:for(var Ht=0,cn=0,Cn=0;Cn<L.lines;++Cn){for(var Jr=Lt[Ye][Ht],Vi=0;Vi<nt.width;++Vi){for(var Ws=0;Ws<2*nt.type;++Ws)B[Jr++]=An[cn+Ws*nt.width*nt.height];cn++}Ht++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(B.buffer)}function yt(L,U){for(var j=new Uint8Array(L),B=0;j[U.value+B]!=0;)B+=1;var O=new TextDecoder().decode(j.slice(U.value,U.value+B));return U.value=U.value+B+1,O}function Le(L,U,j){var B=new TextDecoder().decode(new Uint8Array(L).slice(U.value,U.value+j));return U.value=U.value+j,B}function Ze(L,U){var j=pt(L,U),B=Ge(L,U);return[j,B]}function Nt(L,U){var j=Ge(L,U),B=Ge(L,U);return[j,B]}function pt(L,U){var j=L.getInt32(U.value,!0);return U.value=U.value+4,j}function Ge(L,U){var j=L.getUint32(U.value,!0);return U.value=U.value+4,j}function At(L,U){var j=L[U.value];return U.value=U.value+1,j}function St(L,U){var j=L.getUint8(U.value);return U.value=U.value+1,j}const Dt=function(L,U){let j;return"getBigInt64"in DataView.prototype?j=Number(L.getBigInt64(U.value,!0)):j=L.getUint32(U.value+4,!0)+Number(L.getUint32(U.value,!0)<<32),U.value+=8,j};function $(L,U){var j=L.getFloat32(U.value,!0);return U.value+=4,j}function Fe(L,U){return $l.toHalfFloat($(L,U))}function ie(L){var U=(L&31744)>>10,j=L&1023;return(L>>15?-1:1)*(U?U===31?j?NaN:1/0:Math.pow(2,U-15)*(1+j/1024):6103515625e-14*(j/1024))}function Me(L,U){var j=L.getUint16(U.value,!0);return U.value+=2,j}function ke(L,U){return ie(Me(L,U))}function _t(L,U,j,B){for(var O=j.value,G=[];j.value<O+B-1;){var Y=yt(U,j),V=pt(L,j),le=St(L,j);j.value+=3;var ce=pt(L,j),pe=pt(L,j);G.push({name:Y,pixelType:V,pLinear:le,xSampling:ce,ySampling:pe})}return j.value+=1,G}function Ut(L,U){var j=$(L,U),B=$(L,U),O=$(L,U),G=$(L,U),Y=$(L,U),V=$(L,U),le=$(L,U),ce=$(L,U);return{redX:j,redY:B,greenX:O,greenY:G,blueX:Y,blueY:V,whiteX:le,whiteY:ce}}function mn(L,U){var j=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],B=St(L,U);return j[B]}function kn(L,U){var j=Ge(L,U),B=Ge(L,U),O=Ge(L,U),G=Ge(L,U);return{xMin:j,yMin:B,xMax:O,yMax:G}}function Vt(L,U){var j=["INCREASING_Y"],B=St(L,U);return j[B]}function tr(L,U){var j=$(L,U),B=$(L,U);return[j,B]}function Gi(L,U){var j=$(L,U),B=$(L,U),O=$(L,U);return[j,B,O]}function ku(L,U,j,B,O){if(B==="string"||B==="stringvector"||B==="iccProfile")return Le(U,j,O);if(B==="chlist")return _t(L,U,j,O);if(B==="chromaticities")return Ut(L,j);if(B==="compression")return mn(L,j);if(B==="box2i")return kn(L,j);if(B==="lineOrder")return Vt(L,j);if(B==="float")return $(L,j);if(B==="v2f")return tr(L,j);if(B==="v3f")return Gi(L,j);if(B==="int")return pt(L,j);if(B==="rational")return Ze(L,j);if(B==="timecode")return Nt(L,j);if(B==="preview")return j.value+=O,"skipped";j.value+=O}function ys(L,U,j){const B={};if(L.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";B.version=L.getUint8(4);const O=L.getUint8(5);B.spec={singleTile:!!(O&2),longName:!!(O&4),deepFormat:!!(O&8),multiPart:!!(O&16)},j.value=8;for(var G=!0;G;){var Y=yt(U,j);if(Y==0)G=!1;else{var V=yt(U,j),le=Ge(L,j),ce=ku(L,U,j,V,le);ce===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${V}'.`):B[Y]=ce}}if(O&-5)throw console.error("EXRHeader:",B),"THREE.EXRLoader: provided file is currently unsupported.";return B}function pl(L,U,j,B,O){const G={size:0,viewer:U,array:j,offset:B,width:L.dataWindow.xMax-L.dataWindow.xMin+1,height:L.dataWindow.yMax-L.dataWindow.yMin+1,channels:L.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:L.channels[0].pixelType,uncompress:null,getter:null,format:null,[kh?"colorSpace":"encoding"]:null};switch(L.compression){case"NO_COMPRESSION":G.lines=1,G.uncompress=Se;break;case"RLE_COMPRESSION":G.lines=1,G.uncompress=xe;break;case"ZIPS_COMPRESSION":G.lines=1,G.uncompress=Ce;break;case"ZIP_COMPRESSION":G.lines=16,G.uncompress=Ce;break;case"PIZ_COMPRESSION":G.lines=32,G.uncompress=lt;break;case"PXR24_COMPRESSION":G.lines=16,G.uncompress=Ue;break;case"DWAA_COMPRESSION":G.lines=32,G.uncompress=et;break;case"DWAB_COMPRESSION":G.lines=256,G.uncompress=et;break;default:throw"EXRLoader.parse: "+L.compression+" is unsupported"}if(G.scanlineBlockSize=G.lines,G.type==1)switch(O){case En:G.getter=ke,G.inputSize=2;break;case ri:G.getter=Me,G.inputSize=2;break}else if(G.type==2)switch(O){case En:G.getter=$,G.inputSize=4;break;case ri:G.getter=Fe,G.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+G.type+" for "+L.compression+".";G.blockCount=(L.dataWindow.yMax+1)/G.scanlineBlockSize;for(var Y=0;Y<G.blockCount;Y++)Dt(U,B);G.outputChannels=G.channels==3?4:G.channels;const V=G.width*G.height*G.outputChannels;switch(O){case En:G.byteArray=new Float32Array(V),G.channels<G.outputChannels&&G.byteArray.fill(1,0,V);break;case ri:G.byteArray=new Uint16Array(V),G.channels<G.outputChannels&&G.byteArray.fill(15360,0,V);break;default:console.error("THREE.EXRLoader: unsupported type: ",O);break}return G.bytesPerLine=G.width*G.inputSize*G.channels,G.outputChannels==4?G.format=Jn:G.format=Ap,kh?G.colorSpace="srgb-linear":G.encoding=3e3,G}const Vs=new DataView(e),ia=new Uint8Array(e),Xr={value:0},nr=ys(Vs,e,Xr),Ct=pl(nr,Vs,ia,Xr,this.type),ml={value:0},zu={R:0,G:1,B:2,A:3,Y:0};for(let L=0;L<Ct.height/Ct.scanlineBlockSize;L++){const U=Ge(Vs,Xr);Ct.size=Ge(Vs,Xr),Ct.lines=U+Ct.scanlineBlockSize>Ct.height?Ct.height-U:Ct.scanlineBlockSize;const B=Ct.size<Ct.lines*Ct.bytesPerLine?Ct.uncompress(Ct):Se(Ct);Xr.value+=Ct.size;for(let O=0;O<Ct.scanlineBlockSize;O++){const G=O+L*Ct.scanlineBlockSize;if(G>=Ct.height)break;for(let Y=0;Y<Ct.channels;Y++){const V=zu[nr.channels[Y].name];for(let le=0;le<Ct.width;le++){ml.value=(O*(Ct.channels*Ct.width)+Y*Ct.width+le)*Ct.inputSize;const ce=(Ct.height-1-G)*(Ct.width*Ct.outputChannels)+le*Ct.outputChannels+V;Ct.byteArray[ce]=Ct.getter(B,ml)}}}}return{header:nr,width:Ct.width,height:Ct.height,data:Ct.byteArray,format:Ct.format,[kh?"colorSpace":"encoding"]:Ct[kh?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){kh?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Jt,o.magFilter=Jt,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const Gx=new WeakMap;class qW extends Mi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Ai(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(Gx.has(e)){const l=Gx.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,h)=>{r._callbacks[s]={resolve:u,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Gx.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Et;e.index&&t.setIndex(new jt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new jt(o,a))}return t}_loadLibrary(e,t){const i=new Ai(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=$W.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function $W(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(d,p,m,u),x=v.attributes.map(y=>y.array.buffer);v.index&&x.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},x)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,u){const h=u.attributeIDs,d=u.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const x={index:null,attributes:[]};for(const y in h){const g=self[d[y]];let A,S;if(u.useUniqueIDs)S=h[y],A=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[h[y]]),S===-1)continue;A=a.GetAttribute(p,S)}x.attributes.push(r(o,a,p,y,g,A))}return v===o.TRIANGULAR_MESH&&(x.index=i(o,a,p)),o.destroy(p),x}function i(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,u,h,d){const p=d.num_components(),v=l.num_points()*p,x=v*h.BYTES_PER_ELEMENT,y=s(o,h),g=o._malloc(x);a.GetAttributeDataArrayForAllPoints(l,d,y,x,g);const A=new h(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:u,array:A,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Yg;const Vx=()=>{if(Yg)return Yg;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const x=d.charCodeAt(v);p[v]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let m=0;for(let v=0;v<d.length;++v)p[m++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(d,p,m,v,x,y){const g=s.exports.sbrk,A=m+3&-4,S=g(A*v),w=g(x.length),P=new Uint8Array(s.exports.memory.buffer);P.set(x,w);const T=d(S,m,v,w,x.length);if(T===0&&y&&y(S,A,v),p.set(P.subarray(S,S+m*v)),g(S-g(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Yg={ready:o,supported:!0,decodeVertexBuffer(d,p,m,v,x){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,v,s.exports[u[x]])},decodeIndexBuffer(d,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,v)},decodeIndexSequence(d,p,m,v){l(s.exports.meshopt_decodeIndexSequence,d,p,m,v)},decodeGltfBuffer(d,p,m,v,x,y){l(s.exports[h[x]],d,p,m,v,s.exports[u[y]])}},Yg};function e7(n,e,t,i){const r=class extends mi{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[u,h])=>{const d=C_.clone({[u]:{value:h}});return{...l,...d}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,o)}};return r.key=lw.generateUUID(),r}const t7=()=>parseInt(Lu.replace(/\D+/g,"")),n7=t7();let jg=null,ML="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function wL(n,e,t){return i=>{t&&t(i),n&&(jg||(jg=new qW),jg.setDecoderPath(typeof n=="string"?n:ML),i.setDRACOLoader(jg)),e&&i.setMeshoptDecoder(typeof Vx=="function"?Vx():Vx)}}function Up(n,e=!0,t=!0,i){return go(Qw,n,wL(e,t,i))}Up.preload=(n,e=!0,t=!0,i)=>go.preload(Qw,n,wL(e,t,i));Up.clear=n=>go.clear(Qw,n);Up.setDecoderPath=n=>{ML=n};function i7(n,e,t){const i=Or(p=>p.size),r=Or(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...h}=a,d=se.useMemo(()=>{const p=new xr(s,o,{minFilter:Jt,magFilter:Jt,type:ri,...h});return u&&(p.depthTexture=new T_(s,o,En)),p.samples=l,p},[]);return se.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),se.useEffect(()=>()=>d.dispose(),[]),d}const r7=n=>typeof n=="function",s7=se.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Or(({set:y})=>y),l=Or(({camera:y})=>y),u=Or(({size:y})=>y),h=se.useRef(null);se.useImperativeHandle(o,()=>h.current,[]);const d=se.useRef(null),p=i7(e);se.useLayoutEffect(()=>{s.manual||(h.current.aspect=u.width/u.height)},[u,s]),se.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let m=0,v=null;const x=r7(r);return Yf(y=>{x&&(t===1/0||m<t)&&(d.current.visible=!1,y.gl.setRenderTarget(p),v=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,h.current),y.scene.background=v,y.gl.setRenderTarget(null),d.current.visible=!0,m++)}),se.useLayoutEffect(()=>{if(i){const y=l;return a(()=>({camera:h.current})),()=>a(()=>({camera:y}))}},[h,i,a]),se.createElement(se.Fragment,null,se.createElement("perspectiveCamera",Rf({ref:h},s),!x&&r),se.createElement("group",{ref:d},x&&r(p.texture)))}),o7=3e3,a7=3001,EL=(n,e,t)=>{let i;switch(n){case yr:i=new Uint8ClampedArray(e*t*4);break;case ri:i=new Uint16Array(e*t*4);break;case mo:i=new Uint32Array(e*t*4);break;case v_:i=new Int8Array(e*t*4);break;case __:i=new Int16Array(e*t*4);break;case xp:i=new Int32Array(e*t*4);break;case En:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Qg;const l7=(n,e,t,i)=>{if(Qg!==void 0)return Qg;const r=new xr(1,1,i);e.setRenderTarget(r);const s=new xn(new ta,new cr({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=EL(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Qg=o[0]!==0,Qg};class Zw{constructor(e){var t,i,r,s,o,a,l,u,h,d,p,m,v,x,y,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const A={format:Jn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Jt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:Jt,samples:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Xn,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT:Xn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Zw.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Ef,this._camera=new na,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!l7(this._type,this._renderer,this._camera,A)){let S;switch(this._type){case ri:S=this._renderer.extensions.has("EXT_color_buffer_float")?En:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${En}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new xn(new ta,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new xr(this.width,this.height,A),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping:el}static instantiateRenderer(){const e=new gw;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=EL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Ns(this.toArray(),this.width,this.height,Jn,this._type,(e==null?void 0:e.mapping)||el,(e==null?void 0:e.wrapS)||Xn,(e==null?void 0:e.wrapT)||Xn,(e==null?void 0:e.magFilter)||Jt,(e==null?void 0:e.minFilter)||Jt,(e==null?void 0:e.anisotropy)||1,ms);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof mi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof en&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof en&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const u7=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,c7=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class f7 extends mi{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:u,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:u7,fragmentShader:c7,uniforms:{sdr:{value:u},gainMap:{value:h},gamma:{value:new z(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new z().fromArray(t)},offsetSdr:{value:new z().fromArray(i)},gainMapMin:{value:new z().fromArray(r)},gainMapMax:{value:new z().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:lo,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class CL extends Error{}class TL extends Error{}const zh=(n,e,t)=>{var i;let r;const s=(i=n.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},h7=n=>{var e,t;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(n):i=n.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const u=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],h=zh(u,"hdrgm:GainMapMin","0"),d=zh(u,"hdrgm:GainMapMax"),p=zh(u,"hdrgm:Gamma","1"),m=zh(u,"hdrgm:OffsetSDR","0.015625"),v=zh(u,"hdrgm:OffsetHDR","0.015625");let x=(e=u.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;x||(x="0");const y=(t=u.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!y)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(h)?h.map(g=>parseFloat(g)):[parseFloat(h),parseFloat(h),parseFloat(h)],gainMapMax:Array.isArray(d)?d.map(g=>parseFloat(g)):[parseFloat(d),parseFloat(d),parseFloat(d)],gamma:Array.isArray(p)?p.map(g=>parseFloat(g)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(m)?m.map(g=>parseFloat(g)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetHdr:Array.isArray(v)?v.map(g=>parseFloat(g)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(x),hdrCapacityMax:parseFloat(y)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class d7{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,u;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(u=s.getUint8(a+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const h=a+4;if(s.getUint32(h)===1297106432){const d=h+4;let p;if(s.getUint16(d)===18761)p=!1;else if(s.getUint16(d)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(d+4,!p);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=d+m,x=s.getUint16(v,!p),y=v+2;let g=0;for(let P=y;P<y+12*x;P+=12)s.getUint16(P,!p)===45057&&(g=s.getUint32(P+8,!p));const S=v+2+x*12+4,w=[];for(let P=S;P<S+g*16;P+=16){const T={MPType:s.getUint32(P,!p),size:s.getUint32(P+4,!p),dataOffset:s.getUint32(P+8,!p),dependantImages:s.getUint32(P+12,!p),start:-1,end:-1,isFII:!1};T.dataOffset?(T.start=d+T.dataOffset,T.isFII=!1):(T.start=0,T.isFII=!0),T.end=T.start+T.size,w.push(T)}if(this.options.extractNonFII&&w.length){const P=new Blob([s]),T=[];for(const R of w){if(R.isFII&&!this.options.extractFII)continue;const D=P.slice(R.start,R.end+1,"image/jpeg");T.push(D)}t(T)}}}a+=2+s.getUint16(a+2)}})}}const p7=async n=>{const e=h7(n);if(!e)throw new TL("Gain map XMP metadata not found");const i=await new d7({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new CL("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},DP=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class RL extends Mi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new K_}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new f7({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new en,sdr:new en});return new Zw({width:16,height:16,type:ri,colorSpace:ms,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,u=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?DP(s):Promise.resolve(void 0),DP(o)]);l=p[0],a=p[1],u=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const h=new en(l||new ImageData(2,2),el,Xn,Xn,Jt,oS,Jn,yr,1,ms);h.flipY=u,h.needsUpdate=!0;const d=new en(a,el,Xn,Xn,Jt,oS,Jn,yr,1,Pr);d.flipY=u,d.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=h,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class m7 extends RL{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,u,h;const d=async()=>{if(l&&u&&h){try{await this.render(a,h,l,u)}catch(C){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(C),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let p=!0,m=0,v=0,x=!0,y=0,g=0,A=!0,S=0,w=0;const P=()=>{if(typeof s=="function"){const C=m+y+S,b=v+g+w,N=p&&x&&A;s(new ProgressEvent("progress",{lengthComputable:N,loaded:b,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const T=new Ai(this._internalLoadingManager);T.setResponseType("arraybuffer"),T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await d()},C=>{p=C.lengthComputable,v=C.loaded,m=C.total,P()},C=>{this.manager.itemError(e),typeof o=="function"&&o(C)});const R=new Ai(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(t,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");u=C,await d()},C=>{x=C.lengthComputable,g=C.loaded,y=C.total,P()},C=>{this.manager.itemError(t),typeof o=="function"&&o(C)});const D=new Ai(this._internalLoadingManager);return D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(i,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");h=JSON.parse(C),await d()},C=>{A=C.lengthComputable,w=C.loaded,S=C.total,P()},C=>{this.manager.itemError(i),typeof o=="function"&&o(C)}),a}}class g7 extends RL{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Ai(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let u,h,d;try{const p=await p7(l);u=p.sdr,h=p.gainMap,d=p.metadata}catch(p){if(p instanceof TL||p instanceof CL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw p}try{await this.render(s,d,u,h)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const tp={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},bL="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",rf=n=>Array.isArray(n),qw=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Q_({files:n=qw,path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){let s=null,o=!1;t&&($w(t),n=tp[t],e=bL),o=rf(n);const{extension:a,isCubemap:l}=eE(n);if(s=tE(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=Or(m=>m.gl);se.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function m(){go.clear(s,o?[n]:n)}u.domElement.addEventListener("webglcontextlost",m,{once:!0})},[n,u.domElement]);const h=go(s,o?[n]:n,m=>{(a==="webp"||a==="jpg"||a==="jpeg")&&m.setRenderer(u),m.setPath==null||m.setPath(e),r&&r(m)});let d=o?h[0]:h;if(a==="jpg"||a==="jpeg"||a==="webp"){var p;d=(p=d.renderTarget)==null?void 0:p.texture}return d.mapping=l?po:_f,"colorSpace"in d?d.colorSpace=i??l?"srgb":"srgb-linear":d.encoding=i??l?a7:o7,d}const v7={files:qw,path:"",preset:void 0,extensions:void 0};Q_.preload=n=>{const e={...v7,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&($w(r),t=tp[r],i=bL);const{extension:o}=eE(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=tE(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);go.preload(a,rf(t)?[t]:t,l=>{l.setPath==null||l.setPath(i),s&&s(l)})};const _7={files:qw,preset:void 0};Q_.clear=n=>{const e={..._7,...n};let{files:t}=e;const{preset:i}=e;i&&($w(i),t=tp[i]);const{extension:r}=eE(t),s=tE(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);go.clear(s,rf(t)?[t]:t)};function $w(n){if(!(n in tp))throw new Error("Preset must be one of: "+Object.keys(tp).join(", "))}function eE(n){var e;const t=rf(n)&&n.length===6,i=rf(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=rf(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function tE(n){return n==="cube"?CD:n==="hdr"?QW:n==="exr"?ZW:n==="jpg"||n==="jpeg"?g7:n==="webp"?m7:null}const y7=n=>n.current&&n.current.isScene,x7=n=>y7(n)?n.current:n;function nE(n,e,t,i,r={}){var s,o,a,l,u;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const h=x7(e||t),d=h.background,p=h.environment,m={backgroundBlurriness:h.backgroundBlurriness,backgroundIntensity:h.backgroundIntensity,backgroundRotation:(o=(a=h.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:h.environmentIntensity,environmentRotation:(l=(u=h.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(h.environment=i),n&&(h.background=i),No(h,r),()=>{n!=="only"&&(h.environment=p),n&&(h.background=d),No(h,m)}}function iE({scene:n,background:e=!1,map:t,...i}){const r=Or(s=>s.scene);return se.useLayoutEffect(()=>{if(t)return nE(e,n,r,t,i)}),null}function PL({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const u=Q_(l),h=Or(d=>d.scene);return se.useLayoutEffect(()=>nE(n,e,h,u,{blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function A7({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:d,environmentRotation:p,scene:m,files:v,path:x,preset:y=void 0,extensions:g}){const A=Or(D=>D.gl),S=Or(D=>D.scene),w=se.useRef(null),[P]=se.useState(()=>new Ef),T=se.useMemo(()=>{const D=new hw(i);return D.texture.type=ri,D},[i]);se.useLayoutEffect(()=>(r===1&&w.current.update(A,P),nE(o,m,S,T.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:d,environmentRotation:p})),[n,P,T.texture,m,S,o,r,A]);let R=1;return Yf(()=>{(r===1/0||R<r)&&(w.current.update(A,P),R++)}),se.createElement(se.Fragment,null,SV(se.createElement(se.Fragment,null,n,se.createElement("cubeCamera",{ref:w,args:[e,t,T]}),v||y?se.createElement(PL,{background:!0,files:v,preset:y,path:x,extensions:g}):s?se.createElement(iE,{background:!0,map:s,extensions:g}):null),P))}function S7(n){var e,t,i,r;const s=Q_(n),o=n.map||s;se.useMemo(()=>j_({GroundProjectedEnvImpl:pW}),[]);const a=se.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,h=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return se.createElement(se.Fragment,null,se.createElement(iE,Rf({},n,{map:o})),se.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:u}))}function M7(n){return n.ground?se.createElement(S7,n):n.map?se.createElement(iE,n):n.children?se.createElement(A7,n):se.createElement(PL,n)}function w7(n,e,t=new z){const i=Math.PI*(n-.5),r=2*Math.PI*(e-.5);return t.x=Math.cos(r),t.y=Math.sin(i),t.z=Math.sin(r),t}const E7=se.forwardRef(({inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=w7(n,e),...l},u)=>{const h=se.useMemo(()=>new z().setScalar(t),[t]),[d]=se.useState(()=>new jw);return se.createElement("primitive",Rf({object:d,ref:u,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:h},l))});class C7 extends mi{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${n7>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const T7=n=>new z().setFromSpherical(new OD(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),R7=se.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=se.useRef(),[u,h,d]=se.useMemo(()=>{const m=[],v=[],x=Array.from({length:t},()=>(.5+.5*Math.random())*r),y=new He;let g=n+e;const A=e/t;for(let S=0;S<t;S++)g-=A*Math.random(),m.push(...T7(g).toArray()),y.setHSL(S/t,i,.9),v.push(y.r,y.g,y.b);return[new Float32Array(m),new Float32Array(v),new Float32Array(x)]},[t,e,r,n,i]);Yf(m=>l.current&&(l.current.uniforms.time.value=m.clock.getElapsedTime()*o));const[p]=se.useState(()=>new C7);return se.createElement("points",{ref:a},se.createElement("bufferGeometry",null,se.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3]}),se.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),se.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]})),se.createElement("primitive",{ref:l,object:p,attach:"material",blending:$0,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});var rE=kp(),tn=n=>Op(n,rE),sE=kp();tn.write=n=>Op(n,sE);var Z_=kp();tn.onStart=n=>Op(n,Z_);var oE=kp();tn.onFrame=n=>Op(n,oE);var aE=kp();tn.onFinish=n=>Op(n,aE);var sf=[];tn.setTimeout=(n,e)=>{const t=tn.now()+e,i=()=>{const s=sf.findIndex(o=>o.cancel==i);~s&&sf.splice(s,1),La-=~s?1:0},r={time:t,handler:n,cancel:i};return sf.splice(IL(t),0,r),La+=1,BL(),r};var IL=n=>~(~sf.findIndex(e=>e.time>n)||~sf.length);tn.cancel=n=>{Z_.delete(n),oE.delete(n),aE.delete(n),rE.delete(n),sE.delete(n)};tn.sync=n=>{CS=!0,tn.batchedUpdates(n),CS=!1};tn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,tn.onStart(t)}return i.handler=n,i.cancel=()=>{Z_.delete(t),e=null},i};var lE=typeof window<"u"?window.requestAnimationFrame:()=>{};tn.use=n=>lE=n;tn.now=typeof performance<"u"?()=>performance.now():Date.now;tn.batchedUpdates=n=>n();tn.catch=console.error;tn.frameLoop="always";tn.advance=()=>{tn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):LL()};var Da=-1,La=0,CS=!1;function Op(n,e){CS?(e.delete(n),n(0)):(e.add(n),BL())}function BL(){Da<0&&(Da=0,tn.frameLoop!=="demand"&&lE(DL))}function b7(){Da=-1}function DL(){~Da&&(lE(DL),tn.batchedUpdates(LL))}function LL(){const n=Da;Da=tn.now();const e=IL(Da);if(e&&(FL(sf.splice(0,e),t=>t.handler()),La-=e),!La){b7();return}Z_.flush(),rE.flush(n?Math.min(64,Da-n):16.667),oE.flush(),sE.flush(),aE.flush()}function kp(){let n=new Set,e=n;return{add(t){La+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return La-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,La-=e.size,FL(e,i=>i(t)&&n.add(i)),La+=n.size,e=n)}}}function FL(n,e){n.forEach(t=>{try{e(t)}catch(i){tn.catch(i)}})}var P7=Object.defineProperty,I7=(n,e)=>{for(var t in e)P7(n,t,{get:e[t],enumerable:!0})},bf={};I7(bf,{assign:()=>F7,colors:()=>ja,createStringInterpolator:()=>uE,skipAnimation:()=>OL,to:()=>UL,willAdvance:()=>cE});function B7(){}var D7=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),qi={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function L7(n,e){if(qi.arr(n)){if(!qi.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var of=(n,e)=>n.forEach(e);function LP(n,e,t){if(qi.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Zg=n=>qi.und(n)?[]:qi.arr(n)?n:[n],NL=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uE,UL,ja=null,OL=!1,cE=B7,F7=n=>{n.to&&(UL=n.to),n.now&&(tn.now=n.now),n.colors!==void 0&&(ja=n.colors),n.skipAnimation!=null&&(OL=n.skipAnimation),n.createStringInterpolator&&(uE=n.createStringInterpolator),n.requestAnimationFrame&&tn.use(n.requestAnimationFrame),n.batchedUpdates&&(tn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(cE=n.willAdvance),n.frameLoop&&(tn.frameLoop=n.frameLoop)},gd=new Set,as=[],Wx=[],Dv=0,fE={get idle(){return!gd.size&&!as.length},start(n){Dv>n.priority?(gd.add(n),tn.onStart(N7)):(kL(n),tn(TS))},advance:TS,sort(n){if(Dv)tn.onFrame(()=>fE.sort(n));else{const e=as.indexOf(n);~e&&(as.splice(e,1),zL(n))}},clear(){as=[],gd.clear()}};function N7(){gd.forEach(kL),gd.clear(),tn(TS)}function kL(n){as.includes(n)||zL(n)}function zL(n){as.splice(U7(as,e=>e.priority>n.priority),0,n)}function TS(n){const e=Wx;for(let t=0;t<as.length;t++){const i=as[t];Dv=i.priority,i.idle||(cE(i),i.advance(n),i.idle||e.push(i))}return Dv=0,Wx=as,Wx.length=0,as=e,as.length>0}function U7(n,e){const t=n.findIndex(e);return t<0?n.length:t}var Bs="[-+]?\\d*\\.?\\d+",Lv=Bs+"%";function q_(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var O7=new RegExp("rgb"+q_(Bs,Bs,Bs)),k7=new RegExp("rgba"+q_(Bs,Bs,Bs,Bs)),z7=new RegExp("hsl"+q_(Bs,Lv,Lv)),H7=new RegExp("hsla"+q_(Bs,Lv,Lv,Bs)),G7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,V7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,W7=/^#([0-9a-fA-F]{6})$/,X7=/^#([0-9a-fA-F]{8})$/;function J7(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=W7.exec(n))?parseInt(e[1]+"ff",16)>>>0:ja&&ja[n]!==void 0?ja[n]:(e=O7.exec(n))?(Sc(e[1])<<24|Sc(e[2])<<16|Sc(e[3])<<8|255)>>>0:(e=k7.exec(n))?(Sc(e[1])<<24|Sc(e[2])<<16|Sc(e[3])<<8|UP(e[4]))>>>0:(e=G7.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=X7.exec(n))?parseInt(e[1],16)>>>0:(e=V7.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=z7.exec(n))?(FP(NP(e[1]),qg(e[2]),qg(e[3]))|255)>>>0:(e=H7.exec(n))?(FP(NP(e[1]),qg(e[2]),qg(e[3]))|UP(e[4]))>>>0:null}function Xx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function FP(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=Xx(r,i,n+1/3),o=Xx(r,i,n),a=Xx(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Sc(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function NP(n){return(parseFloat(n)%360+360)%360/360}function UP(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function qg(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function OP(n){let e=J7(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var np=(n,e,t)=>{if(qi.fun(n))return n;if(qi.arr(n))return np({range:n,output:e,extrapolate:t});if(qi.str(n.output[0]))return uE(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const h=Y7(u,s);return K7(u,s[h],s[h+1],r[h],r[h+1],l,o,a,i.map)}};function K7(n,e,t,i,r,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function Y7(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var ip=Symbol.for("FluidValue.get"),rp=Symbol.for("FluidValue.observers"),RS=n=>!!(n&&n[ip]),Fv=n=>n&&n[ip]?n[ip]():n;function j7(n,e){n.eventObserved?n.eventObserved(e):n(e)}function bS(n,e){const t=n[rp];t&&t.forEach(i=>{j7(i,e)})}var Q7=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");Z7(this,n)}},Z7=(n,e)=>HL(n,ip,e);function q7(n,e){if(n[ip]){let t=n[rp];t||HL(n,rp,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function $7(n,e){const t=n[rp];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[rp]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var HL=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),y0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,eX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kP=new RegExp(`(${y0.source})(%|[a-z]+)`,"i"),tX=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,$_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,GL=n=>{const[e,t]=nX(n);if(!e||NL())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&$_.test(t))return GL(t);if(t)return t}return n},nX=n=>{const e=$_.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},Jx,iX=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,rX=n=>{Jx||(Jx=ja?new RegExp(`(${Object.keys(ja).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Fv(s).replace($_,GL).replace(eX,OP).replace(Jx,OP)),t=e.map(s=>s.match(y0).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>np({...n,output:s}));return s=>{var l;const o=!kP.test(e[0])&&((l=e.find(u=>kP.test(u)))==null?void 0:l.replace(y0,""));let a=0;return e[0].replace(y0,()=>`${r[a++](s)}${o||""}`).replace(tX,iX)}},VL="react-spring: ",WL=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${VL}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},sX=WL(console.warn);function oX(){sX(`${VL}The "interpolate" function is deprecated in v9 (use "to" instead)`)}WL(console.warn);function XL(n){return qi.str(n)&&(n[0]=="#"||/\d/.test(n)||!NL()&&$_.test(n)||n in(ja||{}))}function aX(n,e){const[t]=se.useState(()=>({inputs:e,result:n()})),i=se.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&lX(e,s.inputs)||(s={inputs:e,result:n()}):s=t,se.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function lX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var sp=Symbol.for("Animated:node"),uX=n=>!!n&&n[sp]===n,hE=n=>n&&n[sp],JL=(n,e)=>D7(n,sp,e),dE=n=>n&&n[sp]&&n[sp].getPayload(),KL=class{constructor(){JL(this,this)}getPayload(){return this.payload||[]}},ey=class extends KL{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,qi.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new ey(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return qi.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,qi.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},pE=class extends ey{constructor(n){super(0),this._string=null,this._toString=np({output:[n,n]})}static create(n){return new pE(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(qi.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=np({output:[this.getValue(),n]})),this._value=0,super.reset()}},cX=class extends KL{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return LP(this.source,(i,r)=>{uX(i)?t[r]=i.getValue(e):RS(i)?t[r]=Fv(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&of(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return LP(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){const t=dE(e);t&&of(t,i=>this.add(i))}},YL=class extends cX{constructor(n){super(n)}static create(n){return new YL(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(fX)),!0)}};function fX(n){return(XL(n)?pE:ey).create(n)}function hX(n){const e=hE(n);return e?e.constructor:qi.arr(n)?YL:XL(n)?pE:ey}var zP=n=>n instanceof jL,dX=1,jL=class extends Q7{constructor(){super(...arguments),this.id=dX++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=hE(this);return n&&n.getValue()}to(...n){return bf.to(this,n)}interpolate(...n){return oX(),bf.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){bS(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||fE.sort(this),bS(this,{type:"priority",parent:this,priority:n})}},mE=({children:n,...e})=>{const t=se.useContext(Nv),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=aX(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Nv;return se.createElement(s,{value:e},n)},Nv=pX(mE,{});mE.Provider=Nv.Provider;mE.Consumer=Nv.Consumer;function pX(n,e){return Object.assign(n,se.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var mX=class extends jL{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=np(...e);const t=this._get(),i=hX(t);JL(this,i.create(t))}advance(n){const e=this._get(),t=this.get();L7(e,t)||(hE(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&HP(this._active)&&Kx(this)}_get(){const n=qi.arr(this.source)?this.source.map(Fv):Zg(Fv(this.source));return this.calc(...n)}_start(){this.idle&&!HP(this._active)&&(this.idle=!1,of(dE(this),n=>{n.done=!1}),bf.skipAnimation?(tn.batchedUpdates(()=>this.advance()),Kx(this)):fE.start(this))}_attach(){let n=1;of(Zg(this.source),e=>{RS(e)&&q7(e,this),zP(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){of(Zg(this.source),n=>{RS(n)&&$7(n,this)}),this._active.clear(),Kx(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Zg(this.source).reduce((e,t)=>Math.max(e,(zP(t)?t.priority:0)+1),0))}};function gX(n){return n.idle!==!1}function HP(n){return!n.size||Array.from(n).every(gX)}function Kx(n){n.idle||(n.idle=!0,of(dE(n),e=>{e.done=!0}),bS(n,{type:"idle",parent:n}))}bf.assign({createStringInterpolator:rX,to:(n,e)=>new mX(n,e)});var gE=Hp(),on=n=>zp(n,gE),vE=Hp();on.write=n=>zp(n,vE);var ty=Hp();on.onStart=n=>zp(n,ty);var _E=Hp();on.onFrame=n=>zp(n,_E);var yE=Hp();on.onFinish=n=>zp(n,yE);var af=[];on.setTimeout=(n,e)=>{const t=on.now()+e,i=()=>{const s=af.findIndex(o=>o.cancel==i);~s&&af.splice(s,1),Na-=~s?1:0},r={time:t,handler:n,cancel:i};return af.splice(QL(t),0,r),Na+=1,ZL(),r};var QL=n=>~(~af.findIndex(e=>e.time>n)||~af.length);on.cancel=n=>{ty.delete(n),_E.delete(n),yE.delete(n),gE.delete(n),vE.delete(n)};on.sync=n=>{PS=!0,on.batchedUpdates(n),PS=!1};on.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,on.onStart(t)}return i.handler=n,i.cancel=()=>{ty.delete(t),e=null},i};var xE=typeof window<"u"?window.requestAnimationFrame:()=>{};on.use=n=>xE=n;on.now=typeof performance<"u"?()=>performance.now():Date.now;on.batchedUpdates=n=>n();on.catch=console.error;on.frameLoop="always";on.advance=()=>{on.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):$L()};var Fa=-1,Na=0,PS=!1;function zp(n,e){PS?(e.delete(n),n(0)):(e.add(n),ZL())}function ZL(){Fa<0&&(Fa=0,on.frameLoop!=="demand"&&xE(qL))}function vX(){Fa=-1}function qL(){~Fa&&(xE(qL),on.batchedUpdates($L))}function $L(){const n=Fa;Fa=on.now();const e=QL(Fa);if(e&&(eF(af.splice(0,e),t=>t.handler()),Na-=e),!Na){vX();return}ty.flush(),gE.flush(n?Math.min(64,Fa-n):16.667),_E.flush(),vE.flush(),yE.flush()}function Hp(){let n=new Set,e=n;return{add(t){Na+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Na-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Na-=e.size,eF(e,i=>i(t)&&n.add(i)),Na+=n.size,e=n)}}}function eF(n,e){n.forEach(t=>{try{e(t)}catch(i){on.catch(i)}})}var _X=Object.defineProperty,yX=(n,e)=>{for(var t in e)_X(n,t,{get:e[t],enumerable:!0})},xX={};yX(xX,{assign:()=>MX,colors:()=>hu,createStringInterpolator:()=>AE,skipAnimation:()=>iF,to:()=>nF,willAdvance:()=>rF});function AX(){}var SX=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Us={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0},vd=(n,e)=>n.forEach(e);function IS(n,e,t){if(Us.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var tF=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),AE,nF,hu=null,iF=!1,rF=AX,MX=n=>{n.to&&(nF=n.to),n.now&&(on.now=n.now),n.colors!==void 0&&(hu=n.colors),n.skipAnimation!=null&&(iF=n.skipAnimation),n.createStringInterpolator&&(AE=n.createStringInterpolator),n.requestAnimationFrame&&on.use(n.requestAnimationFrame),n.batchedUpdates&&(on.batchedUpdates=n.batchedUpdates),n.willAdvance&&(rF=n.willAdvance),n.frameLoop&&(on.frameLoop=n.frameLoop)},wX={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ds="[-+]?\\d*\\.?\\d+",Uv=Ds+"%";function ny(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var EX=new RegExp("rgb"+ny(Ds,Ds,Ds)),CX=new RegExp("rgba"+ny(Ds,Ds,Ds,Ds)),TX=new RegExp("hsl"+ny(Ds,Uv,Uv)),RX=new RegExp("hsla"+ny(Ds,Uv,Uv,Ds)),bX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,PX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,IX=/^#([0-9a-fA-F]{6})$/,BX=/^#([0-9a-fA-F]{8})$/;function DX(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=IX.exec(n))?parseInt(e[1]+"ff",16)>>>0:hu&&hu[n]!==void 0?hu[n]:(e=EX.exec(n))?(Mc(e[1])<<24|Mc(e[2])<<16|Mc(e[3])<<8|255)>>>0:(e=CX.exec(n))?(Mc(e[1])<<24|Mc(e[2])<<16|Mc(e[3])<<8|WP(e[4]))>>>0:(e=bX.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=BX.exec(n))?parseInt(e[1],16)>>>0:(e=PX.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=TX.exec(n))?(GP(VP(e[1]),$g(e[2]),$g(e[3]))|255)>>>0:(e=RX.exec(n))?(GP(VP(e[1]),$g(e[2]),$g(e[3]))|WP(e[4]))>>>0:null}function Yx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function GP(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=Yx(r,i,n+1/3),o=Yx(r,i,n),a=Yx(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Mc(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function VP(n){return(parseFloat(n)%360+360)%360/360}function WP(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function $g(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function XP(n){let e=DX(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var sF=(n,e,t)=>{if(Us.fun(n))return n;if(Us.arr(n))return sF({range:n,output:e,extrapolate:t});if(Us.str(n.output[0]))return AE(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const h=FX(u,s);return LX(u,s[h],s[h+1],r[h],r[h+1],l,o,a,i.map)}};function LX(n,e,t,i,r,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function FX(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var Ov=Symbol.for("FluidValue.get"),kv=Symbol.for("FluidValue.observers"),JP=n=>!!(n&&n[Ov]),oF=n=>n&&n[Ov]?n[Ov]():n;function NX(n,e){if(n[Ov]){let t=n[kv];t||UX(n,kv,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function KP(n,e){const t=n[kv];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[kv]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var UX=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),x0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,OX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,YP=new RegExp(`(${x0.source})(%|[a-z]+)`,"i"),kX=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,SE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,aF=n=>{const[e,t]=zX(n);if(!e||tF())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&SE.test(t))return aF(t);if(t)return t}return n},zX=n=>{const e=SE.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},jx,HX=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,GX=n=>{jx||(jx=hu?new RegExp(`(${Object.keys(hu).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>oF(s).replace(SE,aF).replace(OX,XP).replace(jx,XP)),t=e.map(s=>s.match(x0).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>sF({...n,output:s}));return s=>{var l;const o=!YP.test(e[0])&&((l=e.find(u=>YP.test(u)))==null?void 0:l.replace(x0,""));let a=0;return e[0].replace(x0,()=>`${r[a++](s)}${o||""}`).replace(kX,HX)}},VX="react-spring: ",lF=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${VX}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}};lF(console.warn);lF(console.warn);var uF=tF()?se.useEffect:se.useLayoutEffect,WX=()=>{const n=se.useRef(!1);return uF(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function XX(){const n=se.useState()[1],e=WX();return()=>{e.current&&n(Math.random())}}var JX=n=>se.useEffect(n,KX),KX=[],zv=Symbol.for("Animated:node"),YX=n=>!!n&&n[zv]===n,jX=(n,e)=>SX(n,zv,e),QX=n=>n&&n[zv]&&n[zv].getPayload(),ZX=class{constructor(){jX(this,this)}getPayload(){return this.payload||[]}},Hv={dependencies:null},cF=class extends ZX{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return IS(this.source,(t,i)=>{YX(t)?e[i]=t.getValue(n):JP(t)?e[i]=oF(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&vd(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return IS(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){Hv.dependencies&&JP(n)&&Hv.dependencies.add(n);const e=QX(n);e&&vd(e,t=>this.add(t))}},jP=(n,e)=>{const t=!Us.fun(n)||n.prototype&&n.prototype.isReactComponent;return se.forwardRef((i,r)=>{const s=se.useRef(null),o=t&&se.useCallback(v=>{s.current=eJ(r,v)},[r]),[a,l]=$X(i,e),u=XX(),h=()=>{const v=s.current;if(t&&!v)return;(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&u()},d=new qX(h,l),p=se.useRef();uF(()=>(p.current=d,vd(l,v=>NX(v,d)),()=>{p.current&&(vd(p.current.deps,v=>KP(v,p.current)),on.cancel(p.current.update))})),se.useEffect(h,[]),JX(()=>()=>{const v=p.current;vd(v.deps,x=>KP(x,v))});const m=e.getComponentProps(a.getValue());return se.createElement(n,{...m,ref:o})})},qX=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&on.write(this.update)}};function $X(n,e){const t=new Set;return Hv.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new cF(n),Hv.dependencies=null,[n,t]}function eJ(n,e){return n&&(Us.fun(n)?n(e):n.current=e),e}var QP=Symbol.for("AnimatedComponent"),tJ=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new cF(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=ZP(o)||"Anonymous";return Us.str(o)?o=s[o]||(s[o]=jP(o,r)):o=o[QP]||(o[QP]=jP(o,r)),o.displayName=`Animated(${a})`,o};return IS(n,(o,a)=>{Us.arr(n)&&(a=ZP(o)),s[a]=s(o)}),{animated:s}},ZP=n=>Us.str(n)?n:n&&Us.str(n.displayName)?n.displayName:Us.fun(n)&&n.name||null,nJ=["primitive"].concat(Object.keys(zD).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));bf.assign({createStringInterpolator:GX,colors:wX,frameLoop:"demand"});gV(()=>{on.advance()});tJ(nJ,{applyAnimatedValues:No});function Do(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var kr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Pf={duration:.5,overwrite:!1,delay:0},ME,Oi,wn,cs=1e8,dn=1/cs,BS=Math.PI*2,iJ=BS/4,rJ=0,hF=Math.sqrt,sJ=Math.cos,oJ=Math.sin,gi=function(e){return typeof e=="string"},On=function(e){return typeof e=="function"},qo=function(e){return typeof e=="number"},wE=function(e){return typeof e>"u"},vo=function(e){return typeof e=="object"},mr=function(e){return e!==!1},EE=function(){return typeof window<"u"},e0=function(e){return On(e)||gi(e)},dF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ki=Array.isArray,DS=/(?:-?\.?\d|\.)+/gi,pF=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Wc=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Qx=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,mF=/[+-]=-?[.\d]+/,gF=/[^,'"\[\]\s]+/gi,aJ=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bn,eo,LS,CE,Gr={},Gv={},vF,_F=function(e){return(Gv=Pu(e,Gr))&&Ar},TE=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},op=function(e,t){return!t&&console.warn(e)},yF=function(e,t){return e&&(Gr[e]=t)&&Gv&&(Gv[e]=t)||Gr},ap=function(){return 0},lJ={suppressEvents:!0,isStart:!0,kill:!1},A0={suppressEvents:!0,kill:!1},uJ={suppressEvents:!0},RE={},Qa=[],FS={},xF,Ir={},Zx={},qP=30,S0=[],bE="",PE=function(e){var t=e[0],i,r;if(vo(t)||On(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=S0.length;r--&&!S0[r].targetTest(t););i=S0[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new WF(e[r],i)))||e.splice(r,1);return e},du=function(e){return e._gsap||PE(fs(e))[0]._gsap},AF=function(e,t,i){return(i=e[t])&&On(i)?e[t]():wE(i)&&e.getAttribute&&e.getAttribute(t)||i},gr=function(e,t){return(e=e.split(",")).forEach(t)||e},Gn=function(e){return Math.round(e*1e5)/1e5||0},di=function(e){return Math.round(e*1e7)/1e7||0},lf=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},cJ=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},Vv=function(){var e=Qa.length,t=Qa.slice(0),i,r;for(FS={},Qa.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},SF=function(e,t,i,r){Qa.length&&!Oi&&Vv(),e.render(t,i,Oi&&t<0&&(e._initted||e._startAt)),Qa.length&&!Oi&&Vv()},MF=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(gF).length<2?t:gi(e)?e.trim():e},wF=function(e){return e},gs=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},fJ=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Pu=function(e,t){for(var i in t)e[i]=t[i];return e},$P=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=vo(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Wv=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},_d=function(e){var t=e.parent||bn,i=e.keyframes?fJ(ki(e.keyframes)):gs;if(mr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},hJ=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},EF=function(e,t,i,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},iy=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},rl=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},pu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},dJ=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},NS=function(e,t,i,r){return e._startAt&&(Oi?e._startAt.revert(A0):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},pJ=function n(e){return!e||e._ts&&n(e.parent)},eI=function(e){return e._repeat?If(e._tTime,e=e.duration()+e._rDelay)*e:0},If=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Xv=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ry=function(e){return e._end=di(e._start+(e._tDur/Math.abs(e._ts||e._rts||dn)||0))},sy=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=di(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ry(e),i._dirty||pu(i,e)),e},CF=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Xv(e.rawTime(),t),(!t._dur||Gp(0,t.totalDuration(),i)-t._tTime>dn)&&t.render(i,!0)),pu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-dn}},io=function(e,t,i,r){return t.parent&&rl(t),t._start=di((qo(i)?i:i||e!==bn?ns(e,i,t):e._time)+t._delay),t._end=di(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),EF(e,t,"_first","_last",e._sort?"_start":0),US(t)||(e._recent=t),r||CF(e,t),e._ts<0&&sy(e,e._tTime),e},TF=function(e,t){return(Gr.ScrollTrigger||TE("scrollTrigger",t))&&Gr.ScrollTrigger.create(t,e)},RF=function(e,t,i,r,s){if(BE(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Oi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&xF!==Dr.frame)return Qa.push(e),e._lazy=[s,r],1},mJ=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},US=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},gJ=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&mJ(e)&&!(!e._initted&&US(e))||(e._ts<0||e._dp._ts<0)&&!US(e))?0:1,a=e._rDelay,l=0,u,h,d;if(a&&e._repeat&&(l=Gp(0,e._tDur,t),h=If(l,a),e._yoyo&&h&1&&(o=1-o),h!==If(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Oi||r||e._zTime===dn||!t&&e._zTime){if(!e._initted&&RF(e,t,r,i,l))return;for(d=e._zTime,e._zTime=t||(i?dn:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&NS(e,t,i,!0),e._onUpdate&&!i&&Fr(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Fr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&rl(e,1),!i&&!Oi&&(Fr(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},vJ=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Bf=function(e,t,i,r){var s=e._repeat,o=di(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:di(o*(s+1)+e._rDelay*s):o,a>0&&!r&&sy(e,e._tTime=e._tDur*a),e.parent&&ry(e),i||pu(e.parent,e),e},tI=function(e){return e instanceof Qi?pu(e):Bf(e,e._dur)},_J={_start:0,endTime:ap,totalDuration:ap},ns=function n(e,t,i){var r=e.labels,s=e._recent||_J,o=e.duration()>=cs?s.endTime(!1):e._dur,a,l,u;return gi(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&i&&(l=l/100*(ki(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},yd=function(e,t,i){var r=qo(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=mr(l.vars.inherit)&&l.parent;o.immediateRender=mr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Qn(t[0],o,t[s+1])},dl=function(e,t){return e||e===0?t(e):t},Gp=function(e,t,i){return i<e?e:i>t?t:i},Li=function(e,t){return!gi(e)||!(t=aJ.exec(e))?"":t[1]},yJ=function(e,t,i){return dl(i,function(r){return Gp(e,t,r)})},OS=[].slice,bF=function(e,t){return e&&vo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&vo(e[0]))&&!e.nodeType&&e!==eo},xJ=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return gi(r)&&!t||bF(r,1)?(s=i).push.apply(s,fs(r)):i.push(r)})||i},fs=function(e,t,i){return wn&&!t&&wn.selector?wn.selector(e):gi(e)&&!i&&(LS||!Df())?OS.call((t||CE).querySelectorAll(e),0):ki(e)?xJ(e,i):bF(e)?OS.call(e,0):e?[e]:[]},kS=function(e){return e=fs(e)[0]||op("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return fs(t,i.querySelectorAll?i:i===e?op("Invalid scope")||CE.createElement("div"):e)}},PF=function(e){return e.sort(function(){return .5-Math.random()})},IF=function(e){if(On(e))return e;var t=vo(e)?e:{each:e},i=mu(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,u=t.axis,h=r,d=r;return gi(r)?h=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(h=r[0],d=r[1]),function(p,m,v){var x=(v||t).length,y=o[x],g,A,S,w,P,T,R,D,C;if(!y){if(C=t.grid==="auto"?0:(t.grid||[1,cs])[1],!C){for(R=-cs;R<(R=v[C++].getBoundingClientRect().left)&&C<x;);C<x&&C--}for(y=o[x]=[],g=l?Math.min(C,x)*h-.5:r%C,A=C===cs?0:l?x*d/C-.5:r/C|0,R=0,D=cs,T=0;T<x;T++)S=T%C-g,w=A-(T/C|0),y[T]=P=u?Math.abs(u==="y"?w:S):hF(S*S+w*w),P>R&&(R=P),P<D&&(D=P);r==="random"&&PF(y),y.max=R-D,y.min=D,y.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(C>x?x-1:u?u==="y"?x/C:C:Math.max(C,x/C))||0)*(r==="edges"?-1:1),y.b=x<0?s-x:s,y.u=Li(t.amount||t.each)||0,i=i&&x<0?HF(i):i}return x=(y[p]-y.min)/y.max||0,di(y.b+(i?i(x):x)*y.v)+y.u}},zS=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=di(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(qo(i)?0:Li(i))}},BF=function(e,t){var i=ki(e),r,s;return!i&&vo(e)&&(r=i=e.radius||cs,e.values?(e=fs(e.values),(s=!qo(e[0]))&&(r*=r)):e=zS(e.increment)),dl(t,i?On(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=cs,h=0,d=e.length,p,m;d--;)s?(p=e[d].x-a,m=e[d].y-l,p=p*p+m*m):p=Math.abs(e[d]-a),p<u&&(u=p,h=d);return h=!r||u<=r?e[h]:o,s||h===o||qo(o)?h:h+Li(o)}:zS(e))},DF=function(e,t,i,r){return dl(ki(e)?!t:i===!0?!!(i=0):!r,function(){return ki(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},AJ=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},SJ=function(e,t){return function(i){return e(parseFloat(i))+(t||Li(i))}},MJ=function(e,t,i){return FF(e,t,0,1,i)},LF=function(e,t,i){return dl(i,function(r){return e[~~t(r)]})},wJ=function n(e,t,i){var r=t-e;return ki(e)?LF(e,n(0,e.length),t):dl(i,function(s){return(r+(s-e)%r)%r+e})},EJ=function n(e,t,i){var r=t-e,s=r*2;return ki(e)?LF(e,n(0,e.length-1),t):dl(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},lp=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?gF:DS),i+=e.substr(t,r-t)+DF(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},FF=function(e,t,i,r,s){var o=t-e,a=r-i;return dl(s,function(l){return i+((l-e)/o*a||0)})},CJ=function n(e,t,i,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=gi(e),a={},l,u,h,d,p;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(ki(e)&&!ki(t)){for(h=[],d=e.length,p=d-2,u=1;u<d;u++)h.push(n(e[u-1],e[u]));d--,s=function(v){v*=d;var x=Math.min(p,~~v);return h[x](v-x)},i=t}else r||(e=Pu(ki(e)?[]:{},e));if(!h){for(l in t)IE.call(a,e,l,"get",t[l]);s=function(v){return FE(v,a)||(o?e.p:e)}}}return dl(i,s)},nI=function(e,t,i){var r=e.labels,s=cs,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Fr=function(e,t,i){var r=e.vars,s=r[t],o=wn,a=e._ctx,l,u,h;if(s)return l=r[t+"Params"],u=r.callbackScope||e,i&&Qa.length&&Vv(),a&&(wn=a),h=l?s.apply(u,l):s.call(u),wn=o,h},Yh=function(e){return rl(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Oi),e.progress()<1&&Fr(e,"onInterrupt"),e},Xc,NF=[],UF=function(e){if(e)if(e=!e.name&&e.default||e,EE()||e.headless){var t=e.name,i=On(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:ap,render:FE,add:IE,kill:GJ,modifier:HJ,rawVars:0},o={targetTest:0,get:0,getSetter:LE,aliases:{},register:0};if(Df(),e!==r){if(Ir[t])return;gs(r,gs(Wv(e,s),o)),Pu(r.prototype,Pu(s,Wv(e,o))),Ir[r.prop=t]=r,e.targetTest&&(S0.push(r),RE[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}yF(t,r),e.register&&e.register(Ar,r,vr)}else NF.push(e)},un=255,jh={aqua:[0,un,un],lime:[0,un,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,un],navy:[0,0,128],white:[un,un,un],olive:[128,128,0],yellow:[un,un,0],orange:[un,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[un,0,0],pink:[un,192,203],cyan:[0,un,un],transparent:[un,un,un,0]},qx=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*un+.5|0},OF=function(e,t,i){var r=e?qo(e)?[e>>16,e>>8&un,e&un]:0:jh.black,s,o,a,l,u,h,d,p,m,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),jh[e])r=jh[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&un,r&un,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&un,e&un]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(DS),!t)l=+r[0]%360/360,u=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(u+1):h+u-h*u,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=qx(l+1/3,s,o),r[1]=qx(l,s,o),r[2]=qx(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(pF),i&&r.length<4&&(r[3]=1),r}else r=e.match(DS)||jh.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/un,o=r[1]/un,a=r[2]/un,d=Math.max(s,o,a),p=Math.min(s,o,a),h=(d+p)/2,d===p?l=u=0:(m=d-p,u=h>.5?m/(2-d-p):m/(d+p),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),r[0]=~~(l+.5),r[1]=~~(u*100+.5),r[2]=~~(h*100+.5)),i&&r.length<4&&(r[3]=1),r},kF=function(e){var t=[],i=[],r=-1;return e.split(Za).forEach(function(s){var o=s.match(Wc)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},iI=function(e,t,i){var r="",s=(e+r).match(Za),o=t?"hsla(":"rgba(",a=0,l,u,h,d;if(!s)return e;if(s=s.map(function(p){return(p=OF(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(h=kF(e),l=i.c,l.join(r)!==h.c.join(r)))for(u=e.replace(Za,"1").split(Wc),d=u.length-1;a<d;a++)r+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:i).shift());if(!u)for(u=e.split(Za),d=u.length-1;a<d;a++)r+=u[a]+s[a];return r+u[d]},Za=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in jh)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),TJ=/hsl[a]?\(/,zF=function(e){var t=e.join(" "),i;if(Za.lastIndex=0,Za.test(t))return i=TJ.test(t),e[1]=iI(e[1],i),e[0]=iI(e[0],i,kF(e[1])),!0},up,Dr=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,u,h,d,p,m,v=function x(y){var g=n()-r,A=y===!0,S,w,P,T;if((g>e||g<0)&&(i+=g-t),r+=g,P=r-i,S=P-o,(S>0||A)&&(T=++d.frame,p=P-d.time*1e3,d.time=P=P/1e3,o+=S+(S>=s?4:s-S),w=1),A||(l=u(x)),w)for(m=0;m<a.length;m++)a[m](P,p,T,y)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(y){return p/(1e3/(y||60))},wake:function(){vF&&(!LS&&EE()&&(eo=LS=window,CE=eo.document||{},Gr.gsap=Ar,(eo.gsapVersions||(eo.gsapVersions=[])).push(Ar.version),_F(Gv||eo.GreenSockGlobals||!eo.gsap&&eo||{}),NF.forEach(UF)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),u=h||function(y){return setTimeout(y,o-d.time*1e3+1|0)},up=1,v(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),up=0,u=ap},lagSmoothing:function(y,g){e=y||1/0,t=Math.min(g||33,e)},fps:function(y){s=1e3/(y||240),o=d.time*1e3+s},add:function(y,g,A){var S=g?function(w,P,T,R){y(w,P,T,R),d.remove(S)}:y;return d.remove(y),a[A?"unshift":"push"](S),Df(),S},remove:function(y,g){~(g=a.indexOf(y))&&a.splice(g,1)&&m>=g&&m--},_listeners:a},d}(),Df=function(){return!up&&Dr.wake()},Wt={},RJ=/^[\d.\-M][\d.\-,\s]/,bJ=/["']/g,PJ=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,u;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[r]=isNaN(u)?u.replace(bJ,"").trim():+u,r=l.substr(a+1).trim();return t},IJ=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},BJ=function(e){var t=(e+"").split("("),i=Wt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[PJ(t[1])]:IJ(e).split(",").map(MF)):Wt._CE&&RJ.test(e)?Wt._CE("",e):i},HF=function(e){return function(t){return 1-e(1-t)}},GF=function n(e,t){for(var i=e._first,r;i;)i instanceof Qi?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},mu=function(e,t){return e&&(On(e)?e:Wt[e]||BJ(e))||t},Ou=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return gr(e,function(a){Wt[a]=Gr[a]=s,Wt[o=a.toLowerCase()]=i;for(var l in s)Wt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Wt[a+"."+l]=s[l]}),s},VF=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},$x=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/BS*(Math.asin(1/r)||0),a=function(h){return h===1?1:r*Math.pow(2,-10*h)*oJ((h-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:VF(a);return s=BS/s,l.config=function(u,h){return n(e,u,h)},l},eA=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:VF(i);return r.config=function(s){return n(e,s)},r};gr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Ou(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Wt.Linear.easeNone=Wt.none=Wt.Linear.easeIn;Ou("Elastic",$x("in"),$x("out"),$x());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Ou("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Ou("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Ou("Circ",function(n){return-(hF(1-n*n)-1)});Ou("Sine",function(n){return n===1?1:-sJ(n*iJ)+1});Ou("Back",eA("in"),eA("out"),eA());Wt.SteppedEase=Wt.steps=Gr.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-dn;return function(a){return((r*Gp(0,o,a)|0)+s)*i}}};Pf.ease=Wt["quad.out"];gr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return bE+=n+","+n+"Params,"});var WF=function(e,t){this.id=rJ++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:AF,this.set=t?t.getSetter:LE},cp=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Bf(this,+t.duration,1,1),this.data=t.data,wn&&(this._ctx=wn,wn.data.push(this)),up||Dr.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Bf(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Df(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(sy(this,i),!s._dp||s.parent||CF(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&io(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===dn||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),SF(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+eI(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+eI(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?If(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-dn?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Xv(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-dn?0:this._rts,this.totalTime(Gp(-Math.abs(this._delay),this._tDur,s),r!==!1),ry(this),dJ(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Df(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==dn&&(this._tTime-=dn)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&io(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(mr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xv(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=uJ);var r=Oi;return Oi=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Oi=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,tI(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,tI(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(ns(this,i),mr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,mr(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-dn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-dn,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-dn)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=On(i)?i:wF,a=function(){var u=r.then;r.then=null,On(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=u),s(o),r.then=u};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Yh(this)},n}();gs(cp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-dn,_prom:0,_ps:!1,_rts:1});var Qi=function(n){fF(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=mr(i.sortChildren),bn&&io(i.parent||bn,Do(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&TF(Do(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return yd(0,arguments,this),this},t.from=function(r,s,o){return yd(1,arguments,this),this},t.fromTo=function(r,s,o,a){return yd(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,_d(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Qn(r,s,ns(this,o),1),this},t.call=function(r,s,o){return io(this,Qn.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,u,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=h,o.parent=this,new Qn(r,o,ns(this,l)),this},t.staggerFrom=function(r,s,o,a,l,u,h){return o.runBackwards=1,_d(o).immediateRender=mr(o.immediateRender),this.staggerTo(r,s,o,a,l,u,h)},t.staggerFromTo=function(r,s,o,a,l,u,h,d){return a.startAt=o,_d(a).immediateRender=mr(a.immediateRender),this.staggerTo(r,s,a,l,u,h,d)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,h=r<=0?0:di(r),d=this._zTime<0!=r<0&&(this._initted||!u),p,m,v,x,y,g,A,S,w,P,T,R;if(this!==bn&&h>l&&r>=0&&(h=l),h!==this._tTime||o||d){if(a!==this._time&&u&&(h+=this._time-a,r+=this._time-a),p=h,w=this._start,S=this._ts,g=!S,d&&(u||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(T=this._yoyo,y=u+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,s,o);if(p=di(h%y),h===l?(x=this._repeat,p=u):(x=~~(h/y),x&&x===h/y&&(p=u,x--),p>u&&(p=u)),P=If(this._tTime,y),!a&&this._tTime&&P!==x&&this._tTime-P*y-this._dur<=0&&(P=x),T&&x&1&&(p=u-p,R=1),x!==P&&!this._lock){var D=T&&P&1,C=D===(T&&x&1);if(x<P&&(D=!D),a=D?0:h%u?u:h,this._lock=1,this.render(a||(R?0:di(x*y)),s,!u)._lock=0,this._tTime=h,!s&&this.parent&&Fr(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,C&&(this._lock=2,a=D?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;GF(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(A=vJ(this,di(a),di(p)),A&&(h-=p-(p=A._start))),this._tTime=h,this._time=p,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&!x&&(Fr(this,"onStart"),this._tTime!==h))return this;if(p>=a&&r>=0)for(m=this._first;m;){if(v=m._next,(m._act||p>=m._start)&&m._ts&&A!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!g){A=0,v&&(h+=this._zTime=-dn);break}}m=v}else{m=this._last;for(var b=r<0?r:p;m;){if(v=m._prev,(m._act||b<=m._end)&&m._ts&&A!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(b-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(b-m._start)*m._ts,s,o||Oi&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!g){A=0,v&&(h+=this._zTime=b?-dn:dn);break}}m=v}}if(A&&!s&&(this.pause(),A.render(p>=a?0:-dn)._zTime=p>=a?1:-1,this._ts))return this._start=w,ry(this),this.render(r,s,o);this._onUpdate&&!s&&Fr(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(w===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((r||!u)&&(h===l&&this._ts>0||!h&&this._ts<0)&&rl(this,1),!s&&!(r<0&&!a)&&(h||a||!l)&&(Fr(this,h===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(qo(s)||(s=ns(this,s,r)),!(r instanceof cp)){if(ki(r))return r.forEach(function(a){return o.add(a,s)}),this;if(gi(r))return this.addLabel(r,s);if(On(r))r=Qn.delayedCall(0,r);else return this}return this!==r?io(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-cs);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Qn?s&&l.push(u):(o&&l.push(u),r&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return gi(r)?this.removeLabel(r):On(r)?this.killTweensOf(r):(iy(this,r),r===this._recent&&(this._recent=this._last),pu(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=di(Dr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=ns(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Qn.delayedCall(0,s||ap,o);return a.data="isPause",this._hasPause=1,io(this,a,ns(this,r))},t.removePause=function(r){var s=this._first;for(r=ns(this,r);s;)s._start===r&&s.data==="isPause"&&rl(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Ua!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=fs(r),l=this._first,u=qo(s),h;l;)l instanceof Qn?cJ(l._targets,a)&&(u?(!Ua||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=ns(o,r),l=s,u=l.startAt,h=l.onStart,d=l.onStartParams,p=l.immediateRender,m,v=Qn.to(o,gs({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||dn,onStart:function(){if(o.pause(),!m){var y=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());v._dur!==y&&Bf(v,y,0,1).render(v._time,!0,!0),m=1}h&&h.apply(v,d||[])}},s));return p?v.render(0):v},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,gs({startAt:{time:ns(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),nI(this,ns(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),nI(this,ns(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+dn)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=r);return pu(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),pu(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=cs,u,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,io(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;Bf(o,o===bn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(bn._ts&&(SF(bn,Xv(r,bn)),xF=Dr.frame),Dr.frame>=qP){qP+=kr.autoSleep||120;var s=bn._first;if((!s||!s._ts)&&kr.autoSleep&&Dr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Dr.sleep()}}},e}(cp);gs(Qi.prototype,{_lock:0,_hasPause:0,_forcing:0});var DJ=function(e,t,i,r,s,o,a){var l=new vr(this._pt,e,t,0,1,QF,null,s),u=0,h=0,d,p,m,v,x,y,g,A;for(l.b=i,l.e=r,i+="",r+="",(g=~r.indexOf("random("))&&(r=lp(r)),o&&(A=[i,r],o(A,e,t),i=A[0],r=A[1]),p=i.match(Qx)||[];d=Qx.exec(r);)v=d[0],x=r.substring(u,d.index),m?m=(m+1)%5:x.substr(-5)==="rgba("&&(m=1),v!==p[h++]&&(y=parseFloat(p[h-1])||0,l._pt={_next:l._pt,p:x||h===1?x:",",s:y,c:v.charAt(1)==="="?lf(y,v)-y:parseFloat(v)-y,m:m&&m<4?Math.round:0},u=Qx.lastIndex);return l.c=u<r.length?r.substring(u,r.length):"",l.fp=a,(mF.test(r)||g)&&(l.e=0),this._pt=l,l},IE=function(e,t,i,r,s,o,a,l,u,h){On(r)&&(r=r(s||0,e,o));var d=e[t],p=i!=="get"?i:On(d)?u?e[t.indexOf("set")||!On(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():d,m=On(d)?u?OJ:YF:DE,v;if(gi(r)&&(~r.indexOf("random(")&&(r=lp(r)),r.charAt(1)==="="&&(v=lf(p,r)+(Li(p)||0),(v||v===0)&&(r=v))),!h||p!==r||HS)return!isNaN(p*r)&&r!==""?(v=new vr(this._pt,e,t,+p||0,r-(p||0),typeof d=="boolean"?zJ:jF,0,m),u&&(v.fp=u),a&&v.modifier(a,this,e),this._pt=v):(!d&&!(t in e)&&TE(t,r),DJ.call(this,e,t,p,r,m,l||kr.stringFilter,u))},LJ=function(e,t,i,r,s){if(On(e)&&(e=xd(e,s,t,i,r)),!vo(e)||e.style&&e.nodeType||ki(e)||dF(e))return gi(e)?xd(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=xd(e[a],s,t,i,r);return o},XF=function(e,t,i,r,s,o){var a,l,u,h;if(Ir[e]&&(a=new Ir[e]).init(s,a.rawVars?t[e]:LJ(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new vr(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==Xc))for(u=i._ptLookup[i._targets.indexOf(s)],h=a._props.length;h--;)u[a._props[h]]=l;return a},Ua,HS,BE=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,u=r.onUpdate,h=r.runBackwards,d=r.yoyoEase,p=r.keyframes,m=r.autoRevert,v=e._dur,x=e._startAt,y=e._targets,g=e.parent,A=g&&g.data==="nested"?g.vars.targets:y,S=e._overwrite==="auto"&&!ME,w=e.timeline,P,T,R,D,C,b,N,J,K,q,te,Z,oe;if(w&&(!p||!s)&&(s="none"),e._ease=mu(s,Pf.ease),e._yEase=d?HF(mu(d===!0?s:d,Pf.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!w&&!!r.runBackwards,!w||p&&!r.stagger){if(J=y[0]?du(y[0]).harness:0,Z=J&&r[J.prop],P=Wv(r,RE),x&&(x._zTime<0&&x.progress(1),t<0&&h&&a&&!m?x.render(-1,!0):x.revert(h&&v?A0:lJ),x._lazy=0),o){if(rl(e._startAt=Qn.set(y,gs({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!x&&mr(l),startAt:null,delay:0,onUpdate:u&&function(){return Fr(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Oi||!a&&!m)&&e._startAt.revert(A0),a&&v&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(h&&v&&!x){if(t&&(a=!1),R=gs({overwrite:!1,data:"isFromStart",lazy:a&&!x&&mr(l),immediateRender:a,stagger:0,parent:g},P),Z&&(R[J.prop]=Z),rl(e._startAt=Qn.set(y,R)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Oi?e._startAt.revert(A0):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,dn,dn);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&mr(l)||l&&!v,T=0;T<y.length;T++){if(C=y[T],N=C._gsap||PE(y)[T]._gsap,e._ptLookup[T]=q={},FS[N.id]&&Qa.length&&Vv(),te=A===y?T:A.indexOf(C),J&&(K=new J).init(C,Z||P,e,te,A)!==!1&&(e._pt=D=new vr(e._pt,C,K.name,0,1,K.render,K,0,K.priority),K._props.forEach(function(H){q[H]=D}),K.priority&&(b=1)),!J||Z)for(R in P)Ir[R]&&(K=XF(R,P,e,te,C,A))?K.priority&&(b=1):q[R]=D=IE.call(e,C,R,"get",P[R],te,A,0,r.stringFilter);e._op&&e._op[T]&&e.kill(C,e._op[T]),S&&e._pt&&(Ua=e,bn.killTweensOf(C,q,e.globalTime(t)),oe=!e.parent,Ua=0),e._pt&&l&&(FS[N.id]=1)}b&&ZF(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!oe,p&&t<=0&&w.render(cs,!0,!0)},FJ=function(e,t,i,r,s,o,a,l){var u=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,d,p,m;if(!u)for(u=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(h=p[m][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return HS=1,e.vars[t]="+=0",BE(e,a),HS=0,l?op(t+" not eligible for reset"):1;u.push(h)}for(m=u.length;m--;)d=u[m],h=d._pt||d,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=i-h.s,d.e&&(d.e=Gn(i)+Li(d.e)),d.b&&(d.b=h.s+Li(d.b))},NJ=function(e,t){var i=e[0]?du(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Pu({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},UJ=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(ki(t))a=i[e]||(i[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},xd=function(e,t,i,r,s){return On(e)?e.call(t,i,r,s):gi(e)&&~e.indexOf("random(")?lp(e):e},JF=bE+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",KF={};gr(JF+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return KF[n]=1});var Qn=function(n){fF(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:_d(r))||this;var l=a.vars,u=l.duration,h=l.delay,d=l.immediateRender,p=l.stagger,m=l.overwrite,v=l.keyframes,x=l.defaults,y=l.scrollTrigger,g=l.yoyoEase,A=r.parent||bn,S=(ki(i)||dF(i)?qo(i[0]):"length"in r)?[i]:fs(i),w,P,T,R,D,C,b,N;if(a._targets=S.length?PE(S):op("GSAP target "+i+" not found. https://gsap.com",!kr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||p||e0(u)||e0(h)){if(r=a.vars,w=a.timeline=new Qi({data:"nested",defaults:x||{},targets:A&&A.data==="nested"?A.vars.targets:S}),w.kill(),w.parent=w._dp=Do(a),w._start=0,p||e0(u)||e0(h)){if(R=S.length,b=p&&IF(p),vo(p))for(D in p)~JF.indexOf(D)&&(N||(N={}),N[D]=p[D]);for(P=0;P<R;P++)T=Wv(r,KF),T.stagger=0,g&&(T.yoyoEase=g),N&&Pu(T,N),C=S[P],T.duration=+xd(u,Do(a),P,C,S),T.delay=(+xd(h,Do(a),P,C,S)||0)-a._delay,!p&&R===1&&T.delay&&(a._delay=h=T.delay,a._start+=h,T.delay=0),w.to(C,T,b?b(P,C,S):0),w._ease=Wt.none;w.duration()?u=h=0:a.timeline=0}else if(v){_d(gs(w.vars.defaults,{ease:"none"})),w._ease=mu(v.ease||r.ease||"none");var J=0,K,q,te;if(ki(v))v.forEach(function(Z){return w.to(S,Z,">")}),w.duration();else{T={};for(D in v)D==="ease"||D==="easeEach"||UJ(D,v[D],T,v.easeEach);for(D in T)for(K=T[D].sort(function(Z,oe){return Z.t-oe.t}),J=0,P=0;P<K.length;P++)q=K[P],te={ease:q.e,duration:(q.t-(P?K[P-1].t:0))/100*u},te[D]=q.v,w.to(S,te,J),J+=te.duration;w.duration()<u&&w.to({},{duration:u-w.duration()})}}u||a.duration(u=w.duration())}else a.timeline=0;return m===!0&&!ME&&(Ua=Do(a),bn.killTweensOf(S),Ua=0),io(A,Do(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!u&&!v&&a._start===di(A._time)&&mr(d)&&pJ(Do(a))&&A.data!=="nested")&&(a._tTime=-dn,a.render(Math.max(0,-h)||0)),y&&TF(Do(a),y),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,u=this._dur,h=r<0,d=r>l-dn&&!h?l:r<dn?0:r,p,m,v,x,y,g,A,S,w;if(!u)gJ(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(p=d,S=this.timeline,this._repeat){if(x=u+this._rDelay,this._repeat<-1&&h)return this.totalTime(x*100+r,s,o);if(p=di(d%x),d===l?(v=this._repeat,p=u):(v=~~(d/x),v&&v===di(d/x)&&(p=u,v--),p>u&&(p=u)),g=this._yoyo&&v&1,g&&(w=this._yEase,p=u-p),y=If(this._tTime,x),p===a&&!o&&this._initted&&v===y)return this._tTime=d,this;v!==y&&(S&&this._yEase&&GF(S,g),this.vars.repeatRefresh&&!g&&!this._lock&&this._time!==x&&this._initted&&(this._lock=o=1,this.render(di(x*v),!0).invalidate()._lock=0))}if(!this._initted){if(RF(this,h?r:p,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&v!==y))return this;if(u!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=A=(w||this._ease)(p/u),this._from&&(this.ratio=A=1-A),p&&!a&&!s&&!v&&(Fr(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(A,m.d),m=m._next;S&&S.render(r<0?r:S._dur*S._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&NS(this,r,s,o),Fr(this,"onUpdate")),this._repeat&&v!==y&&this.vars.onRepeat&&!s&&this.parent&&Fr(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&NS(this,r,!0,!0),(r||!u)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&rl(this,1),!s&&!(h&&!a)&&(d||a||g)&&(Fr(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){up||Dr.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||BE(this,u),h=this._ease(u/this._dur),FJ(this,r,s,o,a,h,u,l)?this.resetTo(r,s,o,a,1):(sy(this,0),this.parent||EF(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Yh(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Ua&&Ua.vars.overwrite!==!0)._first||Yh(this),this.parent&&o!==this.timeline.totalDuration()&&Bf(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?fs(r):a,u=this._ptLookup,h=this._pt,d,p,m,v,x,y,g;if((!s||s==="all")&&hJ(a,l))return s==="all"&&(this._pt=0),Yh(this);for(d=this._op=this._op||[],s!=="all"&&(gi(s)&&(x={},gr(s,function(A){return x[A]=1}),s=x),s=NJ(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){p=u[g],s==="all"?(d[g]=s,v=p,m={}):(m=d[g]=d[g]||{},v=s);for(x in v)y=p&&p[x],y&&((!("kill"in y.d)||y.d.kill(x)===!0)&&iy(this,y,"_pt"),delete p[x]),m!=="all"&&(m[x]=1)}return this._initted&&!this._pt&&h&&Yh(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return yd(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return yd(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return bn.killTweensOf(r,s,o)},e}(cp);gs(Qn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});gr("staggerTo,staggerFrom,staggerFromTo",function(n){Qn[n]=function(){var e=new Qi,t=OS.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var DE=function(e,t,i){return e[t]=i},YF=function(e,t,i){return e[t](i)},OJ=function(e,t,i,r){return e[t](r.fp,i)},kJ=function(e,t,i){return e.setAttribute(t,i)},LE=function(e,t){return On(e[t])?YF:wE(e[t])&&e.setAttribute?kJ:DE},jF=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},zJ=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},QF=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},FE=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},HJ=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},GJ=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?iy(this,t,"_pt"):t.dep||(i=1),t=r;return!i},VJ=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},ZF=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},vr=function(){function n(t,i,r,s,o,a,l,u,h){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||jF,this.d=l||this,this.set=u||DE,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=VJ,this.m=i,this.mt=s,this.tween=r},n}();gr(bE+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return RE[n]=1});Gr.TweenMax=Gr.TweenLite=Qn;Gr.TimelineLite=Gr.TimelineMax=Qi;bn=new Qi({sortChildren:!1,defaults:Pf,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});kr.stringFilter=zF;var gu=[],M0={},WJ=[],rI=0,XJ=0,tA=function(e){return(M0[e]||WJ).map(function(t){return t()})},GS=function(){var e=Date.now(),t=[];e-rI>2&&(tA("matchMediaInit"),gu.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,u;for(a in r)o=eo.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(i.revert(),l&&t.push(i))}),tA("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),rI=e,tA("matchMedia"))},qF=function(){function n(t,i){this.selector=i&&kS(i),this.data=[],this._r=[],this.isReverted=!1,this.id=XJ++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){On(i)&&(s=r,r=i,i=On);var o=this,a=function(){var u=wn,h=o.selector,d;return u&&u!==o&&u.data.push(o),s&&(o.selector=kS(s)),wn=o,d=r.apply(o,arguments),On(d)&&o._r.push(d),wn=u,o.selector=h,o.isReverted=!1,d};return o.last=a,i===On?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=wn;wn=null,i(this),wn=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Qn&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),l=s.data.length;l--;)u=s.data[l],u instanceof Qi?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Qn)&&u.revert&&u.revert(i);s._r.forEach(function(h){return h(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=gu.length;o--;)gu[o].id===this.id&&gu.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),JJ=function(){function n(t){this.contexts=[],this.scope=t,wn&&wn.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){vo(i)||(i={matches:i});var o=new qF(0,s||this.scope),a=o.conditions={},l,u,h;wn&&!o.selector&&(o.selector=wn.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(u in i)u==="all"?h=1:(l=eo.matchMedia(i[u]),l&&(gu.indexOf(o)<0&&gu.push(o),(a[u]=l.matches)&&(h=1),l.addListener?l.addListener(GS):l.addEventListener("change",GS)));return h&&r(o,function(d){return o.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),Jv={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return UF(r)})},timeline:function(e){return new Qi(e)},getTweensOf:function(e,t){return bn.getTweensOf(e,t)},getProperty:function(e,t,i,r){gi(e)&&(e=fs(e)[0]);var s=du(e||{}).get,o=i?wF:MF;return i==="native"&&(i=""),e&&(t?o((Ir[t]&&Ir[t].get||s)(e,t,i,r)):function(a,l,u){return o((Ir[a]&&Ir[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,i){if(e=fs(e),e.length>1){var r=e.map(function(h){return Ar.quickSetter(h,t,i)}),s=r.length;return function(h){for(var d=s;d--;)r[d](h)}}e=e[0]||{};var o=Ir[t],a=du(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(h){var d=new o;Xc._pt=0,d.init(e,i?h+i:h,Xc,0,[e]),d.render(1,d),Xc._pt&&FE(1,Xc)}:a.set(e,l);return o?u:function(h){return u(e,l,i?h+i:h,a,1)}},quickTo:function(e,t,i){var r,s=Ar.to(e,Pu((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,u,h){return s.resetTo(t,l,u,h)};return o.tween=s,o},isTweening:function(e){return bn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=mu(e.ease,Pf.ease)),$P(Pf,e||{})},config:function(e){return $P(kr,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Ir[a]&&!Gr[a]&&op(t+" effect requires "+a+" plugin.")}),Zx[t]=function(a,l,u){return i(fs(a),gs(l||{},s),u)},o&&(Qi.prototype[t]=function(a,l,u){return this.add(Zx[t](a,vo(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){Wt[e]=mu(t)},parseEase:function(e,t){return arguments.length?mu(e,t):Wt},getById:function(e){return bn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Qi(e),r,s;for(i.smoothChildTiming=mr(e.smoothChildTiming),bn.remove(i),i._dp=0,i._time=i._tTime=bn._time,r=bn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Qn&&r.vars.onComplete===r._targets[0]))&&io(i,r,r._start-r._delay),r=s;return io(bn,i,0),i},context:function(e,t){return e?new qF(e,t):wn},matchMedia:function(e){return new JJ(e)},matchMediaRefresh:function(){return gu.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||GS()},addEventListener:function(e,t){var i=M0[e]||(M0[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=M0[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:wJ,wrapYoyo:EJ,distribute:IF,random:DF,snap:BF,normalize:MJ,getUnit:Li,clamp:yJ,splitColor:OF,toArray:fs,selector:kS,mapRange:FF,pipe:AJ,unitize:SJ,interpolate:CJ,shuffle:PF},install:_F,effects:Zx,ticker:Dr,updateRoot:Qi.updateRoot,plugins:Ir,globalTimeline:bn,core:{PropTween:vr,globals:yF,Tween:Qn,Timeline:Qi,Animation:cp,getCache:du,_removeLinkedListItem:iy,reverting:function(){return Oi},context:function(e){return e&&wn&&(wn.data.push(e),e._ctx=wn),wn},suppressOverwrites:function(e){return ME=e}}};gr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Jv[n]=Qn[n]});Dr.add(Qi.updateRoot);Xc=Jv.to({},{duration:0});var KJ=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},YJ=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=KJ(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},nA=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,u;if(gi(s)&&(l={},gr(s,function(h){return l[h]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}YJ(a,s)}}}},Ar=Jv.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Oi?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},nA("roundProps",zS),nA("modifiers"),nA("snap",BF))||Jv;Qn.version=Qi.version=Ar.version="3.12.5";vF=1;EE()&&Df();Wt.Power0;Wt.Power1;Wt.Power2;Wt.Power3;Wt.Power4;Wt.Linear;Wt.Quad;Wt.Cubic;Wt.Quart;Wt.Quint;Wt.Strong;Wt.Elastic;Wt.Back;Wt.SteppedEase;Wt.Bounce;Wt.Sine;Wt.Expo;Wt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var sI,Oa,uf,NE,iu,oI,UE,jJ=function(){return typeof window<"u"},$o={},Wl=180/Math.PI,cf=Math.PI/180,wc=Math.atan2,aI=1e8,OE=/([A-Z])/g,QJ=/(left|right|width|margin|padding|x)/i,ZJ=/[\s,\(]\S/,so={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},VS=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},qJ=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},$J=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},eK=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},$F=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},eN=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},tK=function(e,t,i){return e.style[t]=i},nK=function(e,t,i){return e.style.setProperty(t,i)},iK=function(e,t,i){return e._gsap[t]=i},rK=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},sK=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},oK=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},In="transform",_r=In+"Origin",aK=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in $o&&s){if(this.tfm=this.tfm||{},e!=="transform")e=so[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Uo(r,a)}):this.tfm[e]=o.x?o[e]:Uo(r,e),e===_r&&(this.tfm.zOrigin=o.zOrigin);else return so.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(In)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(_r,t,"")),e=In}(s||t)&&this.props.push(e,t,s[e])},tN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},lK=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(OE,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=UE(),(!s||!s.isStart)&&!i[In]&&(tN(i),r.zOrigin&&i[_r]&&(i[_r]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},nN=function(e,t){var i={target:e,props:[],revert:lK,save:aK};return e._gsap||Ar.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},iN,WS=function(e,t){var i=Oa.createElementNS?Oa.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Oa.createElement(e);return i&&i.style?i:Oa.createElement(e)},fo=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(OE,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,Lf(t)||t,1)||""},lI="O,Moz,ms,Ms,Webkit".split(","),Lf=function(e,t,i){var r=t||iu,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(lI[o]+e in s););return o<0?null:(o===3?"ms":o>=0?lI[o]:"")+e},XS=function(){jJ()&&window.document&&(sI=window,Oa=sI.document,uf=Oa.documentElement,iu=WS("div")||{style:{}},WS("div"),In=Lf(In),_r=In+"Origin",iu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",iN=!!Lf("perspective"),UE=Ar.core.reverting,NE=1)},iA=function n(e){var t=WS("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(uf.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),uf.removeChild(t),this.style.cssText=s,o},uI=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},rN=function(e){var t;try{t=e.getBBox()}catch{t=iA.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===iA||(t=iA.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+uI(e,["x","cx","x1"])||0,y:+uI(e,["y","cy","y1"])||0,width:0,height:0}:t},sN=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&rN(e))},Iu=function(e,t){if(t){var i=e.style,r;t in $o&&t!==_r&&(t=In),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(OE,"-$1").toLowerCase())):i.removeAttribute(t)}},ka=function(e,t,i,r,s,o){var a=new vr(e._pt,t,i,0,1,o?eN:$F);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},cI={deg:1,rad:1,turn:1},uK={grid:1,flex:1},sl=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=iu.style,l=QJ.test(t),u=e.tagName.toLowerCase()==="svg",h=(u?"client":"offset")+(l?"Width":"Height"),d=100,p=r==="px",m=r==="%",v,x,y,g;if(r===o||!s||cI[r]||cI[o])return s;if(o!=="px"&&!p&&(s=n(e,t,i,"px")),g=e.getCTM&&sN(e),(m||o==="%")&&($o[t]||~t.indexOf("adius")))return v=g?e.getBBox()[l?"width":"height"]:e[h],Gn(m?s/v*d:s/100*v);if(a[l?"width":"height"]=d+(p?o:r),x=~t.indexOf("adius")||r==="em"&&e.appendChild&&!u?e:e.parentNode,g&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===Oa||!x.appendChild)&&(x=Oa.body),y=x._gsap,y&&m&&y.width&&l&&y.time===Dr.time&&!y.uncache)return Gn(s/y.width*d);if(m&&(t==="height"||t==="width")){var A=e.style[t];e.style[t]=d+r,v=e[h],A?e.style[t]=A:Iu(e,t)}else(m||o==="%")&&!uK[fo(x,"display")]&&(a.position=fo(e,"position")),x===e&&(a.position="static"),x.appendChild(iu),v=iu[h],x.removeChild(iu),a.position="absolute";return l&&m&&(y=du(x),y.time=Dr.time,y.width=x[h]),Gn(p?v*s/d:v&&s?d/v*s:0)},Uo=function(e,t,i,r){var s;return NE||XS(),t in so&&t!=="transform"&&(t=so[t],~t.indexOf(",")&&(t=t.split(",")[0])),$o[t]&&t!=="transform"?(s=hp(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Yv(fo(e,_r))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Kv[t]&&Kv[t](e,t,i)||fo(e,t)||AF(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?sl(e,t,s,i)+i:s},cK=function(e,t,i,r){if(!i||i==="none"){var s=Lf(t,e,1),o=s&&fo(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=fo(e,"borderTopColor"))}var a=new vr(this._pt,e.style,t,0,1,QF),l=0,u=0,h,d,p,m,v,x,y,g,A,S,w,P;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(x=e.style[t],e.style[t]=r,r=fo(e,t)||r,x?e.style[t]=x:Iu(e,t)),h=[i,r],zF(h),i=h[0],r=h[1],p=i.match(Wc)||[],P=r.match(Wc)||[],P.length){for(;d=Wc.exec(r);)y=d[0],A=r.substring(l,d.index),v?v=(v+1)%5:(A.substr(-5)==="rgba("||A.substr(-5)==="hsla(")&&(v=1),y!==(x=p[u++]||"")&&(m=parseFloat(x)||0,w=x.substr((m+"").length),y.charAt(1)==="="&&(y=lf(m,y)+w),g=parseFloat(y),S=y.substr((g+"").length),l=Wc.lastIndex-S.length,S||(S=S||kr.units[t]||w,l===r.length&&(r+=S,a.e+=S)),w!==S&&(m=sl(e,t,x,S)||0),a._pt={_next:a._pt,p:A||u===1?A:",",s:m,c:g-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?eN:$F;return mF.test(r)&&(a.e=0),this._pt=a,a},fI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},fK=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=fI[i]||i,t[1]=fI[r]||r,t.join(" ")},hK=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,u;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],$o[a]&&(l=1,a=a==="transformOrigin"?_r:In),Iu(i,a);l&&(Iu(i,In),o&&(o.svg&&i.removeAttribute("transform"),hp(i,1),o.uncache=1,tN(r)))}},Kv={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new vr(e._pt,t,i,0,0,hK);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},fp=[1,0,0,1,0,0],oN={},aN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},hI=function(e){var t=fo(e,In);return aN(t)?fp:t.substr(7).match(pF).map(Gn)},kE=function(e,t){var i=e._gsap||du(e),r=e.style,s=hI(e),o,a,l,u;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?fp:s):(s===fp&&!e.offsetParent&&e!==uf&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,uf.appendChild(e)),s=hI(e),l?r.display=l:Iu(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):uf.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},JS=function(e,t,i,r,s,o){var a=e._gsap,l=s||kE(e,!0),u=a.xOrigin||0,h=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,m=l[0],v=l[1],x=l[2],y=l[3],g=l[4],A=l[5],S=t.split(" "),w=parseFloat(S[0])||0,P=parseFloat(S[1])||0,T,R,D,C;i?l!==fp&&(R=m*y-v*x)&&(D=w*(y/R)+P*(-x/R)+(x*A-y*g)/R,C=w*(-v/R)+P*(m/R)-(m*A-v*g)/R,w=D,P=C):(T=rN(e),w=T.x+(~S[0].indexOf("%")?w/100*T.width:w),P=T.y+(~(S[1]||S[0]).indexOf("%")?P/100*T.height:P)),r||r!==!1&&a.smooth?(g=w-u,A=P-h,a.xOffset=d+(g*m+A*x)-g,a.yOffset=p+(g*v+A*y)-A):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=P,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[_r]="0px 0px",o&&(ka(o,a,"xOrigin",u,w),ka(o,a,"yOrigin",h,P),ka(o,a,"xOffset",d,a.xOffset),ka(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+P)},hp=function(e,t){var i=e._gsap||new WF(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=fo(e,_r)||"0",h,d,p,m,v,x,y,g,A,S,w,P,T,R,D,C,b,N,J,K,q,te,Z,oe,H,ee,Q,ue,me,Ie,ae,ve;return h=d=p=x=y=g=A=S=w=0,m=v=1,i.svg=!!(e.getCTM&&sN(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[In]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[In]!=="none"?l[In]:"")),r.scale=r.rotate=r.translate="none"),R=kE(e,i.svg),i.svg&&(i.uncache?(H=e.getBBox(),u=i.xOrigin-H.x+"px "+(i.yOrigin-H.y)+"px",oe=""):oe=!t&&e.getAttribute("data-svg-origin"),JS(e,oe||u,!!oe||i.originIsAbsolute,i.smooth!==!1,R)),P=i.xOrigin||0,T=i.yOrigin||0,R!==fp&&(N=R[0],J=R[1],K=R[2],q=R[3],h=te=R[4],d=Z=R[5],R.length===6?(m=Math.sqrt(N*N+J*J),v=Math.sqrt(q*q+K*K),x=N||J?wc(J,N)*Wl:0,A=K||q?wc(K,q)*Wl+x:0,A&&(v*=Math.abs(Math.cos(A*cf))),i.svg&&(h-=P-(P*N+T*K),d-=T-(P*J+T*q))):(ve=R[6],Ie=R[7],Q=R[8],ue=R[9],me=R[10],ae=R[11],h=R[12],d=R[13],p=R[14],D=wc(ve,me),y=D*Wl,D&&(C=Math.cos(-D),b=Math.sin(-D),oe=te*C+Q*b,H=Z*C+ue*b,ee=ve*C+me*b,Q=te*-b+Q*C,ue=Z*-b+ue*C,me=ve*-b+me*C,ae=Ie*-b+ae*C,te=oe,Z=H,ve=ee),D=wc(-K,me),g=D*Wl,D&&(C=Math.cos(-D),b=Math.sin(-D),oe=N*C-Q*b,H=J*C-ue*b,ee=K*C-me*b,ae=q*b+ae*C,N=oe,J=H,K=ee),D=wc(J,N),x=D*Wl,D&&(C=Math.cos(D),b=Math.sin(D),oe=N*C+J*b,H=te*C+Z*b,J=J*C-N*b,Z=Z*C-te*b,N=oe,te=H),y&&Math.abs(y)+Math.abs(x)>359.9&&(y=x=0,g=180-g),m=Gn(Math.sqrt(N*N+J*J+K*K)),v=Gn(Math.sqrt(Z*Z+ve*ve)),D=wc(te,Z),A=Math.abs(D)>2e-4?D*Wl:0,w=ae?1/(ae<0?-ae:ae):0),i.svg&&(oe=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!aN(fo(e,In)),oe&&e.setAttribute("transform",oe))),Math.abs(A)>90&&Math.abs(A)<270&&(s?(m*=-1,A+=x<=0?180:-180,x+=x<=0?180:-180):(v*=-1,A+=A<=0?180:-180)),t=t||i.uncache,i.x=h-((i.xPercent=h&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=Gn(m),i.scaleY=Gn(v),i.rotation=Gn(x)+a,i.rotationX=Gn(y)+a,i.rotationY=Gn(g)+a,i.skewX=A+a,i.skewY=S+a,i.transformPerspective=w+o,(i.zOrigin=parseFloat(u.split(" ")[2])||!t&&i.zOrigin||0)&&(r[_r]=Yv(u)),i.xOffset=i.yOffset=0,i.force3D=kr.force3D,i.renderTransform=i.svg?pK:iN?lN:dK,i.uncache=0,i},Yv=function(e){return(e=e.split(" "))[0]+" "+e[1]},rA=function(e,t,i){var r=Li(t);return Gn(parseFloat(t)+parseFloat(sl(e,"x",i+"px",r)))+r},dK=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,lN(e,t)},Ol="0deg",Hh="0px",kl=") ",lN=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,u=i.rotation,h=i.rotationY,d=i.rotationX,p=i.skewX,m=i.skewY,v=i.scaleX,x=i.scaleY,y=i.transformPerspective,g=i.force3D,A=i.target,S=i.zOrigin,w="",P=g==="auto"&&e&&e!==1||g===!0;if(S&&(d!==Ol||h!==Ol)){var T=parseFloat(h)*cf,R=Math.sin(T),D=Math.cos(T),C;T=parseFloat(d)*cf,C=Math.cos(T),o=rA(A,o,R*C*-S),a=rA(A,a,-Math.sin(T)*-S),l=rA(A,l,D*C*-S+S)}y!==Hh&&(w+="perspective("+y+kl),(r||s)&&(w+="translate("+r+"%, "+s+"%) "),(P||o!==Hh||a!==Hh||l!==Hh)&&(w+=l!==Hh||P?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+kl),u!==Ol&&(w+="rotate("+u+kl),h!==Ol&&(w+="rotateY("+h+kl),d!==Ol&&(w+="rotateX("+d+kl),(p!==Ol||m!==Ol)&&(w+="skew("+p+", "+m+kl),(v!==1||x!==1)&&(w+="scale("+v+", "+x+kl),A.style[In]=w||"translate(0, 0)"},pK=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,u=i.skewX,h=i.skewY,d=i.scaleX,p=i.scaleY,m=i.target,v=i.xOrigin,x=i.yOrigin,y=i.xOffset,g=i.yOffset,A=i.forceCSS,S=parseFloat(o),w=parseFloat(a),P,T,R,D,C;l=parseFloat(l),u=parseFloat(u),h=parseFloat(h),h&&(h=parseFloat(h),u+=h,l+=h),l||u?(l*=cf,u*=cf,P=Math.cos(l)*d,T=Math.sin(l)*d,R=Math.sin(l-u)*-p,D=Math.cos(l-u)*p,u&&(h*=cf,C=Math.tan(u-h),C=Math.sqrt(1+C*C),R*=C,D*=C,h&&(C=Math.tan(h),C=Math.sqrt(1+C*C),P*=C,T*=C)),P=Gn(P),T=Gn(T),R=Gn(R),D=Gn(D)):(P=d,D=p,T=R=0),(S&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(S=sl(m,"x",o,"px"),w=sl(m,"y",a,"px")),(v||x||y||g)&&(S=Gn(S+v-(v*P+x*R)+y),w=Gn(w+x-(v*T+x*D)+g)),(r||s)&&(C=m.getBBox(),S=Gn(S+r/100*C.width),w=Gn(w+s/100*C.height)),C="matrix("+P+","+T+","+R+","+D+","+S+","+w+")",m.setAttribute("transform",C),A&&(m.style[In]=C)},mK=function(e,t,i,r,s){var o=360,a=gi(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Wl:1),u=l-r,h=r+u+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),d==="cw"&&u<0?u=(u+o*aI)%o-~~(u/o)*o:d==="ccw"&&u>0&&(u=(u-o*aI)%o-~~(u/o)*o)),e._pt=p=new vr(e._pt,t,i,r,u,qJ),p.e=h,p.u="deg",e._props.push(i),p},dI=function(e,t){for(var i in t)e[i]=t[i];return e},gK=function(e,t,i){var r=dI({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,u,h,d,p,m,v;r.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),o[In]=t,a=hp(i,1),Iu(i,In),i.setAttribute("transform",u)):(u=getComputedStyle(i)[In],o[In]=t,a=hp(i,1),o[In]=u);for(l in $o)u=r[l],h=a[l],u!==h&&s.indexOf(l)<0&&(m=Li(u),v=Li(h),d=m!==v?sl(i,l,u,v):parseFloat(u),p=parseFloat(h),e._pt=new vr(e._pt,a,l,d,p-d,VS),e._pt.u=v||0,e._props.push(l));dI(a,r)};gr("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});Kv[e>1?"border"+n:n]=function(a,l,u,h,d){var p,m;if(arguments.length<4)return p=o.map(function(v){return Uo(a,v,u)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(h+"").split(" "),m={},o.forEach(function(v,x){return m[v]=p[x]=p[x]||p[(x-1)/2|0]}),a.init(l,m,d)}});var uN={name:"css",register:XS,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,u,h,d,p,m,v,x,y,g,A,S,w,P,T,R,D;NE||XS(),this.styles=this.styles||nN(e),D=this.styles.props,this.tween=i;for(x in t)if(x!=="autoRound"&&(h=t[x],!(Ir[x]&&XF(x,t,i,r,e,s)))){if(m=typeof h,v=Kv[x],m==="function"&&(h=h.call(i,r,e,s),m=typeof h),m==="string"&&~h.indexOf("random(")&&(h=lp(h)),v)v(this,e,x,h,i)&&(R=1);else if(x.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(x)+"").trim(),h+="",Za.lastIndex=0,Za.test(u)||(y=Li(u),g=Li(h)),g?y!==g&&(u=sl(e,x,u,g)+g):y&&(h+=y),this.add(a,"setProperty",u,h,r,s,0,0,x),o.push(x),D.push(x,0,a[x]);else if(m!=="undefined"){if(l&&x in l?(u=typeof l[x]=="function"?l[x].call(i,r,e,s):l[x],gi(u)&&~u.indexOf("random(")&&(u=lp(u)),Li(u+"")||u==="auto"||(u+=kr.units[x]||Li(Uo(e,x))||""),(u+"").charAt(1)==="="&&(u=Uo(e,x))):u=Uo(e,x),p=parseFloat(u),A=m==="string"&&h.charAt(1)==="="&&h.substr(0,2),A&&(h=h.substr(2)),d=parseFloat(h),x in so&&(x==="autoAlpha"&&(p===1&&Uo(e,"visibility")==="hidden"&&d&&(p=0),D.push("visibility",0,a.visibility),ka(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),x!=="scale"&&x!=="transform"&&(x=so[x],~x.indexOf(",")&&(x=x.split(",")[0]))),S=x in $o,S){if(this.styles.save(x),w||(P=e._gsap,P.renderTransform&&!t.parseTransform||hp(e,t.parseTransform),T=t.smoothOrigin!==!1&&P.smooth,w=this._pt=new vr(this._pt,a,In,0,1,P.renderTransform,P,0,-1),w.dep=1),x==="scale")this._pt=new vr(this._pt,P,"scaleY",P.scaleY,(A?lf(P.scaleY,A+d):d)-P.scaleY||0,VS),this._pt.u=0,o.push("scaleY",x),x+="X";else if(x==="transformOrigin"){D.push(_r,0,a[_r]),h=fK(h),P.svg?JS(e,h,0,T,0,this):(g=parseFloat(h.split(" ")[2])||0,g!==P.zOrigin&&ka(this,P,"zOrigin",P.zOrigin,g),ka(this,a,x,Yv(u),Yv(h)));continue}else if(x==="svgOrigin"){JS(e,h,1,T,0,this);continue}else if(x in oN){mK(this,P,x,p,A?lf(p,A+h):h);continue}else if(x==="smoothOrigin"){ka(this,P,"smooth",P.smooth,h);continue}else if(x==="force3D"){P[x]=h;continue}else if(x==="transform"){gK(this,h,e);continue}}else x in a||(x=Lf(x)||x);if(S||(d||d===0)&&(p||p===0)&&!ZJ.test(h)&&x in a)y=(u+"").substr((p+"").length),d||(d=0),g=Li(h)||(x in kr.units?kr.units[x]:y),y!==g&&(p=sl(e,x,u,g)),this._pt=new vr(this._pt,S?P:a,x,p,(A?lf(p,A+d):d)-p,!S&&(g==="px"||x==="zIndex")&&t.autoRound!==!1?eK:VS),this._pt.u=g||0,y!==g&&g!=="%"&&(this._pt.b=u,this._pt.r=$J);else if(x in a)cK.call(this,e,x,u,A?A+h:h);else if(x in e)this.add(e,x,u||e[x],A?A+h:h,r,s);else if(x!=="parseTransform"){TE(x,h);continue}S||(x in a?D.push(x,0,a[x]):D.push(x,1,u||e[x])),o.push(x)}}R&&ZF(this)},render:function(e,t){if(t.tween._time||!UE())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Uo,aliases:so,getSetter:function(e,t,i){var r=so[t];return r&&r.indexOf(",")<0&&(t=r),t in $o&&t!==_r&&(e._gsap.x||Uo(e,"x"))?i&&oI===i?t==="scale"?rK:iK:(oI=i||{})&&(t==="scale"?sK:oK):e.style&&!wE(e.style[t])?tK:~t.indexOf("-")?nK:LE(e,t)},core:{_removeProperty:Iu,_getMatrix:kE}};Ar.utils.checkPrefix=Lf;Ar.core.getStyleSaver=nN;(function(n,e,t,i){var r=gr(n+","+e+","+t,function(s){$o[s]=1});gr(e,function(s){kr.units[s]="deg",oN[s]=1}),so[r[13]]=n+","+e,gr(i,function(s){var o=s.split(":");so[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");gr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){kr.units[n]="px"});Ar.registerPlugin(uN);var cN=Ar.registerPlugin(uN)||Ar;cN.core.Tween;var fr=function(){return fr=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fr.apply(this,arguments)};function jv(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var vn="-ms-",Ad="-moz-",rn="-webkit-",fN="comm",oy="rule",zE="decl",vK="@import",hN="@keyframes",_K="@layer",dN=Math.abs,HE=String.fromCharCode,KS=Object.assign;function yK(n,e){return hi(n,0)^45?(((e<<2^hi(n,0))<<2^hi(n,1))<<2^hi(n,2))<<2^hi(n,3):0}function pN(n){return n.trim()}function Lo(n,e){return(n=e.exec(n))?n[0]:n}function Bt(n,e,t){return n.replace(e,t)}function w0(n,e,t){return n.indexOf(e,t)}function hi(n,e){return n.charCodeAt(e)|0}function Ff(n,e,t){return n.slice(e,t)}function to(n){return n.length}function mN(n){return n.length}function Qh(n,e){return e.push(n),n}function xK(n,e){return n.map(e).join("")}function pI(n,e){return n.filter(function(t){return!Lo(t,e)})}var ay=1,Nf=1,gN=0,vs=0,Zn=0,jf="";function ly(n,e,t,i,r,s,o,a){return{value:n,root:e,parent:t,type:i,props:r,children:s,line:ay,column:Nf,length:o,return:"",siblings:a}}function Ma(n,e){return KS(ly("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function Ec(n){for(;n.root;)n=Ma(n.root,{children:[n]});Qh(n,n.siblings)}function AK(){return Zn}function SK(){return Zn=vs>0?hi(jf,--vs):0,Nf--,Zn===10&&(Nf=1,ay--),Zn}function Os(){return Zn=vs<gN?hi(jf,vs++):0,Nf++,Zn===10&&(Nf=1,ay++),Zn}function vu(){return hi(jf,vs)}function E0(){return vs}function uy(n,e){return Ff(jf,n,e)}function YS(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MK(n){return ay=Nf=1,gN=to(jf=n),vs=0,[]}function wK(n){return jf="",n}function sA(n){return pN(uy(vs-1,jS(n===91?n+2:n===40?n+1:n)))}function EK(n){for(;(Zn=vu())&&Zn<33;)Os();return YS(n)>2||YS(Zn)>3?"":" "}function CK(n,e){for(;--e&&Os()&&!(Zn<48||Zn>102||Zn>57&&Zn<65||Zn>70&&Zn<97););return uy(n,E0()+(e<6&&vu()==32&&Os()==32))}function jS(n){for(;Os();)switch(Zn){case n:return vs;case 34:case 39:n!==34&&n!==39&&jS(Zn);break;case 40:n===41&&jS(n);break;case 92:Os();break}return vs}function TK(n,e){for(;Os()&&n+Zn!==57;)if(n+Zn===84&&vu()===47)break;return"/*"+uy(e,vs-1)+"*"+HE(n===47?n:Os())}function RK(n){for(;!YS(vu());)Os();return uy(n,vs)}function bK(n){return wK(C0("",null,null,null,[""],n=MK(n),0,[0],n))}function C0(n,e,t,i,r,s,o,a,l){for(var u=0,h=0,d=o,p=0,m=0,v=0,x=1,y=1,g=1,A=0,S="",w=r,P=s,T=i,R=S;y;)switch(v=A,A=Os()){case 40:if(v!=108&&hi(R,d-1)==58){w0(R+=Bt(sA(A),"&","&\f"),"&\f",dN(u?a[u-1]:0))!=-1&&(g=-1);break}case 34:case 39:case 91:R+=sA(A);break;case 9:case 10:case 13:case 32:R+=EK(v);break;case 92:R+=CK(E0()-1,7);continue;case 47:switch(vu()){case 42:case 47:Qh(PK(TK(Os(),E0()),e,t,l),l);break;default:R+="/"}break;case 123*x:a[u++]=to(R)*g;case 125*x:case 59:case 0:switch(A){case 0:case 125:y=0;case 59+h:g==-1&&(R=Bt(R,/\f/g,"")),m>0&&to(R)-d&&Qh(m>32?gI(R+";",i,t,d-1,l):gI(Bt(R," ","")+";",i,t,d-2,l),l);break;case 59:R+=";";default:if(Qh(T=mI(R,e,t,u,h,r,a,S,w=[],P=[],d,s),s),A===123)if(h===0)C0(R,e,T,T,w,s,d,a,P);else switch(p===99&&hi(R,3)===110?100:p){case 100:case 108:case 109:case 115:C0(n,T,T,i&&Qh(mI(n,T,T,0,0,r,a,S,r,w=[],d,P),P),r,P,d,a,i?w:P);break;default:C0(R,T,T,T,[""],P,0,a,P)}}u=h=m=0,x=g=1,S=R="",d=o;break;case 58:d=1+to(R),m=v;default:if(x<1){if(A==123)--x;else if(A==125&&x++==0&&SK()==125)continue}switch(R+=HE(A),A*x){case 38:g=h>0?1:(R+="\f",-1);break;case 44:a[u++]=(to(R)-1)*g,g=1;break;case 64:vu()===45&&(R+=sA(Os())),p=vu(),h=d=to(S=R+=RK(E0())),A++;break;case 45:v===45&&to(R)==2&&(x=0)}}return s}function mI(n,e,t,i,r,s,o,a,l,u,h,d){for(var p=r-1,m=r===0?s:[""],v=mN(m),x=0,y=0,g=0;x<i;++x)for(var A=0,S=Ff(n,p+1,p=dN(y=o[x])),w=n;A<v;++A)(w=pN(y>0?m[A]+" "+S:Bt(S,/&\f/g,m[A])))&&(l[g++]=w);return ly(n,e,t,r===0?oy:a,l,u,h,d)}function PK(n,e,t,i){return ly(n,e,t,fN,HE(AK()),Ff(n,2,-2),0,i)}function gI(n,e,t,i,r){return ly(n,e,t,zE,Ff(n,0,i),Ff(n,i+1,-1),i,r)}function vN(n,e,t){switch(yK(n,e)){case 5103:return rn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rn+n+n;case 4789:return Ad+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return rn+n+Ad+n+vn+n+n;case 5936:switch(hi(n,e+11)){case 114:return rn+n+vn+Bt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return rn+n+vn+Bt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return rn+n+vn+Bt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return rn+n+vn+n+n;case 6165:return rn+n+vn+"flex-"+n+n;case 5187:return rn+n+Bt(n,/(\w+).+(:[^]+)/,rn+"box-$1$2"+vn+"flex-$1$2")+n;case 5443:return rn+n+vn+"flex-item-"+Bt(n,/flex-|-self/g,"")+(Lo(n,/flex-|baseline/)?"":vn+"grid-row-"+Bt(n,/flex-|-self/g,""))+n;case 4675:return rn+n+vn+"flex-line-pack"+Bt(n,/align-content|flex-|-self/g,"")+n;case 5548:return rn+n+vn+Bt(n,"shrink","negative")+n;case 5292:return rn+n+vn+Bt(n,"basis","preferred-size")+n;case 6060:return rn+"box-"+Bt(n,"-grow","")+rn+n+vn+Bt(n,"grow","positive")+n;case 4554:return rn+Bt(n,/([^-])(transform)/g,"$1"+rn+"$2")+n;case 6187:return Bt(Bt(Bt(n,/(zoom-|grab)/,rn+"$1"),/(image-set)/,rn+"$1"),n,"")+n;case 5495:case 3959:return Bt(n,/(image-set\([^]*)/,rn+"$1$`$1");case 4968:return Bt(Bt(n,/(.+:)(flex-)?(.*)/,rn+"box-pack:$3"+vn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rn+n+n;case 4200:if(!Lo(n,/flex-|baseline/))return vn+"grid-column-align"+Ff(n,e)+n;break;case 2592:case 3360:return vn+Bt(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(i,r){return e=r,Lo(i.props,/grid-\w+-end/)})?~w0(n+(t=t[e].value),"span",0)?n:vn+Bt(n,"-start","")+n+vn+"grid-row-span:"+(~w0(t,"span",0)?Lo(t,/\d+/):+Lo(t,/\d+/)-+Lo(n,/\d+/))+";":vn+Bt(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(i){return Lo(i.props,/grid-\w+-start/)})?n:vn+Bt(Bt(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return Bt(n,/(.+)-inline(.+)/,rn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(to(n)-1-e>6)switch(hi(n,e+1)){case 109:if(hi(n,e+4)!==45)break;case 102:return Bt(n,/(.+:)(.+)-([^]+)/,"$1"+rn+"$2-$3$1"+Ad+(hi(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~w0(n,"stretch",0)?vN(Bt(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return Bt(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(i,r,s,o,a,l,u){return vn+r+":"+s+u+(o?vn+r+"-span:"+(a?l:+l-+s)+u:"")+n});case 4949:if(hi(n,e+6)===121)return Bt(n,":",":"+rn)+n;break;case 6444:switch(hi(n,hi(n,14)===45?18:11)){case 120:return Bt(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+rn+(hi(n,14)===45?"inline-":"")+"box$3$1"+rn+"$2$3$1"+vn+"$2box$3")+n;case 100:return Bt(n,":",":"+vn)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Bt(n,"scroll-","scroll-snap-")+n}return n}function Qv(n,e){for(var t="",i=0;i<n.length;i++)t+=e(n[i],i,n,e)||"";return t}function IK(n,e,t,i){switch(n.type){case _K:if(n.children.length)break;case vK:case zE:return n.return=n.return||n.value;case fN:return"";case hN:return n.return=n.value+"{"+Qv(n.children,i)+"}";case oy:if(!to(n.value=n.props.join(",")))return""}return to(t=Qv(n.children,i))?n.return=n.value+"{"+t+"}":""}function BK(n){var e=mN(n);return function(t,i,r,s){for(var o="",a=0;a<e;a++)o+=n[a](t,i,r,s)||"";return o}}function DK(n){return function(e){e.root||(e=e.return)&&n(e)}}function LK(n,e,t,i){if(n.length>-1&&!n.return)switch(n.type){case zE:n.return=vN(n.value,n.length,t);return;case hN:return Qv([Ma(n,{value:Bt(n.value,"@","@"+rn)})],i);case oy:if(n.length)return xK(t=n.props,function(r){switch(Lo(r,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ec(Ma(n,{props:[Bt(r,/:(read-\w+)/,":"+Ad+"$1")]})),Ec(Ma(n,{props:[r]})),KS(n,{props:pI(t,i)});break;case"::placeholder":Ec(Ma(n,{props:[Bt(r,/:(plac\w+)/,":"+rn+"input-$1")]})),Ec(Ma(n,{props:[Bt(r,/:(plac\w+)/,":"+Ad+"$1")]})),Ec(Ma(n,{props:[Bt(r,/:(plac\w+)/,vn+"input-$1")]})),Ec(Ma(n,{props:[r]})),KS(n,{props:pI(t,i)});break}return""})}}var FK={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Rr={},Uf=typeof process<"u"&&Rr!==void 0&&(Rr.REACT_APP_SC_ATTR||Rr.SC_ATTR)||"data-styled",_N="active",yN="data-styled-version",cy="6.1.13",GE=`/*!sc*/
`,Zv=typeof window<"u"&&"HTMLElement"in window,NK=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Rr!==void 0&&Rr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Rr.REACT_APP_SC_DISABLE_SPEEDY!==""?Rr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Rr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Rr!==void 0&&Rr.SC_DISABLE_SPEEDY!==void 0&&Rr.SC_DISABLE_SPEEDY!==""&&Rr.SC_DISABLE_SPEEDY!=="false"&&Rr.SC_DISABLE_SPEEDY),fy=Object.freeze([]),Of=Object.freeze({});function UK(n,e,t){return t===void 0&&(t=Of),n.theme!==t.theme&&n.theme||e||t.theme}var xN=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),OK=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,kK=/(^-|-$)/g;function vI(n){return n.replace(OK,"-").replace(kK,"")}var zK=/(a)(d)/gi,t0=52,_I=function(n){return String.fromCharCode(n+(n>25?39:97))};function QS(n){var e,t="";for(e=Math.abs(n);e>t0;e=e/t0|0)t=_I(e%t0)+t;return(_I(e%t0)+t).replace(zK,"$1-$2")}var oA,AN=5381,Jc=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},SN=function(n){return Jc(AN,n)};function HK(n){return QS(SN(n)>>>0)}function GK(n){return n.displayName||n.name||"Component"}function aA(n){return typeof n=="string"&&!0}var MN=typeof Symbol=="function"&&Symbol.for,wN=MN?Symbol.for("react.memo"):60115,VK=MN?Symbol.for("react.forward_ref"):60112,WK={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},XK={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},EN={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},JK=((oA={})[VK]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},oA[wN]=EN,oA);function yI(n){return("type"in(e=n)&&e.type.$$typeof)===wN?EN:"$$typeof"in n?JK[n.$$typeof]:WK;var e}var KK=Object.defineProperty,YK=Object.getOwnPropertyNames,xI=Object.getOwnPropertySymbols,jK=Object.getOwnPropertyDescriptor,QK=Object.getPrototypeOf,AI=Object.prototype;function CN(n,e,t){if(typeof e!="string"){if(AI){var i=QK(e);i&&i!==AI&&CN(n,i,t)}var r=YK(e);xI&&(r=r.concat(xI(e)));for(var s=yI(n),o=yI(e),a=0;a<r.length;++a){var l=r[a];if(!(l in XK||t&&t[l]||o&&l in o||s&&l in s)){var u=jK(e,l);try{KK(n,l,u)}catch{}}}}return n}function kf(n){return typeof n=="function"}function VE(n){return typeof n=="object"&&"styledComponentId"in n}function ru(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function SI(n,e){if(n.length===0)return"";for(var t=n[0],i=1;i<n.length;i++)t+=n[i];return t}function dp(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function ZS(n,e,t){if(t===void 0&&(t=!1),!t&&!dp(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var i=0;i<e.length;i++)n[i]=ZS(n[i],e[i]);else if(dp(e))for(var i in e)n[i]=ZS(n[i],e[i]);return n}function WE(n,e){Object.defineProperty(n,"toString",{value:e})}function Vp(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var ZK=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,r=i.length,s=r;e>=s;)if((s<<=1)<0)throw Vp(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(i),this.length=s;for(var o=r;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),r=i+t;this.groupSizes[e]=0;for(var s=i;s<r;s++)this.tag.deleteRule(i)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var i=this.groupSizes[e],r=this.indexOfGroup(e),s=r+i,o=r;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(GE);return t},n}(),T0=new Map,qv=new Map,R0=1,n0=function(n){if(T0.has(n))return T0.get(n);for(;qv.has(R0);)R0++;var e=R0++;return T0.set(n,e),qv.set(e,n),e},qK=function(n,e){R0=e+1,T0.set(n,e),qv.set(e,n)},$K="style[".concat(Uf,"][").concat(yN,'="').concat(cy,'"]'),eY=new RegExp("^".concat(Uf,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),tY=function(n,e,t){for(var i,r=t.split(","),s=0,o=r.length;s<o;s++)(i=r[s])&&n.registerName(e,i)},nY=function(n,e){for(var t,i=((t=e.textContent)!==null&&t!==void 0?t:"").split(GE),r=[],s=0,o=i.length;s<o;s++){var a=i[s].trim();if(a){var l=a.match(eY);if(l){var u=0|parseInt(l[1],10),h=l[2];u!==0&&(qK(h,u),tY(n,h,l[3]),n.getTag().insertRules(u,r)),r.length=0}else r.push(a)}}},MI=function(n){for(var e=document.querySelectorAll($K),t=0,i=e.length;t<i;t++){var r=e[t];r&&r.getAttribute(Uf)!==_N&&(nY(n,r),r.parentNode&&r.parentNode.removeChild(r))}};function iY(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var TN=function(n){var e=document.head,t=n||e,i=document.createElement("style"),r=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Uf,"]")));return l[l.length-1]}(t),s=r!==void 0?r.nextSibling:null;i.setAttribute(Uf,_N),i.setAttribute(yN,cy);var o=iY();return o&&i.setAttribute("nonce",o),t.insertBefore(i,s),i},rY=function(){function n(e){this.element=TN(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var i=document.styleSheets,r=0,s=i.length;r<s;r++){var o=i[r];if(o.ownerNode===t)return o}throw Vp(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),sY=function(){function n(e){this.element=TN(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t);return this.element.insertBefore(i,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),oY=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),wI=Zv,aY={isServer:!Zv,useCSSOMInjection:!NK},RN=function(){function n(e,t,i){e===void 0&&(e=Of),t===void 0&&(t={});var r=this;this.options=fr(fr({},aY),e),this.gs=t,this.names=new Map(i),this.server=!!e.isServer,!this.server&&Zv&&wI&&(wI=!1,MI(this)),WE(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",u=function(d){var p=function(g){return qv.get(g)}(d);if(p===void 0)return"continue";var m=s.names.get(p),v=o.getGroup(d);if(m===void 0||!m.size||v.length===0)return"continue";var x="".concat(Uf,".g").concat(d,'[id="').concat(p,'"]'),y="";m!==void 0&&m.forEach(function(g){g.length>0&&(y+="".concat(g,","))}),l+="".concat(v).concat(x,'{content:"').concat(y,'"}').concat(GE)},h=0;h<a;h++)u(h);return l}(r)})}return n.registerId=function(e){return n0(e)},n.prototype.rehydrate=function(){!this.server&&Zv&&MI(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(fr(fr({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var i=t.useCSSOMInjection,r=t.target;return t.isServer?new oY(r):i?new rY(r):new sY(r)}(this.options),new ZK(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(n0(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},n.prototype.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(n0(e),i)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(n0(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),lY=/&/g,uY=/^\s*\/\/.*$/gm;function bN(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(i){return"".concat(e," ").concat(i)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=bN(t.children,e)),t})}function cY(n){var e,t,i,r=Of,s=r.options,o=s===void 0?Of:s,a=r.plugins,l=a===void 0?fy:a,u=function(p,m,v){return v.startsWith(t)&&v.endsWith(t)&&v.replaceAll(t,"").length>0?".".concat(e):p},h=l.slice();h.push(function(p){p.type===oy&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(lY,t).replace(i,u))}),o.prefix&&h.push(LK),h.push(IK);var d=function(p,m,v,x){m===void 0&&(m=""),v===void 0&&(v=""),x===void 0&&(x="&"),e=x,t=m,i=new RegExp("\\".concat(t,"\\b"),"g");var y=p.replace(uY,""),g=bK(v||m?"".concat(v," ").concat(m," { ").concat(y," }"):y);o.namespace&&(g=bN(g,o.namespace));var A=[];return Qv(g,BK(h.concat(DK(function(S){return A.push(S)})))),A};return d.hash=l.length?l.reduce(function(p,m){return m.name||Vp(15),Jc(p,m.name)},AN).toString():"",d}var fY=new RN,qS=cY(),PN=Sd.createContext({shouldForwardProp:void 0,styleSheet:fY,stylis:qS});PN.Consumer;Sd.createContext(void 0);function EI(){return se.useContext(PN)}var hY=function(){function n(e,t){var i=this;this.inject=function(r,s){s===void 0&&(s=qS);var o=i.name+s.hash;r.hasNameForId(i.id,o)||r.insertRules(i.id,o,s(i.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,WE(this,function(){throw Vp(12,String(i.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=qS),this.name+e.hash},n}(),dY=function(n){return n>="A"&&n<="Z"};function CI(n){for(var e="",t=0;t<n.length;t++){var i=n[t];if(t===1&&i==="-"&&n[0]==="-")return n;dY(i)?e+="-"+i.toLowerCase():e+=i}return e.startsWith("ms-")?"-"+e:e}var IN=function(n){return n==null||n===!1||n===""},BN=function(n){var e,t,i=[];for(var r in n){var s=n[r];n.hasOwnProperty(r)&&!IN(s)&&(Array.isArray(s)&&s.isCss||kf(s)?i.push("".concat(CI(r),":"),s,";"):dp(s)?i.push.apply(i,jv(jv(["".concat(r," {")],BN(s),!1),["}"],!1)):i.push("".concat(CI(r),": ").concat((e=r,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in FK||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return i};function _u(n,e,t,i){if(IN(n))return[];if(VE(n))return[".".concat(n.styledComponentId)];if(kf(n)){if(!kf(s=n)||s.prototype&&s.prototype.isReactComponent||!e)return[n];var r=n(e);return _u(r,e,t,i)}var s;return n instanceof hY?t?(n.inject(t,i),[n.getName(i)]):[n]:dp(n)?BN(n):Array.isArray(n)?Array.prototype.concat.apply(fy,n.map(function(o){return _u(o,e,t,i)})):[n.toString()]}function pY(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(kf(t)&&!VE(t))return!1}return!0}var mY=SN(cy),gY=function(){function n(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&pY(e),this.componentId=t,this.baseHash=Jc(mY,t),this.baseStyle=i,RN.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,i){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=ru(r,this.staticRulesId);else{var s=SI(_u(this.rules,e,t,i)),o=QS(Jc(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=i(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}r=ru(r,o),this.staticRulesId=o}else{for(var l=Jc(this.baseHash,i.hash),u="",h=0;h<this.rules.length;h++){var d=this.rules[h];if(typeof d=="string")u+=d;else if(d){var p=SI(_u(d,e,t,i));l=Jc(l,p+h),u+=p}}if(u){var m=QS(l>>>0);t.hasNameForId(this.componentId,m)||t.insertRules(this.componentId,m,i(u,".".concat(m),void 0,this.componentId)),r=ru(r,m)}}return r},n}(),DN=Sd.createContext(void 0);DN.Consumer;var lA={};function vY(n,e,t){var i=VE(n),r=n,s=!aA(n),o=e.attrs,a=o===void 0?fy:o,l=e.componentId,u=l===void 0?function(w,P){var T=typeof w!="string"?"sc":vI(w);lA[T]=(lA[T]||0)+1;var R="".concat(T,"-").concat(HK(cy+T+lA[T]));return P?"".concat(P,"-").concat(R):R}(e.displayName,e.parentComponentId):l,h=e.displayName,d=h===void 0?function(w){return aA(w)?"styled.".concat(w):"Styled(".concat(GK(w),")")}(n):h,p=e.displayName&&e.componentId?"".concat(vI(e.displayName),"-").concat(e.componentId):e.componentId||u,m=i&&r.attrs?r.attrs.concat(a).filter(Boolean):a,v=e.shouldForwardProp;if(i&&r.shouldForwardProp){var x=r.shouldForwardProp;if(e.shouldForwardProp){var y=e.shouldForwardProp;v=function(w,P){return x(w,P)&&y(w,P)}}else v=x}var g=new gY(t,p,i?r.componentStyle:void 0);function A(w,P){return function(T,R,D){var C=T.attrs,b=T.componentStyle,N=T.defaultProps,J=T.foldedComponentIds,K=T.styledComponentId,q=T.target,te=Sd.useContext(DN),Z=EI(),oe=T.shouldForwardProp||Z.shouldForwardProp,H=UK(R,te,N)||Of,ee=function(ve,ye,be){for(var Xe,st=fr(fr({},ye),{className:void 0,theme:be}),$e=0;$e<ve.length;$e+=1){var Ve=kf(Xe=ve[$e])?Xe(st):Xe;for(var k in Ve)st[k]=k==="className"?ru(st[k],Ve[k]):k==="style"?fr(fr({},st[k]),Ve[k]):Ve[k]}return ye.className&&(st.className=ru(st.className,ye.className)),st}(C,R,H),Q=ee.as||q,ue={};for(var me in ee)ee[me]===void 0||me[0]==="$"||me==="as"||me==="theme"&&ee.theme===H||(me==="forwardedAs"?ue.as=ee.forwardedAs:oe&&!oe(me,Q)||(ue[me]=ee[me]));var Ie=function(ve,ye){var be=EI(),Xe=ve.generateAndInjectStyles(ye,be.styleSheet,be.stylis);return Xe}(b,ee),ae=ru(J,K);return Ie&&(ae+=" "+Ie),ee.className&&(ae+=" "+ee.className),ue[aA(Q)&&!xN.has(Q)?"class":"className"]=ae,ue.ref=D,se.createElement(Q,ue)}(S,w,P)}A.displayName=d;var S=Sd.forwardRef(A);return S.attrs=m,S.componentStyle=g,S.displayName=d,S.shouldForwardProp=v,S.foldedComponentIds=i?ru(r.foldedComponentIds,r.styledComponentId):"",S.styledComponentId=p,S.target=i?r.target:n,Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=i?function(P){for(var T=[],R=1;R<arguments.length;R++)T[R-1]=arguments[R];for(var D=0,C=T;D<C.length;D++)ZS(P,C[D],!0);return P}({},r.defaultProps,w):w}}),WE(S,function(){return".".concat(S.styledComponentId)}),s&&CN(S,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),S}function TI(n,e){for(var t=[n[0]],i=0,r=e.length;i<r;i+=1)t.push(e[i],n[i+1]);return t}var RI=function(n){return Object.assign(n,{isCss:!0})};function _Y(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(kf(n)||dp(n))return RI(_u(TI(fy,jv([n],e,!0))));var i=n;return e.length===0&&i.length===1&&typeof i[0]=="string"?_u(i):RI(_u(TI(i,e)))}function $S(n,e,t){if(t===void 0&&(t=Of),!e)throw Vp(1,e);var i=function(r){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return n(e,t,_Y.apply(void 0,jv([r],s,!1)))};return i.attrs=function(r){return $S(n,e,fr(fr({},t),{attrs:Array.prototype.concat(t.attrs,r).filter(Boolean)}))},i.withConfig=function(r){return $S(n,e,fr(fr({},t),r))},i}var LN=function(n){return $S(vY,n)},hy=LN;xN.forEach(function(n){hy[n]=LN(n)});const yY=hy.div`
  height: 100vh;
  overflow-y: auto;
  &::-webkit-scrollbar{
    display: none;
  }
  margin: 0;
  border: none;
  padding: 0;
  background-color: black;
`;hy.div`
touch-action: none;
`;const xY=hy.iframe`
    width: 1024px;
    height: 576px;
    border: none;
    background: black;
`;class AY extends mi{constructor(){super({uniforms:{diffuse:{value:new He(0)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform vec3 diffuse;
        varying vec2 vUv;
        void main() {
          gl_FragColor = vec4(diffuse, 1.0);
        }
      `})}}j_({ScreenMaterial:AY});function SY({onClick:n,...e}){const{nodes:t,materials:i}=Up("/3Dportfolio/RetroTV.glb"),r=se.useRef();return at.jsxs("group",{...e,dispose:null,onClick:n,children:[at.jsx(s7,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400}}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.TVFrame.geometry,material:i.Wood,position:[0,4.425,0],scale:[2.183,1.183,1]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Antennabase.geometry,material:i["Scratched Silver Metal"],position:[1.007,5.366,0],scale:[.532,.473,.475]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.TopDialOuter.geometry,material:i["Plastic Grid 04"],position:[1.487,4.654,.854],rotation:[1.574,0,0],scale:[.279,.176,.287]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.LeftKnob.geometry,material:i["Plastic Grid 03"],position:[1.21,5.2,.686],rotation:[1.574,0,0],scale:[.091,.541,.094]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.RightKnob.geometry,material:i["Plastic Grid 03"],position:[1.756,5.2,.686],rotation:[1.574,0,0],scale:[.091,.541,.094]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.MiddleKnob.geometry,material:i["Plastic Grid 03"],position:[1.479,5.2,.686],rotation:[1.574,0,0],scale:[.091,.541,.094]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.InnerFrame.geometry,material:i["Scratched Silver Metal"],position:[0,4.425,0],scale:[2.183,1.183,1]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.TVBackground.geometry,material:i["Nylon table cover"],position:[0,4.425,0],scale:[2.183,1.183,1]}),at.jsxs("mesh",{ref:r,castShadow:!0,receiveShadow:!0,geometry:t.TVSCreen.geometry,material:i["Gun Plastic"],position:[0,4.425,-.034],scale:[2.31,1.245,1],children:[at.jsx("screenMaterial",{}),at.jsx(ZV,{transform:!0,wrapperClass:"html-wrapper",distanceFactor:1,position:[-.26,.04,.95],scale:[.415,1.01,.5],occlude:[r],zIndexRange:[0,0],children:at.jsx(xY,{src:"https://mbokeno.github.io/2DPortfolio/"})})]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.TopDialInner.geometry,material:i.Plastic,position:[1.487,4.654,.854],rotation:[1.574,0,0],scale:[.279,.176,.287]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.BottomDialOuter.geometry,material:i["Plastic Grid 04"],position:[1.487,3.891,.854],rotation:[1.574,0,0],scale:[.279,.176,.287]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.BottomDialInner.geometry,material:i.Plastic,position:[1.487,3.891,.854],rotation:[1.574,0,0],scale:[.279,.176,.287]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.TopDialKnob.geometry,material:i["Plastic 1"],position:[1.489,4.653,.984],rotation:[0,0,-.437],scale:[.011,.191,.055]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.TobDialKnob.geometry,material:i["Plastic 1"],position:[1.489,3.884,.984],rotation:[0,0,.178],scale:[.011,.191,.055]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.RightAntenna.geometry,material:i["Gun Plastic"],position:[1.45,6.218,0],rotation:[0,0,2.668],scale:[-.008,-.758,-.006]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.LeftAntenna.geometry,material:i["Gun Plastic"],position:[.725,6.306,0],rotation:[0,0,-2.897],scale:[-.008,-.758,-.006]}),at.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:t.Table.geometry,material:i["Wood.005"],position:[2.815,1.423,-1.69],scale:[.287,1.546,.157]})]})}Up.preload("/3Dportfolio/RetroTV.glb");const MY="/3Dportfolio/assets/blade_diffuse-CYFXgzaQ.jpg",wY="/3Dportfolio/assets/blade_alpha-D3UrtWf7.jpg",EY=e7({time:0,map:null,alphaMap:null,tipColor:new He(0,.8,0).convertSRGBToLinear(),bottomColor:new He(0,.3,0).convertSRGBToLinear(),windSpeed:1,windStrength:.5},`
    attribute float scale;
    attribute float rotation;

    uniform float time;
    uniform float windSpeed;
    uniform float windStrength;
    varying vec2 vUv;

    //	Classic Perlin 3D Noise 
    //	by Stefan Gustavson
    //
    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}
    vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}
    vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}

    float cnoise(vec3 P){
      vec3 Pi0 = floor(P); // Integer part for indexing
      vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
      Pi0 = mod(Pi0, 289.0);
      Pi1 = mod(Pi1, 289.0);
      vec3 Pf0 = fract(P); // Fractional part for interpolation
      vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
      vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
      vec4 iy = vec4(Pi0.yy, Pi1.yy);
      vec4 iz0 = Pi0.zzzz;
      vec4 iz1 = Pi1.zzzz;

      vec4 ixy = permute(permute(ix) + iy);
      vec4 ixy0 = permute(ixy + iz0);
      vec4 ixy1 = permute(ixy + iz1);

      vec4 gx0 = ixy0 / 7.0;
      vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
      gx0 = fract(gx0);
      vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
      vec4 sz0 = step(gz0, vec4(0.0));
      gx0 -= sz0 * (step(0.0, gx0) - 0.5);
      gy0 -= sz0 * (step(0.0, gy0) - 0.5);

      vec4 gx1 = ixy1 / 7.0;
      vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
      gx1 = fract(gx1);
      vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
      vec4 sz1 = step(gz1, vec4(0.0));
      gx1 -= sz1 * (step(0.0, gx1) - 0.5);
      gy1 -= sz1 * (step(0.0, gy1) - 0.5);

      vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
      vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
      vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
      vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
      vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
      vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
      vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
      vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

      vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
      g000 *= norm0.x;
      g010 *= norm0.y;
      g100 *= norm0.z;
      g110 *= norm0.w;
      vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
      g001 *= norm1.x;
      g011 *= norm1.y;
      g101 *= norm1.z;
      g111 *= norm1.w;

      float n000 = dot(g000, Pf0);
      float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
      float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
      float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
      float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
      float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
      float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
      float n111 = dot(g111, Pf1);

      vec3 fade_xyz = fade(Pf0);
      vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
      vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
      float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
      return 2.2 * n_xyz;
    }

    void main() {
      vUv = uv;
      
      // Apply scale and rotation
      vec3 pos = position * scale;
      float angle = rotation;
      mat3 rotationMatrix = mat3(
        cos(angle), 0.0, sin(angle),
        0.0, 1.0, 0.0,
        -sin(angle), 0.0, cos(angle)
      );
      pos = rotationMatrix * pos;

      // Apply wind effect
      vec3 worldPos = (instanceMatrix * vec4(pos, 1.0)).xyz;
      float windEffect = cnoise(vec3(worldPos.x * 0.1, worldPos.z * 0.1, time * windSpeed)) * windStrength;
      pos.x += windEffect * smoothstep(0.0, 0.7, pos.y);
      pos.z += windEffect * smoothstep(0.0, 0.7, pos.y);
      
      gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(pos, 1.0);
    }
  `,`
   uniform sampler2D map;
   uniform sampler2D alphaMap;
   uniform vec3 tipColor;
   uniform vec3 bottomColor;
   
   varying vec2 vUv;

   void main() {
     vec4 diffuseColor = texture2D(map, vUv);
     float alpha = texture2D(alphaMap, vUv).r;

     if (alpha < 0.15) discard;

     vec3 color = mix(bottomColor, tipColor, vUv.y);
     gl_FragColor = vec4(color * diffuseColor.rgb * 1.2, diffuseColor.a); // Multiplied by 1.2 to increase brightness
   }
 `);j_({GrassMaterial:EY});const CY=se.forwardRef((n,e)=>at.jsx("grassMaterial",{...n,ref:e,onBeforeCompile:t=>{console.log("Vertex Shader:",t.vertexShader),console.log("Fragment Shader:",t.fragmentShader)}}));function uA({options:n={bW:.12,bH:1,joints:5},width:e=100,instances:t=5e4,height:i=1,...r}){const{bW:s,joints:o}=n,a=i,l=se.useRef(),u=se.useRef(),[h,d]=go(Bw,[MY,wY]),p=se.useMemo(()=>{const y=new ta(s,a,1,o);return y.translate(0,a/2,0),y},[s,a,o]),[m,v,x]=se.useMemo(()=>{const y=new Float32Array(t*3),g=new Float32Array(t),A=new Float32Array(t);for(let S=0;S<t;S++){const w=S*3,P=Math.sqrt(Math.random())*(e/2),T=Math.random()*2*Math.PI;y[w]=P*Math.cos(T),y[w+1]=0,y[w+2]=P*Math.sin(T),g[S]=.5+Math.random()*.5,A[S]=Math.random()*Math.PI}return[y,g,A]},[t,e]);return se.useEffect(()=>{if(u.current){u.current.geometry.setAttribute("scale",new Qo(v,1)),u.current.geometry.setAttribute("rotation",new Qo(x,1));const y=new Gt;for(let g=0;g<t;g++)y.position.set(m[g*3],m[g*3+1],m[g*3+2]),y.updateMatrix(),u.current.setMatrixAt(g,y.matrix);u.current.instanceMatrix.needsUpdate=!0}},[m,v,x,t]),Yf(y=>{l.current&&(l.current.uniforms.time.value=y.clock.getElapsedTime())}),at.jsx("group",{...r,children:at.jsx("instancedMesh",{ref:u,args:[p,null,t],children:at.jsx(CY,{ref:l,map:h,alphaMap:d,toneMapped:!1,transparent:!0,side:lr,bladeHeight:i})})})}function TY({width:n=100,...e}){const t=se.useRef(),{camera:i}=Or();return Yf(()=>{t.current&&t.current.update(i)}),at.jsxs("lOD",{ref:t,...e,children:[at.jsx(uA,{instances:2e5,width:n,position:[0,0,0]}),at.jsx(uA,{instances:12e4,width:n,position:[0,0,0]}),at.jsx(uA,{instances:1e4,width:n,position:[0,0,0]})]})}function RY({isZoomedIn:n}){const{camera:e}=Or(),t=[0,5,25],i=[0,3,10],r=[0,4,0];return se.useEffect(()=>{cN.to(e.position,{duration:1.5,x:n?i[0]:t[0],y:n?i[1]:t[1],z:n?i[2]:t[2],ease:"power2.inOut",onUpdate:()=>{e.lookAt(...r)}})},[n,e]),null}function bY({isZoomedIn:n,toggleZoom:e}){return at.jsxs(at.Fragment,{children:[at.jsx(RY,{isZoomedIn:n}),at.jsx(TY,{width:100}),at.jsx(SY,{scale:.8,position:[0,0,5],onClick:e}),at.jsx(M7,{preset:"sunset"})]})}function PY(){const[n,e]=se.useState(!1),t=se.useCallback(()=>{e(i=>!i)},[]);return at.jsx(yY,{children:at.jsxs(HV,{camera:{position:[0,5,25],fov:30},children:[at.jsx("color",{attach:"background",args:["#121c31"]}),at.jsx(E7,{azimuth:1,inclination:.6,distance:1e3,sunPosition:[0,-1,0]}),at.jsx(R7,{radius:100,depth:50,count:1e4,factor:4,saturation:0,fade:!0,speed:1}),at.jsx("ambientLight",{intensity:.6}),at.jsx(bY,{isZoomedIn:n,toggleZoom:t})]})})}jM(document.getElementById("root")).render(at.jsx(se.StrictMode,{children:at.jsx(PY,{})}));
